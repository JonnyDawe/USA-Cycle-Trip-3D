(self.webpackChunk=self.webpackChunk||[]).push([[1369],{70573:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var i=a(78155),r=a(73574),o=a(80219),l=a(88903),s=a(79679),n=a(58404),h=a(15870),d=a(32422),y=a(50822);a(20215),a(80987),a(98548),a(20736),a(4169),a(92858),a(31531),a(82906),a(40130),a(52957),a(29126),a(6585),a(3621),a(63358),a(62121),a(81135),a(94527),a(17762),a(60816),a(61888),a(29832),a(31516),a(52109),a(89710),a(71542),a(16063),a(9612),a(30316),a(43194),a(93242),a(62654),a(15346),a(65311),a(67726),a(59312),a(71391),a(83731),a(36845),a(55688),a(15015),a(95629),a(76326),a(4807),a(18559),a(32769),a(42296),a(17331),a(41290),a(91236),a(82361),a(65352),a(71394),a(13564),a(95559),a(68631),a(56803),a(18143),a(47365),a(67079),a(2903),a(85570),a(71470),a(80136),a(91507),a(85289),a(98843),a(91790),a(52737),a(29831),a(16040),a(34396),a(5250),a(49878),a(84271),a(48643),a(4618),a(80657),a(94449),a(97325),a(3629),a(79506),a(26779),a(98420),a(54223),a(8725),a(51218),a(21793),a(13895),a(15576),a(28941),a(19438),a(15022),a(56416),a(92758),a(78435),a(53902),a(40481),a(78730),a(2570),a(71666),a(72257),a(41822),a(99987),a(11838),a(39068),a(24776),a(95186),a(7571),a(53185),a(63114),a(30665),a(28090),a(37191),a(47122),a(30494),a(14754),a(72105),a(60183),a(93875),a(14215),a(20868),a(72600),a(334),a(35123),a(58576),a(42413),a(66954),a(38624),a(57424),a(49293),a(26852),a(7552),a(78082),a(37762),a(92722),a(25290),a(27270),a(84796),a(87405),a(84320),a(93450),a(97431),a(32892),a(41374),a(86897),a(41392),a(79949),a(6660),a(6783),a(75200),a(29218);let c=class extends((0,h.z)((0,d.m)(y.d))){constructor(){super(...arguments),this.type="integrated-mesh-3d",this.lodFactor=1,this._elevationContext="im",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this.drapeTargetType=1,this._overlayTexOffset=(0,s.a)(-1,-1,-1,-1),this._overlayTexScale=(0,s.n)(),this._overlayColor=null,this._overlayHighlight=null,this._overlayNormal=null}get progressiveLoadFactor(){return this.lodFactor>=1?.2:1}setDrapingTextures(e){const t=e.index,a=e.extent,i=e.needsColorWithoutRasterImage?e.getValidTarget(1):e.hasDrapedFeatureSource?e.getValidTarget(0):null;if((0,o.r)(i)&&(0,n.l)(a)>0){this._overlayTexOffset[2*t]=-a[0]/(0,n.x)(a),this._overlayTexOffset[2*t+1]=-a[1]/(0,n.M)(a),this._overlayTexScale[2*t]=1/(0,n.x)(a),this._overlayTexScale[2*t+1]=1/(0,n.M)(a);const r=e.getValidTarget(2),o=e.getValidTarget(3);this._overlayColor=i.getTexture(),this._overlayHighlight=r?r.getTexture():null,this._overlayNormal=o?o.getTexture():null}else this._overlayTexOffset[2*t]=-1,this._overlayTexOffset[2*t+1]=-1,this._overlayTexScale[2*t]=0,this._overlayTexScale[2*t+1]=0,0===t&&(this._overlayColor=null,this._overlayHighlight=null,this._overlayNormal=null);this._forAllNodes((e=>(0,o.r)(e)&&this._collection.updateMaterial(e.objectHandle,(e=>this._updateMaterialOverlay(e)))))}_updateMaterialOverlay(e){e.overlayColor=this._overlayColor,e.overlayHighlight=this._overlayHighlight,e.overlayNormal=this._overlayNormal,e.overlayTexOffset=this._overlayTexOffset,e.overlayTexScale=this._overlayTexScale}initialize(){this.updatingHandles.add(this.layer,"modifications",(()=>this._loadModifications()),2)}_createLayerGraphic(){const e=new r.h;return e.layer=this.layer,e.sourceLayer=this.layer,e}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.handles.remove("modifications"),(0,o.t)(this.layer.modifications))return void(this._modifications=[]);const e=this.layer.modifications;this.handles.add(this.updatingHandles.addOnCollectionChange(e,(()=>this._modifications=e.toArray()),2),"modifications")}};(0,i.e)([(0,l.y)()],c.prototype,"layer",void 0),(0,i.e)([(0,l.y)({aliasOf:"layer"})],c.prototype,"i3slayer",void 0),(0,i.e)([(0,l.y)()],c.prototype,"suspended",void 0),(0,i.e)([(0,l.y)(d.z)],c.prototype,"updatingProgress",void 0),(0,i.e)([(0,l.y)({readOnly:!0,aliasOf:"_controller.updatingProgress"})],c.prototype,"updatingProgressValue",void 0),(0,i.e)([(0,l.y)({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.integratedMesh.lodFactor"})],c.prototype,"lodFactor",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],c.prototype,"progressiveLoadFactor",null),c=(0,i.e)([(0,l.n)("esri.views.3d.layers.SceneLayerView3D")],c);const v=c}}]);