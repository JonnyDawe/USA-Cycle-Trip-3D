(self.webpackChunk=self.webpackChunk||[]).push([[4411],{54411:(e,a,r)=>{"use strict";r.r(a),r.d(a,{populateOperationalLayers:()=>o});var t=r(40130),y=(r(80219),r(20215)),i=r(74075),n=r(76326),L=r(87495),c=r(41822);async function l(e,a,r,t){if(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)return!1;if(e.url)return!1;if(e.featureCollectionType&&e.featureCollectionType===r)return!0;if(e.itemId){const r=new n.default({id:e.itemId,portal:a});return await r.load(),"Feature Collection"===r.type&&(0,L.t)(r,t)}return!1}async function o(e,a,r){if(!a)return;const t=[];for(const e of a){const a=T(e,r);"GroupLayer"===e.layerType?t.push(G(a,e,r)):t.push(a)}const i=await(0,y.A)(t);for(const a of i)!a.value||r.filter&&!r.filter(a.value)||e.add(a.value)}r(78155),r(88903),r(80987),r(98548),r(20736),r(4169),r(92858),r(31531),r(63358),r(52109),r(6585),r(3621),r(42495),r(79762),r(9612);const u={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},s={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},p={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},S={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",OGCFeatureLayer:"OGCFeatureLayer",SubtypeGroupLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},I={ArcGISFeatureLayer:"FeatureLayer"},d={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};async function T(e,a){return async function(e,a,r){const t=new e;return t.read(a,r.context),"group"===t.type&&f(a)&&await async function(e,a,r){const t=i.a.FeatureLayer,y=await t(),n=a.featureCollection,L=n.showLegend,c=n.layers.map((e=>{const a=new y;return a.read(e,r),null!=L&&a.read({showLegend:L},r),a}));e.layers.addMany(c)}(t,a,r.context),await(0,c.t)(t,r.context),t}(await async function(e,a){const r=a.context,t=M(r);let y=e.layerType||e.type;!y&&a&&a.defaultLayerType&&(y=a.defaultLayerType);const c=t[y];let o=c?i.a[c]:i.a.UnknownLayer;const u=r&&r.portal;if(g(e)){if(e.itemId){const a=new n.default({id:e.itemId,portal:u});await a.load();const r=(await(0,L.l)(a)).className||"UnknownLayer";o=i.a[r]}}else"ArcGISFeatureLayer"===y?await function(e,a){return l(e,a,"notes","Map Notes")}(e,u)?o=i.a.MapNotesLayer:await function(e,a){return l(e,a,"route","Route Layer")}(e,u)?o=i.a.RouteLayer:f(e)&&(o=i.a.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?o=i.a.WMTSLayer:"WFS"===y&&"2.0.0"!==e.wfsInfo.version&&(o=i.a.UnsupportedLayer);return o()}(e,a),e,a)}function f(e){if("ArcGISFeatureLayer"!==e.layerType||g(e))return!1;const a=e.featureCollection;return!!(a&&a.layers&&a.layers.length>1)}function g(e){return"Feature Collection"===e.type}function M(e){let a;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":a=p;break;case"ground":a=s;break;default:a=u}break;default:switch(e.layerContainerType){case"basemap":a=d;break;case"tables":a=I;break;default:a=S}}return a}async function G(e,a,r){const y=new t.L,i=o(y,Array.isArray(a.layers)?a.layers:[],r),n=await e;if(await i,"group"===n.type)return n.layers.addMany(y),n}}}]);