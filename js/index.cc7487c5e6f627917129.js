(self.webpackChunk=self.webpackChunk||[]).push([[4826],{98420:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});var i=r(78155),s=r(88903);r(80219);const n=e=>{let t=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i.e)([(0,s.y)({type:String})],t.prototype,"apiKey",null),t=(0,i.e)([(0,s.n)("esri.layers.mixins.APIKeyMixin")],t),t}},9947:(e,t,r)=>{"use strict";r.d(t,{s:()=>u});var i=r(78155),s=(r(80987),r(88903)),n=(r(80219),r(4169)),o=r(28190),a=r(21779),l=r(92858);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new a.j({layer:this}):null}};return(0,i.e)([(0,s.y)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,i.e)([(0,s.y)()],t.prototype,"minScale",void 0),(0,i.e)([(0,n.e)("service","minScale")],t.prototype,"readMinScale",null),(0,i.e)([(0,s.y)()],t.prototype,"maxScale",void 0),(0,i.e)([(0,n.e)("service","maxScale")],t.prototype,"readMaxScale",null),(0,i.e)([(0,s.y)({type:l.k})],t.prototype,"spatialReference",void 0),(0,i.e)([(0,s.y)({readOnly:!0})],t.prototype,"supportsBlankTile",null),(0,i.e)([(0,s.y)(o.r)],t.prototype,"tileInfo",void 0),(0,i.e)([(0,s.y)()],t.prototype,"tilemapCache",void 0),(0,i.e)([(0,n.e)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),(0,i.e)([(0,s.y)()],t.prototype,"version",void 0),t=(0,i.e)([(0,s.n)("esri.layers.mixins.ArcGISCachedService")],t),t}},54223:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var i=r(78155),s=r(80219),n=r(88903),o=r(8725);const a=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,o.d)(this.url);if((0,s.r)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,o.x)(e,s.n.getLogger(this.declaredClass)))}};return(0,i.e)([(0,n.y)()],t.prototype,"title",null),(0,i.e)([(0,n.y)({type:String})],t.prototype,"url",null),t=(0,i.e)([(0,n.n)("esri.layers.mixins.ArcGISService")],t),t}},15015:(e,t,r)=>{"use strict";r.r(t),r.d(t,{B:()=>S,U:()=>x,s:()=>g});var i=r(78155),s=r(40130),n=r(31516),o=r(80219),a=r(80987),l=r(95629),u=r(20215),c=r(88903),h=r(92858),p=r(52109),d=r(76326),y=r(63358),f=r(6585),m=r(4807);const g={streets:{id:"streets",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,y.a)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};var v;let b=0;const w=o.n.getLogger("esri.Basemap");let _=v=class extends((0,i.i)(a.f)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+b++,this.baseLayers=new s.L,this.referenceLayers=new s.L;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&w.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=e=>{e.parent=null};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>r(e.item))),this.referenceLayers.on("after-remove",(e=>r(e.item)))}initialize(){this.when().catch((e=>{w.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const e of t)e.destroy();const r=this.referenceLayers.removeAll();for(const e of r)e.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",(0,n.n)(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e?(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const t=(0,m.y)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);(0,o.r)(t)&&i.push(t)})),this.referenceLayers.forEach((e=>{const t=(0,m.y)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);(0,o.r)(t)&&(t.isReference=!0,i.push(t))})),t.baseMapLayers=i):t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",(0,n.n)(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,l.n)(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new v({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const t=(0,o.y)(e);return t.url&&(0,a.j)(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&(0,a.j)(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;(0,u.a)(e);const i=[];if(t){const r=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,r,e)),t.data.id&&!t.data.title){const e=t.data.id;i.push(async function(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,r=await(0,f.a)("esri/t9n/basemaps");return r[e]||r[t]}(e).then((e=>{e&&this.read({title:e},t.context)})))}}else r&&i.push(this._loadFromItem(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,i){const s=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||s&&s.portal||null,o=s&&"web-scene"===s.origin?"web-scene":"web-map",{populateOperationalLayers:a}=await Promise.all([r.e(9351),r.e(4411)]).then(r.bind(r,54411)),l=[];if((0,u.a)(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const r={context:{origin:o,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},i=a(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),r);l.push(i);const s=a(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),r);l.push(s)}await(0,u.A)(l)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),s=(0,a.U)(e.itemUrl);return this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:e.portal||p.G.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||p.G.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=g[e];return t?v.fromJSON(t):null}};(0,i.e)([(0,c.y)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:s.L}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],_.prototype,"baseLayers",null),(0,i.e)([(0,c.y)({type:String,json:{origins:{"web-scene":{write:!0}}}})],_.prototype,"id",void 0),(0,i.e)([(0,c.y)({type:d.default})],_.prototype,"portalItem",void 0),(0,i.e)([(0,c.y)()],_.prototype,"referenceLayers",null),(0,i.e)([(0,c.y)({readOnly:!0})],_.prototype,"resourceInfo",void 0),(0,i.e)([(0,c.y)({type:h.k})],_.prototype,"spatialReference",void 0),(0,i.e)([(0,c.y)()],_.prototype,"thumbnailUrl",void 0),(0,i.e)([(0,c.y)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],_.prototype,"title",void 0),(0,i.e)([(0,i.o)("title")],_.prototype,"writeTitle",null),_=v=(0,i.e)([(0,c.n)("esri.Basemap")],_);var x=_,S=Object.freeze({__proto__:null,default:x})},51218:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var i=r(78155),s=r(88903);r(80219);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,i.e)([(0,s.y)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{default:"normal",read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,i.e)([(0,s.y)()],t.prototype,"effect",void 0),t=(0,i.e)([(0,s.n)("esri.layers.mixins.BlendLayer")],t),t}},65311:(e,t,r)=>{"use strict";r.d(t,{A:()=>M,B:()=>F,C:()=>G,D:()=>$,E:()=>P,F:()=>C,G:()=>W,H:()=>H,I:()=>L,L:()=>R,M:()=>D,O:()=>E,S:()=>U,T:()=>x,U:()=>k,V:()=>j,a:()=>g,b:()=>b,c:()=>f,d:()=>T,g:()=>O,h:()=>S,i:()=>y,j:()=>N,k:()=>V,l:()=>m,m:()=>_,o:()=>w,p:()=>v,q:()=>B,u:()=>d,v:()=>z,w:()=>A,x:()=>I,y:()=>p,z:()=>q}),r(33807);var i=r(67726),s=r(60816),n=r(15346);class o{constructor(e,t,r=0,i,s){this.TypedArrayConstructor=e,this.elementCount=9;const n=this.TypedArrayConstructor;void 0===i&&(i=9*n.BYTES_PER_ELEMENT);const o=0===t.byteLength?0:r;this.typedBuffer=null==s?new n(t,o):new n(t,o,(s-r)/n.BYTES_PER_ELEMENT),this.typedBufferStride=i/n.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const i=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,i,this.stride,i+r*this.stride)}getMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<9;e++)t[e]=this.typedBuffer[r++];return t}setMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<9;e++)this.typedBuffer[r++]=t[e]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const i=this.typedBuffer,s=t.typedBuffer;let n=e*this.typedBufferStride,o=r*t.typedBufferStride;for(let e=0;e<9;++e)i[n++]=s[o++]}get buffer(){return this.typedBuffer.buffer}}o.ElementCount=9;class a{constructor(e,t,r=0,i,s){this.TypedArrayConstructor=e,this.elementCount=16;const n=this.TypedArrayConstructor;void 0===i&&(i=16*n.BYTES_PER_ELEMENT);const o=0===t.byteLength?0:r;this.typedBuffer=null==s?new n(t,o):new n(t,o,(s-r)/n.BYTES_PER_ELEMENT),this.typedBufferStride=i/n.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const i=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,i,this.stride,i+r*this.stride)}getMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<16;e++)t[e]=this.typedBuffer[r++];return t}setMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<16;e++)this.typedBuffer[r++]=t[e]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const i=this.typedBuffer,s=t.typedBuffer;let n=e*this.typedBufferStride,o=r*t.typedBufferStride;for(let e=0;e<16;++e)i[n++]=s[o++]}get buffer(){return this.typedBuffer.buffer}}a.ElementCount=16;class l{constructor(e,t,r=0,i,s){this.TypedArrayConstructor=e,this.elementCount=1;const n=this.TypedArrayConstructor;void 0===i&&(i=n.BYTES_PER_ELEMENT);const o=0===t.byteLength?0:r;this.typedBuffer=null==s?new n(t,o):new n(t,o,(s-r)/n.BYTES_PER_ELEMENT),this.typedBufferStride=i/n.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const i=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,i,this.stride,i+r*this.stride)}get(e){return this.typedBuffer[e*this.typedBufferStride]}set(e,t){this.typedBuffer[e*this.typedBufferStride]=t}get buffer(){return this.typedBuffer.buffer}}l.ElementCount=1;class u{constructor(e,t,r=0,i,s){this.TypedArrayConstructor=e,this.elementCount=2;const n=this.TypedArrayConstructor;void 0===i&&(i=2*n.BYTES_PER_ELEMENT);const o=0===t.byteLength?0:r;this.typedBuffer=null==s?new n(t,o):new n(t,o,(s-r)/n.BYTES_PER_ELEMENT),this.typedBufferStride=i/n.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const i=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,i,this.stride,i+r*this.stride)}getVec(e,t){return e*=this.typedBufferStride,(0,i.r)(t,this.typedBuffer[e],this.typedBuffer[e+1])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e]=t[1]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e]=r}copyFrom(e,t,r){const i=this.typedBuffer,s=t.typedBuffer;let n=e*this.typedBufferStride,o=r*t.typedBufferStride;i[n++]=s[o++],i[n]=s[o]}get buffer(){return this.typedBuffer.buffer}}u.ElementCount=2;class c{constructor(e,t,r=0,i,s){this.TypedArrayConstructor=e,this.elementCount=3;const n=this.TypedArrayConstructor;void 0===i&&(i=3*n.BYTES_PER_ELEMENT);const o=0===t.byteLength?0:r;this.typedBuffer=null==s?new n(t,o):new n(t,o,(s-r)/n.BYTES_PER_ELEMENT),this.typedBufferStride=i/n.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const i=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,i,this.stride,i+r*this.stride)}getVec(e,t){return e*=this.typedBufferStride,(0,s.a)(t,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e]=t[2]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,i){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e]=i}copyFrom(e,t,r){const i=this.typedBuffer,s=t.typedBuffer;let n=e*this.typedBufferStride,o=r*t.typedBufferStride;i[n++]=s[o++],i[n++]=s[o++],i[n]=s[o]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=3;class h{constructor(e,t,r=0,i,s){this.TypedArrayConstructor=e,this.elementCount=4;const n=this.TypedArrayConstructor;void 0===i&&(i=4*n.BYTES_PER_ELEMENT);const o=0===t.byteLength?0:r;this.typedBuffer=null==s?new n(t,o):new n(t,o,(s-r)/n.BYTES_PER_ELEMENT),this.typedBufferStride=i/n.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const i=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,i,this.stride,i+r*this.stride)}getVec(e,t){return e*=this.typedBufferStride,(0,n.r)(t,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e++]=t[2],this.typedBuffer[e]=t[3]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,i,s){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e++]=i,this.typedBuffer[e]=s}copyFrom(e,t,r){const i=this.typedBuffer,s=t.typedBuffer;let n=e*this.typedBufferStride,o=r*t.typedBufferStride;i[n++]=s[o++],i[n++]=s[o++],i[n++]=s[o++],i[n]=s[o]}get buffer(){return this.typedBuffer.buffer}}h.ElementCount=4;class p extends l{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}p.ElementType="f32";class d extends u{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}slice(e,t){return this.sliceBuffer(d,e,t)}static fromTypedArray(e,t){return new d(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}d.ElementType="f32";class y extends c{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}slice(e,t){return this.sliceBuffer(y,e,t)}static fromTypedArray(e,t){return new y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}y.ElementType="f32";class f extends h{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}slice(e,t){return this.sliceBuffer(f,e,t)}static fromTypedArray(e,t){return new f(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}f.ElementType="f32";class m extends o{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}slice(e,t){return this.sliceBuffer(m,e,t)}static fromTypedArray(e,t){return new m(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}m.ElementType="f32";class g extends o{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}slice(e,t){return this.sliceBuffer(g,e,t)}static fromTypedArray(e,t){return new g(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}g.ElementType="f64";class v extends a{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}slice(e,t){return this.sliceBuffer(v,e,t)}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}v.ElementType="f32";class b extends a{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}slice(e,t){return this.sliceBuffer(b,e,t)}static fromTypedArray(e,t){return new b(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}b.ElementType="f64";class w extends l{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}slice(e,t){return this.sliceBuffer(w,e,t)}static fromTypedArray(e,t){return new w(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}w.ElementType="f64";class _ extends u{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}slice(e,t){return this.sliceBuffer(_,e,t)}static fromTypedArray(e,t){return new _(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}_.ElementType="f64";class x extends c{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}slice(e,t){return this.sliceBuffer(x,e,t)}static fromTypedArray(e,t){return new x(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}x.ElementType="f64";class S extends h{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}slice(e,t){return this.sliceBuffer(S,e,t)}static fromTypedArray(e,t){return new S(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}S.ElementType="f64";class T extends l{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}slice(e,t){return this.sliceBuffer(T,e,t)}static fromTypedArray(e,t){return new T(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}T.ElementType="u8";class M extends u{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}slice(e,t){return this.sliceBuffer(M,e,t)}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}M.ElementType="u8";class E extends c{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}slice(e,t){return this.sliceBuffer(E,e,t)}static fromTypedArray(e,t){return new E(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}E.ElementType="u8";class I extends h{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}slice(e,t){return this.sliceBuffer(I,e,t)}static fromTypedArray(e,t){return new I(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}I.ElementType="u8";class O extends l{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}slice(e,t){return this.sliceBuffer(O,e,t)}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}O.ElementType="u16";class A extends u{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}slice(e,t){return this.sliceBuffer(A,e,t)}static fromTypedArray(e,t){return new A(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}A.ElementType="u16";class P extends c{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}slice(e,t){return this.sliceBuffer(P,e,t)}static fromTypedArray(e,t){return new P(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}P.ElementType="u16";class R extends h{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}slice(e,t){return this.sliceBuffer(R,e,t)}static fromTypedArray(e,t){return new R(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}R.ElementType="u16";class F extends l{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}slice(e,t){return this.sliceBuffer(F,e,t)}static fromTypedArray(e,t){return new F(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}F.ElementType="u32";class C extends u{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}slice(e,t){return this.sliceBuffer(C,e,t)}static fromTypedArray(e,t){return new C(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}C.ElementType="u32";class L extends c{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}slice(e,t){return this.sliceBuffer(L,e,t)}static fromTypedArray(e,t){return new L(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}L.ElementType="u32";class k extends h{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}slice(e,t){return this.sliceBuffer(k,e,t)}static fromTypedArray(e,t){return new k(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}k.ElementType="u32";class N extends l{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}slice(e,t){return this.sliceBuffer(N,e,t)}static fromTypedArray(e,t){return new N(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}N.ElementType="i8";class j extends u{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}slice(e,t){return this.sliceBuffer(j,e,t)}static fromTypedArray(e,t){return new j(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}j.ElementType="i8";class D extends c{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}slice(e,t){return this.sliceBuffer(D,e,t)}static fromTypedArray(e,t){return new D(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}D.ElementType="i8";class U extends h{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}slice(e,t){return this.sliceBuffer(U,e,t)}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}U.ElementType="i8";class V extends l{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}slice(e,t){return this.sliceBuffer(V,e,t)}static fromTypedArray(e,t){return new V(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}V.ElementType="i16";class B extends u{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}slice(e,t){return this.sliceBuffer(B,e,t)}static fromTypedArray(e,t){return new B(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}B.ElementType="i16";class z extends c{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}slice(e,t){return this.sliceBuffer(z,e,t)}static fromTypedArray(e,t){return new z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}z.ElementType="i16";class q extends h{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}slice(e,t){return this.sliceBuffer(q,e,t)}static fromTypedArray(e,t){return new q(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}q.ElementType="i16";class G extends l{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}slice(e,t){return this.sliceBuffer(G,e,t)}static fromTypedArray(e,t){return new G(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}G.ElementType="i32";class $ extends u{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}slice(e,t){return this.sliceBuffer($,e,t)}static fromTypedArray(e,t){return new $(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}$.ElementType="i32";class W extends c{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}slice(e,t){return this.sliceBuffer(W,e,t)}static fromTypedArray(e,t){return new W(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}W.ElementType="i32";class H extends h{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}slice(e,t){return this.sliceBuffer(H,e,t)}static fromTypedArray(e,t){return new H(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}H.ElementType="i32"},40130:(e,t,r)=>{"use strict";r.d(t,{L:()=>_});var i,s=r(78155),n=r(80987),o=r(80219),a=r(88903);class l{constructor(){this._observers=[]}observe(e){return this._observers.includes(e)||this._observers.push(e),new s.s(this._observers,e)}notify(){const e=this._observers.slice();for(let t=0;t<e.length;++t){const r=e[t];r.onInvalidated(),r.onCommitted()}}}const u=new s.h(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),c=()=>{};function h(e){return e?e instanceof w?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function p(e){if(e&&e.length)return e[0]}function d(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let n=0;for(;n<s&&e[r+n]===t[i+n];)n++;return n}function y(e,t,r,i){t&&t.forEach(((t,s,n)=>{e.push(t),y(e,r.call(i,t,s,n),r,i)}))}const f=new Set,m=new Set,g=new Set,v=new Map;let b=0,w=i=class extends n.n.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new l,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:b++})}static isCollection(e){return null!=e&&e instanceof i}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof i?{items:e}:e:{}}*[Symbol.iterator](){yield*this.items}get items(){return(0,a.i)(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...h(e)),this._emitAfterChanges(1))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=c,r.removed=!0,e.splice(e.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if((0,a.i)(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(null!=t?t:null);return this._splice(r,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if((0,a.i)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t);return this._splice(r,0,...h(e)),this._emitAfterChanges(1),this}removeAll(){if((0,a.i)(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return(0,a.i)(this._observable),this._createNewInstance({items:this._items.map(o.y)})}concat(...e){(0,a.i)(this._observable);const t=e.map(h);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if((0,a.i)(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=(0,o.m)(this._splice(0,this.length)),i=r.length;for(let s=0;s<i;s++)e.call(t,r[s],s,r);this._emitAfterChanges(2)}every(e,t){return(0,a.i)(this._observable),this._items.every(e,t)}filter(e,t){let r;return(0,a.i)(this._observable),r=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return(0,a.i)(this._observable),this._items.find(e,t)}findIndex(e,t){return(0,a.i)(this._observable),this._items.findIndex(e,t)}flatten(e,t){(0,a.i)(this._observable);const r=[];return y(r,this,e,t),new i(r)}forEach(e,t){return(0,a.i)(this._observable),this._items.forEach(e,t)}getItemAt(e){return(0,a.i)(this._observable),this._items[e]}getNextIndex(e){(0,a.i)(this._observable);const t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return(0,a.i)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return(0,a.i)(this._observable),this._items.indexOf(e,t)}join(e=","){return(0,a.i)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return(0,a.i)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){(0,a.i)(this._observable);const r=this._items.map(e,t);return new i({items:r})}reorder(e,t=this.length-1){(0,a.i)(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}}pop(){if((0,a.i)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=p(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return(0,a.i)(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){(0,a.i)(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){(0,a.i)(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return(0,a.i)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if((0,a.i)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=p(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if((0,a.i)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];const t=e instanceof i?e.toArray():e,r=this._items,s=[],n=t.length;for(let e=0;e<n;e++){const i=t[e],n=r.indexOf(i);if(n>-1){const i=1+d(t,r,e+1,n+1),o=this._splice(n,i);o&&o.length>0&&s.push.apply(s,o),e+=i-1}}return this._emitAfterChanges(2),s}reverse(){if((0,a.i)(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if((0,a.i)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=p(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return(0,a.i)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return(0,a.i)(this._observable),this._items.some(e,t)}sort(e){if((0,a.i)(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=(0,o.m)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...r){(0,a.i)(this._observable);const i=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(e,t,...r)||[];return this._emitAfterChanges(i),s}toArray(){return(0,a.i)(this._observable),this._items.slice()}toJSON(){return(0,a.i)(this._observable),this.toArray()}toLocaleString(){return(0,a.i)(this._observable),this._items.toLocaleString()}toString(){return(0,a.i)(this._observable),this._items.toString()}unshift(...e){return(0,a.i)(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...r){const i=this._items,n=this.constructor.prototype.itemType;let o,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,s.j)((()=>this._dispatchChange()))),t){if(a=i.splice(e,t),this.hasEventListener("before-remove")){const t=u.acquire();t.target=this,t.cancellable=!0;for(let r=0,s=a.length;r<s;r++)o=a[r],t.reset(o),this.emit("before-remove",t),t.defaultPrevented&&(a.splice(r,1),i.splice(e,0,o),e+=1,r-=1,s-=1);u.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=u.acquire();e.target=this,e.cancellable=!1;const t=a.length;for(let r=0;r<t;r++)e.reset(a[r]),this.emit("after-remove",e);u.release(e)}}if(r&&r.length){if(n){const e=[];for(const t of r){const r=n.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),s=this.hasEventListener("after-add"),o=e===this.length;if(t||s){const n=u.acquire();n.target=this,n.cancellable=!0;const a=u.acquire();a.target=this,a.cancellable=!1;for(const l of r)t?(n.reset(l),this.emit("before-add",n),n.defaultPrevented||(o?i.push(l):i.splice(e++,0,l),this._set("length",i.length),s&&(a.reset(l),this.emit("after-add",a)))):(o?i.push(l):i.splice(e++,0,l),this._set("length",i.length),a.reset(l),this.emit("after-add",a));u.release(a),u.release(n)}else{if(o)for(const e of r)i.push(e);else i.splice(e,0,...r);this._set("length",i.length)}}return(r&&r.length||a&&a.length)&&this._notifyChangeEvent(r,a),a}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=u.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,u.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=u.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),u.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;f.clear(),m.clear(),g.clear();for(const{added:t,removed:r}of e){if(t)if(0===g.size&&0===m.size)for(const e of t)f.add(e);else for(const e of t)m.has(e)?(g.add(e),m.delete(e)):g.has(e)||f.add(e);if(r)if(0===g.size&&0===f.size)for(const e of r)m.add(e);else for(const e of r)f.has(e)?f.delete(e):(g.delete(e),m.add(e))}const r=s.k.acquire();f.forEach((e=>{r.push(e)}));const i=s.k.acquire();m.forEach((e=>{i.push(e)}));const n=this._items,o=t.items,a=s.k.acquire();if(g.forEach((e=>{o.indexOf(e)!==n.indexOf(e)&&a.push(e)})),t.listeners&&(r.length||i.length||a.length)){const e={target:this,added:r,removed:i,moved:a},s=t.listeners.length;for(let r=0;r<s;r++){const i=t.listeners[r];i.removed||i.callback.call(this,e)}}s.k.release(r),s.k.release(i),s.k.release(a)}f.clear(),m.clear(),g.clear()}};w.ofType=e=>{if(!e)return i;if(v.has(e))return v.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const i=e.typeMap[r].prototype.declaredClass;t?t+=` | ${i}`:t=i}let r=class extends i{};r=(0,s.e)([(0,a.n)(`esri.core.Collection<${t}>`)],r);const n={Type:e,ensureType:"function"==typeof e?(0,a.d)(e):(0,a.w)(e)};return Object.defineProperty(r.prototype,"itemType",{value:n}),v.set(e,r),r},(0,s.e)([(0,a.y)()],w.prototype,"length",void 0),(0,s.e)([(0,a.y)()],w.prototype,"items",null),w=i=(0,s.e)([(0,a.n)("esri.core.Collection")],w);var _=w},18559:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var i=r(78155),s=r(40130),n=r(32769),o=r(80219),a=r(88903);let l=class extends((0,n.a)(s.L)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add((0,i.l)((()=>this.refresh())))}destroy(){this.getCollections=null}refresh(){const e=(0,o.r)(this.getCollections)?this.getCollections():null;if((0,o.t)(e))return void this.removeAll();let t=0;for(const r of e)(0,o.r)(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new s.L(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const i of t)if(i){if(r(i)){const t=this.indexOf(i,e);t>=0?t!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(i);if(Array.isArray(t))for(const r of t)e=this._processCollection(e,r);else e=this._processCollection(e,t)}}return e}};(0,i.e)([(0,a.y)()],l.prototype,"getCollections",void 0),(0,i.e)([(0,a.y)()],l.prototype,"getChildrenFunction",void 0),(0,i.e)([(0,a.y)()],l.prototype,"itemFilterFunction",void 0),l=(0,i.e)([(0,a.n)("esri.core.CollectionFlattener")],l);var u=l},17762:(e,t,r)=>{"use strict";r.d(t,{i:()=>h,l:()=>l,n:()=>c,o:()=>y,r:()=>a});var i=r(60816),s=r(80219),n=r(88903);const o={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,5,10]};function a(e){var t;return null!=(t=o[e.toLowerCase()])?t:null}function l(e){const t=a(e);return t?[...t]:t}function u(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function c(e,t,r,i=1){const s=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,o=2*r-n;return[Math.round(256*u(o,n,s+1/3)),Math.round(256*u(o,n,s)),Math.round(256*u(o,n,s-1/3)),i]}function h(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,n=t?9===e.length:5===e.length;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&i,o>>=r,a[3]=s*l/255),l=o&i,o>>=r,a[2]=s*l,l=o&i,o>>=r,a[1]=s*l,l=o&i,o>>=r,a[0]=s*l,a}function p(e){return(0,i.o)((0,n.C)(e),0,255)}function d(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class y{constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}static blendColors(e,t,r,i=new y){return i.r=Math.round(e.r+(t.r-e.r)*r),i.g=Math.round(e.g+(t.g-e.g)*r),i.b=Math.round(e.b+(t.b-e.b)*r),i.a=e.a+(t.a-e.a)*r,i._sanitize()}static fromRgb(e,t){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const e=r[2].split(/\s*,\s*/),i=r[1];if("rgb"===i&&3===e.length||"rgba"===i&&4===e.length){const r=e[0];if("%"===r.charAt(r.length-1)){const r=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(r[3]=parseFloat(e[3])),y.fromArray(r,t)}return y.fromArray(e.map((e=>parseFloat(e))),t)}if("hsl"===i&&3===e.length||"hsla"===i&&4===e.length)return y.fromArray(c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])),t)}return null}static fromHex(e,t=new y){if(4!==e.length&&7!==e.length||"#"!==e[0])return null;const r=4===e.length?4:8,i=(1<<r)-1;let s=Number("0x"+e.substr(1));return isNaN(s)?null:(["b","g","r"].forEach((e=>{const n=s&i;s>>=r,t[e]=4===r?17*n:n})),t.a=1,t)}static fromArray(e,t=new y){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){const r=a(e);return r&&y.fromArray(r,t)||y.fromRgb(e,t)||y.fromHex(e,t)}static fromJSON(e){return e&&new y([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return(0,s.r)(e)?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return(0,s.r)(e)?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){if("string"==typeof e)y.fromString(e,this);else if(Array.isArray(e))y.fromArray(e,this);else{var t,r,i,s;this._set(null!=(t=e.r)?t:0,null!=(r=e.g)?r:0,null!=(i=e.b)?i:0,null!=(s=e.a)?s:1),e instanceof y||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}`}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const t=p(this.r),r=p(this.g),i=p(this.b);return 0===e||1!==this.a?[t,r,i,p(255*this.a)]:[t,r,i]}clone(){return new y(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(d(this.r,0,255)),this.g=Math.round(d(this.g,0,255)),this.b=Math.round(d(this.b,0,255)),this.a=d(this.a,0,1),this}_set(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i}}y.prototype.declaredClass="esri.Color"},49878:(e,t,r)=>{"use strict";r.d(t,{a:()=>h,c:()=>u});var i,s=r(78155),n=r(88903),o=(r(80219),r(17762));let a=i=class extends s.a{constructor(){super(...arguments),this.title=null}clone(){return new i({title:this.title})}};(0,s.e)([(0,n.y)({type:String,json:{write:!0}})],a.prototype,"title",void 0),a=i=(0,s.e)([(0,n.n)("esri.renderers.support.LegendOptions")],a);var l,u=a;let c=l=class extends s.a{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=null==e?0:e}clone(){return new l({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,s.e)([(0,n.y)({type:o.o,json:{type:[n.N],write:!0}})],c.prototype,"color",void 0),(0,s.e)([(0,n.y)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,s.e)([(0,n.y)({type:Number,json:{write:{allowNull:!0}}})],c.prototype,"value",void 0),(0,s.e)([(0,s.o)("value")],c.prototype,"writeValue",null),c=l=(0,s.e)([(0,n.n)("esri.renderers.visualVariables.support.ColorStop")],c);var h=c},21793:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var i=r(78155),s=r(88903);r(80219);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,i.e)([(0,s.y)({type:Object,json:{write:!0}})],t.prototype,"customParameters",void 0),t=(0,i.e)([(0,s.n)("esri.layers.mixins.CustomParametersMixin")],t),t}},79679:(e,t,r)=>{"use strict";r.d(t,{A:()=>G,B:()=>ge,C:()=>Je,D:()=>He,E:()=>We,F:()=>fe,G:()=>he,H:()=>te,_:()=>P,a:()=>x,b:()=>q,c:()=>D,d:()=>R,e:()=>S,f:()=>V,g:()=>z,h:()=>ie,i:()=>se,j:()=>De,k:()=>$,l:()=>ee,m:()=>be,n:()=>w,o:()=>H,p:()=>Ze,q:()=>ve,r:()=>U,s:()=>v,t:()=>_,u:()=>re,v:()=>B,w:()=>ue,x:()=>ye,y:()=>ce,z:()=>me}),r(33807);var i=r(71542),s=r(16063),n=r(80987),o=r(9612),a=r(20215),l=r(80219),u=r(30316),c=r(43194),h=r(93242),p=r(62654),d=r(65311),y=r(60816),f=r(78155),m=r(67726),g=r(59312);class v{constructor(e){this.allocator=e,this.items=[],this.itemsPtr=0,this.tickHandle=f.Q.before((()=>this.reset())),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=(0,l.p)(this.tickHandle)),this.items=(0,l.p)(this.items)}get(){return 0===this.itemsPtr&&(0,f.Q)((()=>{})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*b);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0}grow(){for(let e=0;e<Math.max(8,Math.min(this.items.length,b));e++)this.items.push(this.allocator())}}const b=1024;function w(){return[0,0,0,0]}function _(e){return[e[0],e[1],e[2],e[3]]}function x(e,t,r,i){return[e,t,r,i]}function S(e){const t=[0,0,0,0],r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function T(e,t){return new Float64Array(e,t,4)}function M(){return x(1,1,1,1)}function E(){return x(1,0,0,0)}function I(){return x(0,1,0,0)}function O(){return x(0,0,1,0)}function A(){return x(0,0,0,1)}const P=[0,0,0,0],R=M(),F=E(),C=I(),L=O(),k=A();Object.freeze({__proto__:null,create:w,clone:_,fromValues:x,fromArray:S,createView:T,zeros:function(){return[0,0,0,0]},ones:M,unitX:E,unitY:I,unitZ:O,unitW:A,ZEROS:P,ONES:R,UNIT_X:F,UNIT_Y:C,UNIT_Z:L,UNIT_W:k});class N{constructor(e,t,r){this.itemByteSize=e,this.itemCreate=t,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=f.Q.before((()=>this.reset()))}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=(0,l.p)(this.tickHandle)),this.itemsPtr=0,this.items=(0,l.p)(this.items),this.buffers=(0,l.p)(this.buffers)}get(){0===this.itemsPtr&&(0,f.Q)((()=>{}));const e=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=e;){const e=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let t=0;t<this.itemsPerBuffer;++t)this.items.push(this.itemCreate(e,t*this.itemByteSize));this.buffers.push(e)}return this.items[this.itemsPtr++]}reset(){const e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(e=j){return new N(16,g.a,e)}static createVec3f64(e=j){return new N(24,y.Y,e)}static createVec4f64(e=j){return new N(32,T,e)}static createMat3f64(e=j){return new N(72,p.t,e)}static createMat4f64(e=j){return new N(128,i.t,e)}static createQuatf64(e=j){return new N(32,p.b,e)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}const j=4096;N.createVec2f64();const D=N.createVec3f64(),U=N.createVec4f64();N.createMat3f64();const V=N.createMat4f64();function B(e){return e?{origin:(0,y.k)(e.origin),vector:(0,y.k)(e.vector)}:{origin:(0,y.n)(),vector:(0,y.n)()}}function z(e,t,r=B()){return(0,y.h)(r.origin,e),(0,y.c)(r.vector,t,e),r}function q(e,t){const r=(0,y.c)(D.get(),t,e.origin),i=(0,y.z)(e.vector,r),s=(0,y.z)(e.vector,e.vector),n=(0,y.o)(i/s,0,1),o=(0,y.c)(D.get(),(0,y.d)(D.get(),e.vector,n),r);return(0,y.z)(o,o)}function G(e,t,r,i,s){const{vector:n,origin:o}=e,a=(0,y.c)(D.get(),t,o),l=(0,y.z)(n,a)/(0,y.m)(n);return(0,y.d)(s,n,(0,y.o)(l,r,i)),(0,y.u)(s,s,e.origin)}function $(e,t,r){return!!function(e,t,r,i){const s=1e-6,n=e.origin,o=(0,y.u)(D.get(),n,e.vector),a=t.origin,l=(0,y.u)(D.get(),a,t.vector),u=D.get(),c=D.get();if(u[0]=n[0]-a[0],u[1]=n[1]-a[1],u[2]=n[2]-a[2],c[0]=l[0]-a[0],c[1]=l[1]-a[1],c[2]=l[2]-a[2],Math.abs(c[0])<s&&Math.abs(c[1])<s&&Math.abs(c[2])<s)return!1;const h=D.get();if(h[0]=o[0]-n[0],h[1]=o[1]-n[1],h[2]=o[2]-n[2],Math.abs(h[0])<s&&Math.abs(h[1])<s&&Math.abs(h[2])<s)return!1;const p=u[0]*c[0]+u[1]*c[1]+u[2]*c[2],d=c[0]*h[0]+c[1]*h[1]+c[2]*h[2],f=u[0]*h[0]+u[1]*h[1]+u[2]*h[2],m=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*m-d*d;if(Math.abs(g)<s)return!1;let v=(p*d-f*m)/g,b=(p+d*v)/m;v=(0,y.o)(v,0,1),b=(0,y.o)(b,0,1);const w=D.get(),_=D.get();return w[0]=n[0]+v*h[0],w[1]=n[1]+v*h[1],w[2]=n[2]+v*h[2],_[0]=a[0]+b*c[0],_[1]=a[1]+b*c[1],_[2]=a[2]+b*c[2],i.tA=v,i.tB=b,i.pA=w,i.pB=_,i.distance2=(0,y.D)(w,_),!0}(e,t,0,W)&&((0,y.h)(r,W.pA),!0)}N.createQuatf64();const W={tA:0,tB:0,pA:(0,y.n)(),pB:(0,y.n)(),distance2:0};function H(e,t,r){const i=(0,m.d)(e,t),s=(0,m.d)(t,r),n=(0,m.d)(r,e),o=(i+s+n)/2,a=o*(o-i)*(o-s)*(o-n);return a<=0?0:Math.sqrt(a)}function J(e,t,r){return(0,y.c)(Z,t,e),(0,y.c)(X,r,e),(0,y.s)((0,y._)(Z,Z,X))/2}new v((()=>({origin:null,vector:null}))),new v(B),new v((()=>({p0:null,p1:null,p2:null})));const Z=(0,y.n)(),X=(0,y.n)();let Y=(()=>{const e=new Uint32Array(131072);for(let t=0;t<e.length;++t)e[t]=t;return e})();const Q=new Uint16Array([0]),K=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function ee(e){if(1===e)return Q;if(e<K.length)return new Uint16Array(K.buffer,0,e);if(e>Y.length){const t=Math.max(2*Y.length,e);Y=new Uint32Array(t);for(let e=0;e<Y.length;e++)Y[e]=e}return new Uint32Array(Y.buffer,0,e)}function te(e){if(1===e)return new Uint16Array(Q);if(e<K.length)return new Uint16Array(K.slice(0,e));if(e>Y.length){const t=new Uint32Array(e);for(let e=0;e<t.length;e++)t[e]=e;return t}return new Uint32Array(Y.slice(0,e))}function re(e,t,r){if(!e)return!1;const{size:i,data:s}=e;(0,y.a)(r,0,0,0),(0,y.a)(le,0,0,0);let n=0,o=0;for(let e=0;e<t.length-2;e+=3){const a=t[e+0]*i,l=t[e+1]*i,u=t[e+2]*i;(0,y.a)(ne,s[a+0],s[a+1],s[a+2]),(0,y.a)(oe,s[l+0],s[l+1],s[l+2]),(0,y.a)(ae,s[u+0],s[u+1],s[u+2]);const c=J(ne,oe,ae);c?((0,y.u)(ne,ne,oe),(0,y.u)(ne,ne,ae),(0,y.d)(ne,ne,1/3*c),(0,y.u)(r,r,ne),n+=c):((0,y.u)(le,le,ne),(0,y.u)(le,le,oe),(0,y.u)(le,le,ae),o+=3)}return!(0===o&&0===n||(0!==n?((0,y.d)(r,r,1/n),0):0===o||((0,y.d)(r,le,1/o),0)))}function ie(e,t,r){if(!e||!t)return!1;const{size:i,data:s}=e;(0,y.a)(r,0,0,0);let n=-1,o=0;for(let e=0;e<t.length;e++){const a=t[e]*i;n!==a&&(r[0]+=s[a+0],r[1]+=s[a+1],r[2]+=s[a+2],o++),n=a}return o>1&&(0,y.d)(r,r,1/o),o>0}function se(e,t,r,i){if(!e)return!1;const{size:s,data:n}=e;(0,y.a)(i,0,0,0),(0,y.a)(le,0,0,0);let o=0,a=0;const l=t?t.length-1:n.length/s-1,u=l+(r?2:0);for(let e=0;e<u;e+=2){const r=e<l?e:l,u=e<l?e+1:0,c=(t?t[r]:r)*s,h=(t?t[u]:u)*s;ne[0]=n[c+0],ne[1]=n[c+1],ne[2]=n[c+2],oe[0]=n[h+0],oe[1]=n[h+1],oe[2]=n[h+2],(0,y.d)(ne,(0,y.u)(ne,ne,oe),.5);const p=(0,y.S)(ne,oe);p>0?((0,y.u)(i,i,(0,y.d)(ne,ne,p)),o+=p):((0,y.u)(le,le,ne),a++)}return 0!==o?((0,y.d)(i,i,1/o),!0):0!==a&&((0,y.d)(i,le,1/a),!0)}const ne=(0,y.n)(),oe=(0,y.n)(),ae=(0,y.n)(),le=(0,y.n)();function ue(e,t,r){if(e.count!==t.count)return void i.g.error("source and destination buffers need to have the same number of elements");const s=e.count,n=r[0],o=r[1],a=r[2],l=r[3],u=r[4],c=r[5],h=r[6],p=r[7],d=r[8],y=e.typedBuffer,f=e.typedBufferStride,m=t.typedBuffer,g=t.typedBufferStride;for(let e=0;e<s;e++){const t=e*f,r=e*g,i=m[r],s=m[r+1],v=m[r+2],b=m[r+3];y[t]=n*i+l*s+h*v,y[t+1]=o*i+u*s+p*v,y[t+2]=a*i+c*s+d*v,y[t+3]=b}}function ce(e,t,r){const i=Math.min(e.count,t.count),s=e.typedBuffer,n=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride;for(let e=0;e<i;e++){const t=e*n,i=e*a;s[t]=r*o[i],s[t+1]=r*o[i+1],s[t+2]=r*o[i+2],s[t+3]=r*o[i+3]}}function he(e,t,r){const i=Math.min(e.count,t.count),s=e.typedBuffer,n=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride;for(let e=0;e<i;e++){const t=e*n,i=e*a;s[t]=o[i]>>r,s[t+1]=o[i+1]>>r,s[t+2]=o[i+2]>>r,s[t+3]=o[i+3]>>r}}function pe(e,t){const r=e.count;t||(t=new e.TypedArrayConstructor(r));for(let i=0;i<r;i++)t[i]=e.get(i);return t}function de(e,t,r){const i=e.typedBuffer,s=e.typedBufferStride,n=t.typedBuffer,o=t.typedBufferStride,a=r?r.count:t.count;let l=(r&&r.dstIndex?r.dstIndex:0)*s,u=(r&&r.srcIndex?r.srcIndex:0)*o;for(let e=0;e<a;++e)i[l]=n[u],i[l+1]=n[u+1],l+=s,u+=o}function ye(e,t,r){const i=e.typedBuffer,n=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride,l=r?r.count:t.count;let u=(r&&r.dstIndex?r.dstIndex:0)*n,c=(r&&r.srcIndex?r.srcIndex:0)*a;if((0,s.u)(t.elementType)){const e=(0,s.c)(t.elementType);if((0,s.r)(t.elementType))for(let t=0;t<l;++t)i[u]=Math.max(o[c]/e,-1),i[u+1]=Math.max(o[c+1]/e,-1),u+=n,c+=a;else for(let t=0;t<l;++t)i[u]=o[c]/e,i[u+1]=o[c+1]/e,u+=n,c+=a}else de(e,t,r);return e}function fe(e,t,r,i){var s,n;const o=e.typedBuffer,a=e.typedBufferStride,l=null!=(s=null==i?void 0:i.count)?s:e.count;let u=(null!=(n=null==i?void 0:i.dstIndex)?n:0)*a;for(let e=0;e<l;++e)o[u]=t,o[u+1]=r,u+=a}function me(e,t,r){const i=e.typedBuffer,s=e.typedBufferStride,n=t.typedBuffer,o=t.typedBufferStride,a=r?r.count:t.count;let l=(r&&r.dstIndex?r.dstIndex:0)*s,u=(r&&r.srcIndex?r.srcIndex:0)*o;for(let e=0;e<a;++e)i[l]=n[u],i[l+1]=n[u+1],i[l+2]=n[u+2],i[l+3]=n[u+3],l+=s,u+=o}function ge(e,t,r,i,s,n){var o,a;const l=e.typedBuffer,u=e.typedBufferStride,c=null!=(o=null==n?void 0:n.count)?o:e.count;let h=(null!=(a=null==n?void 0:n.dstIndex)?a:0)*u;for(let e=0;e<c;++e)l[h]=t,l[h+1]=r,l[h+2]=i,l[h+3]=s,h+=u}function ve(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,s.e)(e.ElementType)))}Object.freeze({__proto__:null,transformMat4:function(e,t,r){if(e.count!==t.count)return void i.g.error("source and destination buffers need to have the same number of elements");const s=e.count,n=r[0],o=r[1],a=r[2],l=r[3],u=r[4],c=r[5],h=r[6],p=r[7],d=r[8],y=r[9],f=r[10],m=r[11],g=r[12],v=r[13],b=r[14],w=r[15],_=e.typedBuffer,x=e.typedBufferStride,S=t.typedBuffer,T=t.typedBufferStride;for(let e=0;e<s;e++){const t=e*x,r=e*T,i=S[r],s=S[r+1],M=S[r+2],E=S[r+3];_[t]=n*i+u*s+d*M+g*E,_[t+1]=o*i+c*s+y*M+v*E,_[t+2]=a*i+h*s+f*M+b*E,_[t+3]=l*i+p*s+m*M+w*E}},transformMat3:ue,scale:ce,shiftRight:he}),Object.freeze({__proto__:null,copy:function(e,t,r){const i=e.typedBuffer,s=e.typedBufferStride,n=t.typedBuffer,o=t.typedBufferStride,a=r?r.count:t.count;let l=(r&&r.dstIndex?r.dstIndex:0)*s,u=(r&&r.srcIndex?r.srcIndex:0)*o;for(let e=0;e<a;++e){for(let e=0;e<9;++e)i[l+e]=n[u+e];l+=s,u+=o}}}),Object.freeze({__proto__:null,copy:function(e,t,r){const i=e.typedBuffer,s=e.typedBufferStride,n=t.typedBuffer,o=t.typedBufferStride,a=r?r.count:t.count;let l=(r&&r.dstIndex?r.dstIndex:0)*s,u=(r&&r.srcIndex?r.srcIndex:0)*o;for(let e=0;e<a;++e){for(let e=0;e<16;++e)i[l+e]=n[u+e];l+=s,u+=o}}}),Object.freeze({__proto__:null,copy:function(e,t,r){const i=e.typedBuffer,s=e.typedBufferStride,n=t.typedBuffer,o=t.typedBufferStride,a=r?r.count:t.count;let l=(r&&r.dstIndex?r.dstIndex:0)*s,u=(r&&r.srcIndex?r.srcIndex:0)*o;for(let e=0;e<a;++e)i[l]=n[u],l+=s,u+=o},makeDense:pe}),Object.freeze({__proto__:null,copy:de,normalizeIntegerBuffer:ye,fill:fe}),Object.freeze({__proto__:null,copy:me,fill:ge});class be{constructor(e){this.streamDataRequester=e}async loadJSON(e,t){return this.load("json",e,t)}async loadBinary(e,t){return(0,n.G)(e)?((0,a.a)(t),(0,n.H)(e)):this.load("binary",e,t)}async loadImage(e,t){return this.load("image",e,t)}async load(e,t,r){if((0,l.t)(this.streamDataRequester))return(await(0,n.L)(t,{responseType:we[e]})).data;const i=await(0,o.a)(this.streamDataRequester.request(t,e,r));if(!0===i.ok)return i.value;throw(0,a.w)(i.error),new a.s("",`Request for resource failed: ${i.error}`)}}const we={image:"image",binary:"array-buffer",json:"json"},_e=l.n.getLogger("esri.views.3d.glTF");class xe{constructor(e){this.data=e,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}readUint32(){const e=this.offset4;return this.offset4+=1,this.dataUint32[e]}readUint8Array(e){const t=4*this.offset4;return this.offset4+=e/4,new Uint8Array(this.data,t,e)}remainingBytes(){return this.data.byteLength-4*this.offset4}}const Se={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},Te={pbrMetallicRoughness:Se,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},Me={ESRI_externalColorMixMode:"tint"},Ee=(e={})=>{const t={...Se,...e.pbrMetallicRoughness},r=function(e){switch(e.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:(0,u.n)(e.ESRI_externalColorMixMode),e.ESRI_externalColorMixMode="tint"}return e}({...Me,...e.extras});return{...Te,...e,pbrMetallicRoughness:t,extras:r}},Ie={magFilter:9729,minFilter:9987,wrapS:10497,wrapT:10497},Oe=1179937895;class Ae{constructor(e,t,r,i,s){this.context=e,this.errorContext=t,this.uri=r,this.json=i,this.glbBuffer=s,this.bufferCache=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function(e){let t,r;return e.replace(/^(.*\/)?([^/]*)$/,((e,i,s)=>(t=i||"",r=s||"",""))),{dirPart:t,filePart:r}}(this.uri).dirPart,this.checkVersionSupported(),this.checkRequiredExtensionsSupported(),t.errorUnsupportedIf(null==i.scenes,"Scenes must be defined."),t.errorUnsupportedIf(null==i.meshes,"Meshes must be defined"),t.errorUnsupportedIf(null==i.nodes,"Nodes must be defined."),this.computeNodeParents()}static async load(e,t,r,i){if((0,n.G)(r)){const i=(0,n.V)(r);if("model/gltf-binary"!==i.mediaType)try{const s=JSON.parse(i.isBase64?atob(i.data):i.data);return new Ae(e,t,r,s)}catch{}const s=(0,n.H)(r);if(Ae.isGLBData(s))return this.fromGLBData(e,t,r,s)}if(r.endsWith(".gltf")){const s=await e.loadJSON(r,i);return new Ae(e,t,r,s)}const s=await e.loadBinary(r,i);if(Ae.isGLBData(s))return this.fromGLBData(e,t,r,s);const o=await e.loadJSON(r,i);return new Ae(e,t,r,o)}static isGLBData(e){const t=new xe(e);return t.remainingBytes()>=4&&t.readUint32()===Oe}static async fromGLBData(e,t,r,i){const s=await Ae.parseGLBData(t,i);return new Ae(e,t,r,s.json,s.binaryData)}static async parseGLBData(e,t){const r=new xe(t);e.assert(r.remainingBytes()>=12,"GLB binary data is insufficiently large.");const i=r.readUint32(),s=r.readUint32(),n=r.readUint32();e.assert(i===Oe,"Magic first 4 bytes do not fit to expected GLB value."),e.assert(t.byteLength>=n,"GLB binary data is smaller than header specifies."),e.errorUnsupportedIf(2!==s,"An unsupported GLB container version was detected. Only version 2 is supported.");let o,a,l=0;for(;r.remainingBytes()>=8;){const t=r.readUint32(),i=r.readUint32();0===l?(e.assert(1313821514===i,"First GLB chunk must be JSON."),e.assert(t>=0,"No JSON data found."),o=await ke(r.readUint8Array(t))):1===l?(e.errorUnsupportedIf(5130562!==i,"Second GLB chunk expected to be BIN."),a=r.readUint8Array(t)):e.warnUnsupported("More than 2 GLB chunks detected. Skipping."),l+=1}return o||e.error("No GLB JSON chunk detected."),{json:o,binaryData:a}}async getBuffer(e,t){const r=this.json.buffers[e],i=this.errorContext;if(null==r.uri)return i.assert(null!=this.glbBuffer,"GLB buffer not present"),this.glbBuffer;let s=this.bufferCache.get(e);if(!s){const n=await this.context.loadBinary(this.resolveUri(r.uri),t);s=new Uint8Array(n),this.bufferCache.set(e,s),i.assert(s.byteLength===r.byteLength,"Buffer byte lengths should match.")}return s}async getAccessor(e,t){const r=this.json.accessors[e],i=this.errorContext;i.errorUnsupportedIf(null==r.bufferView,"Some accessor does not specify a bufferView."),i.errorUnsupportedIf(r.type in["MAT2","MAT3","MAT4"],`AttributeType ${r.type} is not supported`);const s=this.json.bufferViews[r.bufferView],n=await this.getBuffer(s.buffer,t),o=Ce[r.type],a=Le[r.componentType],l=o*a,u=s.byteStride||l;return{raw:n.buffer,byteStride:u,byteOffset:n.byteOffset+(s.byteOffset||0)+(r.byteOffset||0),entryCount:r.count,isDenselyPacked:u===l,componentCount:o,componentByteSize:a,componentType:r.componentType,min:r.min,max:r.max,normalized:!!r.normalized}}async getIndexData(e,t){if(null==e.indices)return null;const r=await this.getAccessor(e.indices,t);if(r.isDenselyPacked)switch(r.componentType){case 5121:return new Uint8Array(r.raw,r.byteOffset,r.entryCount);case 5123:return new Uint16Array(r.raw,r.byteOffset,r.entryCount);case 5125:return new Uint32Array(r.raw,r.byteOffset,r.entryCount)}else switch(r.componentType){case 5121:return pe(this.wrapAccessor(d.d,r));case 5123:return pe(this.wrapAccessor(d.g,r));case 5125:return pe(this.wrapAccessor(d.B,r))}}async getPositionData(e,t){const r=this.errorContext;r.errorUnsupportedIf(null==e.attributes.POSITION,"No POSITION vertex data found.");const i=await this.getAccessor(e.attributes.POSITION,t);return r.errorUnsupportedIf(5126!==i.componentType,"Expected type FLOAT for POSITION vertex attribute, but found "+Ne[i.componentType]),r.errorUnsupportedIf(3!==i.componentCount,"POSITION vertex attribute must have 3 components, but found "+i.componentCount.toFixed()),this.wrapAccessor(d.i,i)}async getNormalData(e,t){const r=this.errorContext;r.assert(null!=e.attributes.NORMAL,"No NORMAL vertex data found.");const i=await this.getAccessor(e.attributes.NORMAL,t);return r.errorUnsupportedIf(5126!==i.componentType,"Expected type FLOAT for NORMAL vertex attribute, but found "+Ne[i.componentType]),r.errorUnsupportedIf(3!==i.componentCount,"NORMAL vertex attribute must have 3 components, but found "+i.componentCount.toFixed()),this.wrapAccessor(d.i,i)}async getTangentData(e,t){const r=this.errorContext;r.assert(null!=e.attributes.TANGENT,"No TANGENT vertex data found.");const i=await this.getAccessor(e.attributes.TANGENT,t);return r.errorUnsupportedIf(5126!==i.componentType,"Expected type FLOAT for TANGENT vertex attribute, but found "+Ne[i.componentType]),r.errorUnsupportedIf(4!==i.componentCount,"TANGENT vertex attribute must have 4 components, but found "+i.componentCount.toFixed()),new d.c(i.raw,i.byteOffset,i.byteStride,i.byteOffset+i.byteStride*i.entryCount)}async getTextureCoordinates(e,t){const r=this.errorContext;r.assert(null!=e.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found.");const i=await this.getAccessor(e.attributes.TEXCOORD_0,t);return r.errorUnsupportedIf(2!==i.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+i.componentCount.toFixed()),5126===i.componentType?this.wrapAccessor(d.u,i):(r.errorUnsupportedIf(!i.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),function(e){switch(e.componentType){case 5120:return new d.V(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5121:return new d.A(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5122:return new d.q(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5123:return new d.w(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5125:return new d.F(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5126:return new d.u(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);default:return void(0,u.n)(e.componentType)}}(i))}async getVertexColors(e,t){const r=this.errorContext;r.assert(null!=e.attributes.COLOR_0,"No COLOR_0 vertex data found.");const i=await this.getAccessor(e.attributes.COLOR_0,t);if(r.errorUnsupportedIf(4!==i.componentCount&&3!==i.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+i.componentCount.toFixed()),4===i.componentCount){if(5126===i.componentType)return this.wrapAccessor(d.c,i);if(5121===i.componentType)return this.wrapAccessor(d.x,i);if(5123===i.componentType)return this.wrapAccessor(d.L,i)}else if(3===i.componentCount){if(5126===i.componentType)return this.wrapAccessor(d.i,i);if(5121===i.componentType)return this.wrapAccessor(d.O,i);if(5123===i.componentType)return this.wrapAccessor(d.E,i)}r.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+Ne[i.componentType])}hasPositions(e){return void 0!==e.attributes.POSITION}hasNormals(e){return void 0!==e.attributes.NORMAL}hasVertexColors(e){return void 0!==e.attributes.COLOR_0}hasTextureCoordinates(e){return void 0!==e.attributes.TEXCOORD_0}hasTangents(e){return void 0!==e.attributes.TANGENT}async getMaterial(e,t,r){const i=this.errorContext;let s=this.materialCache.get(e.material);if(!s){const n=null!=e.material?Ee(this.json.materials[e.material]):Ee(),o=n.pbrMetallicRoughness,a=this.hasVertexColors(e);let l,u,c,h,p;o.baseColorTexture&&(i.errorUnsupportedIf(0!==(o.baseColorTexture.texCoord||0),"Only TEXCOORD with index 0 is supported."),l=await this.getTexture(o.baseColorTexture.index,t)),n.normalTexture&&(0!==(n.normalTexture.texCoord||0)?i.warnUnsupported("Only TEXCOORD with index 0 is supported for the normal map texture."):u=await this.getTexture(n.normalTexture.index,t)),n.occlusionTexture&&r&&(0!==(n.occlusionTexture.texCoord||0)?i.warnUnsupported("Only TEXCOORD with index 0 is supported for the occlusion texture."):c=await this.getTexture(n.occlusionTexture.index,t)),n.emissiveTexture&&r&&(0!==(n.emissiveTexture.texCoord||0)?i.warnUnsupported("Only TEXCOORD with index 0 is supported for the emissive texture."):h=await this.getTexture(n.emissiveTexture.index,t)),o.metallicRoughnessTexture&&r&&(0!==(o.metallicRoughnessTexture.texCoord||0)?i.warnUnsupported("Only TEXCOORD with index 0 is supported for the metallicRoughness texture."):p=await this.getTexture(o.metallicRoughnessTexture.index,t));const d=null!=e.material?e.material:-1;s={alphaMode:n.alphaMode,alphaCutoff:n.alphaCutoff,color:o.baseColorFactor,doubleSided:!!n.doubleSided,colorTexture:l,normalTexture:u,name:n.name,id:d,occlusionTexture:c,emissiveTexture:h,emissiveFactor:n.emissiveFactor,metallicFactor:o.metallicFactor,roughnessFactor:o.roughnessFactor,metallicRoughnessTexture:p,vertexColors:a,ESRI_externalColorMixMode:n.extras.ESRI_externalColorMixMode}}return s}async getTexture(e,t){const r=this.errorContext,i=this.json.textures[e],s=(e=>({...Ie,...e}))(null!=i.sampler?this.json.samplers[i.sampler]:{});r.errorUnsupportedIf(null==i.source,"Source is expected to be defined for a texture.");const n=this.json.images[i.source];let o=this.textureCache.get(e);if(!o){let i;if(n.uri)i=await this.context.loadImage(this.resolveUri(n.uri),t);else{r.errorUnsupportedIf(null==n.bufferView,"Image bufferView must be defined."),r.errorUnsupportedIf(null==n.mimeType,"Image mimeType must be defined.");const e=this.json.bufferViews[n.bufferView],s=await this.getBuffer(e.buffer,t);r.errorUnsupportedIf(null!=e.byteStride,"byteStride not supported for image buffer"),i=await async function(e,t){return new Promise(((r,i)=>{const s=new Blob([e],{type:t}),n=URL.createObjectURL(s),o=new Image;o.addEventListener("load",(()=>{URL.revokeObjectURL(n),"decode"in o?o.decode().then((()=>r(o)),(()=>r(o))):r(o)})),o.addEventListener("error",(e=>{URL.revokeObjectURL(n),i(e)})),o.src=n}))}(new Uint8Array(s.buffer,s.byteOffset+(e.byteOffset||0),e.byteLength),n.mimeType)}const a=e=>33071===e||33648===e||10497===e,l=e=>(r.error(`Unexpected TextureSampler WrapMode: ${e}. Using default REPEAT(10497).`),10497);o={data:i,wrapS:a(s.wrapS)?s.wrapS:l(s.wrapS),wrapT:a(s.wrapT)?s.wrapT:l(s.wrapT),minFilter:s.minFilter,name:n.name,id:e},this.textureCache.set(e,o)}return o}getNodeTransform(e){if(void 0===e)return Re;let t=this.nodeTransformCache.get(e);if(!t){const r=this.getNodeTransform(this.getNodeParent(e)),s=this.json.nodes[e];s.matrix?t=(0,h.e)((0,i.e)(),r,s.matrix):s.translation||s.rotation||s.scale?(t=(0,i.r)(r),s.translation&&(0,h.c)(t,t,s.translation),s.rotation&&(Fe[3]=(0,p.I)(Fe,s.rotation),(0,h.f)(t,t,Fe[3],Fe)),s.scale&&(0,h.i)(t,t,s.scale)):t=r,this.nodeTransformCache.set(e,t)}return t}wrapAccessor(e,t){return new e(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*(t.entryCount-1)+t.componentByteSize*t.componentCount)}resolveUri(e){return(0,n.T)(e,this.baseUri)}getNodeParent(e){return this.nodeParentMap.get(e)}checkVersionSupported(){const e=c.r.parse(this.json.asset.version,"glTF");Pe.validate(e)}checkRequiredExtensionsSupported(){const e=this.json,t=this.errorContext;e.extensionsRequired&&0!==e.extensionsRequired.length&&t.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+e.extensionsRequired.join(", "))}computeNodeParents(){this.json.nodes.forEach(((e,t)=>{e.children&&e.children.forEach((e=>{this.nodeParentMap.set(e,t)}))}))}}const Pe=new c.r(2,0,"glTF"),Re=(0,h.g)((0,i.e)(),Math.PI/2),Fe=(0,p.a)(),Ce={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},Le={5120:1,5121:1,5122:2,5123:2,5126:4,5125:4};async function ke(e){return new Promise(((t,r)=>{const i=new Blob([e]),s=new FileReader;s.onload=()=>{const e=s.result;t(JSON.parse(e))},s.onerror=e=>{r(e)},s.readAsText(i)}))}const Ne={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"};let je=0;async function De(e,t,r={},s=!0){const n=await Ae.load(e,qe,t,r),o="gltf_"+je++,a={lods:[],materials:new Map,textures:new Map,meta:Ue(n)},u=!(!n.json.asset.extras||"symbolResource"!==n.json.asset.extras.ESRI_type);return await Ve(n,(async(e,t,u,c)=>{const h=void 0!==e.mode?e.mode:4,p=4===h||5===h||6===h?h:null;if((0,l.t)(p))return void qe.warnUnsupported("Unsupported primitive mode ("+$e[h]+"). Skipping primitive.");if(!n.hasPositions(e))return void qe.warn("Skipping primitive without POSITION vertex attribute.");const d=await n.getMaterial(e,r,s),y={transform:(0,i.r)(t),attributes:{position:await n.getPositionData(e,r),normal:null,texCoord0:null,color:null,tangent:null},indices:await n.getIndexData(e,r),primitiveType:p,material:ze(a,d,o)};n.hasNormals(e)&&(y.attributes.normal=await n.getNormalData(e,r)),n.hasTangents(e)&&(y.attributes.tangent=await n.getTangentData(e,r)),n.hasTextureCoordinates(e)&&(y.attributes.texCoord0=await n.getTextureCoordinates(e,r)),n.hasVertexColors(e)&&(y.attributes.color=await n.getVertexColors(e,r));let f=null;(0,l.r)(a.meta)&&(0,l.r)(a.meta.ESRI_lod)&&"screenSpaceRadius"===a.meta.ESRI_lod.metric&&(f=a.meta.ESRI_lod.thresholds[u]),a.lods[u]=a.lods[u]||{parts:[],name:c,lodThreshold:f},a.lods[u].parts.push(y)})),{model:a,meta:{isEsriSymbolResource:u,uri:n.uri},customMeta:{}}}function Ue(e){const t=e.json;let r=null;return t.nodes.forEach((e=>{const t=e.extras;(0,l.r)(t)&&(t.ESRI_proxyEllipsoid||t.ESRI_lod)&&(r=t)})),r}async function Ve(e,t){const r=e.json,i=r.scenes[r.scene||0].nodes,s=i.length>1;for(const e of i){const t=r.nodes[e],i=[n(e,0)];if(Be(t)&&!s){const e=t.extensions.MSFT_lod.ids;i.push(...e.map(((e,t)=>n(e,t+1))))}await Promise.all(i)}async function n(i,s){const o=r.nodes[i],a=e.getNodeTransform(i);if(qe.warnUnsupportedIf(null!=o.weights,"Morph targets are not supported."),null!=o.mesh){const e=r.meshes[o.mesh];for(const r of e.primitives)await t(r,a,s,e.name)}for(const e of o.children||[])await n(e,s)}}function Be(e){return e.extensions&&e.extensions.MSFT_lod&&Array.isArray(e.extensions.MSFT_lod.ids)}function ze(e,t,r){const i=t=>{const i=`${r}_tex_${t&&t.id}${t&&t.name?"_"+t.name:""}`;if(t&&!e.textures.has(i)){const r=function(e,t={}){return{data:e,parameters:{wrap:{s:10497,t:10497,...t.wrap},noUnpackFlip:!0,mipmap:!1,...t}}}(t.data,{wrap:{s:t.wrapS,t:t.wrapT},mipmap:Ge.some((e=>e===t.minFilter)),noUnpackFlip:!0});e.textures.set(i,r)}return i},s=`${r}_mat_${t.id}_${t.name}`;if(!e.materials.has(s)){const r=function(e={}){return{color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply",...e}}({color:[t.color[0],t.color[1],t.color[2]],opacity:t.color[3],alphaMode:t.alphaMode,alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,colorMixMode:t.ESRI_externalColorMixMode,textureColor:t.colorTexture?i(t.colorTexture):void 0,textureNormal:t.normalTexture?i(t.normalTexture):void 0,textureOcclusion:t.occlusionTexture?i(t.occlusionTexture):void 0,textureEmissive:t.emissiveTexture?i(t.emissiveTexture):void 0,textureMetallicRoughness:t.metallicRoughnessTexture?i(t.metallicRoughnessTexture):void 0,emissiveFactor:[t.emissiveFactor[0],t.emissiveFactor[1],t.emissiveFactor[2]],metallicFactor:t.metallicFactor,roughnessFactor:t.roughnessFactor});e.materials.set(s,r)}return s}const qe=new class{error(e){throw new a.s("gltf-loader-error",e)}errorUnsupported(e){throw new a.s("gltf-loader-unsupported-feature",e)}errorUnsupportedIf(e,t){e&&this.errorUnsupported(t)}assert(e,t){e||this.error(t)}warn(e){_e.warn(e)}warnUnsupported(e){this.warn("[Unsupported Feature] "+e)}warnUnsupportedIf(e,t){e&&this.warnUnsupported(t)}},Ge=[9987,9985],$e=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"];function We(e,t=ee){return"number"==typeof e?t(e):(0,l.I)(e)||(0,l.K)(e)?new Uint32Array(e):e}function He(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,i=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;t+=1)t%2==0?(i[e++]=t,i[e++]=t+1,i[e++]=t+2):(i[e++]=t+1,i[e++]=t,i[e++]=t+2)}else{let t=0;for(let s=0;s<r;s+=1)if(s%2==0){const r=e[s],n=e[s+1],o=e[s+2];i[t++]=r,i[t++]=n,i[t++]=o}else{const r=e[s+1],n=e[s],o=e[s+2];i[t++]=r,i[t++]=n,i[t++]=o}}return i}function Je(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,i=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;++t)i[e++]=0,i[e++]=t+1,i[e++]=t+2;return i}{const t=e[0];let s=e[1],n=0;for(let o=0;o<r;++o){const r=e[o+2];i[n++]=t,i[n++]=s,i[n++]=r,s=r}return i}}const Ze=2.1},75200:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var i=r(80987),s=r(80219),n=r(20215);const o=1/(0,s.c)("mapview-transitions-duration");class a extends i.n{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,n.D)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,n.D)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var e;null==(e=this.parent)||e.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,r=this.computedOpacity;if(r===t)this.computedVisible=this.visible;else{const i=e*o;this.computedOpacity=r>t?Math.max(t,r-i):Math.min(t,r+i),this.computedVisible=this.computedOpacity>0;const s=t===this.computedOpacity;this.inFadeTransition=!s,s||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},7552:(e,t,r)=>{"use strict";r.r(t),r.d(t,{D:()=>R,E:()=>Q,a:()=>y,d:()=>E,e:()=>p,f:()=>W,i:()=>d,p:()=>v,t:()=>u,w:()=>I}),r(33807);var i=r(78082),s=r(65311),n=r(20868),o=r(78155),a=r(60816),l=r(80219);function u(e,t=0){const r=e.stride;return e.fieldNames.filter((t=>{const r=e.fields.get(t).optional;return!(r&&r.glPadding)})).map((i=>{const s=e.fields.get(i),n=s.constructor.ElementCount,o=c(s.constructor.ElementType),a=s.offset,l=!(!s.optional||!s.optional.glNormalized);return{name:i,stride:r,count:n,type:o,offset:a,normalized:l,divisor:t}}))}function c(e){const t=h[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const h={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126},p=(0,n.A)().vec3f("position").u16("componentIndex").u16("u16padding"),d=(0,n.A)().vec2u8("sideness"),y=u(d),f=(0,n.A)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0}),m=f.clone().vec3f("normal"),g=f.clone().vec3f("normalA").vec3f("normalB"),v=new Map([["position0",0],["position1",1],["componentIndex",2],["variantOffset",3],["variantStroke",4],["variantExtension",5],["normal",6],["normalA",6],["normalB",7],["sideness",8]]);class b{updateSettings(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?T:S}write(e,t,r){const i=this.edgeHashFunction(r);A.seed=i;const s=A.getIntRange(0,255),n=A.getIntRange(0,this.settings.variants-1),o=A.getFloat(),a=255*(.5*function(e,t){const r=e<0?-1:1;return Math.abs(e)**1.2*r}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7))+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,s),e.variantStroke.set(t,n),e.variantExtension.set(t,a)}trim(e,t){return e.slice(0,t)}}const w=new Float32Array(6),_=new Uint32Array(w.buffer),x=new Uint32Array(1);function S(e){const t=w;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],x[0]=5381;for(let e=0;e<_.length;e++)x[0]=31*x[0]+_[e];return x[0]}function T(e){const t=w;t[0]=M(e.position0[0]),t[1]=M(e.position0[1]),t[2]=M(e.position0[2]),t[3]=M(e.position1[0]),t[4]=M(e.position1[1]),t[5]=M(e.position1[2]),x[0]=5381;for(let e=0;e<_.length;e++)x[0]=31*x[0]+_[e];return x[0]}function M(e){return Math.round(1e4*e)/1e4}class E{constructor(){this.commonWriter=new b}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return m.createBuffer(e)}write(e,t,r){this.commonWriter.write(e,t,r),(0,a.u)(O,r.faceNormal0,r.faceNormal1),(0,a.j)(O,O),e.normal.setVec(t,O)}trim(e,t){return this.commonWriter.trim(e,t)}}E.Layout=m,E.glLayout=u(m,1);class I{constructor(){this.commonWriter=new b}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return g.createBuffer(e)}write(e,t,r){this.commonWriter.write(e,t,r),e.normalA.setVec(t,r.faceNormal0),e.normalB.setVec(t,r.faceNormal1)}trim(e,t){return this.commonWriter.trim(e,t)}}I.Layout=g,I.glLayout=u(g,1);const O=(0,a.n)(),A=new o.R;function P(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:F(e.layout)}}function R(e){return function(e){const t=(0,n.A)();return t.stride=e.stride,t.fieldNames=e.fieldNames,e.fields.forEach((e=>t.fields.set(e[0],{...e[1],constructor:k(e[1].constructor)}))),t}(e.layout).createView(e.buffer)}function F(e){const t=new Array;return e.fields.forEach(((e,r)=>{const i={...e,constructor:L(e.constructor)};t.push([r,i])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}const C=[s.y,s.u,s.i,s.c,s.l,s.p,s.o,s.m,s.T,s.h,s.a,s.b,s.d,s.A,s.O,s.x,s.g,s.w,s.E,s.L,s.B,s.F,s.I,s.U,s.j,s.V,s.M,s.S,s.k,s.q,s.v,s.z,s.C,s.D,s.G,s.H];function L(e){return`${e.ElementType}_${e.ElementCount}`}function k(e){return N.get(e)}const N=new Map;function j(e,t,r){const i=t/3,s=new Uint32Array(r+1),n=new Uint32Array(r+1),o=(e,t)=>{e<t?s[e+1]++:n[t+1]++};for(let t=0;t<i;t++){const r=e[3*t],i=e[3*t+1],s=e[3*t+2];o(r,i),o(i,s),o(s,r)}let a=0,l=0;for(let e=0;e<r;e++){const t=s[e+1],r=n[e+1];s[e+1]=a,n[e+1]=l,a+=t,l+=r}const u=new Uint32Array(6*i),c=s[r],h=(e,t,r)=>{if(e<t){const i=s[e+1]++;u[2*i]=t,u[2*i+1]=r}else{const i=n[t+1]++;u[2*c+2*i]=e,u[2*c+2*i+1]=r}};for(let t=0;t<i;t++){const r=e[3*t],i=e[3*t+1],s=e[3*t+2];h(r,i,t),h(i,s,t),h(s,r,t)}const p=(e,t)=>{const r=2*e,i=t-e;for(let e=1;e<i;e++){const t=u[r+2*e],i=u[r+2*e+1];let s=e-1;for(;s>=0&&u[r+2*s]>t;s--)u[r+2*s+2]=u[r+2*s],u[r+2*s+3]=u[r+2*s+1];u[r+2*s+2]=t,u[r+2*s+3]=i}};for(let e=0;e<r;e++)p(s[e],s[e+1]),p(c+n[e],c+n[e+1]);const d=new Int32Array(3*i),y=(t,r)=>t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1,f=(e,t)=>{const r=y(e,t);d[3*t+r]=-1},m=(e,t,r,i)=>{const s=y(e,t);d[3*t+s]=i;const n=y(r,i);d[3*i+n]=t};for(let e=0;e<r;e++){let t=s[e];const r=s[e+1];let i=n[e];const o=n[e+1];for(;t<r&&i<o;){const r=u[2*t],s=u[2*c+2*i];r===s?(m(e,u[2*t+1],s,u[2*c+2*i+1]),t++,i++):r<s?(f(e,u[2*t+1]),t++):(f(s,u[2*c+2*i+1]),i++)}for(;t<r;)f(e,u[2*t+1]),t++;for(;i<o;)f(u[2*c+2*i],u[2*c+2*i+1]),i++}return d}C.forEach((e=>N.set(L(e),e)));const D=-1;function U(e,t){return e.cosAngle<t}function V(e,t){return e.cosAngle>t}function B(e,t){const r=(0,a.x)(e.cosAngle),i=q.fwd,s=q.ortho;return(0,a.H)(i,e.position1,e.position0),r*((0,a.z)((0,a._)(s,e.faceNormal0,e.faceNormal1),i)>0?-1:1)>t}function z(e){const t=e.faces.length/3,r=e.vertices.position,i=e.faces,s=G.v0,n=G.v1,o=G.v2,l=new Float32Array(3*t);for(let e=0;e<t;e++){const t=i[3*e+0],u=i[3*e+1],c=i[3*e+2];r.getVec(t,s),r.getVec(u,n),r.getVec(c,o),(0,a.c)(n,n,s),(0,a.c)(o,o,s),(0,a._)(s,n,o),(0,a.j)(s,s),l[3*e+0]=s[0],l[3*e+1]=s[1],l[3*e+2]=s[2]}return l}const q={edge:{position0:(0,a.n)(),position1:(0,a.n)(),faceNormal0:(0,a.n)(),faceNormal1:(0,a.n)(),componentIndex:0,cosAngle:0},ortho:(0,a.n)(),fwd:(0,a.n)()},G={v0:(0,a.n)(),v1:(0,a.n)(),v2:(0,a.n)()},$={anglePlanar:4,angleSignificantEdge:35};function W(e){const t=Z(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return X.updateSettings(e.writerSettings),Y.updateSettings(e.writerSettings),function(e,t,r,i=$){const s=e.vertices.position,n=e.vertices.componentIndex,u=(0,a.g)(i.anglePlanar),c=(0,a.g)(i.angleSignificantEdge),h=Math.cos(c),p=Math.cos(u),d=q.edge,y=d.position0,f=d.position1,m=d.faceNormal0,g=d.faceNormal1,v=z(e),b=function(e){const t=e.faces.length/3,r=e.faces,i=e.neighbors;let s=0;for(let e=0;e<t;e++){const t=i[3*e+0],n=i[3*e+1],o=i[3*e+2],a=r[3*e+0],l=r[3*e+1],u=r[3*e+2];s+=t===D||a<l?1:0,s+=n===D||l<u?1:0,s+=o===D||u<a?1:0}const n=new Int32Array(4*s);let o=0;for(let e=0;e<t;e++){const t=i[3*e+0],s=i[3*e+1],a=i[3*e+2],l=r[3*e+0],u=r[3*e+1],c=r[3*e+2];(t===D||l<u)&&(n[o++]=l,n[o++]=u,n[o++]=e,n[o++]=t),(s===D||u<c)&&(n[o++]=u,n[o++]=c,n[o++]=e,n[o++]=s),(a===D||c<l)&&(n[o++]=c,n[o++]=l,n[o++]=e,n[o++]=a)}return n}(e),w=b.length/4,_=t.allocate(w);let x=0;const S=w,T=r.allocate(S);let M=0,E=0,I=0;const O=(0,o.T)(0,w),A=new Float32Array(w);(0,l.M)(A,((e,t,r)=>{s.getVec(b[4*t+0],y),s.getVec(b[4*t+1],f),r[t]=(0,a.q)(y,f)})),O.sort(((e,t)=>A[t]-A[e]));const P=new Array,R=new Array;for(let e=0;e<w;e++){const i=O[e],o=A[i],l=b[4*i+0],c=b[4*i+1],w=b[4*i+2],S=b[4*i+3],F=S===D;if(s.getVec(l,y),s.getVec(c,f),F)(0,a.a)(m,v[3*w+0],v[3*w+1],v[3*w+2]),(0,a.h)(g,m),d.componentIndex=n.get(l),d.cosAngle=(0,a.z)(m,g);else{if((0,a.a)(m,v[3*w+0],v[3*w+1],v[3*w+2]),(0,a.a)(g,v[3*S+0],v[3*S+1],v[3*S+2]),d.componentIndex=n.get(l),d.cosAngle=(0,a.z)(m,g),V(d,p))continue;d.cosAngle<-.9999&&(0,a.h)(g,m)}E+=o,I++,F||U(d,h)?(t.write(_,x++,d),P.push(o)):B(d,u)&&(r.write(T,M++,d),R.push(o))}const F=new Float32Array(P.reverse()),C=new Float32Array(R.reverse());return{regular:{instancesData:t.trim(_,x),lodInfo:{lengths:F}},silhouette:{instancesData:r.trim(T,M),lodInfo:{lengths:C}},averageEdgeLength:E/I}}(t,X,Y)}function H(e){return{data:p.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function J(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:P(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:P(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function Z(e,t,r,s){if(t)return{faces:r,facesLength:s,neighbors:j(r,s,e.count),vertices:e};const n=(0,i.n)(e.buffer,e.stride/4,{originalIndices:r,originalIndicesLength:s}),o=j(n.indices,s,n.uniqueCount);return{faces:n.indices,facesLength:n.indices.length,neighbors:o,vertices:p.createView(n.buffer)}}const X=new E,Y=new I;var Q=Object.freeze({__proto__:null,work:W,wrappedWork:async function(e){const t=H(e),r=W(t),i=[t.data.buffer];return{result:J(r,i),transferList:i}}})},74869:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var i=r(78155),s=r(80987),n=r(20215),o=r(80219),a=r(79506),l=r(88903),u=r(4169),c=r(82361),h=r(41290),p=r(9947),d=r(54223),y=r(13895),f=r(15576),m=r(49293);r(98548),r(20736),r(92858),r(31531),r(65352),r(62121),r(28190),r(25290),r(58404),r(21779),r(83731),r(40130),r(97325),r(3629),r(36845),r(8725),r(29832),r(91236),r(52957),r(29126),r(4618),r(61888),r(9612),r(52109),r(6585),r(3621),r(63358),r(76326),r(26779);const g=o.n.getLogger("esri.layers.ElevationLayer");let v=class extends((0,p.s)((0,d.p)((0,y.l)((0,f.w)((0,a.l)(h.b)))))){constructor(...e){super(...e),this.copyright=null,this.heightModelInfo=null,this.path=null,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=(0,m.n)()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}destroy(){this._lercDecoder=(0,o.h)(this._lercDecoder)}set minScale(e){this.constructed&&g.warn(`${this.declaredClass}.minScale support has been removed (since 4.5)`)}get minScale(){}set maxScale(e){this.constructed&&g.warn(`${this.declaredClass}.maxScale support has been removed (since 4.5)`)}get maxScale(){}readVersion(e,t){let r=t.currentVersion;return r||(r=9.3),r}load(e){const t=(0,o.r)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:e=>{for(let t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new n.s("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).catch(n.w).then((()=>this._fetchImageService(t)))),Promise.resolve(this)}fetchTile(e,t,r,i){const a=(0,o.r)((i=i||{signal:null}).signal)?i.signal:i.signal=(0,n.h)().signal,l={responseType:"array-buffer",signal:a},u={noDataValue:i.noDataValue,returnFileInfo:!0};return this.load().then((()=>this._fetchTileAvailability(e,t,r,i))).then((()=>(0,s.L)(this.getTileUrl(e,t,r),l))).then((e=>this._lercDecoder.decode(e.data,u,a))).then((e=>({values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue})))}getTileUrl(e,t,r){const i=!this.tilemapCache&&this.supportsBlankTile,n=(0,s.C)({...this.parsedUrl.query,blankTile:!i&&null});return`${this.parsedUrl.path}/tile/${e}/${t}/${r}${n?"?"+n:""}`}async queryElevation(e,t){const{ElevationQuery:i}=await r.e(201).then(r.bind(r,80201));return(0,n.a)(t),(new i).query(this,e,t)}async createElevationSampler(e,t){const{ElevationQuery:i}=await r.e(201).then(r.bind(r,80201));return(0,n.a)(t),(new i).createSampler(this,e,t)}_fetchTileAvailability(e,t,r,i){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r,i):Promise.resolve("unknown")}async _fetchImageService(e){if(this.sourceJSON)return this.sourceJSON;const t={query:{f:"json",...this.parsedUrl.query},responseType:"json",signal:e},r=await(0,s.L)(this.parsedUrl.path,t);r.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r.data,this.read(r.data,{origin:"service",url:this.parsedUrl})}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};(0,i.e)([(0,l.y)({json:{read:{source:"copyrightText"}}})],v.prototype,"copyright",void 0),(0,i.e)([(0,l.y)({readOnly:!0,type:c.v})],v.prototype,"heightModelInfo",void 0),(0,i.e)([(0,l.y)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],v.prototype,"path",void 0),(0,i.e)([(0,l.y)({type:["show","hide"]})],v.prototype,"listMode",void 0),(0,i.e)([(0,l.y)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],v.prototype,"minScale",null),(0,i.e)([(0,l.y)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],v.prototype,"maxScale",null),(0,i.e)([(0,l.y)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],v.prototype,"opacity",void 0),(0,i.e)([(0,l.y)({type:["ArcGISTiledElevationServiceLayer"]})],v.prototype,"operationalLayerType",void 0),(0,i.e)([(0,l.y)()],v.prototype,"sourceJSON",void 0),(0,i.e)([(0,l.y)({json:{read:!1},value:"elevation",readOnly:!0})],v.prototype,"type",void 0),(0,i.e)([(0,l.y)(y.p)],v.prototype,"url",void 0),(0,i.e)([(0,l.y)()],v.prototype,"version",void 0),(0,i.e)([(0,u.e)("version",["currentVersion"])],v.prototype,"readVersion",null),v=(0,i.e)([(0,l.n)("esri.layers.ElevationLayer")],v),v.prototype.fetchTile.__isDefault__=!0;const b=v},92722:(e,t,r)=>{"use strict";r.d(t,{h:()=>p,u:()=>h}),r(80987);var i=r(80219),s=r(65352),n=r(58404),o=r(98548),a=r(20736);const l=i.n.getLogger("esri.layers.support.ElevationSampler");class u{queryElevation(e){return p(e.clone(),this)}on(){return f}projectIfRequired(e,t){return d(e,t)}}class c extends u{constructor(e,t,r){super(),this.tile=e,this.noDataValue=r,this.extent=(0,n.o)(e.tile.extent,t.spatialReference);const i=(0,s.G)(t.spatialReference),o=t.lodAt(e.tile.level).resolution*i;this.demResolution={min:o,max:o}}get spatialReference(){return this.extent.spatialReference}contains(e){const t=this.projectIfRequired(e,this.spatialReference);return(0,o.t)(this.extent,t)}elevationAt(e){const t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;if(!this.contains(e)){const t=this.extent,r=`${t.xmin}, ${t.ymin}, ${t.xmax}, ${t.ymax}`;l.warn("#elevationAt()",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler extent (${r})`)}return this.tile.sample(t.x,t.y)}}class h extends u{constructor(e,t,r){let i;super(),"number"==typeof t?(this.noDataValue=t,i=null):(i=t,this.noDataValue=r),this.samplers=i?e.map((e=>new c(e,i,this.noDataValue))):e;const s=this.samplers[0];if(s){this.extent=s.extent.clone();const{min:e,max:t}=s.demResolution;this.demResolution={min:e,max:t};for(let e=1;e<this.samplers.length;e++){const t=this.samplers[e];this.extent.union(t.extent),this.demResolution.min=Math.min(this.demResolution.min,t.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,t.demResolution.max)}}else this.extent=(0,n.o)((0,n.i)(),i.spatialReference),this.demResolution={min:0,max:0}}get spatialReference(){return this.extent.spatialReference}elevationAt(e){const t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;for(const e of this.samplers)if(e.contains(t))return e.elevationAt(t);return l.warn("#elevationAt()",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler`),null}}function p(e,t){const r=d(e,t.spatialReference);if(!r)return null;switch(e.type){case"point":!function(e,t,r){e.z=(0,i.q)(r.elevationAt(t),0)}(e,r,t);break;case"polyline":!function(e,t,r){y.spatialReference=t.spatialReference;const s=e.hasM&&!e.hasZ;for(let n=0;n<e.paths.length;n++){const o=e.paths[n],a=t.paths[n];for(let e=0;e<o.length;e++){const t=o[e],n=a[e];y.x=n[0],y.y=n[1],s&&(t[3]=t[2]),t[2]=(0,i.q)(r.elevationAt(y),0)}}e.hasZ=!0}(e,r,t);break;case"multipoint":!function(e,t,r){y.spatialReference=t.spatialReference;const s=e.hasM&&!e.hasZ;for(let n=0;n<e.points.length;n++){const o=e.points[n],a=t.points[n];y.x=a[0],y.y=a[1],s&&(o[3]=o[2]),o[2]=(0,i.q)(r.elevationAt(y),0)}e.hasZ=!0}(e,r,t)}return e}function d(e,t){const r=e.spatialReference;return r.equals(t)?e:(0,a.x)(r,t)?(0,a.g)(e,t):(l.error(`Cannot project geometry spatial reference (wkid:${r.wkid}) to elevation sampler spatial reference (wkid:${t.wkid})`),null)}const y=new a.b,f={remove(){}}},16040:(e,t,r)=>{"use strict";r.r(t),r.d(t,{F:()=>xt,W:()=>_t,i:()=>nt});var i,s=r(78155),n=r(82906),o=r(34396),a=r(94449),l=r(80987),u=r(81135),c=r(40130),h=r(20215),p=r(83731),d=r(80219),y=r(31531),f=r(79506),m=r(88903),g=r(20736),v=r(4169),b=r(52957),w=r(98548),_=r(82361),x=r(92858),S=r(41290),T=r(73574),M=r(26779),E=r(85289),I=r(98843),O=r(52737),A=r(98420),P=r(54223),R=r(51218),F=r(21793),C=r(13895),L=r(15576),k=r(28941),N=r(19438),j=r(15022),D=r(8725),U=r(92758),V=r(2570),B=r(71666),z=r(72257),q=r(65352),G=r(78435),$=r(56416),W=r(18143),H=r(41822),J=r(91790),Z=r(99987);let X=i=class extends s.a{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new i({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],X.prototype,"expression",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],X.prototype,"name",void 0),(0,s.e)([(0,m.y)({type:["boolean"],json:{write:!0}})],X.prototype,"returnType",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],X.prototype,"title",void 0),X=i=(0,s.e)([(0,m.n)("esri.form.ExpressionInfo")],X);var Y=X;let Q=class extends s.a{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Q.prototype,"description",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Q.prototype,"label",void 0),(0,s.e)([(0,m.y)()],Q.prototype,"type",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Q.prototype,"visibilityExpression",void 0),Q=(0,s.e)([(0,m.n)("esri.form.elements.Element")],Q);var K,ee=Q;let te=K=class extends s.a{constructor(e){super(e),this.type=null}clone(){return new K({type:this.type})}};(0,s.e)([(0,m.y)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],te.prototype,"type",void 0),te=K=(0,s.e)([(0,m.n)("esri.form.elements.inputs.AttachmentInput")],te);var re,ie=te;let se=re=class extends ee{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new re({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],se.prototype,"attachmentKeyword",void 0),(0,s.e)([(0,m.y)({type:Boolean,json:{write:!0}})],se.prototype,"editable",void 0),(0,s.e)([(0,m.y)({type:ie,json:{read:{source:"inputType"},write:{target:"inputType"}}})],se.prototype,"input",void 0),(0,s.e)([(0,m.y)({type:["attachment"],json:{read:!1,write:!0}})],se.prototype,"type",void 0),se=re=(0,s.e)([(0,m.n)("esri.form.elements.AttachmentElement")],se);var ne=se;let oe=class extends s.a{constructor(e){super(e),this.type=null}};(0,s.e)([(0,m.y)()],oe.prototype,"type",void 0),oe=(0,s.e)([(0,m.n)("esri.form.elements.inputs.Input")],oe);var ae=oe;let le=class extends ae{constructor(e){super(e),this.maxLength=null,this.minLength=0}};(0,s.e)([(0,m.y)({type:Number,json:{write:!0}})],le.prototype,"maxLength",void 0),(0,s.e)([(0,m.y)({type:Number,json:{write:!0}})],le.prototype,"minLength",void 0),le=(0,s.e)([(0,m.n)("esri.form.elements.inputs.TextInput")],le);var ue,ce=le;let he=ue=class extends ce{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new ue({maxLength:this.maxLength,minLength:this.minLength})}};(0,s.e)([(0,m.y)({type:["barcode-scanner"],json:{read:!1,write:!0}})],he.prototype,"type",void 0),he=ue=(0,s.e)([(0,m.n)("esri.form.elements.inputs.BarcodeScannerInput")],he);var pe,de=he;let ye=pe=class extends ae{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new pe({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],ye.prototype,"noValueOptionLabel",void 0),(0,s.e)([(0,m.y)({type:Boolean,json:{write:!0}})],ye.prototype,"showNoValueOption",void 0),(0,s.e)([(0,m.y)({type:["combo-box"],json:{read:!1,write:!0}})],ye.prototype,"type",void 0),ye=pe=(0,s.e)([(0,m.n)("esri.form.elements.inputs.ComboBoxInput")],ye);var fe,me=ye;function ge(e){return null!=e?new Date(e):null}function ve(e){return e?e.getTime():null}let be=fe=class extends ae{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return ge(t.max)}writeMax(e,t){t.max=ve(e)}readMin(e,t){return ge(t.min)}writeMin(e,t){t.min=ve(e)}clone(){return new fe({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};(0,s.e)([(0,m.y)({type:Boolean,json:{write:!0}})],be.prototype,"includeTime",void 0),(0,s.e)([(0,m.y)({type:Date,json:{type:Number,write:!0}})],be.prototype,"max",void 0),(0,s.e)([(0,v.e)("max")],be.prototype,"readMax",null),(0,s.e)([(0,s.o)("max")],be.prototype,"writeMax",null),(0,s.e)([(0,m.y)({type:Date,json:{type:Number,write:!0}})],be.prototype,"min",void 0),(0,s.e)([(0,v.e)("min")],be.prototype,"readMin",null),(0,s.e)([(0,s.o)("min")],be.prototype,"writeMin",null),(0,s.e)([(0,m.y)({type:["datetime-picker"],json:{read:!1,write:!0}})],be.prototype,"type",void 0),be=fe=(0,s.e)([(0,m.n)("esri.form.elements.inputs.DateTimePickerInput")],be);var we,_e=be;let xe=we=class extends ae{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new we({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],xe.prototype,"noValueOptionLabel",void 0),(0,s.e)([(0,m.y)({type:Boolean,json:{write:!0}})],xe.prototype,"showNoValueOption",void 0),(0,s.e)([(0,m.y)({type:["radio-buttons"],json:{read:!1,write:!0}})],xe.prototype,"type",void 0),xe=we=(0,s.e)([(0,m.n)("esri.form.elements.inputs.RadioButtonsInput")],xe);var Se,Te=xe;let Me=Se=class extends ae{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Se({offValue:this.offValue,onValue:this.onValue})}};(0,s.e)([(0,m.y)({type:[String,Number],json:{write:!0}})],Me.prototype,"offValue",void 0),(0,s.e)([(0,m.y)({type:[String,Number],json:{write:!0}})],Me.prototype,"onValue",void 0),(0,s.e)([(0,m.y)({type:["switch"],json:{read:!1,write:!0}})],Me.prototype,"type",void 0),Me=Se=(0,s.e)([(0,m.n)("esri.form.elements.inputs.SwitchInput")],Me);var Ee,Ie=Me;let Oe=Ee=class extends ce{constructor(e){super(e),this.type="text-area"}clone(){return new Ee({maxLength:this.maxLength,minLength:this.minLength})}};(0,s.e)([(0,m.y)({type:["text-area"],json:{read:!1,write:!0}})],Oe.prototype,"type",void 0),Oe=Ee=(0,s.e)([(0,m.n)("esri.form.elements.inputs.TextAreaInput")],Oe);var Ae,Pe=Oe;let Re=Ae=class extends ce{constructor(e){super(e),this.type="text-box"}clone(){return new Ae({maxLength:this.maxLength,minLength:this.minLength})}};(0,s.e)([(0,m.y)({type:["text-box"],json:{read:!1,write:!0}})],Re.prototype,"type",void 0),Re=Ae=(0,s.e)([(0,m.n)("esri.form.elements.inputs.TextBoxInput")],Re);const Fe={base:ae,key:"type",typeMap:{"barcode-scanner":de,"combo-box":me,"datetime-picker":_e,"radio-buttons":Te,switch:Ie,"text-area":Pe,"text-box":Re}};var Ce;let Le=Ce=class extends ee{constructor(e){super(e),this.domain=null,this.editable=!0,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field"}clone(){return new Ce({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}};(0,s.e)([(0,m.y)({types:b.u,json:{read:{reader:b.d},write:!0}})],Le.prototype,"domain",void 0),(0,s.e)([(0,m.y)({type:Boolean,json:{write:!0}})],Le.prototype,"editable",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Le.prototype,"fieldName",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Le.prototype,"hint",void 0),(0,s.e)([(0,m.y)({types:Fe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Le.prototype,"input",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Le.prototype,"requiredExpression",void 0),(0,s.e)([(0,m.y)({type:String,json:{read:!1,write:!0}})],Le.prototype,"type",void 0),Le=Ce=(0,s.e)([(0,m.n)("esri.form.elements.FieldElement")],Le);var ke,Ne=Le;let je=ke=class extends ee{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ke({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:(0,d.y)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,s.e)([(0,m.y)({type:Number,json:{write:!0}})],je.prototype,"displayCount",void 0),(0,s.e)([(0,m.y)({type:["list"],json:{write:!0}})],je.prototype,"displayType",void 0),(0,s.e)([(0,m.y)({type:Boolean,json:{write:!0}})],je.prototype,"editable",void 0),(0,s.e)([(0,m.y)({type:[n.c],json:{write:!0}})],je.prototype,"orderByFields",void 0),(0,s.e)([(0,m.y)({type:Number,json:{write:!0}})],je.prototype,"relationshipId",void 0),(0,s.e)([(0,m.y)({type:["relationship"],json:{read:!1,write:!0}})],je.prototype,"type",void 0),je=ke=(0,s.e)([(0,m.n)("esri.form.elements.RelationshipElement")],je);var De,Ue=je;function Ve(e){return{typesWithGroup:{base:ee,key:"type",typeMap:{attachment:ne,field:Ne,group:e,relationship:Ue}},typesWithoutGroup:{base:ee,key:"type",typeMap:{attachment:ne,field:Ne,relationship:Ue}}}}function Be(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>i[e.type])).map((e=>i[e.type].fromJSON(e)))}function ze(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>i[e.type])).map((e=>e.toJSON()))}function qe(e,t,r=!0){return e?e.map((e=>(0,m.w)(r?t.typesWithGroup:t.typesWithoutGroup,e))):null}let Ge=De=class extends ee{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return qe(e,$e,!1)}readElements(e,t){return Be(t.formElements,$e,!1)}writeElements(e,t){t.formElements=ze(e,$e,!1)}clone(){return new De({description:this.description,elements:(0,d.y)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,s.e)([(0,m.y)({json:{write:!0}})],Ge.prototype,"elements",void 0),(0,s.e)([(0,g.c)("elements")],Ge.prototype,"castElements",null),(0,s.e)([(0,v.e)("elements",["formElements"])],Ge.prototype,"readElements",null),(0,s.e)([(0,s.o)("elements")],Ge.prototype,"writeElements",null),(0,s.e)([(0,m.y)({type:["collapsed","expanded"],json:{write:!0}})],Ge.prototype,"initialState",void 0),(0,s.e)([(0,m.y)({type:String,json:{read:!1,write:!0}})],Ge.prototype,"type",void 0),Ge=De=(0,s.e)([(0,m.n)("esri.form.elements.GroupElement")],Ge);const $e=Ve(Ge);var We;const He=Ve(Ge);let Je=We=class extends s.a{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return qe(e,He)}readElements(e,t){return Be(t.formElements,He)}writeElements(e,t){t.formElements=ze(e,He)}clone(){return new We({description:this.description,expressionInfos:(0,d.y)(this.expressionInfos),elements:(0,d.y)(this.elements),title:this.title})}};(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Je.prototype,"description",void 0),(0,s.e)([(0,m.y)({json:{write:!0}})],Je.prototype,"elements",void 0),(0,s.e)([(0,g.c)("elements")],Je.prototype,"castElements",null),(0,s.e)([(0,v.e)("elements",["formElements"])],Je.prototype,"readElements",null),(0,s.e)([(0,s.o)("elements")],Je.prototype,"writeElements",null),(0,s.e)([(0,m.y)({type:[Y],json:{write:!0}})],Je.prototype,"expressionInfos",void 0),(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],Je.prototype,"title",void 0),Je=We=(0,s.e)([(0,m.n)("esri.form.FormTemplate")],Je);var Ze=Je;let Xe=0;const Ye=d.n.getLogger("esri.layers.graphics.sources.MemorySource");let Qe=class extends(l.f.LoadableMixin((0,l.d)(c.L))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=(0,d.r)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;null==(e=this._connection)||e.close(),this._connection=null}get workerGeometryType(){var e;const t=null==(e=this.layer)?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);(0,E.t)(e,this.layer.spatialReference,r);const i=O.default.fromJSON(r);if(!this._requiresClientGraphicMapping())return i;const s=this.layer.objectIdField;for(const e of i.features){const t=e.attributes[s],r=this._idToClientGraphic.get(t);r&&(e.geometry=r.geometry)}return i.geometryType=this.layer.geometryType,i}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new h.s("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return(0,E.t)(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)))}queryObjectIds(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t)))}queryExtent(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t))).then((e=>({count:e.count,extent:w.M.fromJSON(e.extent)})))}querySnapping(e,t={}){return this.load(t).then((()=>this._connection.invoke("querySnapping",e,t)))}async _applyEdits(e){if(!this._connection)throw new h.s("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const i=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const n=e=>"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[t]?e.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const t of e.deleteFeatures){const e=n(t);null!=e&&i.push(e)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(const t of e.updateFeatures)if(s.push(this._serializeFeature(t)),o){const e=n(t);null!=e&&o.set(e,t)}(0,I.l)(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:i});return this.fullExtent=a,r&&r.finish(l.uidToObjectId),this._updateClientGraphicIds(o,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if("mesh"!==this.layerOrSourceGeometryType||(0,d.t)(e))return;const r=[];for(const{geometry:i}of e)!(0,d.r)(i)||"mesh"!==i.type||i.hasExtent||i.loaded||r.push(i.load({signal:t}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const t=e.get(r.objectId);null!=t&&this._addIdToClientGraphic(t)}for(const e of t.deleteResults)e.success&&this._idToClientGraphic.delete(e.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new h.s("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let i=null;for(let s=0;s<e.length;s++){const n=e[s],o=this._serializeFeature(n);!i&&(0,d.r)(n.geometry)&&(i=n.geometry.type),r[s]=o,t.set(`${o.uid}`,n)}const s=this;return{features:r,inferredGeometryType:i,finish(e){const r=s.sourceJSON.objectIdField;for(const i in e){const n=e[i],o=t.get(i);o&&(o.attributes||(o.attributes={}),-1===n?delete o.attributes[r]:o.attributes[r]=n,s._addIdToClientGraphic(o))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}get layerOrSourceGeometryType(){var e,t,r;return null!=(e=null==(t=this.layer)?void 0:t.geometryType)?e:null==(r=this.sourceJSON)?void 0:r.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return"mesh"===e||"multipatch"===e||"extent"===e}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),i=(Xe++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return(0,d.t)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?w.j.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await(0,M.p)("MemorySourceWorker",{strategy:(0,d.c)("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:i,hasM:s,hasZ:n,timeInfo:o}=this.layer,a="defaults"===this.layer.originOf("spatialReference");await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.on("before-changes",(e=>{Ye.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()}));const c={features:u.features,fields:t&&t.map((e=>e.toJSON())),geometryType:l.t.toJSON(this.workerGeometryType),hasM:"mesh"!==this.layerOrSourceGeometryType&&s,hasZ:"mesh"===this.layerOrSourceGeometryType||n,objectIdField:i,spatialReference:a?null:r&&r.toJSON(),timeInfo:o?o.toJSON():null},h=await this._connection.invoke("load",c,{signal:e});for(const e of h.warnings)Ye.warn(e.message,{layer:this.layer,warning:e});h.featureErrors.length&&Ye.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const p=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(p.geometryType=l.t.toJSON(u.inferredGeometryType)),this.sourceJSON=p,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(h.assignedObjectIds)}};(0,s.e)([function(e){return(t,r)=>{t[r]=e}}({Type:T.h,ensureType:(0,m.d)(T.h)})],Qe.prototype,"itemType",void 0),(0,s.e)([(0,m.y)()],Qe.prototype,"type",void 0),(0,s.e)([(0,m.y)({constructOnly:!0})],Qe.prototype,"layer",void 0),(0,s.e)([(0,m.y)({readOnly:!0})],Qe.prototype,"workerGeometryType",null),(0,s.e)([(0,m.y)()],Qe.prototype,"sourceJSON",void 0),Qe=(0,s.e)([(0,m.n)("esri.layers.graphics.sources.MemorySource")],Qe);var Ke,et=Qe;let tt=Ke=class extends s.a{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:r,isUnique:i,description:s}=this;return new Ke({name:e,fields:t,isAscending:r,isUnique:i,description:s})}};(0,s.e)([(0,m.y)({constructOnly:!0})],tt.prototype,"name",void 0),(0,s.e)([(0,m.y)({constructOnly:!0})],tt.prototype,"fields",void 0),(0,s.e)([(0,m.y)({constructOnly:!0})],tt.prototype,"isAscending",void 0),(0,s.e)([(0,m.y)({constructOnly:!0})],tt.prototype,"isUnique",void 0),(0,s.e)([(0,m.y)({constructOnly:!0})],tt.prototype,"description",void 0),tt=Ke=(0,s.e)([(0,m.n)("esri.layers.support.FeatureIndex")],tt);let rt=class extends s.a{constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,s.e)([(0,m.y)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],rt.prototype,"shapeAreaField",void 0),(0,s.e)([(0,m.y)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],rt.prototype,"shapeLengthField",void 0),(0,s.e)([(0,m.y)({type:String,json:{read:e=>q.Q.read(e)||q.V.read(e)}})],rt.prototype,"units",void 0),rt=(0,s.e)([(0,m.n)("esri.layers.support.GeometryFieldsInfo")],rt);var it=rt;let st=class extends s.a{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new c.L}};(0,s.e)([(0,m.y)({type:String,json:{write:!0}})],st.prototype,"floorField",void 0),(0,s.e)([(0,m.y)({json:{read:!1,write:!1}})],st.prototype,"viewAllMode",void 0),(0,s.e)([(0,m.y)({json:{read:!1,write:!1}})],st.prototype,"viewAllLevelIds",void 0),st=(0,s.e)([(0,m.n)("esri.layers.support.LayerFloorInfo")],st);var nt=st;const ot=new y.o({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),at=new y.o({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let lt=class extends s.a{constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,s.e)([(0,m.y)({json:{read:ot.read,write:ot.write}})],lt.prototype,"cardinality",void 0),(0,s.e)([(0,m.y)({json:{read:!0,write:!0}})],lt.prototype,"composite",void 0),(0,s.e)([(0,m.y)({json:{read:!0,write:!0}})],lt.prototype,"id",void 0),(0,s.e)([(0,m.y)({json:{read:!0,write:!0}})],lt.prototype,"keyField",void 0),(0,s.e)([(0,m.y)({json:{read:!0,write:!0}})],lt.prototype,"keyFieldInRelationshipTable",void 0),(0,s.e)([(0,m.y)({json:{read:!0,write:!0}})],lt.prototype,"name",void 0),(0,s.e)([(0,m.y)({json:{read:!0,write:!0}})],lt.prototype,"relatedTableId",void 0),(0,s.e)([(0,m.y)({json:{read:!0,write:!0}})],lt.prototype,"relationshipTableId",void 0),(0,s.e)([(0,m.y)({json:{read:at.read,write:at.write}})],lt.prototype,"role",void 0),lt=(0,s.e)([(0,m.n)("esri.layers.support.Relationship")],lt);var ut=lt;const ct=new y.o({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ht={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},pt="FeatureLayer",dt=d.n.getLogger("esri.layers.FeatureLayer");function yt(e){return e&&e instanceof c.L}function ft(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function mt(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const gt=(0,z.l)();function vt(e,t,r){const i=!(null==r||!r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let bt=class extends((0,R.t)((0,j.c)((0,N.s)((0,k.o)((0,P.p)((0,C.l)((0,L.w)((0,f.l)((0,F.e)((0,A.i)(S.b))))))))))){constructor(...e){super(...e),this._handles=new p.u,this.capabilities=null,this.charts=null,this.copyright=null,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=x.k.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(c.L.ofType(tt)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;null==(e=this.source)||e.destroy(),this._handles=(0,d.k)(this._handles)}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=(0,d.r)(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then((e=>this._initLayerProperties(e))));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(h.w).then((async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){const e=await this._fetchFirstLayerId(t);null!=e&&(this.layerId=e)}if(!this.url&&!this._hasMemorySource())throw new h.s("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>this.finishLoadEditablePortalLayer(e)));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges}set editingEnabled(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}readFeatureReduction(e,t){return(0,V.u)(e,t)}writeWebSceneFeatureReduction(e,t,r,i){(0,V.c)(e,t,"layerDefinition.featureReduction",i)}readIsTable(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}writeIsTable(e,t,r,i){null!=i&&i.writeLayerSchema&&(0,d.o)(r,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const e of t.fields)if("esriFieldTypeGlobalID"===e.type)return e.name}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const e of t.fields)if("esriFieldTypeOID"===e.type)return e.name}get parsedUrl(){const e=this.url?(0,l.U)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=(0,l.D)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=(0,l.D)(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){(0,b.c)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){const e=(0,a.p)(i,t,r)||void 0;return e||dt.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),e}if(t.defaultSymbol)return t.types&&t.types.length?new o.P({defaultSymbol:wt(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((e=>({id:e.id,symbol:wt(e.symbol,e,r)})))}):new a.m({symbol:wt(t.defaultSymbol,t,r)})}set source(e){const t=this._get("source");t!==e&&(yt(t)&&this._resetMemorySource(t),yt(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof c.L?new et({layer:this,items:e}):e:null}readSource(e,t){const r=O.default.fromJSON(t.featureSet);return new et({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,i=r&&r.creatorField,s=r&&r.editorField;return e=e&&e.map((e=>B.u.fromJSON(e))),this._fixTemplates(e,i),this._fixTemplates(e,s),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const e=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,D.h)(this.url,r):r;let t=r;if(!t&&this.url){const e=(0,D.d)(this.url);(0,d.r)(e)&&(t=e.title)}if(!t)return;return"item-title-and-service-name"===this.sublayerTitleMode&&e&&e!==t&&(t=e+" - "+t),(0,D.v)(t)}if("item-title"===this.sublayerTitleMode&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const e=t.fields.find((e=>e.name.toLowerCase()===r));e&&(r=e.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r&&r.creatorField,s=r&&r.editorField;return e&&e.map((e=>(e=B.d.fromJSON(e),this._fixTemplates(e.templates,i),this._fixTemplates(e.templates,s),e)))}set url(e){const t=(0,D.g)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:dt});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,i){(0,D.O)(this,e,null,t,i)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}addAttachment(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("addAttachment"in this.source))throw new h.s(pt,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)}))}updateAttachment(e,t,r){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("updateAttachment"in this.source))throw new h.s(pt,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)}))}async applyEdits(e,t){const i=await r.e(2479).then(r.bind(r,52479));return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return(0,Z.a)(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await(0,h.d)(Promise.all([r.e(9351),r.e(1862)]).then(r.bind(r,21862)),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new W.b,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:i}=this;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("deleteAttachments"in this.source))throw new h.s(pt,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)}))}fetchRecomputedExtents(e){return this.load({signal:null==e?void 0:e.signal}).then((()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new h.s(pt,"Layer source does not support fetchUpdates capability")}))}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;let s=null;return r.some((e=>{const{id:t}=e;return null!=t&&(t.toString()===i.toString()&&(s=e),!!s)})),s}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const t=i.domains&&i.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=J.u.from(e),this.load().then((()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new h.s(pt,"this layer doesn't support attachments");const{attachmentTypes:t,objectIds:r,globalIds:i,num:s,size:n,start:o,where:a}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const l=r&&r.length>1,u=t&&t.length,c=i&&i.length,p=n&&n.length;if(l||u||c||p||s||o||a)throw new h.s(pt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||a))throw new h.s(pt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new h.s(pt,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)}))}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(W.b.from(e)||this.createQuery(),t))).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this.load().then((()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(W.b.from(e)||this.createQuery(),t);throw new h.s(pt,"Layer source does not support queryObjectIds capability")}))}queryFeatureCount(e,t){return this.load().then((()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(W.b.from(e)||this.createQuery(),t);throw new h.s(pt,"Layer source does not support queryFeatureCount capability")}))}queryExtent(e,t){return this.load().then((()=>{if(this.source.queryExtent)return this.source.queryExtent(W.b.from(e)||this.createQuery(),t);throw new h.s(pt,"Layer source does not support queryExtent capability")}))}queryRelatedFeatures(e,t){return this.load().then((()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(J.l.from(e),t);throw new h.s(pt,"Layer source does not support queryRelatedFeatures capability")}))}queryRelatedFeaturesCount(e,t){return this.load().then((()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(J.l.from(e),t);throw new h.s(pt,"Layer source does not support queryRelatedFeaturesCount capability")}))}queryTopFeatures(e,t){return this.load().then((()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(J.v.from(e),t).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}));throw new h.s(pt,"Layer source does not support queryTopFeatures capability")}))}queryTopObjectIds(e,t){return this.load().then((()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(J.v.from(e),t);throw new h.s(pt,"Layer source does not support queryTopObjectIds capability")}))}queryTopFeaturesExtent(e,t){return this.load().then((()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(J.v.from(e),t);throw new h.s(pt,"Layer source does not support queryTopExtents capability")}))}queryTopFeatureCount(e,t){return this.load().then((()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(J.v.from(e),t);throw new h.s(pt,"Layer source does not support queryFeatureCount capability")}))}read(e,t){const r=e.featureCollection;if(r){const e=r.layers;e&&1===e.length&&(super.read(e[0],t),null!=r.showLegend&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var r,i;const s=(t={...t,writeLayerSchema:null!=(r=null==(i=t)?void 0:i.writeLayerSchema)?r:this._hasMemorySource()}).origin,n=t.layerContainerType,o=t.messages;if(this.isTable){if("web-scene"===s||"web-map"===s&&"tables"!==n)return o&&o.push(new h.s("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return o&&o.push(new h.s("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&"web-map"===s&&"tables"===n)return o&&o.push(new h.s("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}_readEditingEnabled(e,t,r){var i;let s=null==(i=e.layerDefinition)?void 0:i.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((e=>e.trim())).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){var s,n;const e=null!=(s=this.capabilities)&&null!=(n=s.operations)&&n.supportsSync?"Query,Sync":"Query";(0,d.o)("layerDefinition.capabilities",e,t),!r||null!=i&&i.writeLayerSchema||(t.capabilities=e)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new h.s(pt,`feature is missing the identifying attribute ${r}`)):Promise.reject(new h.s(pt,"'attributes' are required on a feature to query attachments")):Promise.reject(new h.s(pt,"A feature is required to add/delete/update attachments")):Promise.reject(new h.s(pt,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return(0,l.L)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((e=>{const t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),(0,b.c)(this.renderer,this.fieldsIndex),(0,b.m)(this.timeInfo,this.fieldsIndex),(0,H.t)(this,{origin:"service"})}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach((e=>{const r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new h.s("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new h.s("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((e=>{e.layer=this,e.sourceLayer=this})),this._handles.add([e.on("after-add",(e=>{e.item.layer=this,e.item.sourceLayer=this})),e.on("after-remove",(e=>{e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((e=>{e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((e=>{const r=ht[e.name];r&&(t[r]=!!e.isEnabled)})),t}_readDataCapabilities(e){return{isVersioned:ft(e,"isDataVersioned",!1),supportsAttachment:ft(e,"hasAttachments",!1),supportsM:ft(e,"hasM",!1),supportsZ:ft(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:ft(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map((e=>e.trim())):[],i=-1!==r.indexOf("editing");let s=i&&-1!==r.indexOf("create"),n=i&&-1!==r.indexOf("delete"),o=i&&-1!==r.indexOf("update");const a=-1!==r.indexOf("changetracking");return i&&!(s||n||o)&&(s=n=o=!0),{supportsCalculate:ft(t,"supportsCalculate",!1),supportsTruncate:ft(t,"supportsTruncate",!1),supportsValidateSql:ft(t,"supportsValidateSql",!1),supportsAdd:s,supportsDelete:n,supportsEditing:i,supportsChangeTracking:a,supportsQuery:-1!==r.indexOf("query"),supportsQueryAttachments:ft(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:ft(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==r.indexOf("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:ft(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=null==(t=this.url)?void 0:t.includes("MapServer"),o=!(0,d.c)("mapserver-pbf-enabled")&&n&&this.version<10.81,a=(e.supportedQueryFormats||"").split(",").reduce(((e,t)=>{const r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:ft(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:ft(r,"supportsPercentileStatistics",!1),supportsCentroid:ft(r,"supportsReturningGeometryCentroid",!1),supportsDistance:ft(r,"supportsQueryWithDistance",!1),supportsDistinct:ft(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ft(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ft(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:ft(r,"supportsHavingClause",!1),supportsOrderBy:ft(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ft(r,"supportsPagination",!1),supportsQuantization:ft(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ft(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ft(e,"supportsReturningQueryGeometry",!1),supportsResultType:ft(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ft(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ft(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ft(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:ft(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:ft(i,"allowOthersToQuery",!0),supportsHistoricMoment:ft(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&a.has("pbf"),supportsDisjointSpatialRelationship:ft(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:ft(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:mt(e,"maxRecordCountFactor",void 0),maxRecordCount:mt(e,"maxRecordCount",void 0),standardMaxRecordCount:mt(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:mt(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=ft(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ft(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ft(e,"allowGeometryUpdates",!0),supportsGlobalId:ft(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ft(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ft(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ft(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ft(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ft(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ft(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ft(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ft(t,"allowOthersToUpdate",!0)}}};(0,s.e)([(0,m.y)({readOnly:!0,json:{read:!1}})],bt.prototype,"capabilities",void 0),(0,s.e)([(0,v.e)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],bt.prototype,"readCapabilities",null),(0,s.e)([(0,m.y)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],bt.prototype,"charts",void 0),(0,s.e)([(0,m.y)({readOnly:!0})],bt.prototype,"createQueryVersion",null),(0,s.e)([(0,m.y)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],bt.prototype,"copyright",void 0),(0,s.e)([(0,m.y)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],bt.prototype,"displayField",void 0),(0,s.e)([(0,m.y)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],bt.prototype,"definitionExpression",void 0),(0,s.e)([(0,m.y)({types:u.j,readOnly:!0})],bt.prototype,"defaultSymbol",void 0),(0,s.e)([(0,m.y)({type:W.K})],bt.prototype,"dynamicDataSource",void 0),(0,s.e)([(0,m.y)({readOnly:!0})],bt.prototype,"editFieldsInfo",void 0),(0,s.e)([(0,m.y)({type:Boolean})],bt.prototype,"editingEnabled",null),(0,s.e)([(0,v.e)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],bt.prototype,"readEditingEnabled",null),(0,s.e)([(0,v.e)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],bt.prototype,"readEditingEnabledFromWebMap",null),(0,s.e)([(0,s.o)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],bt.prototype,"writeEditingEnabled",null),(0,s.e)([(0,s.o)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],bt.prototype,"writeEditingEnabledToWebMap",null),(0,s.e)([(0,m.y)({readOnly:!0})],bt.prototype,"editingInfo",void 0),(0,s.e)([(0,v.e)("editingInfo")],bt.prototype,"readEditingInfo",null),(0,s.e)([(0,m.y)(C.c)],bt.prototype,"elevationInfo",void 0),(0,s.e)([(0,m.y)({types:{key:"type",base:U.p,typeMap:{selection:U.c,cluster:U.b}},json:{write:{target:"layerDefinition.featureReduction"}}})],bt.prototype,"featureReduction",void 0),(0,s.e)([(0,v.e)("featureReduction",["layerDefinition.featureReduction"])],bt.prototype,"readFeatureReduction",null),(0,s.e)([(0,s.o)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:V.s}})],bt.prototype,"writeWebSceneFeatureReduction",null),(0,s.e)([(0,m.y)({...gt.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:vt}}}}})],bt.prototype,"fields",void 0),(0,s.e)([(0,m.y)(gt.fieldsIndex)],bt.prototype,"fieldsIndex",void 0),(0,s.e)([(0,m.y)({type:nt,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],bt.prototype,"floorInfo",void 0),(0,s.e)([(0,m.y)({type:Ze,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],bt.prototype,"formTemplate",void 0),(0,s.e)([(0,m.y)({type:w.M,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],bt.prototype,"fullExtent",void 0),(0,s.e)([(0,m.y)()],bt.prototype,"gdbVersion",void 0),(0,s.e)([(0,m.y)({readOnly:!0,type:it,json:{read:{source:"geometryProperties"}}})],bt.prototype,"geometryFieldsInfo",void 0),(0,s.e)([(0,m.y)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ct.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:vt,writer(e,t,r){const i=e?ct.toJSON(e):null;i&&(0,d.o)(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:ct.read}}})],bt.prototype,"geometryType",void 0),(0,s.e)([(0,m.y)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],bt.prototype,"hasM",void 0),(0,s.e)([(0,m.y)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],bt.prototype,"hasZ",void 0),(0,s.e)([(0,m.y)({readOnly:!0,type:_.v})],bt.prototype,"heightModelInfo",void 0),(0,s.e)([(0,m.y)({type:Date})],bt.prototype,"historicMoment",void 0),(0,s.e)([(0,m.y)(C.g)],bt.prototype,"id",void 0),(0,s.e)([(0,m.y)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],bt.prototype,"infoFor3D",void 0),(0,s.e)([(0,m.y)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],bt.prototype,"isTable",void 0),(0,s.e)([(0,v.e)("service","isTable",["type","geometryType"]),(0,v.e)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],bt.prototype,"readIsTable",null),(0,s.e)([(0,s.o)("web-map","isTable")],bt.prototype,"writeIsTable",null),(0,s.e)([(0,m.y)(C.a)],bt.prototype,"labelsVisible",void 0),(0,s.e)([(0,m.y)({type:[G.E],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:U.r},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:U.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],bt.prototype,"labelingInfo",void 0),(0,s.e)([(0,m.y)(C.y)],bt.prototype,"opacity",void 0),(0,s.e)([(0,m.y)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],bt.prototype,"layerId",void 0),(0,s.e)([(0,m.y)(C.f)],bt.prototype,"legendEnabled",void 0),(0,s.e)([(0,m.y)({type:["show","hide"]})],bt.prototype,"listMode",void 0),(0,s.e)([(0,m.y)(C.v)],bt.prototype,"minScale",void 0),(0,s.e)([(0,v.e)("service","minScale",["minScale","effectiveMinScale"])],bt.prototype,"readMinScale",null),(0,s.e)([(0,m.y)(C.j)],bt.prototype,"maxScale",void 0),(0,s.e)([(0,v.e)("service","maxScale",["maxScale","effectiveMaxScale"])],bt.prototype,"readMaxScale",null),(0,s.e)([(0,m.y)({type:String})],bt.prototype,"globalIdField",void 0),(0,s.e)([(0,v.e)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),(0,v.e)("service","globalIdField",["globalIdField","fields"])],bt.prototype,"readGlobalIdFieldFromService",null),(0,s.e)([(0,m.y)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:vt}}}}})],bt.prototype,"objectIdField",void 0),(0,s.e)([(0,v.e)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),(0,v.e)("service","objectIdField",["objectIdField","fields"])],bt.prototype,"readObjectIdFieldFromService",null),(0,s.e)([(0,m.y)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],bt.prototype,"operationalLayerType",void 0),(0,s.e)([(0,m.y)(gt.outFields)],bt.prototype,"outFields",void 0),(0,s.e)([(0,m.y)({readOnly:!0})],bt.prototype,"parsedUrl",null),(0,s.e)([(0,m.y)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],bt.prototype,"path",void 0),(0,s.e)([(0,m.y)(C.s)],bt.prototype,"popupEnabled",void 0),(0,s.e)([(0,m.y)({type:n.M,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],bt.prototype,"popupTemplate",void 0),(0,s.e)([(0,m.y)({readOnly:!0})],bt.prototype,"defaultPopupTemplate",null),(0,s.e)([(0,m.y)({type:[ut],readOnly:!0})],bt.prototype,"relationships",void 0),(0,s.e)([(0,m.y)({types:a.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:a.n,write:{target:"layerDefinition.drawingInfo.renderer",writer:a.o}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema}),writer:a.o}}})],bt.prototype,"renderer",null),(0,s.e)([(0,v.e)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,v.e)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],bt.prototype,"readRenderer",null),(0,s.e)([(0,m.y)()],bt.prototype,"sourceJSON",void 0),(0,s.e)([(0,m.y)({type:Boolean})],bt.prototype,"returnM",void 0),(0,s.e)([(0,m.y)({type:Boolean})],bt.prototype,"returnZ",void 0),(0,s.e)([(0,m.y)(C.o)],bt.prototype,"screenSizePerspectiveEnabled",void 0),(0,s.e)([(0,m.y)()],bt.prototype,"source",null),(0,s.e)([(0,g.c)("source")],bt.prototype,"castSource",null),(0,s.e)([(0,v.e)("portal-item","source",["featureSet"]),(0,v.e)("web-map","source",["featureSet"])],bt.prototype,"readSource",null),(0,s.e)([(0,m.y)({readOnly:!0})],bt.prototype,"serviceDefinitionExpression",void 0),(0,s.e)([(0,v.e)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],bt.prototype,"readServiceDefinitionExpression",null),(0,s.e)([(0,m.y)({type:x.k,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],bt.prototype,"spatialReference",void 0),(0,s.e)([(0,m.y)({type:Number})],bt.prototype,"subtypeCode",void 0),(0,s.e)([(0,m.y)({type:[B.u]})],bt.prototype,"templates",void 0),(0,s.e)([(0,v.e)("templates",["editFieldsInfo","creatorField","editorField","templates"])],bt.prototype,"readTemplates",null),(0,s.e)([(0,m.y)({type:$.v})],bt.prototype,"timeInfo",void 0),(0,s.e)([(0,m.y)()],bt.prototype,"title",void 0),(0,s.e)([(0,v.e)("service","title",["name"]),(0,v.e)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],bt.prototype,"readTitle",null),(0,s.e)([(0,v.e)("web-map","title",["layerDefinition.name","title"])],bt.prototype,"readTitleFromWebMap",null),(0,s.e)([(0,m.y)({type:String})],bt.prototype,"sublayerTitleMode",void 0),(0,s.e)([(0,m.y)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],bt.prototype,"trackIdField",void 0),(0,s.e)([(0,m.y)({json:{read:!1}})],bt.prototype,"type",void 0),(0,s.e)([(0,m.y)({type:String})],bt.prototype,"typeIdField",void 0),(0,s.e)([(0,v.e)("service","typeIdField"),(0,v.e)("typeIdField",["layerDefinition.typeIdField"])],bt.prototype,"readTypeIdField",null),(0,s.e)([(0,m.y)({type:[B.d]})],bt.prototype,"types",void 0),(0,s.e)([(0,v.e)("service","types",["types"]),(0,v.e)("types",["layerDefinition.types"])],bt.prototype,"readTypes",null),(0,s.e)([(0,m.y)({readOnly:!0,json:{write:!1}})],bt.prototype,"serverGens",void 0),(0,s.e)([(0,m.y)({type:c.L.ofType(tt),readOnly:!0})],bt.prototype,"indexes",void 0),(0,s.e)([(0,m.y)(C.p)],bt.prototype,"url",null),(0,s.e)([(0,s.o)("url")],bt.prototype,"writeUrl",null),(0,s.e)([(0,m.y)({readOnly:!0})],bt.prototype,"userIsAdmin",void 0),(0,s.e)([(0,m.y)({json:{origins:{service:{read:!0}},read:!1}})],bt.prototype,"version",void 0),(0,s.e)([(0,v.e)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],bt.prototype,"readVersion",null),(0,s.e)([(0,m.y)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],bt.prototype,"visible",void 0),(0,s.e)([(0,v.e)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],bt.prototype,"readVisible",null),bt=(0,s.e)([(0,m.n)("esri.layers.FeatureLayer")],bt);const wt=(0,m.D)({types:u.M});var _t=bt,xt=Object.freeze({__proto__:null,default:_t})},52737:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var i=r(78155),s=r(80987),n=r(73574),o=r(31531),a=r(80219),l=r(88903),u=r(4169),c=r(92858),h=r(89710),p=r(47365);r(20215),r(98548),r(20736),r(82906),r(40130),r(52957),r(29126),r(6585),r(3621),r(63358),r(62121),r(81135),r(94527),r(17762),r(60816),r(61888),r(29832),r(31516),r(52109),r(67079);const d=new o.o({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let y=class extends i.a{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=c.k.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){const s=e[t],o=n.h.fromJSON(s),l=s.geometry&&s.geometry.spatialReference;(0,a.r)(o.geometry)&&!l&&(o.geometry.spatialReference=r),i.push(o)}return i}writeGeometryType(e,t,r,i){if(e)return void d.write(e,t,r,i);const{features:s}=this;if(s)for(const e of s)if(e&&(0,a.r)(e.geometry))return void d.write(e.geometry.type,t,r,i)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=(0,h.p)(e);return!r&&t.spatialReference&&(i.spatialReference=c.k.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&(0,a.r)(e.geometry)&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const t=e&&e[r];i.geometry=t&&t.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,s]}=e,n=this.features,o=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-i)/t)),(e=>Math.round((s-e)/r)));for(let e=0,t=n.length;e<t;e++)o((0,a.f)(n[e].geometry))||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[n,o]}=r,l=this._getHydrationFunction(e,(e=>e*n+i),(e=>s-e*o));for(const{geometry:e}of t)(0,a.r)(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let i,s;const n=[];for(let o=0,a=e.length;o<a;o++){const a=e[o];if(o>0){const e=t(a[0]),o=r(a[1]);e===i&&o===s||(n.push([e-i,o-s]),i=e,s=o)}else i=t(a[0]),s=r(a[1]),n.push([i,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const i=(0,h.y)(e)?e.rings:e.paths,s=[];for(let e=0,n=i.length;e<n;e++){const n=i[e],o=this._quantizePoints(n,t,r);o&&s.push(o)}return s.length>0?((0,h.y)(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const i=this._quantizePoints(e.points,t,r);return i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?e=>{const i=(0,h.y)(e)?e.rings:e.paths;let s,n;for(let e=0,o=i.length;e<o;e++){const o=i[e];for(let e=0,i=o.length;e<i;e++){const i=o[e];e>0?(s+=i[0],n+=i[1]):(s=i[0],n=i[1]),i[0]=t(s),i[1]=r(n)}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?e=>{const i=e.points;let s,n;for(let e=0,o=i.length;e<o;e++){const o=i[e];e>0?(s+=o[0],n+=o[1]):(s=o[0],n=o[1]),o[0]=t(s),o[1]=r(n)}}:void 0}};(0,i.e)([(0,l.y)({type:String,json:{write:!0}})],y.prototype,"displayFieldName",void 0),(0,i.e)([(0,l.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"exceededTransferLimit",void 0),(0,i.e)([(0,l.y)({type:[n.h],json:{write:!0}})],y.prototype,"features",void 0),(0,i.e)([(0,u.e)("features")],y.prototype,"readFeatures",null),(0,i.e)([(0,l.y)({type:[p.y],json:{write:!0}})],y.prototype,"fields",void 0),(0,i.e)([(0,l.y)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:d.read}}})],y.prototype,"geometryType",void 0),(0,i.e)([(0,i.o)("geometryType")],y.prototype,"writeGeometryType",null),(0,i.e)([(0,l.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"hasM",void 0),(0,i.e)([(0,l.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"hasZ",void 0),(0,i.e)([(0,l.y)({types:s.e,json:{write:!0}})],y.prototype,"queryGeometry",void 0),(0,i.e)([(0,u.e)("queryGeometry")],y.prototype,"readQueryGeometry",null),(0,i.e)([(0,l.y)({type:c.k,json:{write:!0}})],y.prototype,"spatialReference",void 0),(0,i.e)([(0,i.o)("spatialReference")],y.prototype,"writeSpatialReference",null),(0,i.e)([(0,l.y)({json:{write:!0}})],y.prototype,"transform",void 0),y=(0,i.e)([(0,l.n)("esri.rest.support.FeatureSet")],y),y.prototype.toJSON.isDefaultToJSON=!0,y||(y={});const f=y},71666:(e,t,r)=>{"use strict";r.d(t,{d:()=>p,u:()=>c});var i=r(78155),s=r(80219),n=r(88903),o=r(4169),a=r(52957);const l=new(r(31531).o)({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let u=class extends i.a{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}writeDrawingTool(e,t){t.drawingTool=l.toJSON(e)}writePrototype(e,t){t.prototype=(0,s.i)((0,s.y)(e),!0)}writeThumbnail(e,t){t.thumbnail=(0,s.i)((0,s.y)(e))}};(0,i.e)([(0,n.y)({json:{write:!0}})],u.prototype,"name",void 0),(0,i.e)([(0,n.y)({json:{write:!0}})],u.prototype,"description",void 0),(0,i.e)([(0,n.y)({json:{read:l.read,write:l.write}})],u.prototype,"drawingTool",void 0),(0,i.e)([(0,i.o)("drawingTool")],u.prototype,"writeDrawingTool",null),(0,i.e)([(0,n.y)({json:{write:!0}})],u.prototype,"prototype",void 0),(0,i.e)([(0,i.o)("prototype")],u.prototype,"writePrototype",null),(0,i.e)([(0,n.y)({json:{write:!0}})],u.prototype,"thumbnail",void 0),(0,i.e)([(0,i.o)("thumbnail")],u.prototype,"writeThumbnail",null),u=(0,i.e)([(0,n.n)("esri.layers.support.FeatureTemplate")],u);var c=u;let h=class extends i.a{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(i.type){case"range":t[r]=a.e.fromJSON(i);break;case"codedValue":t[r]=a.i.fromJSON(i);break;case"inherited":t[r]=a.b.fromJSON(i)}}return t}writeDomains(e,t){const r={};for(const t in e)e.hasOwnProperty(t)&&(r[t]=e[t]&&e[t].toJSON());(0,s.i)(r),t.domains=r}readTemplates(e){return e&&e.map((e=>new c(e)))}writeTemplates(e,t){t.templates=e&&e.map((e=>e.toJSON()))}};(0,i.e)([(0,n.y)({json:{write:!0}})],h.prototype,"id",void 0),(0,i.e)([(0,n.y)({json:{write:!0}})],h.prototype,"name",void 0),(0,i.e)([(0,n.y)({json:{write:!0}})],h.prototype,"domains",void 0),(0,i.e)([(0,o.e)("domains")],h.prototype,"readDomains",null),(0,i.e)([(0,i.o)("domains")],h.prototype,"writeDomains",null),(0,i.e)([(0,n.y)({json:{write:!0}})],h.prototype,"templates",void 0),(0,i.e)([(0,o.e)("templates")],h.prototype,"readTemplates",null),(0,i.e)([(0,i.o)("templates")],h.prototype,"writeTemplates",null),h=(0,i.e)([(0,n.n)("esri.layers.support.FeatureType")],h);var p=h},47365:(e,t,r)=>{"use strict";r.d(t,{y:()=>d});var i,s=r(78155),n=r(31531),o=r(88903),a=(r(80219),r(29126)),l=r(4169),u=r(52957),c=r(67079);const h=new n.o({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let p=i=class extends s.a{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?h.fromJSON(r.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,s.e)([(0,o.y)({type:String,json:{write:!0}})],p.prototype,"alias",void 0),(0,s.e)([(0,o.y)({type:[String,Number],json:{write:{allowNull:!0}}})],p.prototype,"defaultValue",void 0),(0,s.e)([(0,o.y)()],p.prototype,"description",void 0),(0,s.e)([(0,l.e)("description")],p.prototype,"readDescription",null),(0,s.e)([(0,o.y)({types:u.u,json:{read:{reader:u.d},write:!0}})],p.prototype,"domain",void 0),(0,s.e)([(0,o.y)({type:Boolean,json:{write:!0}})],p.prototype,"editable",void 0),(0,s.e)([(0,o.y)({type:o.N,json:{write:!0}})],p.prototype,"length",void 0),(0,s.e)([(0,o.y)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,s.e)([(0,o.y)({type:Boolean,json:{write:!0}})],p.prototype,"nullable",void 0),(0,s.e)([(0,a.r)(c.i)],p.prototype,"type",void 0),(0,s.e)([(0,o.y)()],p.prototype,"valueType",void 0),(0,s.e)([(0,l.e)("valueType",["description"])],p.prototype,"readValueType",null),p=i=(0,s.e)([(0,o.n)("esri.layers.support.Field")],p);var d=p},2502:(e,t,r)=>{"use strict";function i(e){return"date"===e.type||"esriFieldTypeDate"===e.type}r.d(t,{e:()=>s});class s{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!e)return;const t=[];for(const r of e){const e=r&&r.name;if(e){const s=n(e);this._fieldsMap.set(e,r),this._fieldsMap.set(s,r),t.push(s),i(r)&&(this.dateFields.push(r),this._dateFieldsSet.add(r))}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(n(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}function n(e){return e.toLowerCase().trim()}},93875:(e,t,r)=>{"use strict";r.d(t,{a:()=>Me,b:()=>Ee,c:()=>Ie,d:()=>h,e:()=>l,f:()=>Fe,g:()=>x,h:()=>Te,i:()=>u,j:()=>Pe,k:()=>Ce,l:()=>p,m:()=>W,n:()=>c,o:()=>ke,p:()=>ge,q:()=>X,r:()=>d,s:()=>Oe,t:()=>a,u:()=>Y,v:()=>Ae,w:()=>G});var i=r(80219),s=r(14215),n=r(20215);class o{constructor(){for(this._current=new Array,this._max=new Array,this._allocations=new Map;this._current.length<s.e.COUNT;)this._current.push(0),this._max.push(0)}resetMax(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}increment(e,t){const r=++this._current[e];this._max[e]=Math.max(r,this._max[e])}decrement(e,t){--this._current[e]}get max(){return this._max}get current(){return this._current}get total(){return this.current.reduce(((e,t)=>e+t),0)}printResourceCount(){if(this.total>0){console.log("Live objects:");for(let e=0;e<s.e.COUNT;++e){const t=this._current[e];t>0&&console.log(`${s.e[e]}: ${t}`)}}if(this._allocations.size>0){console.log(`${this._allocations.size} live object allocations:`);const e=new Map;this._allocations.forEach((t=>{var r;e.set(t,(null!=(r=e.get(t))?r:0)+1)})),e.forEach(((e,t)=>console.log(e," : ",t)))}}}function a(e,t,r=32774,i=[0,0,0,0]){return{srcRgb:e,srcAlpha:e,dstRgb:t,dstAlpha:t,opRgb:r,opAlpha:r,color:{r:i[0],g:i[1],b:i[2],a:i[3]}}}function l(e,t,r,i,s=32774,n=32774,o=[0,0,0,0]){return{srcRgb:e,srcAlpha:t,dstRgb:r,dstAlpha:i,opRgb:s,opAlpha:n,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}const u={face:1029,mode:2305},c={face:1028,mode:2305},h=e=>2===e?u:1===e?c:null,p={zNear:0,zFar:1},d={r:!0,g:!0,b:!0,a:!0};function y(e){return M.intern(e)}function f(e){return I.intern(e)}function m(e){return A.intern(e)}function g(e){return R.intern(e)}function v(e){return C.intern(e)}function b(e){return k.intern(e)}function w(e){return j.intern(e)}function _(e){return U.intern(e)}function x(e){return B.intern(e)}class S{constructor(e,t){this.makeKey=e,this.makeRef=t,this.interns=new Map}intern(e){if(!e)return null;const t=this.makeKey(e),r=this.interns;return r.has(t)||r.set(t,this.makeRef(e)),r.get(t)}}function T(e){return"["+e.join(",")+"]"}const M=new S(E,(e=>({__tag:"Blending",...e})));function E(e){return e?T([e.srcRgb,e.srcAlpha,e.dstRgb,e.dstAlpha,e.opRgb,e.opAlpha,e.color.r,e.color.g,e.color.b,e.color.a]):null}const I=new S(O,(e=>({__tag:"Culling",...e})));function O(e){return e?T([e.face,e.mode]):null}const A=new S(P,(e=>({__tag:"PolygonOffset",...e})));function P(e){return e?T([e.factor,e.units]):null}const R=new S(F,(e=>({__tag:"DepthTest",...e})));function F(e){return e?T([e.func]):null}const C=new S(L,(e=>({__tag:"StencilTest",...e})));function L(e){return e?T([e.function.func,e.function.ref,e.function.mask,e.operation.fail,e.operation.zFail,e.operation.zPass]):null}const k=new S(N,(e=>({__tag:"DepthWrite",...e})));function N(e){return e?T([e.zNear,e.zFar]):null}const j=new S(D,(e=>({__tag:"ColorWrite",...e})));function D(e){return e?T([e.r,e.g,e.b,e.a]):null}const U=new S(V,(e=>({__tag:"StencilWrite",...e})));function V(e){return e?T([e.mask]):null}const B=new S((function(e){return e?T([E(e.blending),O(e.culling),P(e.polygonOffset),F(e.depthTest),L(e.stencilTest),N(e.depthWrite),D(e.colorWrite),V(e.stencilWrite)]):null}),(e=>({blending:y(e.blending),culling:f(e.culling),polygonOffset:m(e.polygonOffset),depthTest:g(e.depthTest),stencilTest:v(e.stencilTest),depthWrite:b(e.depthWrite),colorWrite:w(e.colorWrite),stencilWrite:_(e.stencilWrite)})));class z{constructor(e){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=e}setPipeline(e){(this._pipelineInvalid||e!==this._pipeline)&&(this.setBlending(e.blending),this.setCulling(e.culling),this.setPolygonOffset(e.polygonOffset),this.setDepthTest(e.depthTest),this.setStencilTest(e.stencilTest),this.setDepthWrite(e.depthWrite),this.setColorWrite(e.colorWrite),this.setStencilWrite(e.stencilWrite),this._pipeline=e),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(e){this._blending=this.setSubState(e,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(e){this._culling=this.setSubState(e,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(e){this._polygonOffset=this.setSubState(e,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(e){this._depthTest=this.setSubState(e,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(e){this._stencilTest=this.setSubState(e,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(e){this._depthWrite=this.setSubState(e,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(e){this._colorWrite=this.setSubState(e,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(e){this._stencilWrite=this.setSubState(e,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(e,t,r,i){return(r||e!==t)&&(i(e),this._pipelineInvalid=!0),e}}class q{constructor(e,t,r,i,s,n,o,a){this.createQuery=e,this.resultAvailable=t,this.getResult=r,this.disjoint=i,this.beginTimeElapsed=s,this.endTimeElapsed=n,this.createTimestamp=o,this.timestampBits=a}}function G(e,t){if(t.disjointTimerQuery)return null;let r=e.getExtension("EXT_disjoint_timer_query_webgl2");return r&&(0,s.n)(e)?new q((()=>e.createQuery()),(t=>e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE)),(t=>e.getQueryParameter(t,e.QUERY_RESULT)),(()=>e.getParameter(r.GPU_DISJOINT_EXT)),(t=>e.beginQuery(r.TIME_ELAPSED_EXT,t)),(()=>e.endQuery(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>e.getQuery(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):(r=e.getExtension("EXT_disjoint_timer_query"),r?new q((()=>r.createQueryEXT()),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT)),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)),(()=>e.getParameter(r.GPU_DISJOINT_EXT)),(e=>r.beginQueryEXT(r.TIME_ELAPSED_EXT,e)),(()=>r.endQueryEXT(r.TIME_ELAPSED_EXT)),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>r.getQueryEXT(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):null)}function $(e,t,r,i,n){if(i&&(0,s.n)(e))return!0;if(t[r])return!1;for(const t of n)if(e.getExtension(t))return!0;return!1}class W{constructor(e,t={}){this.gl=e,this.instanceCounter=new o,this._blendEnabled=!1,this._blendColorState={r:0,g:0,b:0,a:0},this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0},this._blendEquationState={mode:32774,modeAlpha:32774},this._colorMaskState={r:!0,g:!0,b:!0,a:!0},this._polygonCullingEnabled=!1,this._cullFace=1029,this._frontFace=2305,this._scissorTestEnabled=!1,this._scissorRect={x:0,y:0,width:0,height:0},this._depthTestEnabled=!1,this._depthFunction=513,this._clearDepth=1,this._depthWriteEnabled=!0,this._depthRange={zNear:0,zFar:1},this._viewport=null,this._stencilTestEnabled=!1,this._polygonOffsetFillEnabled=!1,this._polygonOffset=[0,0],this._stencilFunction={face:1032,func:519,ref:0,mask:1},this._clearStencil=0,this._stencilWriteMask=1,this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680},this._clearColor={r:0,g:0,b:0,a:0},this._activeShaderProgram=null,this._activeVertexBuffer=null,this._activeIndexBuffer=null,this._activeFramebuffer=null,this._activeRenderbuffer=null,this._activeTextureUnit=0,this._textureUnitMap=new Array,this._numOfDrawCalls=0,this._numOfTriangles=0,this.webglVersion=(0,s.n)(e)?"webgl2":"webgl",e instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint"),this._capabilities=function(e,t){const r=t.disabledExtensions||{},i=t.debugWebGLExtensions||{};let n,o,a,l,u,c,h,p,d,y,f,m=null,g=null,v=null,b=null;return{get drawBuffers(){return f||(f=function(e,t){if(t.disjointTimerQuery)return null;if((0,s.n)(e))return{drawBuffers:e.drawBuffers.bind(e),MAX_DRAW_BUFFERS:e.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:e.MAX_COLOR_ATTACHMENTS};if(t.drawBuffers)return null;const r=e.getExtension("WEBGL_draw_buffers");return r?{drawBuffers:r.drawBuffersWEBGL.bind(r),MAX_DRAW_BUFFERS:r.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:r.MAX_COLOR_ATTACHMENTS_WEBGL}:null}(e,r)),f},get instancing(){return n||(n=function(e){if((0,s.n)(e))return{drawArraysInstanced:e.drawArraysInstanced.bind(e),drawElementsInstanced:e.drawElementsInstanced.bind(e),vertexAttribDivisor:e.vertexAttribDivisor.bind(e)};const t=e.getExtension("ANGLE_instanced_arrays");return t?{drawArraysInstanced:t.drawArraysInstancedANGLE.bind(t),drawElementsInstanced:t.drawElementsInstancedANGLE.bind(t),vertexAttribDivisor:t.vertexAttribDivisorANGLE.bind(t)}:null}(e)),n},get vao(){return o||(o=function(e,t){if((0,s.n)(e))return{createVertexArray:e.createVertexArray.bind(e),deleteVertexArray:e.deleteVertexArray.bind(e),bindVertexArray:e.bindVertexArray.bind(e)};if(t.vao)return null;const r=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object");return r?{createVertexArray:r.createVertexArrayOES.bind(r),deleteVertexArray:r.deleteVertexArrayOES.bind(r),bindVertexArray:r.bindVertexArrayOES.bind(r)}:null}(e,r)),o},get compressedTextureETC(){return a||(a=function(e,t){if(t.compressedTextureETC)return null;const r=e.getExtension("WEBGL_compressed_texture_etc");return r?{COMPRESSED_R11_EAC:r.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:r.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:r.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:r.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:r.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:r.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}(e,r)),a},get compressedTextureS3TC(){return l||(l=function(e,t){if(t.compressedTextureS3TC)return null;const r=e.getExtension("WEBGL_compressed_texture_s3tc");return r?{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}(e,r)),l},get textureFilterAnisotropic(){return u||(u=function(e,t){if(t.textureFilterAnisotropic)return null;const r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return r?{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}:null}(e,r)),u},get disjointTimerQuery(){return c||(c=G(e,r)),c},get textureFloat(){return h||(h=function(e,t){if((0,s.n)(e))return{textureFloat:!0,textureFloatLinear:!t.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!t.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:e.HALF_FLOAT};if(e instanceof WebGLRenderingContext){const r=!t.textureHalfFloat&&e.getExtension("OES_texture_half_float");return{textureFloat:!t.textureFloat&&!!e.getExtension("OES_texture_float"),textureFloatLinear:!t.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!!r,textureHalfFloatLinear:!t.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:r?r.HALF_FLOAT_OES:void 0}}return null}(e,r)),h},get colorBufferFloat(){return p||(p=function(e,t){if((0,s.n)(e)){const r=!t.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),i=!t.colorBufferFloat&&e.getExtension("EXT_color_buffer_float"),s=!t.colorBufferFloat&&e.getExtension("EXT_float_blend");return r||i||s?{textureFloat:!!i,textureHalfFloat:!!r,R16F:e.R16F,RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F,RGB16F:e.RGB16F}:null}if(e instanceof WebGLRenderingContext){const r=!t.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),i=!t.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float"),s=!t.colorBufferFloat&&e.getExtension("EXT_float_blend");return r||i||s?{textureFloat:!!i,textureHalfFloat:!!r,RGBA16F:r?r.RGBA16F_EXT:void 0,RGB16F:r?r.RGB16F_EXT:void 0,RGBA32F:i?i.RGBA32F_EXT:void 0}:null}return null}(e,r)),p},get blendMinMax(){return d||(d=function(e,t){if((0,s.n)(e))return{MIN:e.MIN,MAX:e.MAX};if(t.blendMinMax)return null;{const t=e.getExtension("EXT_blend_minmax");return t?{MIN:t.MIN_EXT,MAX:t.MAX_EXT}:null}}(e,r)),d},get depthTexture(){return null===m&&(m=$(e,r,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),m},get standardDerivatives(){return null===g&&(g=$(e,r,"standardDerivatives",!0,["OES_standard_derivatives"])),g},get shaderTextureLOD(){return null===v&&(v=$(e,r,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),v},get fragDepth(){return null===b&&(b=$(e,r,"fragDepth",!0,["EXT_frag_depth"])),b},get loseContext(){return y||(y=function(e,t){const r=t.loseContext&&e.getExtension("WEBGL_lose_context");return r?{loseRenderingContext:()=>r.loseContext()}:null}(e,i)),y},enable(e){return this[e]}}}(e,t),this._parameters=this._loadParameters(t);const r=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:r[0],y:r[1],width:r[2],height:r[3]},this._stateTracker=new z({setBlending:e=>{if(e){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(e.opRgb,e.opAlpha),this.setBlendFunctionSeparate(e.srcRgb,e.dstRgb,e.srcAlpha,e.dstAlpha);const t=e.color;this.setBlendColor(t.r,t.g,t.b,t.a)}else this.setBlendingEnabled(!1)},setCulling:e=>{e?(this.setFaceCullingEnabled(!0),this.setCullFace(e.face),this.setFrontFace(e.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:e=>{e?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(e.factor,e.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:e=>{e?(this.setDepthTestEnabled(!0),this.setDepthFunction(e.func)):this.setDepthTestEnabled(!1)},setStencilTest:e=>{if(e){this.setStencilTestEnabled(!0);const t=e.function;this.setStencilFunction(t.func,t.ref,t.mask);const r=e.operation;this.setStencilOp(r.fail,r.zFail,r.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:e=>{e?(this.setDepthWriteEnabled(!0),this.setDepthRange(e.zNear,e.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:e=>{e?this.setColorMask(e.r,e.g,e.b,e.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:e=>{e?this.setStencilWriteMask(e.mask):this.setStencilWriteMask(0)}}),this.enforceState()}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}dispose(){this.bindVAO(null),this.unbindBuffer(34962),this.unbindBuffer(34963),this._textureUnitMap.length=0,X()&&this.instanceCounter.printResourceCount()}setPipelineState(e){this._stateTracker.setPipeline(e)}setBlendingEnabled(e){this._blendEnabled!==e&&(!0===e?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=e,this._stateTracker.invalidateBlending())}externalTextureUnitUpdate(e,t){for(let t=0;t<e.length;++t)this._textureUnitMap[e[t]]=null;t>=0&&(this._activeTextureUnit=t)}externalVertexArrayObjectUpdate(){const e=this.capabilities.vao;e&&(e.bindVertexArray(null),this._activeVertexArrayObject=null),this._activeVertexBuffer=null,this._activeIndexBuffer=null}externalVertexBufferUpdate(){this._activeVertexBuffer=null}externalIndexBufferUpdate(){this._activeIndexBuffer=null}setBlendColor(e,t,r,i){e===this._blendColorState.r&&t===this._blendColorState.g&&r===this._blendColorState.b&&i===this._blendColorState.a||(this.gl.blendColor(e,t,r,i),this._blendColorState.r=e,this._blendColorState.g=t,this._blendColorState.b=r,this._blendColorState.a=i,this._stateTracker.invalidateBlending())}setBlendFunction(e,t){e===this._blendFunctionState.srcRGB&&t===this._blendFunctionState.dstRGB||(this.gl.blendFunc(e,t),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=t,this._blendFunctionState.dstAlpha=t,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(e,t,r,i){this._blendFunctionState.srcRGB===e&&this._blendFunctionState.srcAlpha===r&&this._blendFunctionState.dstRGB===t&&this._blendFunctionState.dstAlpha===i||(this.gl.blendFuncSeparate(e,t,r,i),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=r,this._blendFunctionState.dstRGB=t,this._blendFunctionState.dstAlpha=i,this._stateTracker.invalidateBlending())}setBlendEquation(e){this._blendEquationState.mode!==e&&(this.gl.blendEquation(e),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(e,t){this._blendEquationState.mode===e&&this._blendEquationState.modeAlpha===t||(this.gl.blendEquationSeparate(e,t),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=t,this._stateTracker.invalidateBlending())}setColorMask(e,t,r,i){this._colorMaskState.r===e&&this._colorMaskState.g===t&&this._colorMaskState.b===r&&this._colorMaskState.a===i||(this.gl.colorMask(e,t,r,i),this._colorMaskState.r=e,this._colorMaskState.g=t,this._colorMaskState.b=r,this._colorMaskState.a=i,this._stateTracker.invalidateColorWrite())}setClearColor(e,t,r,i){this._clearColor.r===e&&this._clearColor.g===t&&this._clearColor.b===r&&this._clearColor.a===i||(this.gl.clearColor(e,t,r,i),this._clearColor.r=e,this._clearColor.g=t,this._clearColor.b=r,this._clearColor.a=i)}setFaceCullingEnabled(e){this._polygonCullingEnabled!==e&&(!0===e?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=e,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(e){this._polygonOffsetFillEnabled!==e&&(!0===e?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=e,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(e,t){this._polygonOffset[0]===e&&this._polygonOffset[1]===t||(this._polygonOffset[0]=e,this._polygonOffset[1]=t,this.gl.polygonOffset(e,t),this._stateTracker.invalidatePolygonOffset())}setCullFace(e){this._cullFace!==e&&(this.gl.cullFace(e),this._cullFace=e,this._stateTracker.invalidateCulling())}setFrontFace(e){this._frontFace!==e&&(this.gl.frontFace(e),this._frontFace=e,this._stateTracker.invalidateCulling())}setScissorTestEnabled(e){this._scissorTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=e)}setScissorRect(e,t,r,i){this._scissorRect.x===e&&this._scissorRect.y===t&&this._scissorRect.width===r&&this._scissorRect.height===i||(this.gl.scissor(e,t,r,i),this._scissorRect.x=e,this._scissorRect.y=t,this._scissorRect.width=r,this._scissorRect.height=i)}setDepthTestEnabled(e){this._depthTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=e,this._stateTracker.invalidateDepthTest())}setClearDepth(e){this._clearDepth!==e&&(this.gl.clearDepth(e),this._clearDepth=e)}setDepthFunction(e){this._depthFunction!==e&&(this.gl.depthFunc(e),this._depthFunction=e,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(e){this._depthWriteEnabled!==e&&(this.gl.depthMask(e),this._depthWriteEnabled=e,this._stateTracker.invalidateDepthWrite())}setDepthRange(e,t){this._depthRange.zNear===e&&this._depthRange.zFar===t||(this.gl.depthRange(e,t),this._depthRange.zNear=e,this._depthRange.zFar=t,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(e){this._stencilTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=e,this._stateTracker.invalidateStencilTest())}setClearStencil(e){e!==this._clearStencil&&(this.gl.clearStencil(e),this._clearStencil=e)}setStencilFunction(e,t,r){this._stencilFunction.func===e&&this._stencilFunction.ref===t&&this._stencilFunction.mask===r||(this.gl.stencilFunc(e,t,r),this._stencilFunction.face=1032,this._stencilFunction.func=e,this._stencilFunction.ref=t,this._stencilFunction.mask=r,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(e,t,r,i){this._stencilFunction.face===e&&this._stencilFunction.func===t&&this._stencilFunction.ref===r&&this._stencilFunction.mask===i||(this.gl.stencilFuncSeparate(e,t,r,i),this._stencilFunction.face=e,this._stencilFunction.func=t,this._stencilFunction.ref=r,this._stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(e){this._stencilWriteMask!==e&&(this.gl.stencilMask(e),this._stencilWriteMask=e,this._stateTracker.invalidateStencilWrite())}setStencilOp(e,t,r){this._stencilOperation.fail===e&&this._stencilOperation.zFail===t&&this._stencilOperation.zPass===r||(this.gl.stencilOp(e,t,r),this._stencilOperation.face=1032,this._stencilOperation.fail=e,this._stencilOperation.zFail=t,this._stencilOperation.zPass=r,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(e,t,r,i){this._stencilOperation.face===e&&this._stencilOperation.fail===t&&this._stencilOperation.zFail===r&&this._stencilOperation.zPass===i||(this.gl.stencilOpSeparate(e,t,r,i),this._stencilOperation.face=e,this._stencilOperation.face=e,this._stencilOperation.fail=t,this._stencilOperation.zFail=r,this._stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}setActiveTexture(e,t=!1){const r=this._activeTextureUnit;return e>=0&&(t||e!==this._activeTextureUnit)&&(this.gl.activeTexture(s.a+e),this._activeTextureUnit=e),r}clear(e){e&&this.gl.clear(e)}clearSafe(e,t=255){e&&(16384&e&&this.setColorMask(!0,!0,!0,!0),256&e&&this.setDepthWriteEnabled(!0),1024&e&&this.setStencilWriteMask(t),this.gl.clear(e))}drawArrays(e,t,r){X()&&(this._numOfDrawCalls++,this._numOfTriangles+=J(e,r)),this.gl.drawArrays(e,t,r)}drawElements(e,t,r,i){X()&&(this._numOfDrawCalls++,this._numOfTriangles+=J(e,t)),this.gl.drawElements(e,t,r,i)}logIno(){X()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)}get capabilities(){return this._capabilities}setViewport(e,t,r,i){r=Math.max(Math.round(r),1),i=Math.max(Math.round(i),1);const s=this._viewport;s.x===e&&s.y===t&&s.width===r&&s.height===i||(s.x=e,s.y=t,s.width=r,s.height=i,this.gl.viewport(e,t,r,i))}getViewport(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}}useProgram(e){var t,r;if(!e)return null==(r=this._activeShaderProgram)||r.stop(),this._activeShaderProgram=null,void this.gl.useProgram(null);this._activeShaderProgram!==e&&(null==(t=this._activeShaderProgram)||t.stop(),this._activeShaderProgram=e,this.gl.useProgram(e.glName))}bindTexture(e,t,r=!1){(t>=this.parameters.maxTextureImageUnits||t<0)&&console.error("Input texture unit is out of range of available units!");const s=this._textureUnitMap[t];return this.setActiveTexture(t,r),(0,i.t)(e)||null==e.glName?((0,i.r)(s)&&this.gl.bindTexture(s.descriptor.target,null),this._textureUnitMap[t]=null,s):r||s!==e?(this.gl.bindTexture(e.descriptor.target,e.glName),e.applyChanges(),this._textureUnitMap[t]=e,s):(e.applyChanges(),s)}unbindTextureAllUnits(e){for(let t=0;t<this.parameters.maxTextureImageUnits;t++)this._textureUnitMap[t]===e&&(this.bindTexture(null,t),this._textureUnitMap[t]=null)}bindFramebuffer(e,t=!1){if((0,i.t)(e))return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null);(t||this._activeFramebuffer!==e)&&(e.initializeAndBind(),this._activeFramebuffer=e)}bindBuffer(e){e&&(34962===e.bufferType?this._activeVertexBuffer=H(this.gl,e,e.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=H(this.gl,e,e.bufferType,this._activeIndexBuffer))}bindRenderbuffer(e){const t=this.gl;e||(t.bindRenderbuffer(t.RENDERBUFFER,null),this._activeRenderbuffer=null),this._activeRenderbuffer!==e&&(t.bindRenderbuffer(t.RENDERBUFFER,e.glName),this._activeRenderbuffer=e)}unbindBuffer(e){34962===e?this._activeVertexBuffer=H(this.gl,null,e,this._activeVertexBuffer):this._activeIndexBuffer=H(this.gl,null,e,this._activeIndexBuffer)}bindVAO(e=null){(0,i.t)(e)?this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null):this._activeVertexArrayObject!==e&&(e.bind(),this._activeVertexArrayObject=e)}getBoundFramebufferObject(){return this._activeFramebuffer}getBoundVAO(){return this._activeVertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null),this.unbindBuffer(34962),this.unbindBuffer(34963);for(let e=0;e<this.parameters.maxTextureImageUnits;++e)this.bindTexture(null,e);this.setBlendingEnabled(!1),this.setBlendFunction(1,0),this.setBlendEquation(32774),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(1029),this.setFrontFace(2305),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(513),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(519,0,0),this.setStencilOp(7680,7680,7680),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){const e=this.gl,t=this.capabilities.vao;t&&t.bindVertexArray(null);for(let t=0;t<this.parameters.maxVertexAttributes;t++)e.disableVertexAttribArray(t);if(this._activeVertexBuffer?e.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):e.bindBuffer(34962,null),this._activeIndexBuffer?e.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):e.bindBuffer(34963,null),t&&this._activeVertexArrayObject){const e=this._activeVertexArrayObject;this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(e)}e.bindFramebuffer(e.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null),e.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null),e.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a),e.bindRenderbuffer(e.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null),!0===this._blendEnabled?e.enable(this.gl.BLEND):e.disable(this.gl.BLEND),e.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha),e.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha),e.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),e.clearDepth(this._clearDepth),e.clearStencil(this._clearStencil),e.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a),e.cullFace(this._cullFace),e.depthFunc(this._depthFunction),e.depthRange(this._depthRange.zNear,this._depthRange.zFar),!0===this._depthTestEnabled?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),e.depthMask(this._depthWriteEnabled),e.frontFace(this._frontFace),e.lineWidth(1),!0===this._polygonCullingEnabled?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),e.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]),!0===this._polygonOffsetFillEnabled?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL),e.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height),!0===this._scissorTestEnabled?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),e.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask),e.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass),!0===this._stencilTestEnabled?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),e.stencilMask(this._stencilWriteMask);for(let t=0;t<this.parameters.maxTextureImageUnits;t++){e.activeTexture(s.a+t),e.bindTexture(3553,null),(0,s.n)(e)&&e.bindTexture(32879,null);const r=this._textureUnitMap[t];(0,i.r)(r)&&e.bindTexture(r.descriptor.target,r.glName)}e.activeTexture(s.a+this._activeTextureUnit),e.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height),X()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}_loadParameters(e){var t;const r=this.capabilities.textureFilterAnisotropic,i=null!=(t=e.maxAnisotropy)?t:1/0,n={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:r?Math.min(this.gl.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY),i):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)};return s.r.TEXTURE_UNIT_FOR_UPDATES=n.maxTextureImageUnits-1,n}}function H(e,t,r,i){return t?i!==t&&e.bindBuffer(r,t.glName):e.bindBuffer(r,null),t}function J(e,t){switch(e){case 0:return 2*t;case 4:return t/3;case 5:case 6:return t-2;default:return 0}}const Z=!!(0,i.c)("enable-feature:webgl-debug");function X(){return Z}function Y(){return Z}var Q,K=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"],ee={exports:{}};void 0!==(Q=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(ee.exports=Q);var te,re=ee.exports,ie={exports:{}};te=ie,function(e){var t=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];void 0!==t&&(te.exports=t)}();var se=ie.exports,ne={exports:{}};!function(e){!function(t){var r=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"];void 0!==r&&(e.exports=r)}()}(ne);var oe=ne.exports,ae=999,le=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function ue(e){return function(e){var t=function(){var e,t,r,i=0,s=0,n=ae,o=[],a=[],l=1,u=0,c=0,h=!1,p=!1,d="";return function(e){return a=[],null!==e?f(e.replace?e.replace(/\r\n/g,"\n"):e):(o.length&&y(o.join("")),n=10,y("(eof)"),a)};function y(e){e.length&&a.push({type:le[n],data:e,position:c,line:l,column:u})}function f(f){var g;for(i=0,r=(d+=f).length;e=d[i],i<r;){switch(g=i,n){case 0:i="/"===e&&"*"===t?(o.push(e),y(o.join("")),n=ae,i+1):(o.push(e),t=e,i+1);break;case 1:case 2:i="\r"!==e&&"\n"!==e||"\\"===t?(o.push(e),t=e,i+1):(y(o.join("")),n=ae,i);break;case 3:i=m();break;case 4:i="."===e||/[eE]/.test(e)?(o.push(e),n=5,t=e,i+1):"x"===e&&1===o.length&&"0"===o[0]?(n=11,o.push(e),t=e,i+1):/[^\d]/.test(e)?(y(o.join("")),n=ae,i):(o.push(e),t=e,i+1);break;case 11:i=/[^a-fA-F0-9]/.test(e)?(y(o.join("")),n=ae,i):(o.push(e),t=e,i+1);break;case 5:"f"===e&&(o.push(e),t=e,i+=1),i=/[eE]/.test(e)||"-"===e&&/[eE]/.test(t)?(o.push(e),t=e,i+1):/[^\d]/.test(e)?(y(o.join("")),n=ae,i):(o.push(e),t=e,i+1);break;case 9999:i=v();break;case 9:i=/[^\s]/g.test(e)?(y(o.join("")),n=ae,i):(o.push(e),t=e,i+1);break;case ae:o=o.length?[]:o,i="/"===t&&"*"===e?(c=s+i-1,n=0,t=e,i+1):"/"===t&&"/"===e?(c=s+i-1,n=1,t=e,i+1):"#"===e?(n=2,c=s+i,i):/\s/.test(e)?(n=9,c=s+i,i):(h=/\d/.test(e),p=/[^\w_]/.test(e),c=s+i,n=h?4:p?3:9999,i)}if(g!==i)switch(d[g]){case"\n":u=0,++l;break;default:++u}}return s+=i,d=d.slice(i),a}function m(){if("."===t&&/\d/.test(e))return n=5,i;if("/"===t&&"*"===e)return n=0,i;if("/"===t&&"/"===e)return n=1,i;if("."===e&&o.length){for(;g(o););return n=5,i}if(";"===e||")"===e||"("===e){if(o.length)for(;g(o););return y(e),n=ae,i+1}var r=2===o.length&&"="!==e;if(/[\w_\d\s]/.test(e)||r){for(;g(o););return n=ae,i}return o.push(e),t=e,i+1}function g(e){for(var t,r,i=0;;){if(t=se.indexOf(e.slice(0,e.length+i).join("")),r=se[t],-1===t){if(i--+e.length>0)continue;r=e.slice(0,1).join("")}return y(r),c+=r.length,(o=o.slice(r.length)).length}}function v(){if(/[^\d\w_]/.test(e)){var r=o.join("");return n=re.indexOf(r)>-1?8:oe.indexOf(r)>-1?7:6,y(o.join("")),n=ae,i}return o.push(e),t=e,i+1}}(),r=[];return(r=r.concat(t(e))).concat(t(null))}(e)}const ce=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function he(e,t){for(let r=t-1;r>=0;r--){const t=e[r];if("whitespace"!==t.type&&"block-comment"!==t.type){if("keyword"!==t.type)break;if("attribute"===t.data||"in"===t.data)return!0}}return!1}function pe(e,t,r,i){i=i||r;for(const s of e)if("ident"===s.type&&s.data===r)return i in t?t[i]++:t[i]=0,pe(e,t,i+"_"+t[i],i);return r}function de(e,t,r="afterVersion"){function i(e,t){for(let r=t;r<e.length;r++){const t=e[r];if("operator"===t.type&&";"===t.data)return r}return null}const s={data:"\n",type:"whitespace"},n=t=>t<e.length&&/[^\r\n]$/.test(e[t].data);let o=function(e){let t=-1,s=0,n=-1;for(let o=0;o<e.length;o++){const a=e[o];if("preprocessor"===a.type&&(a.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++s:a.data.match(/\#endif\s*.*/)&&--s),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===a.type&&/^#version/.test(a.data)&&(n=Math.max(n,o)),"afterPrecision"===r&&"keyword"===a.type&&"precision"===a.data){const t=i(e,o);if(null===t)throw new Error("precision statement not followed by any semicolons!");n=Math.max(n,t)}t<n&&0===s&&(t=o)}return t+1}(e);n(o-1)&&e.splice(o++,0,s);for(const r of t)e.splice(o++,0,r);n(o-1)&&n(o)&&e.splice(o,0,s)}function ye(e,t,r,i="lowp"){de(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function fe(e,t,r,i,s="lowp"){de(e,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:i.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:s},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function me(e,t){let r,i,s=-1;for(let n=t;n<e.length;n++){const t=e[n];if("operator"===t.type&&("["===t.data&&(r=n),"]"===t.data)){i=n;break}"integer"===t.type&&(s=parseInt(t.data,10))}return r&&i&&e.splice(r,i-r+1),s}class ge{constructor(e,t,r,i){this._context=e,this._locations=i,this._vShader=null,this._fShader=null,this._nameToUniformLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},e||console.error("RenderingContext isn't initialized!"),0===t.length&&console.error("Shaders source should not be empty!"),this._vShader=be(this._context,35633,t),this._fShader=be(this._context,35632,r),this._vShader&&this._fShader||console.error("Error loading shaders!");const n=this._context.gl,o=n.createProgram();n.attachShader(o,this._vShader),n.attachShader(o,this._fShader),i.forEach(((e,t)=>n.bindAttribLocation(o,e,t))),n.linkProgram(o),Y()&&!n.getProgramParameter(o,n.LINK_STATUS)&&console.error("Could not initialize shader\nVALIDATE_STATUS: "+n.getProgramParameter(o,n.VALIDATE_STATUS)+", gl error ["+n.getError()+"]infoLog: "+n.getProgramInfoLog(o)),this._glName=o,this._context.instanceCounter.increment(s.e.Program,this)}get glName(){return this._glName}dispose(){const e=this._context.gl;if(this._vShader){const t=this._vShader;e.deleteShader(t),this._vShader=null}if(this._fShader){const t=this._fShader;e.deleteShader(t),this._fShader=null}this._glName&&(e.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(s.e.Program,this))}_getUniformLocation(e){return void 0===this._nameToUniformLocation[e]&&(this._nameToUniformLocation[e]=this._context.gl.getUniformLocation(this._glName,e)),this._nameToUniformLocation[e]}hasUniform(e){return null!==this._getUniformLocation(e)}setUniform1i(e,t){const r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.useProgram(this),this._context.gl.uniform1i(this._getUniformLocation(e),t),this._nameToUniform1[e]=t)}setUniform1iv(e,t){const r=this._nameToUniform1v[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform1iv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform1v[e]=Array.from(t):we(t,r))}setUniform2iv(e,t){const r=this._nameToUniform2[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform2iv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform2[e]=Array.from(t):we(t,r))}setUniform3iv(e,t){const r=this._nameToUniform3[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform3iv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform3[e]=Array.from(t):we(t,r))}setUniform4iv(e,t){const r=this._nameToUniform4[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform4iv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform4[e]=Array.from(t):we(t,r))}setUniform1f(e,t){const r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.useProgram(this),this._context.gl.uniform1f(this._getUniformLocation(e),t),this._nameToUniform1[e]=t)}setUniform1fv(e,t){const r=this._nameToUniform1v[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform1fv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform1v[e]=Array.from(t):we(t,r))}setUniform2f(e,t,r){const i=this._nameToUniform2[e];void 0!==i&&t===i[0]&&r===i[1]||(this._context.useProgram(this),this._context.gl.uniform2f(this._getUniformLocation(e),t,r),void 0===i?this._nameToUniform2[e]=[t,r]:(i[0]=t,i[1]=r))}setUniform2fv(e,t){const r=this._nameToUniform2[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform2fv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform2[e]=Array.from(t):we(t,r))}setUniform3f(e,t,r,i){const s=this._nameToUniform3[e];void 0!==s&&t===s[0]&&r===s[1]&&i===s[2]||(this._context.useProgram(this),this._context.gl.uniform3f(this._getUniformLocation(e),t,r,i),void 0===s?this._nameToUniform3[e]=[t,r,i]:(s[0]=t,s[1]=r,s[2]=i))}setUniform3fv(e,t){const r=this._nameToUniform3[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform3fv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform3[e]=Array.from(t):we(t,r))}setUniform4f(e,t,r,i,s){const n=this._nameToUniform4[e];void 0!==n&&t===n[0]&&r===n[1]&&i===n[2]&&s===n[3]||(this._context.useProgram(this),this._context.gl.uniform4f(this._getUniformLocation(e),t,r,i,s),void 0===n?this._nameToUniform4[e]=[t,r,i,s]:(n[0]=t,n[1]=r,n[2]=i,n[3]=s))}setUniform4fv(e,t){const r=this._nameToUniform4[e];ve(r,t)&&(this._context.useProgram(this),this._context.gl.uniform4fv(this._getUniformLocation(e),t),void 0===r?this._nameToUniform4[e]=Array.from(t):we(t,r))}setUniformMatrix3fv(e,t,r=!1){const s=this._nameToUniformMatrix3[e];(function(e,t){return!!(0,i.t)(e)||(9!==e.length?ve(e,t):9!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8])})(s,t)&&(this._context.useProgram(this),this._context.gl.uniformMatrix3fv(this._getUniformLocation(e),r,t),void 0===s?this._nameToUniformMatrix3[e]=Array.from(t):we(t,s))}setUniformMatrix4fv(e,t,r=!1){const s=this._nameToUniformMatrix4[e];(function(e,t){return!!(0,i.t)(e)||(16!==e.length?ve(e,t):16!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8]||e[9]!==t[9]||e[10]!==t[10]||e[11]!==t[11]||e[12]!==t[12]||e[13]!==t[13]||e[14]!==t[14]||e[15]!==t[15])})(s,t)&&(this._context.useProgram(this),this._context.gl.uniformMatrix4fv(this._getUniformLocation(e),r,t),void 0===s?this._nameToUniformMatrix4[e]=Array.from(t):we(t,s))}assertCompatibleVertexAttributeLocations(e){e.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){}}function ve(e,t){if((0,i.t)(e)||e.length!==t.length)return!0;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!0;return!1}function be(e,t,r){const i="webgl2"===e.webglVersion?function(e,t){const r=ue(e);if("300 es"===function(e,t="100",r="300 es"){const i=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const s of e)if("preprocessor"===s.type){const e=i.exec(s.data);if(e){const i=e[1].replace(/\s\s+/g," ");if(i===r)return i;if(i===t)return s.data="#version "+r,t;throw new Error("unknown glsl version: "+i)}}return e.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}(r,"100","300 es"))throw new Error("shader is already glsl 300 es");let i=null,s=null;const n={},o={};for(let e=0;e<r.length;++e){const a=r[e];switch(a.type){case"keyword":35633===t&&"attribute"===a.data?a.data="in":"varying"===a.data&&(a.data=35633===t?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(a.data.trim())&&(a.data=a.data.replace(/(2D|Cube|EXT)/g,"")),35632===t&&"gl_FragColor"===a.data&&(i||(i=pe(r,n,"fragColor"),ye(r,i,"vec4")),a.data=i),35632===t&&"gl_FragData"===a.data){const t=me(r,e+1),i=pe(r,n,"fragData");fe(r,i,"vec4",t,"mediump"),a.data=i}else 35632===t&&"gl_FragDepthEXT"===a.data&&(s||(s=pe(r,n,"gl_FragDepth")),a.data=s);break;case"ident":if(K.indexOf(a.data)>=0){if(35633===t&&he(r,e))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");a.data in o||(o[a.data]=pe(r,n,a.data)),a.data=o[a.data]}}}for(let e=r.length-1;e>=0;--e){const t=r[e];if("preprocessor"===t.type){const i=t.data.match(/\#extension\s+(.*)\:/);if(i&&i[1]&&ce.indexOf(i[1].trim())>=0){const t=r[e+1];r.splice(e,t&&"whitespace"===t.type?2:1)}const s=t.data.match(/\#ifdef\s+(.*)/);s&&s[1]&&ce.indexOf(s[1].trim())>=0&&(t.data="#if 1");const n=t.data.match(/\#ifndef\s+(.*)/);n&&n[1]&&ce.indexOf(n[1].trim())>=0&&(t.data="#if 0")}}return function(e){return e.map((e=>"eof"!==e.type?e.data:"")).join("")}(r)}(r,t):r,s=e.gl,n=s.createShader(t);return s.shaderSource(n,i),s.compileShader(n),Y()&&!s.getShaderParameter(n,s.COMPILE_STATUS)&&(console.error("Compile error in ".concat(35633===t?"vertex":"fragment"," shader")),console.error(s.getShaderInfoLog(n)),console.error(function(e){let t=2;return e.replace(/\n/g,(()=>"\n"+function(e){return e>=1e3?e.toString():("  "+e).slice(-3)}(t++)+":"))}(i)),"webgl2"===e.webglVersion&&(console.log("Shader source before transpilation:"),console.log(r))),n}function we(e,t){for(let r=0;r<e.length;++r)t[r]=e[r]}const _e=i.n.getLogger("esri/views/webgl");function xe(e){if(X()){const t=e.getError();if(t){const r=function(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}(e,t),i=(new Error).stack;_e.error(new n.s("webgl-error","WebGL error occured",{message:r,stack:i}))}}}const Se=i.n.getLogger("esri.views.webgl.BufferObject");class Te{constructor(e,t,r,i,n){this._context=e,this.bufferType=t,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(s.e.Buffer,this),this._glName=this._context.gl.createBuffer(),xe(this._context.gl),i&&this.setData(i,n)}static createIndex(e,t,r,i){return new Te(e,34963,t,r,i)}static createVertex(e,t,r){return new Te(e,34962,t,r)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}dispose(){var e;null!=(e=this._context)&&e.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(s.e.Buffer,this),this._context=null):this._glName&&Se.warn("Leaked WebGL buffer object")}setData(e,t){if(!e)return;if("number"==typeof e){if(e<0&&Se.error("Buffer size cannot be negative!"),34963===this.bufferType&&t)switch(this._indexType=t,this._size=e,t){case 5123:e*=2;break;case 5125:e*=4}}else{let t=e.byteLength;(0,i.I)(e)&&(t/=2,this._indexType=5123),(0,i.H)(e)&&(t/=4,this._indexType=5125),this._size=t}const r=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const s=this._context.gl;s.bufferData(this.bufferType,e,this.usage),xe(s),this._context.bindVAO(r)}setSubData(e,t=0,r=0,s=e.byteLength){if(!e)return;(t<0||t>=this._size)&&Se.error("offset is out of range!");let n=t,o=r,a=s,l=e.byteLength;(0,i.I)(e)&&(l/=2,n*=2,o*=2,a*=2),(0,i.H)(e)&&(l/=4,n*=4,o*=4,a*=4),void 0===s&&(s=l-1),r>=s&&Se.error("end must be bigger than start!"),t+r-s>this._size&&Se.error("An attempt to write beyond the end of the buffer!");const u=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const c=this._context.gl,h=ArrayBuffer.isView(e)?e.buffer:e,p=0===o&&a===e.byteLength?h:h.slice(o,a);c.bufferSubData(this.bufferType,n,p),xe(c),this._context.bindVAO(u)}}function Me(e,t){return e.vertexBuffers[t].size/Ee(e.layout[t])}function Ee(e){return e[0].stride}function Ie(e,t,r,i,s){const n=e.gl,o=e.capabilities.instancing;e.bindBuffer(r);for(const e of i){const r=t.get(e.name);void 0===r&&console.error(`There is no location for vertex attribute '${e.name}' defined.`),e.baseInstance&&!e.divisor&&console.error(`Vertex attribute '${e.name}' uses baseInstanceOffset without divisor.`);const i=(s||(0+e.baseInstance?e.baseInstance:0))*e.stride;if(e.count<=4)n.vertexAttribPointer(r,e.count,e.type,e.normalized,e.stride,e.offset+i),n.enableVertexAttribArray(r),e.divisor>0&&o&&o.vertexAttribDivisor(r,e.divisor);else if(9===e.count)for(let t=0;t<3;t++)n.vertexAttribPointer(r+t,3,e.type,e.normalized,e.stride,e.offset+12*t+i),n.enableVertexAttribArray(r+t),e.divisor>0&&o&&o.vertexAttribDivisor(r+t,e.divisor);else if(16===e.count)for(let t=0;t<4;t++)n.vertexAttribPointer(r+t,4,e.type,e.normalized,e.stride,e.offset+16*t+i),n.enableVertexAttribArray(r+t),e.divisor>0&&o&&o.vertexAttribDivisor(r+t,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count)}}function Oe(e,t,r,i){const s=e.gl,n=e.capabilities.instancing;e.bindBuffer(r);for(const e of i){const r=t.get(e.name);if(e.count<=4)s.disableVertexAttribArray(r),e.divisor&&e.divisor>0&&n&&n.vertexAttribDivisor(r,0);else if(9===e.count)for(let t=0;t<3;t++)s.disableVertexAttribArray(r+t),e.divisor&&e.divisor>0&&n&&n.vertexAttribDivisor(r+t,0);else if(16===e.count)for(let t=0;t<4;t++)s.disableVertexAttribArray(r+t),e.divisor&&e.divisor>0&&n&&n.vertexAttribDivisor(r+t,0);else console.error("Unsupported vertex attribute element count: "+e.count)}e.unbindBuffer(34962)}function Ae(e){switch(e){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function Pe(e){if((0,i.t)(e))return 0;if("descriptor"in e)return e.glName?Pe(e.descriptor):0;const t=e.internalFormat||"pixelFormat"in e&&e.pixelFormat;if(!t)return 0;const r="hasMipmap"in e&&e.hasMipmap?1.3:1,s=e.width*e.height;return Ae(t)*s*r}const Re=i.n.getLogger("esri.views.webgl.VertexArrayObject");class Fe{constructor(e,t,r,i,n=null){this._context=e,this._locations=t,this._layout=r,this._buffers=i,this._indexBuffer=n,this._glName=null,this._initialized=!1,e.instanceCounter.increment(s.e.VAO,this)}get glName(){return this._glName}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce(((e,t)=>e+this._buffers[t].size),(0,i.r)(this._indexBuffer)?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(e=!0){if(this._context){if(this._glName){var t,r;const e=null==(t=this._context)||null==(r=t.capabilities)?void 0:r.vao;e?(e.deleteVertexArray(this._glName),this._glName=null):Re.warn("Leaked WebGL VAO")}if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(const e in this._buffers)this._buffers[e].dispose(),delete this._buffers[e];this._indexBuffer=(0,i.z)(this._indexBuffer)}this._context.instanceCounter.decrement(s.e.VAO,this),this._context=null}else(this._glName||e&&Object.getOwnPropertyNames(this._buffers).length>0)&&Re.warn("Leaked WebGL VAO")}initialize(){if(this._initialized)return;const e=this._context.capabilities.vao;if(e){const t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}bind(){this.initialize();const e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:r}=this;e||Re.error("Vertex buffer dictionary is empty!");const s=this._context.gl;for(const r in e){const i=e[r];i||Re.error("Vertex buffer is uninitialized!");const s=t[r];s||Re.error("Vertex element descriptor is empty!"),Ie(this._context,this._locations,i,s)}(0,i.r)(r)&&(this._context.capabilities.vao?s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r.glName):this._context.bindBuffer(r))}unbind(){this.initialize();const e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:e,_layout:t}=this;e||Re.error("Vertex buffer dictionary is empty!");for(const r in e){const i=e[r];i||Re.error("Vertex buffer is uninitialized!");const s=t[r];Oe(this._context,this._locations,i,s)}(0,i.r)(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}class Ce{constructor(e,t){this._context=e,this._desc=t,this._context.instanceCounter.increment(s.e.Renderbuffer,this);const r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,t.internalFormat,t.width,t.height)}get descriptor(){return this._desc}resize(e,t){const r=this._desc;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const i=this._context.gl;this._context.bindRenderbuffer(this),i.renderbufferStorage(i.RENDERBUFFER,r.internalFormat,r.width,r.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(s.e.Renderbuffer,this),this._context=null)}}const Le=i.n.getLogger("esri.views.webgl.FrameBufferObject");class ke{constructor(e,t,r,i){if(this._context=e,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc={...t},e.instanceCounter.increment(s.e.Framebuffer,this),r){Array.isArray(r)||(r=[r]);for(let t=0;t<r.length;++t){var n;const i=r[t];let o;Ne(i)?(o=i.descriptor,this._colorAttachments.set(36064+t,i)):(o=i,this._colorAttachments.set(36064+t,new s.r(e,i))),0!==(null==(n=this._desc)?void 0:n.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateColorAttachmentPoint(36064+t),this._validateTextureDimensions(o,this._desc)}}if(i instanceof Ce){var o;const e=null!=(o=this._desc.depthStencilTarget)?o:3;2===e?this._stencilAttachment=i:1===e||3===e?this._depthAttachment=i:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),je(i.descriptor,this._desc)}else if(i){let e;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),Ne(i)?(this._depthStencilTexture=i,e=i.descriptor):this._depthStencilTexture=new s.r(this._context,i),this._validateTextureDimensions(e,this._desc)}}dispose(){if(!this._desc)return;const e=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(e),this._context.instanceCounter.decrement(s.e.Framebuffer,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const e=this._colorAttachments.get(36064);return e&&Ne(e)?e:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}get gpuMemoryUsage(){return Pe(this.colorAttachment)+Pe(this.depthStencilAttachment)}getColorTexture(e){const t=this._colorAttachments.get(e);return t&&Ne(t)?t:null}attachColorTexture(e,t=36064){if(!e)return;this._validateColorAttachmentPoint(t);const r=e.descriptor;if(this._validateTextureDimensions(r,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);const r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,t,r.TEXTURE_2D,e.glName,0)}this._colorAttachments.set(t,e)}detachColorTexture(e=36064){const t=this._colorAttachments.get(e);if(Ne(t)){const r=t;if(this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;t.framebufferTexture2D(t.FRAMEBUFFER,e,t.TEXTURE_2D,null,0)}return this._colorAttachments.delete(e),r}}attachDepthStencilTexture(e){if(!e)return;const t=e.descriptor;if(34041!==t.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==t.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(t,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,e.glName,0)}this._depthStencilTexture=e}detachDepthStencilTexture(){const e=this._depthStencilTexture;if(e&&this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,e}attachDepthStencilBuffer(e){if(!e)return;const t=e.descriptor;if(34041!==t.internalFormat&&33189!==t.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),je(t,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===t.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);const t=this._context.gl,r=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,r,t.RENDERBUFFER,e.glName)}this._depthAttachment=e}detachDepthStencilBuffer(){const e=this._context.gl,t=this._depthAttachment;if(t&&this._initialized){this._context.bindFramebuffer(this);const t=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,t,e.RENDERBUFFER,null)}return this._depthAttachment=null,t}detachAll(){this.detachColorTexture(),this.detachDepthStencilBuffer(),this.detachDepthStencilTexture()}copyToTexture(e,t,r,i,n,o,a){(e<0||t<0||n<0||o<0)&&console.error("Offsets cannot be negative!"),(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!");const l=this._desc,u=a.descriptor;3553!==a.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(e+r>l.width||t+i>l.height||n+r>u.width||o+i>u.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const c=this._context,h=c.bindTexture(a,s.r.TEXTURE_UNIT_FOR_UPDATES);c.bindFramebuffer(this),c.gl.copyTexSubImage2D(3553,0,n,o,e,t,r,i),c.bindTexture(h,s.r.TEXTURE_UNIT_FOR_UPDATES)}readPixels(e,t,r,i,s,n,o){(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,r,i,s,n,o)}resize(e,t){const r=this._desc;if(r.width!==e||r.height!==t){if(!this._initialized)return r.width=e,r.height=t,this._colorAttachments.forEach((r=>{r&&r.resize(e,t)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(e,t));r.width=e,r.height=t,this._colorAttachments.forEach((r=>{r&&r.resize(e,t)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(e,t):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(e,t),this._stencilAttachment&&this._stencilAttachment.resize(e,t)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(){var e,t,r,i;const n=this._context.gl;if(this._initialized)return void n.bindFramebuffer(n.FRAMEBUFFER,this.glName);this._glName&&n.deleteFramebuffer(this._glName);const o=this._context,a=n.createFramebuffer(),l=this._desc,u=null!=(e=l.colorTarget)?e:1,c=null!=(t=l.width)?t:1,h=null!=(r=l.height)?r:1;if(n.bindFramebuffer(n.FRAMEBUFFER,a),0===this._colorAttachments.size)if(0===u)this._colorAttachments.set(36064,function(e,t){return new s.r(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:t.width,height:t.height})}(o,l));else{const e=new Ce(o,{internalFormat:32854,width:c,height:h});this._colorAttachments.set(36064,e)}this._colorAttachments.forEach(((e,t)=>{e&&(Ne(e)?n.framebufferTexture2D(n.FRAMEBUFFER,t,n.TEXTURE_2D,e.glName,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,e.glName))}));const p=null!=(i=l.depthStencilTarget)?i:0;switch(p){case 1:case 3:{this._depthAttachment||(this._depthAttachment=new Ce(o,{internalFormat:1===l.depthStencilTarget?33189:34041,width:c,height:h}));const e=1===p?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT;n.framebufferRenderbuffer(n.FRAMEBUFFER,e,n.RENDERBUFFER,this._depthAttachment.glName);break}case 2:this._stencilAttachment||(this._stencilAttachment=new Ce(o,{internalFormat:36168,width:c,height:h})),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){o.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");const e={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:c,height:h};this._depthStencilTexture=new s.r(o,e)}n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,this._depthStencilTexture.glName,0)}Y()&&n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=a,this._initialized=!0}_disposeColorAttachments(){this._colorAttachments.forEach(((e,t)=>{if(Ne(e)){if(this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,t,e.TEXTURE_2D,null,0)}e.dispose()}else if(e instanceof WebGLRenderbuffer){const r=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),r.framebufferRenderbuffer(r.FRAMEBUFFER,t,r.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(e)}})),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const e=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);const t=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,t,e.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}_validateTextureDimensions(e,t){3553!==e.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}_validateColorAttachmentPoint(e){if(-1===ke._MAX_COLOR_ATTACHMENTS){const e=this._context.capabilities.drawBuffers;if(e){const t=this._context.gl;ke._MAX_COLOR_ATTACHMENTS=t.getParameter(e.MAX_COLOR_ATTACHMENTS)}else ke._MAX_COLOR_ATTACHMENTS=1}const t=e-36064;t+1>ke._MAX_COLOR_ATTACHMENTS&&Le.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${t+1}. Implementation supports up to ${ke._MAX_COLOR_ATTACHMENTS} color attachments`)}}function Ne(e){return"type"in e&&"texture"===e.type}function je(e,t){void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}ke._MAX_COLOR_ATTACHMENTS=-1},73574:(e,t,r)=>{"use strict";r.d(t,{h:()=>d});var i,s=r(78155),n=r(80987),o=r(82906),a=r(81135),l=r(80219),u=r(61481),c=r(88903),h=r(89710);let p=i=class extends s.a{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,u.e)(),configurable:!0})}normalizeCtorArgs(e,t,r,i){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:i}}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&(0,l.r)(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:(0,l.r)(this.geometry)?this.geometry.toJSON():null,symbol:(0,l.r)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new i(this.cloneProperties())}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}cloneProperties(){return{attributes:(0,l.y)(this.attributes),geometry:(0,l.y)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:(0,l.y)(this.symbol),visible:this.visible}}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:r};"attributes"===e&&(s.attributeName=i),this.layer.graphicChanged(s)}};(0,s.e)([(0,c.y)({value:null})],p.prototype,"attributes",null),(0,s.e)([(0,c.y)({value:null,types:n.e,json:{read:h.p}})],p.prototype,"geometry",null),(0,s.e)([(0,c.y)({type:Boolean})],p.prototype,"isAggregate",void 0),(0,s.e)([(0,c.y)()],p.prototype,"layer",void 0),(0,s.e)([(0,c.y)({type:o.M})],p.prototype,"popupTemplate",void 0),(0,s.e)([(0,c.y)()],p.prototype,"sourceLayer",void 0),(0,s.e)([(0,c.y)({value:null,types:a.j})],p.prototype,"symbol",null),(0,s.e)([(0,c.y)({type:Boolean,value:!0})],p.prototype,"visible",null),p=i=(0,s.e)([(0,c.n)("esri.Graphic")],p),(p||(p={})).generateUID=u.e;var d=p},71394:(e,t,r)=>{"use strict";r.d(t,{a:()=>c,m:()=>h,u:()=>p});var i=r(78155),s=r(73574),n=r(40130),o=r(31516),a=r(80219),l=r(88903);const u=n.L.ofType(s.h);a.n.getLogger("esri.support.GraphicsCollection");let c=class extends u{constructor(e){super(e),this.on("before-add",(e=>{e.item||e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(({item:e})=>{e.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}_createNewInstance(e){return new u(e)}_ownAll(){this.items.forEach((e=>this._own(e)))}_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_unownAll(){this.items.forEach((e=>this._unown(e)))}_unown(e){e.layer===this.owner&&(e.layer=null)}};(0,i.e)([(0,l.y)()],c.prototype,"owner",null),c=(0,i.e)([(0,l.n)("esri.support.GraphicsCollection")],c);const h=(e="graphics")=>({type:c,cast:o.t,set(t){const r=(0,o.n)(t,this._get(e),c);r.owner=this,this._set(e,r)}});var p=c},32769:(e,t,r)=>{"use strict";r.d(t,{a:()=>c,d:()=>h,l:()=>l});var i=r(78155),s=r(83731),n=r(88903),o=r(80219),a=r(36845);let l=class extends i.p{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new s.u,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,i=0){const s=0!=(1&i),n=++this.handleId;s||this.installSyncUpdatingWatch(e,t,n);const o=0!=(2&i)?(0,a.d)(e,t,r,s):e.watch(t,r,s);return this.handles.add(o,n),{remove:()=>this.handles.remove(n)}}addOnCollectionPropertyChange(e,t,r,i=0){const s=0!=(2&i),n=++this.handleId;return this.handles.add([(0,a.C)(e,t,"after-changes",this.createSyncUpdatingCallback()),(0,a.C)(e,t,"change",r,s?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],n),{remove:()=>{this.handles.remove(n)}}}addOnCollectionChange(e,t,r=0){const i=0!=(2&r),s=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],s),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(s)}}}addPromise(e){if((0,o.t)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(u)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const s=this.createSyncUpdatingCallback(),o=(0,i.m)((()=>(0,n.o)(e,t)),s);return this.handles.add(o,r),o}createSyncUpdatingCallback(){return()=>{this.handles.remove(u),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,i.j)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(u))})),u)}}};(0,i.e)([(0,n.y)({readOnly:!0})],l.prototype,"updating",void 0),l=(0,i.e)([(0,n.n)("esri.views.support.WatchUpdatingTracking")],l);const u=-42,c=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new s.u}get updatingHandles(){return this._get("updatingHandles")||new l}};return(0,i.e)([(0,n.y)({readOnly:!0})],t.prototype,"handles",null),(0,i.e)([(0,n.y)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,i.e)([(0,n.n)("esri.core.HandleOwner")],t),t};let h=class extends(c(i.p)){};h=(0,i.e)([(0,n.n)("esri.core.HandleOwner")],h)},83731:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});var i=r(78155),s=r(40130),n=r(80219),o=r(88903);let a=class extends i.p{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!s.L.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||s.L.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||s.L.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let e=0;e<t.length;e++)t[e].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return(0,n.m)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};(0,i.e)([(0,o.y)({readOnly:!0})],a.prototype,"size",null),a=(0,i.e)([(0,o.n)("esri.core.Handles")],a);var l=a},82361:(e,t,r)=>{"use strict";r.d(t,{v:()=>y});var i,s=r(78155),n=r(31531),o=r(65352),a=r(88903),l=(r(80219),r(4169));const u=(0,n.s)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),c=u.jsonValues.slice();(0,s.v)(c,"orthometric");const h=(0,n.s)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let p=i=class extends s.a{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return u.write(e,t,r)}readHeightModel(e,t,r){return u.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new a.z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return h.read(e)||(r&&r.messages&&r.messages.push(d(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,o.K)(e)||h.read(e)||(r&&r.messages&&r.messages.push(d(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,o.Y)(t);return new i({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new i;return t.read(e,{origin:"web-scene"}),t}};function d(e,t){return new a.z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,s.e)([(0,a.y)({type:u.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:c,default:"ellipsoidal"}}}})],p.prototype,"heightModel",void 0),(0,s.e)([(0,s.o)("web-scene","heightModel")],p.prototype,"writeHeightModel",null),(0,s.e)([(0,l.e)(["web-scene","service"],"heightModel")],p.prototype,"readHeightModel",null),(0,s.e)([(0,a.y)({type:h.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:h.jsonValues,write:h.write}}}})],p.prototype,"heightUnit",void 0),(0,s.e)([(0,l.e)("web-scene","heightUnit")],p.prototype,"readHeightUnit",null),(0,s.e)([(0,l.e)("service","heightUnit")],p.prototype,"readHeightUnitService",null),(0,s.e)([(0,a.y)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],p.prototype,"vertCRS",void 0),(0,s.e)([(0,l.e)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],p.prototype,"readVertCRS",null),p=i=(0,s.e)([(0,a.n)("esri.geometry.HeightModelInfo")],p);var y=p},62121:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var i=r(78155),s=r(88903);let n=0;const o=e=>{let t=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+n++})}};return t=(0,i.e)([(0,s.n)("esri.core.Identifiable")],t),t};let a=class extends(o(class{})){};a=(0,i.e)([(0,s.n)("esri.core.Identifiable")],a)},20868:(e,t,r)=>{"use strict";r.d(t,{A:()=>a}),r(33807);var i=r(65311),s=r(16063);class n{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fieldNames){const r=e.fields.get(t);this[t]=new r.constructor(this.buffer,r.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new n(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,r,i){const s=this.stride;if(s%4==0){const n=new Uint32Array(e.buffer,t*s,i*s/4);new Uint32Array(this.buffer,r*s,i*s/4).set(n)}else{const n=new Uint8Array(e.buffer,t*s,i*s);new Uint8Array(this.buffer,r*s,i*s).set(n)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this.appendField(e,i.u,t),this}vec2f64(e,t){return this.appendField(e,i.m,t),this}vec3f(e,t){return this.appendField(e,i.i,t),this}vec3f64(e,t){return this.appendField(e,i.T,t),this}vec4f(e,t){return this.appendField(e,i.c,t),this}vec4f64(e,t){return this.appendField(e,i.h,t),this}mat3f(e,t){return this.appendField(e,i.l,t),this}mat3f64(e,t){return this.appendField(e,i.a,t),this}mat4f(e,t){return this.appendField(e,i.p,t),this}mat4f64(e,t){return this.appendField(e,i.b,t),this}vec4u8(e,t){return this.appendField(e,i.x,t),this}f32(e,t){return this.appendField(e,i.y,t),this}f64(e,t){return this.appendField(e,i.o,t),this}u8(e,t){return this.appendField(e,i.d,t),this}u16(e,t){return this.appendField(e,i.g,t),this}i8(e,t){return this.appendField(e,i.j,t),this}vec2i8(e,t){return this.appendField(e,i.V,t),this}vec2i16(e,t){return this.appendField(e,i.q,t),this}vec2u8(e,t){return this.appendField(e,i.A,t),this}vec4u16(e,t){return this.appendField(e,i.L,t),this}u32(e,t){return this.appendField(e,i.B,t),this}appendField(e,t,r){const i=t.ElementCount*(0,s.e)(t.ElementType),n=this.stride;this.fields.set(e,{size:i,constructor:t,offset:n,optional:r}),this.stride+=i,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new n(this,e)}createView(e){return new n(this,e)}clone(){const e=new o;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,r)=>e.fields.set(r,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function a(){return new o}},39068:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var i=r(3629);class s{constructor(e,t){this._storage=new i.i,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},78155:(e,t,r)=>{"use strict";r.d(t,{A:()=>ve,B:()=>ne,C:()=>P,D:()=>se,E:()=>K,F:()=>p,G:()=>Oe,H:()=>W,I:()=>He,J:()=>oe,K:()=>d,L:()=>y,M:()=>x,N:()=>Ce,O:()=>_,P:()=>we,Q:()=>Q,R:()=>h,S:()=>Ze,T:()=>w,U:()=>M,V:()=>S,W:()=>m,X:()=>g,Y:()=>O,a:()=>ht,b:()=>at,c:()=>b,d:()=>it,e:()=>u,f:()=>te,g:()=>lt,h:()=>c,i:()=>ut,j:()=>ge,k:()=>G,l:()=>Le,m:()=>Fe,n:()=>k,o:()=>l,p:()=>Ye,q:()=>f,r:()=>C,s:()=>R,t:()=>L,u:()=>rt,v:()=>E,w:()=>ie,x:()=>a,y:()=>Me,z:()=>Ae});var i=r(80219),s=r(88903),n=r(20215);const o=new Set;function a(e,t,r={}){if((0,i.c)("esri-deprecation-warnings")){const{replacement:i,version:s,see:n,warnOnce:a}=r;let l=t;i&&(l+=`\n\t Replacement: ${i}`),s&&(l+=`\n\t Version: ${s}`),n&&(l+=`\n\t See ${n} for more details.`),function(e,t,r=!1){r&&o.has(t)||(r&&o.add(t),e.warn(` DEPRECATED - ${t}`))}(e,l,a)}}function l(e,t,r){let n,o;return void 0===t?(o=e,n=[void 0]):"string"!=typeof t?(o=e,n=[void 0],r=t):(o=t,n=Array.isArray(e)?e:[e]),(e,t)=>{const a=e.constructor.prototype;n.forEach((n=>{const l=(0,s.h)(e,n,o);l.write&&"object"!=typeof l.write&&(l.write={}),r&&(0,i.o)("write.target",r,l),(0,i.o)("write.writer",a[t],l)}))}}function u(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}class c{constructor(e,t,r,i=1,s=0){if(this.ctor=e,this.acquireFunction=t,this.releaseFunction=r,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let e=0;e<s;e++)this._pool[e]=new this.ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...e){let t;if(c.test.disabled)t=new this.ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this.ctor}t=this._pool.pop()}return this.acquireFunction?this.acquireFunction(t,...e):function(e){return e&&e.acquire&&"function"==typeof e.acquire}(t)&&t.acquire(...e),t}release(e){e&&!c.test.disabled&&(this.releaseFunction?this.releaseFunction(e):function(e){return e&&e.release&&"function"==typeof e.release}(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}c.test={disabled:!1};class h{constructor(e=1){this._seed=e}set seed(e){this._seed=null==e?Math.random()*h._m:e}getInt(){return this._seed=(h._a*this._seed+h._c)%h._m,this._seed}getFloat(){return this.getInt()/(h._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(e,t){const r=t-e;return e+this.getInt()/h._m*r}}function p(e,t){return t?e.filter(((e,r,i)=>i.findIndex(t.bind(null,e))===r)):e.filter(((e,t,r)=>r.indexOf(e)===t))}function d(e,t,r){if((0,i.t)(e)&&(0,i.t)(t))return!0;if((0,i.t)(e)||(0,i.t)(t)||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function y(e,t,r){let i,s;return r?(i=t.filter((t=>!e.some((e=>r(e,t))))),s=e.filter((e=>!t.some((t=>r(t,e)))))):(i=t.filter((t=>!e.includes(t))),s=e.filter((e=>!t.includes(e)))),{added:i,removed:s}}function f(e,t,r){return e&&t?r?e.filter((function(e){return t.findIndex((function(t){return r(e,t)}))>-1})):e.filter((function(e){return t.indexOf(e)>-1})):[]}function m(e){return e&&"number"==typeof e.length}function g(e,t){const r=e.length;if(0===r)return[];const i=[];for(let s=0;s<r;s+=t)i.push(e.slice(s,s+t));return i}h._m=2147483647,h._a=48271,h._c=0;const v=!!Array.prototype.fill;function b(e,t){if(v)return new Array(e).fill(t);const r=new Array(e);for(let i=0;i<e;i++)r[i]=t;return r}function w(e,t){void 0===t&&(t=e,e=0);const r=new Array(t-e);for(let i=e;i<t;i++)r[i-e]=i;return r}function _(e,t,r){const i=e.length;let s=0,n=i-1;for(;s<n;){const r=s+Math.floor((n-s)/2);t>e[r]?s=r+1:n=r}const o=e[s];return r?t>=e[i-1]?-1:o===t?s:s-1:o===t?s:-1}function x(e){return e.reduce(((e,t)=>e.concat(t||[])),[])}class S{constructor(){this.last=0}}const T=new S;function M(e,t,r,i){i=i||T;const s=Math.max(0,i.last-10);for(let n=s;n<r;++n)if(e[n]===t)return i.last=n,n;const n=Math.min(s,r);for(let r=0;r<n;++r)if(e[r]===t)return i.last=r,r;return-1}function E(e,t,r,i){const s=null==r?e.length:r,n=M(e,t,s,i);if(-1!==n)return e[n]=e[s-1],null==r&&e.pop(),t}const I=new Set;function O(e,t){const r=function(e){return e?(A.seed=e,()=>A.getFloat()):Math.random}(t);for(let t=e.length-1;t>0;t--){const i=Math.floor(r()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e}const A=new h;function P(e,t){const r=e.indexOf(t);return-1!==r?(e.splice(r,1),t):null}class R{constructor(e,t){this._observers=e,this._observer=t}remove(){P(this._observers,this._observer)}}class F{constructor(e,t,r){this.properties=e,this.propertyName=t,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=1|(r.nonNullable?8:0)|(r.hasOwnProperty("value")?16:0)|(void 0===r.get?32:0)|(void 0===r.dependsOn?64:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){(0,s.i)(this);const e=this.properties.store,t=this.propertyName,r=this.flags,i=e.get(t);if(4&r)return i;if(1&~r&&e.has(t))return i;this.flags|=4;const n=this.properties.host;let o;64&r?o=(0,s.a)(this,this.metadata.get,n):((0,s.b)(n,this),o=this.metadata.get.call(n)),e.set(t,o,1);const a=e.get(t);return a===i?this.flags&=-2:this.commit(),this.flags&=-5,a}onObservableAccessed(e){e!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(e)||this._accessed.push(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const e=this._accessed;if(null===e)return;let t=this._handles;null===t&&(t=this._handles=[]);for(let r=0;r<e.length;++r)t.push(e[r].observe(this));e.length=0}observe(e){return null===this._observers&&(this._observers=[]),this._observers.includes(e)||this._observers.push(e),new R(this._observers,e)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){2&~this.flags&&(this.flags|=1);const e=this._observers;if(null!==e)for(let t=0;t<e.length;++t)e[t].onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onCommitted(){if(null===this._observers)return;const e=this._observers.slice();for(let t=0;t<e.length;++t)e[t].onCommitted()}_clearObservationHandles(){const e=this._handles;if(null!==e){for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}}const C=7;function L(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function k(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return(0,i.m)(void 0)}function N(e){return k(e)}class j{constructor(){this._values=new Map}clone(e){const t=new j;return this._values.forEach(((r,s)=>{e&&e.has(s)||t.set(s,(0,i.y)(r))})),t}get(e){return this._values.get(e)}originOf(){return 6}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}}function D(e,t,r){return void 0!==e}function U(e,t,r,i){return!(void 0===e||null==r&&8&e.flags&&(i.lifecycle,1))}function V(e){return e&&"function"==typeof e.destroy}i.n.getLogger("esri.core.accessorSupport.Properties");class B{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new j,this._origin=6;const t=this.host.constructor.__accessorMetadata__,r=t.properties;for(const e in r){const t=new F(this,e,r[e]);this.properties.set(e,t)}this.metadatas=r,this._autoDestroy=t.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[e,t]of this.properties){const r=this.internalGet(e);r&&V(r)&&(r.destroy(),8&~t.flags&&this._internalSet(t,null)),t.destroy()}else for(const[e,t]of this.properties)t.destroy()}get initialized(){return 0!==this.lifecycle}get(e){const t=this.properties.get(e);if(t.metadata.get)return t.getComputed();(0,s.i)(t);const r=this.store;return r.has(e)?r.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.properties.get(e);if(void 0!==t&&16&t.flags)return"defaults"}return k(t)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){const t=this.properties.get(e);if(D(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const r=this.properties.get(e);D(r)&&this._internalSet(r,t)}getDependsInfo(e,t,r){const i=this.properties.get(t);if(!D(i))return"";const n=new Set,o=(0,s.a)({onObservableAccessed:e=>n.add(e),onTrackingEnd:()=>{}},(()=>{var t;return null==(t=i.metadata.get)?void 0:t.call(e)}));let a=`${r}${e.declaredClass.split(".").pop()}.${t}: ${o}\n`;if(0===n.size)return a;r+="  ";for(const e of n){if(!(e instanceof F))continue;const t=e.properties.host,i=e.propertyName,n=(0,s.e)(t);a+=n?n.getDependsInfo(t,i,r):`${r}${i}: undefined\n`}return a}setAtOrigin(e,t,r){const i=this.properties.get(e);if(D(i))return this._setAtOrigin(i,t,r)}isOverridden(e){const t=this.properties.get(e);return void 0!==t&&!!(2&t.flags)}clearOverride(e){const t=this.properties.get(e);void 0!==t&&2&t.flags&&(t.flags&=-3,t.notifyChange())}override(e,t){const r=this.properties.get(e);if(!U(r,0,t,this))return;const i=r.metadata.cast;if(i){const e=this._cast(i,t),{valid:r,value:s}=e;if(z.release(e),!r)return;t=s}r.flags|=2,this._internalSet(r,t)}set(e,t){const r=this.properties.get(e);if(!U(r,0,t,this))return;const i=r.metadata.cast;if(i){const e=this._cast(i,t),{valid:r,value:s}=e;if(z.release(e),!r)return;t=s}const s=r.metadata.set;s?s.call(this.host,t):this._internalSet(r,t)}setDefaultOrigin(e){this._origin=L(e)}getDefaultOrigin(){return k(this._origin)}notifyChange(e){const t=this.properties.get(e);void 0!==t&&t.notifyChange()}invalidate(e){const t=this.properties.get(e);void 0!==t&&t.invalidate()}commit(e){const t=this.properties.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const r=0!==this.lifecycle?this._origin:0;this._setAtOrigin(e,t,r)}_setAtOrigin(e,t,r){const n=this.store,o=e.propertyName;n.has(o,r)&&(0,i.l)(t,n.get(o))&&2&~e.flags&&r===n.originOf(o)||(e.invalidate(),n.set(o,t,r),e.commit(),(0,s.c)(this.host,e))}_cast(e,t){const r=z.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r}}const z=new c(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});function q(e){e.length=0}class G{constructor(e=50,t=50){this._pool=new c(Array,void 0,q,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return $.acquire()}static release(e){return $.release(e)}static prune(){$.prune()}}const $=new G(100);class W extends c{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=(0,i.p)(this._set)}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}const H=i.e.queueMicrotask?i.e.queueMicrotask:e=>{i.e.Promise.resolve().then(e)},J=[];let Z=[];function X(e){J.push(e),1===J.length&&H((()=>{for(const e of Z)e();const e=J.slice();J.length=0;for(const t of e)t()}))}!function(e){e.before=function(e){return Z.push(e),{remove(){Z=Z.filter((t=>t!==e))}}}}(X||(X={}));var Y,Q=X;class K{constructor(e,t=29){this.name=e,this._counter=0,this._items=new Array(t)}record(e){this._items[++this._counter%this._items.length]=e}get median(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((e,t)=>e+t),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}!function(e){const t=(e,t,r,i)=>{let s=t,n=t;const o=r>>>1,a=e[s-1];for(;n<=o;){n=s<<1,n<r&&i(e[n-1],e[n])<0&&++n;const t=e[n-1];if(i(t,a)<=0)break;e[s-1]=t,s=n}e[s-1]=a},r=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,i,s,n){void 0===i&&(i=0),void 0===s&&(s=e.length),void 0===n&&(n=r);for(let r=s>>>1;r>i;r--)t(e,r,s,n);const o=i+1;for(let r=s-1;r>i;r--){const s=e[i];e[i]=e[r],e[r]=s,t(e,o,r,n)}},e.iterableSort=function*(e,i,s,n){void 0===i&&(i=0),void 0===s&&(s=e.length),void 0===n&&(n=r);for(let r=s>>>1;r>i;r--)t(e,r,s,n),yield;const o=i+1;for(let r=s-1;r>i;r--){const s=e[i];e[i]=e[r],e[r]=s,t(e,o,r,n),yield}}}(Y||(Y={}));var ee=Y;class te{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new S,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),void 0!==e.deallocator&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>re(this)))}toArray(){return this.data.slice(0,this.length)}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let r=0;r<t;r++)this.data[this._length++]=e[r]}fill(e,t){for(let r=0;r<t;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,re(this)}pop(){if(0===this.length)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const t=M(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}removeUnordered(e){const t=E(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),this._shrink(),t}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,r){this.length=function(e,t,r=e.length,i=t.length,s,n){if(0===i||0===r)return r;I.clear();for(let e=0;e<i;++e)I.add(t[e]);s=s||T;const o=Math.max(0,s.last-10);for(let t=o;t<r;++t)if(I.has(e[t])&&(n&&n.push(e[t]),I.delete(e[t]),e[t]=e[r-1],--r,--t,0===I.size||0===r))return I.clear(),r;for(let t=0;t<o;++t)if(I.has(e[t])&&(n&&n.push(e[t]),I.delete(e[t]),e[t]=e[r-1],--r,--t,0===I.size||0===r))return I.clear(),r;return I.clear(),r}(this.data,e,this.length,t,this._hint,r),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(e,t){e>=this.length||t>=this.length||e===t||([this.data[e],this.data[t]]=[this.data[t],this.data[e]])}sort(e){ee.sort(this.data,0,this.length,e)}iterableSort(e){return ee.iterableSort(this.data,0,this.length,e)}some(e,t){for(let r=0;r<this.length;++r)if(e.call(t,this.data[r],r,this.data))return!0;return!1}filterInPlace(e,t){let r=0;for(let i=0;i<this._length;++i){const s=this.data[i];e.call(t,s,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let e=r;e<this._length;e++)this.data[e]=this._deallocator(this.data[e]);return this._length=r,this._shrink(),this}forAll(e,t){const r=this.length,i=this.data;for(let s=0;s<r;++s)e.call(t,i[s],s,i)}map(e,t){const r=new Array(this.length);for(let i=0;i<this.length;++i)r[i]=e.call(t,this.data[i],i,this.data);return r}reduce(e,t){let r=t;for(let t=0;t<this.length;++t)r=e(r,this.data[t],t,this.data);return r}has(e){const t=this.length,r=this.data;for(let i=0;i<t;++i)if(r[i]===e)return!0;return!1}}function re(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}function ie(e){return e}function se(e){return 1e3*e}function ne(e){return e}function oe(e){return.001*e}class ae{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class le{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let ue=0,ce=0;const he={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},pe=["prepare","preRender","render","postRender","update"],de=[],ye=new te;class fe{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const me={frameTasks:ye,willDispatch:!1,clearFrameTasks:function(e=!1){ye.forAll((e=>{e.removed=!0})),e&&Se()},dispatch:Te,executeFrameTasks:function(e){const t=e-ue;ue=e;const r=ce>0?ce:1e3/60,i=Math.max(0,t-r);for(let s=0;s<pe.length;s++){const n=performance.now(),o=pe[s];ye.forAll((n=>{var a;n.paused||n.removed||(0===s&&n.ticks++,n.phases[o]&&(he.time=e,he.deltaTime=0===n.ticks?0:t,he.elapsedFrameTime=performance.now()-e,he.frameDuration=r-i,null==(a=n.phases[o])||a.call(n,he)))})),Ee[s].record(performance.now()-n)}Se(),Ie.record(performance.now()-e)}};function ge(e){const t=new le(e);return de.push(t),me.willDispatch||(me.willDispatch=!0,Q(Te)),t}function ve(e){const t=new ae(e);return ye.push(t),null==be&&(ue=performance.now(),be=requestAnimationFrame(_e)),new fe(t)}let be=null;function we(e){ce=Math.max(0,e)}function _e(){const e=performance.now();be=null,be=ye.length>0?requestAnimationFrame(_e):null,me.executeFrameTasks(e)}const xe=new te;function Se(){ye.forAll((e=>{e.removed&&xe.push(e)})),ye.removeUnorderedMany(xe.data,xe.length),xe.clear()}function Te(){for(;de.length;){const e=(0,i.m)(de.shift());e.isActive&&e.callback()}me.willDispatch=!1}function Me(e=1,t){const r=(0,n.D)(),i=()=>{(0,n.b)(t)?r.reject((0,n.m)()):0===e?r():(--e,Q((()=>i())))};return i(),r.promise}const Ee=pe.map((e=>new K(e))),Ie=new K("total");function Oe(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}class Ae{constructor(e){this._notify=e,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}onObservableAccessed(e){this._accessed.includes(e)||this._accessed.push(e)}onTrackingEnd(){const e=this._handles,t=this._accessed;for(let r=0;r<t.length;++r)e.push(t[r].observe(this));t.length=0}clear(){const e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}let Pe=!1;const Re=[];function Fe(e,t,r={runImmediately:!1}){let i=new Ae((function r(){if(!i||o)return;if(Pe)return void ke(r);const a=n;i.clear(),Pe=!0,o=!0,n=(0,s.a)(i,e),o=!1,Pe=!1,t(n,a),Ne()})),n=null,o=!1;return o=!0,n=(0,s.a)(i,e),o=!1,r.runImmediately&&t(n,n),{remove:function(){i&&(i.destroy(),i=null,n=null)}}}function Ce(e,t){return Fe(e,t,{runImmediately:!0})}function Le(e){let t=new Ae((function i(){t&&!r&&(Pe?ke(i):(t.clear(),Pe=!0,r=!0,(0,s.a)(t,e),r=!1,Pe=!1,Ne()))})),r=!1;return r=!0,(0,s.a)(t,e),r=!1,{remove:function(){t&&(t.destroy(),t=null)}}}function ke(e){Re.includes(e)||Re.unshift(e)}function Ne(){for(;Re.length;)Re.pop()()}class je{constructor(){this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null}acquire(e,t,r,i,n){this.target=e,this.path=t,this.oldValue=r,this.callback=i,this.getValue=n,this.propertyPath=(0,s.l)(t),this.uid=++je.uid,this.removed=!1}release(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++je.uid,this.removed=!0}}je.pool=new W(je),je.uid=0;const De=new G,Ue=new Set;let Ve;function Be(e){Ue.delete(e),Ue.add(e),Ve||(Ve=ge(Ge))}function ze(e){if(e.removed)return;const{callback:t,path:r,oldValue:i,target:s}=e,n=e.getValue();qe(i,n)&&(e.oldValue=n,t.call(s,n,i,r,s))}function qe(e,t){return!(0,i.l)(e,t)}function Ge(){let e=10;for(;Ve&&e--;){Ve=null;const e=$e(),t=De.acquire();for(const r of e){const e=r.uid;ze(r),e===r.uid&&r.removed&&t.push(r)}for(const e of Ue)e.removed&&(t.push(e),Ue.delete(e));for(let e=0;e<t.length;e++)je.pool.release(t[e]);De.release(t),De.release(e),We.forEach((e=>e()))}}function $e(){const e=De.acquire();e.length=Ue.size;let t=0;for(const r of Ue)e[t]=r,++t;return Ue.clear(),e}const We=new Set;function He(e){return We.add(e),{remove(){We.delete(e)}}}function Je(e,t,r,i=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:i?function(e,t,r){const i=(0,s.f)(e,t,r,((e,t,r)=>{let n=!1;return Fe((()=>(0,s.o)(e,t)),((s,o)=>{e.__accessor__.destroyed?i.remove():n||(n=!0,qe(o,s)&&r.call(e,s,o,t,e),n=!1)}))}));return i}(e,t,r):function(e,t,r){let i=(0,s.f)(e,t,r,((e,t,r)=>{let n,o,a=function(e,t){let r=new Ae((function(){t(i,n)})),i=null;function n(){return r?(r.clear(),i=(0,s.a)(r,e),i):null}return n(),{remove:function(){r&&(r.destroy(),r=null),i=null}}}((()=>(0,s.o)(e,t)),((s,a)=>{e.__accessor__.destroyed||n&&n.uid!==o?i.remove():(n||(n=je.pool.acquire(e,t,s,r,a),o=n.uid),Be(n))}));return{remove:(0,s.g)((function(){a.remove(),n&&(n.uid!==o||n.removed||(n.removed=!0,Be(n)),n=null),i=a=null}))}}));return i}(e,t,r)}function Ze(e){return Oe(Ue,(t=>t.oldValue===e))}function Xe(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class Ye{constructor(...e){if(this.constructor===Ye)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new B(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:r,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class o extends n{constructor(...e){super(...e),this.inherited=null,i&&i.apply(this,e)}}(0,s.j)(o.prototype);for(const t in e){const r=e[t];o.prototype[t]="function"==typeof r?function(...e){const i=this.inherited;let s;this.inherited=function(...e){if(n.prototype[t])return n.prototype[t].apply(this,e)};try{s=r.apply(this,e)}catch(e){throw this.inherited=i,e}return this.inherited=i,s}:e[t]}for(const e in t){const r=Xe(t[e]);(0,s.y)(r)(o.prototype,e)}return(0,s.n)(r)(o)}postscript(e){const t=this.__accessor__,r=t.ctorArgs||e;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(function(e){for(const t of Ue.values())t.target===e&&(t.removed=!0)}(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return(0,s.k)(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}isInstanceOf(e){return function(e,t,r={}){if((0,i.c)("esri-deprecation-warnings")){const{moduleName:i}=r;a(e,"Function: "+(i?i+"::":"")+t+"()",r)}}(i.n.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return(0,s.t)(this,e,t),this}watch(e,t,r){return Je(this,e,t,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_override(e,t){return this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}}function Qe(e,t,r){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const i=e.read.source;if("string"==typeof i){if(i===t)return!0;if(i.indexOf(".")>-1&&0===i.indexOf(t)&&(0,s.q)(i,r))return!0}else for(const e of i){if(e===t)return!0;if(e.indexOf(".")>-1&&0===e.indexOf(t)&&(0,s.q)(e,r))return!0}return!1}function Ke(e,t,r,i,n){let o=(0,s.m)(t[r],n);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(o)&&(e[r]=!0);for(const a of Object.getOwnPropertyNames(t))o=(0,s.m)(t[a],n),Qe(o,r,i)&&(e[a]=!0)}function et(e,t,r,i){const n=r.metadatas,o=(0,s.p)(n[t],"any",i),a=o&&o.default;if(void 0===a)return;const l="function"==typeof a?a.call(e,t,i):a;void 0!==l&&r.set(t,l)}const tt={origin:"service"};function rt(e,t,r=tt){if(!t||"object"!=typeof t)return;const i=(0,s.e)(e),n=i.metadatas,o={};for(const e of Object.getOwnPropertyNames(t))Ke(o,n,e,t,r);i.setDefaultOrigin(r.origin);for(const a of Object.getOwnPropertyNames(o)){const o=(0,s.m)(n[a],r).read,l=o&&o.source;let u;u=l&&"string"==typeof l?(0,s.o)(t,l):t[a],o&&o.reader&&(u=o.reader.call(e,u,t,r)),void 0!==u&&i.set(a,u)}if(!r||!r.ignoreDefaults)for(const t of Object.getOwnPropertyNames(n))o[t]||et(e,t,i,r);i.setDefaultOrigin("user")}function it(e,t,r,i=tt){var s;const n={...i,messages:[]};r(n),null==(s=n.messages)||s.forEach((t=>{"warning"!==t.type||e.loaded?i&&i.messages&&i.messages.push(t):e.loadWarnings.push(t)}))}const st=i.n.getLogger("esri.core.accessorSupport.write");function nt(e,t,r,i,s){var n,o;const a={};return null==(n=t.write)||null==(o=n.writer)||o.call(e,i,a,r,s),a}function ot(e,t,r,i,s,o){if(!i||!i.write)return!1;const a=e.get(r);if(!s&&i.write.overridePolicy){const t=i.write.overridePolicy.call(e,a,r,o);void 0!==t&&(s=t)}if(s||(s=i.write),!s||!1===s.enabled)return!1;if((null===a&&!s.allowNull||void 0===a)&&s.isRequired){const t=new n.s("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return t&&o&&o.messages?o.messages.push(t):t&&!o&&st.error(t.name,t.message),!1}return!(void 0===a||null===a&&!s.allowNull||function(e,t,r,i,s){const n=i.default;return void 0!==n&&(null!=i.defaultEquals?i.defaultEquals(s):"function"==typeof n?!!Array.isArray(s)&&d(n.call(e,t,r),s):n===s)}(e,r,o,i,a)||void 0===i.default&&!s.ignoreOrigin&&o&&o.origin&&t.store.originOf(r)<L(o.origin))}function at(e,t,r,i){const n=(0,s.e)(e),o=n.metadatas,a=(0,s.r)(o[t],i);return!!a&&ot(e,n,t,a,r,i)}function lt(e,t,r){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return(0,s.v)(t,e.toJSON());const i=(0,s.e)(e),n=i.metadatas;for(const l in n){const u=(0,s.r)(n[l],r);if(!ot(e,i,l,u,void 0,r))continue;const c=e.get(l),h=nt(e,u,u.write&&"string"==typeof u.write.target?u.write.target:l,c,r);var o,a;Object.keys(h).length>0&&(t=(0,s.v)(t,h),null!=r&&null!=(o=r.resources)&&null!=(a=o.pendingOperations)&&a.length&&Promise.all(r.resources.pendingOperations).then((()=>(0,s.v)(t,h))),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:l,oldOrigin:N(i.store.originOf(l)),newOrigin:r.origin}))}return t}const ut=e=>{let t=class extends e{constructor(...e){super(...e)}read(e,t){rt(this,e,t)}write(e={},t){return lt(this,e,t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return ct.call(this,e,t)}};return t=u([(0,s.n)("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function ct(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let ht=class extends(ut(Ye)){};ht=u([(0,s.n)("esri.core.JSONSupport")],ht)},97325:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var i=r(3629);class s{constructor(e,t){this._storage=new i.i,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},78435:(e,t,r)=>{"use strict";r.d(t,{E:()=>_});var i,s=r(78155),n=r(81135),o=r(31531),a=r(80219),l=r(88903),u=r(4169),c=r(53902),h=r(40481),p=r(5250);let d=i=class extends s.a{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?(0,c.w)(t.value):e}writeExpression(e,t,r){null!=this.value&&(e=(0,c.w)(this.value)),t[r]=e}clone(){return new i({expression:this.expression,title:this.title,value:this.value})}};(0,s.e)([(0,l.y)({type:String,json:{write:{allowNull:!0}}})],d.prototype,"expression",void 0),(0,s.e)([(0,u.e)("expression",["expression","value"])],d.prototype,"readExpression",null),(0,s.e)([(0,s.o)("expression")],d.prototype,"writeExpression",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],d.prototype,"title",void 0),(0,s.e)([(0,l.y)({json:{read:!1,write:!1}})],d.prototype,"value",void 0),d=i=(0,s.e)([(0,l.n)("esri.layers.support.LabelExpressionInfo")],d);var y,f=d;const m=new o.o({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function g(e){return!e||"service"!==e.origin&&!v(e.layer)}function v(e){return"map-image"===(null==e?void 0:e.type)}function b(e){var t,r;return!!v(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}let w=y=class extends s.a{constructor(e){super(e),this.type="label",this.name=null,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=h.y,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;const i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){const e=r(t[i[0]],i[1],i[2]),s=i[3],n=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return e&&n;case"OR":return e||n}}return!1}catch(t){console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=(0,c.u)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=(0,c._)(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(null==e&&null!=this.labelExpression&&g(i))e=new f({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(i);s.expression&&(t[r]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return(0,c.x)(this)}getLabelExpressionArcade(){return(0,c.f)(this)}getLabelExpressionSingleField(){return(0,c.g)(this)}hash(){return JSON.stringify(this)}clone(){return new y({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,a.y)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:(0,a.y)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],w.prototype,"name",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],w.prototype,"deconflictionStrategy",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&b(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],w.prototype,"labelExpression",void 0),(0,s.e)([(0,u.e)("labelExpression")],w.prototype,"readLabelExpression",null),(0,s.e)([(0,s.o)("labelExpression")],w.prototype,"writeLabelExpression",null),(0,s.e)([(0,l.y)({type:f,json:{write:{overridePolicy:(e,t,r)=>function(e){return g(e)||b(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}})],w.prototype,"labelExpressionInfo",void 0),(0,s.e)([(0,s.o)("labelExpressionInfo")],w.prototype,"writeLabelExpressionInfo",null),(0,s.e)([(0,l.y)({type:m.apiValues,json:{type:m.jsonValues,read:m.read,write:m.write}})],w.prototype,"labelPlacement",void 0),(0,s.e)([(0,l.y)({type:Number})],w.prototype,"maxScale",void 0),(0,s.e)([(0,s.o)("maxScale")],w.prototype,"writeMaxScale",null),(0,s.e)([(0,l.y)({type:Number})],w.prototype,"minScale",void 0),(0,s.e)([(0,s.o)("minScale")],w.prototype,"writeMinScale",null),(0,s.e)([(0,l.y)({types:n.P,json:{origins:{"web-scene":{types:n.F,write:p.t,default:null}},write:p.t,default:null}})],w.prototype,"symbol",void 0),(0,s.e)([(0,l.y)({type:Boolean,json:{write:!0}})],w.prototype,"useCodedValues",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],w.prototype,"where",void 0),w=y=(0,s.e)([(0,l.n)("esri.layers.support.LabelClass")],w);var _=w},41290:(e,t,r)=>{"use strict";r.d(t,{b:()=>y});var i=r(78155),s=r(80219),n=r(80987),o=r(20215),a=r(62121),l=r(88903),u=r(98548),c=r(92858);let h=0;const p=s.n.getLogger("esri.layers.Layer");let d=class extends(n.n.EventedMixin((0,a.r)(n.f))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new u.M(-180,-90,180,90,c.k.WGS84),this.id=Date.now().toString(16)+"-layer-"+h++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=c.k.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,i=await Promise.all([r.e(9351),r.e(2143)]).then(r.bind(r,32143));try{return await i.fromUrl(t)}catch(e){throw p.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",e),e}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await r.e(9351).then(r.bind(r,87495)).then((function(e){return e.p}));try{return await i.fromItem(t)}catch(e){const r=t&&t.portalItem,i=r&&r.id||"unset",n=r&&r.portal&&r.portal.url||s.d.portalUrl;throw p.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+i+"')",e),e}}initialize(){this.when().catch((e=>{var t,r;(0,o.g)(e)||s.n.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?(0,n.U)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.L)(e,{query:{f:"json"},responseType:"json"})).data;throw new o.s("layer:no-attribution-data","Layer does not have attribution data")}};(0,i.e)([(0,l.y)({type:String})],d.prototype,"attributionDataUrl",void 0),(0,i.e)([(0,l.y)({type:u.M})],d.prototype,"fullExtent",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],d.prototype,"hasAttributionData",null),(0,i.e)([(0,l.y)({type:String})],d.prototype,"id",void 0),(0,i.e)([(0,l.y)({type:Boolean,nonNullable:!0})],d.prototype,"legendEnabled",void 0),(0,i.e)([(0,l.y)({type:["show","hide","hide-children"]})],d.prototype,"listMode",void 0),(0,i.e)([(0,l.y)({type:Number,range:{min:0,max:1},nonNullable:!0})],d.prototype,"opacity",void 0),(0,i.e)([(0,l.y)()],d.prototype,"parent",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],d.prototype,"parsedUrl",null),(0,i.e)([(0,l.y)({type:Boolean})],d.prototype,"popupEnabled",void 0),(0,i.e)([(0,l.y)({type:Boolean})],d.prototype,"attributionVisible",void 0),(0,i.e)([(0,l.y)({type:c.k})],d.prototype,"spatialReference",void 0),(0,i.e)([(0,l.y)({type:String})],d.prototype,"title",void 0),(0,i.e)([(0,l.y)({type:String,readOnly:!0,json:{read:!1}})],d.prototype,"type",void 0),(0,i.e)([(0,l.y)()],d.prototype,"url",void 0),(0,i.e)([(0,l.y)({type:Boolean,nonNullable:!0})],d.prototype,"visible",void 0),d=(0,i.e)([(0,l.n)("esri.layers.Layer")],d);var y=d},50822:(e,t,r)=>{"use strict";r.d(t,{d:()=>c});var i=r(78155),s=r(80987),n=r(32769),o=r(62121),a=r(80219),l=r(88903);let u=class extends((0,n.a)((0,o.r)((0,s.d)(s.n.EventedMixin(i.p))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer&&this.layer.title||"no title";throw a.n.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get("layer.visible")}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,i.e)([(0,l.y)()],u.prototype,"fullOpacity",null),(0,i.e)([(0,l.y)()],u.prototype,"layer",void 0),(0,i.e)([(0,l.y)()],u.prototype,"parent",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],u.prototype,"suspended",null),(0,i.e)([(0,l.y)({readOnly:!0})],u.prototype,"suspendInfo",null),(0,i.e)([(0,l.y)({readOnly:!0})],u.prototype,"legendEnabled",null),(0,i.e)([(0,l.y)({type:Boolean,readOnly:!0})],u.prototype,"updating",null),(0,i.e)([(0,l.y)({readOnly:!0})],u.prototype,"updatingProgress",null),(0,i.e)([(0,l.y)()],u.prototype,"visible",null),u=(0,i.e)([(0,l.n)("esri.views.layers.LayerView")],u);var c=u},49293:(e,t,r)=>{"use strict";r.d(t,{a:()=>u,n:()=>p});var i=r(80219),s=r(78155),n=r(88903),o=r(20215),a=r(26779);const l=i.n.getLogger("esri.core.workers.WorkerHandle");class u{constructor(e,t,r,i={}){this._mainMethod=t,this._listeners=[],this._promise=(0,a.p)(e,{...i,schedule:r}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,i.hasInitialize&&this.broadcast({},"initialize");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>l.error(`Failed to initialize ${e} worker: ${t}`)))}on(e,t){const r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),(0,n.A)((()=>{r.removed=!0,(0,s.C)(this._listeners,r),this._thread&&(0,i.r)(r.threadHandle)&&r.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const i=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:i,signal:r})}return this._promise?this._promise.then((()=>((0,o.a)(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}class c extends u{constructor(e=null){super("LercWorker","_decode",e,{strategy:"dedicated"}),this.schedule=e,this.ref=0}decode(e,t,r){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},r):Promise.resolve(null)}getTransferList(e){return[e.buffer]}release(){--this.ref<=0&&(h.forEach(((e,t)=>{e===this&&h.delete(t)})),this.destroy())}}const h=new Map;function p(e=null){let t=h.get((0,i.f)(e));return t||((0,i.r)(e)?(t=new c((t=>e.schedule(t))),h.set(e,t)):(t=new c,h.set(null,t))),++t.ref,t}},80987:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$:()=>T,A:()=>D,B:()=>se,C:()=>R,D:()=>H,E:()=>B,F:()=>X,G:()=>Y,H:()=>Q,I:()=>ne,J:()=>I,K:()=>He,L:()=>Ae,M:()=>J,P:()=>U,Q:()=>Z,R:()=>me,T:()=>G,U:()=>O,V:()=>ee,W:()=>$,X:()=>te,a:()=>xe,b:()=>ye,c:()=>M,d:()=>Ye,e:()=>p,f:()=>rt,g:()=>ce,h:()=>le,i:()=>c,j:()=>re,k:()=>C,l:()=>Te,m:()=>Qe,n:()=>Ze,o:()=>Ie,p:()=>ue,q:()=>A,r:()=>we,s:()=>_e,t:()=>h,u:()=>Se,v:()=>Ee,w:()=>de,x:()=>he,y:()=>ge,z:()=>W}),r(33807);var i=r(88903),s=r(98548),n=r(20736),o=(r(92858),r(31531)),a=r(80219),l=r(20215),u=r(78155);const c=(0,o.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),h=(0,o.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),p={base:n.p,key:"type",typeMap:{extent:s.M,multipoint:s.u,point:n.b,polyline:s.m,polygon:s.j}};(0,i.w)(p);const d=a.n.getLogger("esri.core.urlUtils"),y=a.d.request,f="esri/config: esriConfig.request.proxyUrl is not set.",m=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,g=/^\s*http:/i,v=/^\s*https:/i,b=/^\s*file:/i,w=/:\d+$/,_=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,x=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),S=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class T{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=(0,a.m)(this.uri.match(x));this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=(0,a.m)(this.authority.match(S)),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}const M=new T(a.d.applicationUrl),E={},I=(()=>{const e=(0,a.m)(M.path),t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${M.scheme}://${M.host}${null!=M.port?`:${M.port}`:""}${t}`})();function O(e){const t={path:null,query:null},r=new T(e),i=e.indexOf("?");return null===r.query?t.path=e:(t.path=e.substring(0,i),t.query=A(r.query)),r.fragment&&(t.hash=r.fragment,null===r.query&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function A(e){const t=e.split("&"),r={};for(const e of t){if(!e)continue;const t=e.indexOf("=");let i,s;t<0?(i=decodeURIComponent(e),s=""):(i=decodeURIComponent(e.slice(0,t)),s=decodeURIComponent(e.slice(t+1)));let n=r[i];"string"==typeof n&&(n=r[i]=[n]),Array.isArray(n)?n.push(s):r[i]=s}return r}function P(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function R(e,t){return e?t&&"function"==typeof t?Object.keys(e).map((r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r])))).join("&"):Object.keys(e).map((r=>{const i=e[r];if(null==i)return"";const s=encodeURIComponent(r)+"=",n=t&&t[r];return n?s+encodeURIComponent(n(i)):Array.isArray(i)?i.map((e=>P(e)?s+encodeURIComponent(JSON.stringify(e)):s+encodeURIComponent(e))).join("&"):P(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)})).filter((e=>e)).join("&"):""}function F(e=!1){let t,r=y.proxyUrl;if("string"==typeof e){t=se(e);const i=D(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw d.warn(f),new l.s("urlutils:proxy-not-set",f);return t&&oe()&&(r=ne(r)),O(r)}function C(e){const t=D(e);let r,i;if(t){const e=k(t.proxyUrl);r=e.path,i=e.query?A(e.query):null}if(r){const t=O(e);e=r+"?"+t.path;const s=R({...i,...t.query});s&&(e=`${e}?${s}`)}return e}const L={path:"",query:""};function k(e){const t=e.indexOf("?");return-1!==t?(L.path=e.slice(0,t),L.query=e.slice(t+1)):(L.path=e,L.query=null),L}function N(e){return(e=ae(e=function(e){return e&&"/"===e[e.length-1]?e:`${e}/`}(e=k(e).path),!0)).toLowerCase()}function j(e){const t={proxyUrl:e.proxyUrl,urlPrefix:N(e.urlPrefix)},r=y.proxyRules,i=t.urlPrefix;let s=r.length;for(let e=0;e<r.length;e++){const t=r[e].urlPrefix;if(0===i.indexOf(t)){if(i.length===t.length)return-1;s=e;break}0===t.indexOf(i)&&(s=e+1)}return r.splice(s,0,t),s}function D(e){const t=y.proxyRules,r=N(e);for(let e=0;e<t.length;e++)if(0===r.indexOf(t[e].urlPrefix))return t[e]}function U(e,t){return e=V(e),t=V(t),ae(e)===ae(t)}function V(e){const t=(e=W(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function B(e,t,r=!1){const i=pe(e),s=pe(t);return!(!r&&i.scheme!==s.scheme)&&null!=i.host&&null!=s.host&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function z(e){if("string"==typeof e){if(!Z(e))return!0;e=pe(e)}if(B(e,M))return!0;const t=y.trustedServers||[];for(let r=0;r<t.length;r++){const i=q(t[r]);for(let t=0;t<i.length;t++)if(B(e,i[t]))return!0}return!1}function q(e){return E[e]||(ie(e)||re(e)?E[e]=[new T(G(e))]:E[e]=[new T(`http://${e}`),new T(`https://${e}`)]),E[e]}function G(e,t=I,r){return re(e)?r&&r.preserveProtocolRelative?e:"http"===M.scheme&&M.authority===J(e).slice(2)?`http:${e}`:`https:${e}`:ie(e)?e:(0,a.m)(H("/"===e[0]?function(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return-1===r?e:e.slice(0,r)}(t):t,e))}function $(e,t=I,r){if(!Z(e))return e;const i=W(e),s=i.toLowerCase(),n=W(t).toLowerCase().replace(/\/+$/,""),o=r?W(r).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==n.indexOf(o))return e;const a=(e,t,r)=>-1===(r=e.indexOf(t,r))?e.length:r;let l=a(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=a(s,"/",l+1);if(-1===u)return e;if(o&&u<o.length)return e;e=i.slice(u);const c=n.slice(u-1).replace(/[^/]+/g,"").length;if(c>0)for(let t=0;t<c;t++)e=`../${e}`;else e=`./${e}`;return e}function W(e){return function(e){const t=y.httpsDomains;if(!function(e){return g.test(e)||"http"===M.scheme&&re(e)}(e))return e;const r=e.indexOf("/",7);let i;if(i=-1===r?e:e.slice(0,r),i=i.toLowerCase().slice(7),w.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return"http"===M.scheme&&i===M.authority&&!_.test(e)||(oe()&&i===M.authority||t&&t.some((e=>i===e||i.endsWith(`.${e}`)))||oe()&&!D(e))&&(e=ne(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=k(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}(e=G(e=e.trim()))))}function H(...e){const t=e.filter(a.r);if(!t||!t.length)return;const r=[];if(Z(t[0])){const e=t[0],i=e.indexOf("//");-1!==i&&(r.push(e.slice(0,i+1)),function(e){return b.test(e)}(t[0])&&(r[0]+="/"),t[0]=e.slice(i+2))}else"/"===t[0][0]&&r.push("");const i=t.reduce(((e,t)=>t?e.concat(t.split("/")):e),[]);for(let e=0;e<i.length;e++){const t=i[e];".."===t&&r.length>0&&".."!==r[r.length-1]?r.pop():(!t&&e===i.length-1||t&&("."!==t||0===r.length))&&r.push(t)}return r.join("/")}function J(e,t=!1){if(X(e)||Y(e))return null;let r=e.indexOf("://");if(-1===r&&re(e))r=2;else{if(-1===r)return null;r+=3}const i=e.indexOf("/",r);return-1!==i&&(e=e.slice(0,i)),t&&(e=ae(e,!0)),e}function Z(e){return re(e)||ie(e)}function X(e){return null!=e&&"blob:"===e.slice(0,5)}function Y(e){return"data:"===e.slice(0,5)}function Q(e){const t=ee(e);if(!t||!t.isBase64)return null;const r=atob(t.data),i=new Uint8Array(r.length);for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e);return i.buffer}const K=/^data:(.*?)(;base64)?,(.*)$/;function ee(e){const t=e.match(K);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function te(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function re(e){return null!=e&&void 0!==e&&"/"===e[0]&&"/"===e[1]}function ie(e){return m.test(e)}function se(e){return v.test(e)||"https"===M.scheme&&re(e)}function ne(e){return re(e)?`https:${e}`:e.replace(g,"https:")}function oe(){return"https"===M.scheme}function ae(e,t=!1){return re(e)?e.slice(2):(e=e.replace(m,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function le(e){let t=0;if(Z(e)){const r=e.indexOf("//");-1!==r&&(t=r+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function ue(e,t){if(!e)return"";const r=O(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(null==t||!t.length)return i;const s=new RegExp(`.(${t.join("|")})$`,"ig");return i.replace(s,"")}function ce(e){return e.replace(/\/+$/,"")}function he(e,t,r){if(!(t&&r&&e&&Z(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),n=e.indexOf(":",i+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function pe(e){return"string"==typeof e?new T(G(e)):(e.scheme||(e.scheme=M.scheme),e)}function de(e){return be.test(e)}function ye(e,t){const r=O(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function fe(e,t,r){const i=O(e),s=i.query||{};return s[t]=String(r),`${i.path}?${R(s)}`}function me(e,t){const r=O(e),i=r.query||{};for(const e in t)i[e]=t[e];const s=R(i);return s?`${r.path}?${s}`:r.path}function ge(e){if((0,a.t)(e))return null;const t=e.match(ve);return t?t[1]:null}const ve=/.*?\.([^\/]*)$/,be=/(^data:image\/svg|\.svg$)/i,we="4.20",_e={request(e,t){var r;const i=null==(r=e.options)?void 0:r.responseType;return Promise.resolve().then((function(){return He})).then((({default:r})=>{const s=e.options||{};return s.responseType="native"===i||"native-request-init"===i?"native-request-init":"array-buffer",s.signal=null==t?void 0:t.signal,r(e.url,s)})).then((e=>{const t={data:e.data,ssl:e.ssl};return"native-request-init"===e.requestOptions.responseType?(delete t.data.signal,t):{result:t,transferList:[t.data]}}))}};let xe;function Se(e){xe=e}function Te(e){const t=xe&&xe.findCredential(e);return t&&t.token?fe(e,"token",t.token):e}(0,a.c)("host-webworker")||((0,a.c)("edge")||(0,a.c)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const Me=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function Ee(e){const t=J(e,!0);return t&&t.endsWith(".arcgis.com")&&!Me.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function Ie(e,t,r=!1,i){return new Promise(((s,n)=>{if((0,l.b)(i))return void n(Oe());let o=()=>{h(),n(new Error(`Unable to load ${t}`))},u=()=>{const t=e;h(),s(t)},c=()=>{if(!e)return;const t=e;h(),t.src="",n(Oe())};const h=()=>{(0,a.c)("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",u)),o=null,u=null,e=null,(0,a.r)(i)&&i.removeEventListener("abort",c),c=null,r&&URL.revokeObjectURL(t)};(0,a.r)(i)&&i.addEventListener("abort",c),(0,a.c)("esri-image-decode")?e.decode().then(u,o):(e.addEventListener("error",o),e.addEventListener("load",u))}))}function Oe(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function Ae(e,t){const i=Y(e),s=X(e);s||i||(e=W(e));const n={url:e,requestOptions:{...(0,a.f)(t)}};let o=function(e){const t=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t),r=y.interceptors;if(r)for(const e of r)if(Array.isArray(e.urls)){if(e.urls.some(t))return e}else if(t(e.urls))return e;return null}(e);if(o){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(e){r=Ue("request:interceptor",e,t)}if((i instanceof Error||i instanceof l.s)&&(r=Ue("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}(o,n);if(null!=e)return{data:e,getHeader:Ne,requestOptions:n.requestOptions,url:n.url};o.after||o.error||(o=null)}if(e=n.url,"image"===(t=n.requestOptions).responseType){if((0,a.c)("host-webworker")||(0,a.c)("host-node"))throw Ue("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(i)throw Ue("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if("head"===t.method){if(t.body)throw Ue("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||s)throw Ue("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await async function(){(0,a.c)("host-webworker")?Pe||(Pe=await r.e(6737).then(r.bind(r,76737))):Ae._abortableFetch||(Ae._abortableFetch=a.e.fetch.bind(a.e))}(),Pe)return Pe.execute(e,t);const u=(0,l.h)();(0,l.v)(t,(()=>u.abort()));const c={controller:u,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:o,params:n,redoRequest:!1,useIdentity:Re.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=await async function(e){var t,r;let i,s;await Be(e);try{do{[i,s]=await qe(e)}while(!await $e(e,i,s))}catch(t){const r=Ue("request:server",t,e.params,i);throw r.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(r),r}const n=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)&&!e.hasToken&&!e.credentialToken&&null!=(t=s)&&null!=(r=t.user)&&r.username&&!z(n)){const e=J(n,!0);e&&Re.trustedServers.push(e)}const o=e.credential;if(o&&xe){const e=xe.findServerInfo(o.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=xe.findCredential(t,o.userId);e&&-1===xe._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:s,getHeader:i?e=>i.headers.get(e):Ne,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(c);return o&&o.after&&o.after(h),h}let Pe;const Re=a.d.request,Fe="FormData"in a.e,Ce=[499,498,403,401],Le=["COM_0056","COM_0057","SB_0008"],ke=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Ne=()=>null,je=Symbol();function De(e){const t=J(e);return!t||t.endsWith(".arcgis.com")||Ae._corsServers.includes(t)||z(t)}function Ue(e,t,r,i){let s="Error";const n={url:r.url,requestOptions:r.requestOptions,getHeader:Ne,ssl:!1};if(t instanceof l.s)return t.details?(t.details=(0,a.y)(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const e=i&&(e=>i.headers.get(e)),r=i&&i.status,o=t.message;o&&(s=o),e&&(n.getHeader=e),n.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,n.subCode=t.subcode,n.messageCode=t.messageCode,"string"==typeof t.details?n.messages=[t.details]:n.messages=t.details,n.raw=je in t?t[je]:t}return(0,l.g)(t)?(0,l.m)():new l.s(e,s,n)}async function Ve(){xe||await r.e(9570).then(r.bind(r,99570))}async function Be(e){const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let n=null,o=null,u=null;if(Fe&&"HTMLFormElement"in a.e&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(o=s,n=new FormData(o))),"string"==typeof s&&(u=s),e.fetchOptions={cache:r.cacheBust&&!Ae._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:i},(n||u)&&(e.fetchOptions.body=n||u),"anonymous"===r.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||n&&n.get&&n.get("token")||o&&o.elements.token),!e.hasToken&&a.d.apiKey&&Ee(t)&&(r.query||(r.query={}),r.query.token=a.d.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!ze(t)&&!(0,l.b)(i)){let s;"immediate"===r.authMode?(await Ve(),s=await xe.getCredential(t,{signal:i}),e.credential=s):"no-prompt"===r.authMode?(await Ve(),s=await xe.getCredential(t,{prompt:!1,signal:i}).catch((()=>{})),e.credential=s):xe&&(s=xe.findCredential(t)),s&&(e.credentialToken=s.token,e.useSSL=!!s.ssl)}}function ze(e){return ke.some((t=>t.test(e)))}async function qe(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions,s=X(t)||Y(t),n=r.responseType||"json",o=s?0:null!=r.timeout?r.timeout:Re.timeout;let u=!1;if(!s){e.useSSL&&(t=ne(t)),r.cacheBust&&"default"===i.cache&&(t=fe(t,"request.preventCache",Date.now()));let s={...r.query};e.credentialToken&&(s.token=e.credentialToken);let n=R(s);(0,a.c)("esri-url-encodes-apostrophe")&&(n=n.replace(/'/g,"%27"));const o=t.length+1+n.length;let l;u="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||o>Re.maxUrlLength;const c=r.useProxy||!!D(t);if(c){const e=F(t);l=e.path,!u&&l.length+1+o>Re.maxUrlLength&&(u=!0),e.query&&(s={...e.query,...s})}if("HEAD"===i.method&&(u||c)){if(u){if(o>Re.maxUrlLength)throw Ue("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw Ue("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(c)throw Ue("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(u?(i.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=me(t,s):(i.body=R(s),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=me(t,s),c&&(e.useProxy=!0,t=`${l}?${t}`),s.token&&Fe&&i.body instanceof FormData){const e=i.body;e.set?e.set("token",s.token):e.append("token",s.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!B(t,M))if(z(t))e.withCredentials=!0;else if(xe){const r=xe.findServerInfo(t);r&&r.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(i.credentials="include")}let c,h,p=0,d=!1;o>0&&(p=setTimeout((()=>{d=!0,e.controller.abort()}),o));try{if("native-request-init"===r.responseType)h=i,h.url=t;else if("image"!==r.responseType||"default"!==i.cache||"GET"!==i.method||u||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!s&&!e.useProxy&&Re.proxyUrl&&!De(t)){if(c=await Ae._abortableFetch(t,i),e.useProxy||function(e){const t=J(e);t&&!Ae._corsServers.includes(t)&&Ae._corsServers.push(t)}(t),"native"===r.responseType)h=c;else if("HEAD"!==i.method)if(c.ok){switch(n){case"array-buffer":h=await c.arrayBuffer();break;case"blob":case"image":h=await c.blob();break;default:h=await c.text()}if(p&&(clearTimeout(p),p=0),"json"===n||"xml"===n||"document"===n)if(h)switch(n){case"json":h=JSON.parse(h);break;case"xml":h=Ge(h,"application/xml");break;case"document":h=Ge(h,"text/html")}else h=null;if(h){if("array-buffer"===n||"blob"===n){const e=c.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&h["blob"===n?"size":"byteLength"]<=750)try{const e=await new Response(h).json();e.error&&(h=e)}catch{}}"image"===n&&h instanceof Blob&&(h=await We(URL.createObjectURL(h),e,!0))}}else h=await c.text()}else h=await We(t,e)}catch(i){if("AbortError"===i.name){if(d)throw new Error("Timeout exceeded");throw(0,l.m)("Request canceled")}if(!(!c&&i instanceof TypeError&&Re.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy||De(t))throw i;e.redoRequest=!0,j({proxyUrl:Re.proxyUrl,urlPrefix:J(t)})}finally{p&&clearTimeout(p)}return[c,h]}function Ge(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function $e(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||"native"===i.responseType||"native-request-init"===i.responseType)return!0;let s,n,o,a;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[je]=r,s;null!=r&&r.error&&(s=r.error),s&&(n=Number(s.code),o=s.hasOwnProperty("subcode")?Number(s.subcode):null,a=s.messageCode,a=a&&a.toUpperCase());const l=i.authMode;if(403===n&&(4===o||s.message&&s.message.toLowerCase().indexOf("ssl")>-1&&-1===s.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==l||498===n)&&-1!==Ce.indexOf(n)&&!ze(e.params.url)&&(403!==n||-1===Le.indexOf(a)&&(null==o||2===o&&e.credentialToken))){await Ve();try{const t=await xe.getCredential(e.params.url,{error:Ue("request:server",s,e.params),prompt:"no-prompt"!==l,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===l)return e.credential=null,e.credentialToken=null,!1;s=t}}if(s)throw s;return!0}function We(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.src=e,Ie(s,e,r,i)}Ae._abortableFetch=null,Ae._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var He=Object.freeze({__proto__:null,default:Ae});class Je{constructor(){this._emitter=new Je.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}!function(e){class t{constructor(e=null){this.target=e,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear()}emit(e,t){const r=this._listenersMap&&this._listenersMap.get(e);if(!r)return!1;const i=this.target||this;return[...r].forEach((e=>{e.call(i,t)})),r.length>0}on(e,t){if(Array.isArray(e)){const r=e.map((e=>this.on(e,t)));return(0,i.x)(r)}if(e.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(e)||[];return r.push(t),this._listenersMap.set(e,r),{remove:()=>{const r=this._listenersMap&&this._listenersMap.get(e)||[],i=r.indexOf(t);i>=0&&r.splice(i,1)}}}once(e,t){const r=this.on(e,(e=>{r.remove(),t.call(null,e)}));return r}hasEventListener(e){const t=this._listenersMap&&this._listenersMap.get(e);return null!=t&&t.length>0}}e.EventEmitter=t,e.EventedMixin=e=>{let r=class extends e{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return r=(0,u.e)([(0,i.n)("esri.core.Evented")],r),r};let r=class extends u.p{constructor(){super(...arguments),this._emitter=new Je.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};r=(0,u.e)([(0,i.n)("esri.core.Evented")],r),e.EventedAccessor=r}(Je||(Je={}));var Ze=Je;class Xe{constructor(e){this.instance=e,this._resolver=(0,l.E)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp()}),(()=>{this._status=2,this._cleanUp()}))}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject((0,l.m)())}when(e,t){return this._resolver.promise.then(e,t)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const e=(0,l.E)(),t=[...this._resolvingPromises,(0,a.m)(e.promise)],r=this._allPromise=Promise.all(t);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)}),(e=>{this.isFulfilled()||this._allPromise!==r||(0,l.g)(e)||this._resolver.reject(e)})),e.resolve()}}const Ye=e=>{let t=class extends e{constructor(...e){super(...e),this._promiseProps=new Xe(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return new Promise(((e,t)=>{this._promiseProps.when(e,t)})).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}};return t=(0,u.e)([(0,i.n)("esri.core.Promise")],t),t};let Qe=class extends(Ye(u.p)){};Qe=(0,u.e)([(0,i.n)("esri.core.Promise")],Qe);const Ke="loaded",et=e=>{let t=class extends e{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((e=>{const t=this.load.bind(this);this.load=r=>{const i=new Promise(((e,t)=>{const i=(0,l.P)(r,t);this.destroyed&&t(new l.s("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(e,t).finally((()=>{i&&i.remove()}))}));if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const e=this._loadController=(0,l.h)();t({signal:e.signal}),(0,l.v)(e.signal,(()=>{this._promiseProps.abort()}))}return e(),i}}))),this.when((()=>{this._set("loadStatus",Ke),this._loadController=null}),(e=>{this._set("loadStatus","failed"),this._set("loadError",e),this._loadController=null}))}get loaded(){return this.loadStatus===Ke}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var e;return this.isFulfilled()||(this._set("loadError",new l.s("load:cancelled","Cancelled")),null==(e=this._loadController)||e.abort()),this}};return(0,u.e)([(0,i.y)({readOnly:!0})],t.prototype,"loaded",null),(0,u.e)([(0,i.y)({readOnly:!0})],t.prototype,"loadError",void 0),(0,u.e)([(0,i.y)()],t.prototype,"loadStatus",void 0),(0,u.e)([(0,i.y)({type:[i.z],readOnly:!0})],t.prototype,"loadWarnings",null),t=(0,u.e)([(0,i.n)("esri.core.Loadable")],t),t};let tt=class extends(et(Qe)){};tt=(0,u.e)([(0,i.n)("esri.core.Loadable")],tt),function(e){e.LoadableMixin=et,e.isLoadable=function(e){return!(!e||!e.load)}}(tt||(tt={}));var rt=tt},55688:(e,t,r)=>{"use strict";r.d(t,{A:()=>E,j:()=>F});var i,s=r(78155),n=r(15015),o=r(17762),a=r(40130),l=r(31516),u=r(30316),c=r(20215),h=r(80219),p=r(80987),d=r(95629),y=r(88903),f=r(29126),m=r(61888),g=r(18559),v=r(20736),b=r(42296),w=r(17331);let _=i=class extends s.a{constructor(e){super(e),this.type="none"}clone(){return new i({type:this.type})}};var x;(0,s.e)([(0,f.r)({none:"none",stayAbove:"stay-above"})],_.prototype,"type",void 0),_=i=(0,s.e)([(0,y.n)("esri.ground.NavigationConstraint")],_);const S=h.n.getLogger("esri.Ground");let T=x=class extends((0,s.i)(p.f)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new a.L;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&S.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{S.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",(0,l.n)(e,this._get("layers")))}writeLayers(e,t,r,i){const s=[];e?(i={...i,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};(0,u.o)(e)().write(t,i)&&s.push(t)}else i&&i.messages&&i.messages.push(new c.s("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=s):t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,d.n)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await r.e(201).then(r.bind(r,80201));(0,c.a)(t);const s=new i,n=this.layers.filter(M).toArray();return s.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await r.e(201).then(r.bind(r,80201));(0,c.a)(t);const s=new i,n=this.layers.filter(M).toArray();return s.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:(0,h.y)(this.surfaceColor),navigationConstraint:(0,h.y)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new x({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const s=t&&t.origin||"web-scene",n=t&&t.portal||null,o=t&&t.url||null;return Promise.all([r.e(9351),r.e(4411)]).then(r.bind(r,54411)).then((({populateOperationalLayers:t})=>{(0,c.a)(i);const r=[];if(e.layers&&Array.isArray(e.layers)){const i={context:{origin:s,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,i))}return(0,c.A)(r)})).then((()=>{}))}};function M(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}(0,s.e)([(0,y.y)({json:{read:!1}})],T.prototype,"layers",null),(0,s.e)([(0,s.o)("layers")],T.prototype,"writeLayers",null),(0,s.e)([(0,y.y)({readOnly:!0})],T.prototype,"resourceInfo",void 0),(0,s.e)([(0,y.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:y.N,read:{reader:m.r,source:"transparency"},write:{writer:(e,t)=>{t.transparency=(0,m.n)(e)},target:"transparency"}}})],T.prototype,"opacity",void 0),(0,s.e)([(0,y.y)({type:o.o,json:{type:[y.N],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],T.prototype,"surfaceColor",void 0),(0,s.e)([(0,y.y)({type:_,json:{write:!0}})],T.prototype,"navigationConstraint",void 0),T=x=(0,s.e)([(0,y.n)("esri.Ground")],T);var E=T;function I(e){var t;return!(!(e&&e.loaded&&"capabilities"in e&&null!=e&&null!=(t=e.capabilities)&&t.operations&&"supportsEditing"in e.capabilities.operations&&!0===e.capabilities.operations.supportsEditing)||"editingEnabled"in e&&!e.editingEnabled)}const O=h.n.getLogger("esri.support.groundUtils"),A={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}},P=h.n.getLogger("esri.Map");let R=class extends((0,w.c)((0,w.p)(p.n.EventedMixin(s.p)))){constructor(e){super(e),this.allLayers=new g.p({getCollections:()=>{var e,t,r;return[null==(e=this.basemap)?void 0:e.baseLayers,null==(t=this.ground)?void 0:t.layers,this.layers,null==(r=this.basemap)?void 0:r.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new g.p({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}}),this.basemap=null,this.editableLayers=new g.p({getCollections:()=>[this.allLayers],itemFilterFunction:I}),this.ground=new E,this._basemapCache=(0,b.c)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),(0,b.u)(this._basemapCache),this._basemapCache=null}castBasemap(e){return(0,b.f)(e,this._basemapCache)}castGround(e){return function(e){let t;return"string"==typeof e?e in A?t=new E({resourceInfo:{data:{layers:[A[e]]}}}):O.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=(0,y.d)(E,e),t}(e)||(P.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};(0,s.e)([(0,y.y)({readOnly:!0,dependsOn:[]})],R.prototype,"allLayers",void 0),(0,s.e)([(0,y.y)({readOnly:!0})],R.prototype,"allTables",void 0),(0,s.e)([(0,y.y)({type:n.U})],R.prototype,"basemap",void 0),(0,s.e)([(0,v.c)("basemap")],R.prototype,"castBasemap",null),(0,s.e)([(0,y.y)({readOnly:!0})],R.prototype,"editableLayers",void 0),(0,s.e)([(0,y.y)({type:E,nonNullable:!0})],R.prototype,"ground",void 0),(0,s.e)([(0,v.c)("ground")],R.prototype,"castGround",null),R=(0,s.e)([(0,y.n)("esri.Map")],R);var F=R},40849:(e,t,r)=>{"use strict";r.d(t,{W:()=>Ne,e:()=>X});var i=r(78155),s=r(73574),n=r(40130),o=r(18559),a=r(20215),l=r(80219),u=r(36845),c=r(26779),h=r(88903),p=r(71391),d=r(80987),y=r(94527),f=r(20736),m=r(25290),g=r(34534),v=r(7571),b=r(98548),w=r(67726),_=r(59312),x=(r(85774),r(93443)),S=(r(29218),r(92858)),T=r(83731),M=r(17762),E=r(93450);class I{constructor(e,t,r,i){const s=e.targetGeometry,n=t.targetGeometry;i?"string"==typeof i&&(i=(0,g.r)(i)||g.t.ease):i=g.t.ease,this.easing=i,this.duration=r,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=n.x,this.tCenterY=n.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const r=this.easing(t);let i,s,n,o;t>=1?(i=this.tCenterX,s=this.tCenterY,n=this.tRotation,o=this.tScale):(i=this.sCenterX+r*this.dCenterX,s=this.sCenterY+r*this.dCenterY,n=this.sRotation+r*this.dRotation,o=this.sScale+r*this.dScale),e.targetGeometry.x=i,e.targetGeometry.y=s,e.scale=o,e.rotation=n}}let O=class extends i.p{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=g.t.ease,this.view=null,this.viewpoint=null,this.viewpoint=new p.u({targetGeometry:new f.b,scale:0,rotation:0}),this._updateTask=(0,i.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,r){this.stop();const i=this.viewpoint;(0,p.Z)(i,t),this.transition=new I(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const s=()=>{this.animation===e&&this._updateTask&&("finished"===e.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const r=new p.n({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==p.n.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const e=(performance.now()-this._startTime)/this.transition.duration,t=e>=1;this.transition.applyRatio(this.viewpoint,e),t&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,i.e)([(0,h.y)()],O.prototype,"animation",void 0),(0,i.e)([(0,h.y)()],O.prototype,"duration",void 0),(0,i.e)([(0,h.y)()],O.prototype,"transition",void 0),(0,i.e)([(0,h.y)()],O.prototype,"easing",void 0),(0,i.e)([(0,h.y)()],O.prototype,"view",void 0),(0,i.e)([(0,h.y)()],O.prototype,"viewpoint",void 0),O=(0,i.e)([(0,h.n)("esri.views.2d.AnimationManager")],O);var A=O;class P{constructor(e){this.view=e,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:e,graphicsView:t,labelManager:r,layerViews:i,state:{id:s}}=this.view;e.baseLayerViews.forEach(this._updateLayerView,this),i.forEach(this._updateLayerView,this),e.referenceLayerViews.forEach(this._updateLayerView,this),(0,l.r)(r)&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(this._updateParameters)),(0,l.r)(t)&&(t.lastUpdateId!==s&&(t.viewChange(),t.lastUpdateId=s),t.updateRequested&&t.processUpdate(this._updateParameters)),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=(0,i.A)(this)}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const t=this.view.state,r=e.lastUpdateId;null!=r&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}function R(){return Promise.all([Promise.all([r.e(9351),r.e(9654)]).then(r.bind(r,59654)),Promise.all([r.e(918),r.e(265),r.e(9351)]).then(r.bind(r,40398))])}const F=()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(5511)]).then(r.bind(r,55511)))),C=()=>R().then((()=>r.e(9351).then(r.bind(r,7022)))),L={"base-dynamic":()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(3989)]).then(r.bind(r,83989)))),"base-tile":F,"bing-maps":F,csv:C,"geo-rss":()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(9727)]).then(r.bind(r,9727)))),feature:C,geojson:C,graphics:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(5526)]).then(r.bind(r,15526)))),group:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(3576)]).then(r.bind(r,33576)))),imagery:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(6184)]).then(r.bind(r,76184)))),"imagery-tile":()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(4715)]).then(r.bind(r,24715)))),kml:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(8556)]).then(r.bind(r,98556)))),"map-image":()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(6892)]).then(r.bind(r,76892)))),"map-notes":()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(1812)]).then(r.bind(r,61812)))),"ogc-feature":()=>R().then((()=>Promise.all([r.e(9351),r.e(8386)]).then(r.bind(r,68386)))),"open-street-map":F,route:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(466)]).then(r.bind(r,10466)))),stream:()=>R().then((()=>Promise.all([r.e(9351),r.e(3476)]).then(r.bind(r,3476)))),"subtype-group":()=>R().then((()=>Promise.all([r.e(9351),r.e(5881)]).then(r.bind(r,75881)))),tile:F,"vector-tile":()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(8851)]).then(r.bind(r,8851)))),wcs:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(4715)]).then(r.bind(r,24715)))),"web-tile":F,wfs:C,wms:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(3471)]).then(r.bind(r,73471)))),wmts:()=>R().then((()=>Promise.all([r.e(918),r.e(9351),r.e(7370)]).then(r.bind(r,67370)))),slice:null,"base-elevation":null,"building-scene":null,"direct-line-measurement":null,"area-measurement":null,elevation:null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};var k;const N=l.n.getLogger("esri.views.MapView");let j=k=class extends i.p{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){return this.geometry&&this.spatialReference?this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:(0,f.x)(this.geometry,this.spatialReference)?(0,f.g)(this.geometry,this.spatialReference):(0,v.V)()?(0,v.H)(this.geometry,this.spatialReference):(N.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null):null}constrain(e,t){if(!this.normalizedGeometry)return e;const r=e.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,b.t)(this.normalizedGeometry,r):(0,b.f)(this.normalizedGeometry,r))return e;const{coordinate:i}=function(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let s=Number.POSITIVE_INFINITY,n=0,o=0;const a=[0,0],l="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const e of l)for(let t=0;t<e.length-1;t++){(0,b.o)(a,i,e,t);const r=(0,w.d)(i,a);r<s&&(s=r,n=a[0],o=a[1])}return{coordinate:new f.b({x:n,y:o,spatialReference:r}),distance:s}}(this.normalizedGeometry,r);return i?(e.targetGeometry=i,e):e}clone(){var e,t;return new k({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(t=this.spatialReference)?void 0:t.clone()})}};var D;(0,i.e)([(0,h.y)({constructOnly:!0})],j.prototype,"geometry",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],j.prototype,"normalizedGeometry",null),(0,i.e)([(0,h.y)({constructOnly:!0})],j.prototype,"spatialReference",void 0),j=k=(0,i.e)([(0,h.n)("esri.views.2d.constraints.GeometryConstraint")],j);let U=D=class extends i.p{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}clone(){return new D({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,i.e)([(0,h.y)()],U.prototype,"enabled",void 0),(0,i.e)([(0,h.y)()],U.prototype,"rotationEnabled",void 0),U=D=(0,i.e)([(0,h.n)("esri.views.2d.constraints.RotationConstraint")],U);var V,B=U;let z=V=class extends i.p{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,u=!1;if(0!==r&&0!==i&&r<i&&([r,i]=[i,r]),!t||!t.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const s of t)!l&&r>0&&r>=s.scale&&(o=s.level,l=!0),!u&&i>0&&i>=s.scale&&(a=e?e.level:-1,u=!0),e=s;-1===s&&(s=0===r?0:o),-1===n&&(n=0===i?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),r=t[s].scale,i=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=0!==i&&e.scale<i,a=0!==r&&e.scale>r;if(o||a){const o=a?r:i;if(n){const r=(o-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*r,s.y=n.y+(s.y-n.y)*r}e.scale=o}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.round(e-.5),i=Math.round(e);return t[i]+(i-e)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(r=t[s],i=t[s+1],i===e)return s+this.effectiveMinZoom+1;if(r>e&&i<e)return s+this.effectiveMinZoom+1-(e-i)/(r-i)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new V({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t),this._scales[0])),this._lodByScale[e].scale}};(0,i.e)([(0,h.y)({readOnly:!0})],z.prototype,"effectiveLODs",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],z.prototype,"effectiveMinZoom",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],z.prototype,"effectiveMaxZoom",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],z.prototype,"effectiveMinScale",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],z.prototype,"effectiveMaxScale",void 0),(0,i.e)([(0,h.y)({type:[m.i]})],z.prototype,"lods",void 0),(0,i.e)([(0,h.y)()],z.prototype,"minZoom",void 0),(0,i.e)([(0,h.y)()],z.prototype,"maxZoom",void 0),(0,i.e)([(0,h.y)()],z.prototype,"minScale",void 0),(0,i.e)([(0,h.y)()],z.prototype,"maxScale",void 0),(0,i.e)([(0,h.y)()],z.prototype,"snapToZoom",void 0),z=V=(0,i.e)([(0,h.n)("esri.views.2d.constraints.ZoomConstraint")],z);var q=z;const G={base:null,key:"type",typeMap:{extent:b.M,polygon:b.j}};let $=class extends d.n.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get _defaultLODs(){const e=this.get("view.defaultsFromMap.tileInfo"),t=this.get("view.spatialReference");return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){return new j({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new B({rotationEnabled:this.rotationEnabled})}get _zoom(){return new q({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(e){const t=this.effectiveMaxScale;return 0===t||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return 0===t||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};(0,i.e)([(0,h.y)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],$.prototype,"effectiveLODs",void 0),(0,i.e)([(0,h.y)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],$.prototype,"effectiveMinScale",void 0),(0,i.e)([(0,h.y)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],$.prototype,"effectiveMaxScale",void 0),(0,i.e)([(0,h.y)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],$.prototype,"effectiveMinZoom",void 0),(0,i.e)([(0,h.y)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],$.prototype,"effectiveMaxZoom",void 0),(0,i.e)([(0,h.y)({types:G,value:null})],$.prototype,"geometry",null),(0,i.e)([(0,h.y)({type:[m.i]})],$.prototype,"lods",void 0),(0,i.e)([(0,h.y)()],$.prototype,"minScale",void 0),(0,i.e)([(0,h.y)()],$.prototype,"maxScale",void 0),(0,i.e)([(0,h.y)()],$.prototype,"minZoom",void 0),(0,i.e)([(0,h.y)()],$.prototype,"maxZoom",void 0),(0,i.e)([(0,h.y)()],$.prototype,"rotationEnabled",void 0),(0,i.e)([(0,h.y)()],$.prototype,"snapToZoom",void 0),(0,i.e)([(0,h.y)()],$.prototype,"view",void 0),(0,i.e)([(0,h.y)()],$.prototype,"_defaultLODs",null),(0,i.e)([(0,h.y)({type:j})],$.prototype,"_geometry",null),(0,i.e)([(0,h.y)({type:B})],$.prototype,"_rotation",null),(0,i.e)([(0,h.y)({readOnly:!0,type:q})],$.prototype,"_zoom",null),$=(0,i.e)([(0,h.n)("esri.views.2d.MapViewConstraints")],$);var W=$;let H=class extends i.p{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}};(0,i.e)([(0,h.y)()],H.prototype,"left",void 0),(0,i.e)([(0,h.y)()],H.prototype,"top",void 0),(0,i.e)([(0,h.y)()],H.prototype,"right",void 0),(0,i.e)([(0,h.y)()],H.prototype,"bottom",void 0),H=(0,i.e)([(0,h.n)("esri.views.2d.PaddedViewState.Padding")],H);let J=class extends p.W{constructor(...e){super(...e),this.paddedViewState=new p.W,this._updateContent=(()=>{const e=(0,_.n)();return()=>{const t=this._get("size"),r=this._get("padding");if(!t||!r)return;const i=this.paddedViewState;(0,w.r)(e,r.left+r.right,r.top+r.bottom),(0,w.o)(e,t,e),(0,w.a)(i.size,e);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new H,this.size=[0,0]}set padding(e){this._set("padding",e||new H)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,(0,p.b)(t,e,this._get("size"),this._get("padding"));const r=this._viewpoint2D,i=t.targetGeometry;r.center[0]=i.x,r.center[1]=i.y,r.rotation=t.rotation,r.scale=t.scale,r.spatialReference=i.spatialReference,this._update()}}};(0,i.e)([(0,h.y)()],J.prototype,"paddedViewState",void 0),(0,i.e)([(0,h.y)({type:H})],J.prototype,"padding",null),(0,i.e)([(0,h.y)()],J.prototype,"viewpoint",null),J=(0,i.e)([(0,h.n)("esri.views.2d.PaddedViewState")],J);var Z=J;class X{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),(e=>-1!==e.indexOf("Brush"))(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}}const Y=l.n.getLogger("esri.views.MapView");let Q=class extends((0,p.a)(p.P)){constructor(e){super(e),this._stationaryTimer=null,this.frameTask=new P(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new X,this.type="2d",this.constraints=new W,this.padding={top:0,right:0,bottom:0,left:0};const t=this.handles,r=()=>this.notifyChange("updating");t.add([this.watch("viewpoint",(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)}),!0),this.on("resize",(e=>this._resizeHandler(e))),this.watch("animationManager.animation",(e=>{this.animation=e})),this.allLayerViews.on("change",(()=>{r(),t.remove("map-view-base-layerViewsUpdating"),t.add(this.allLayerViews.map((e=>e.watch("updating",r))),"map-view-base-layerViewsUpdating")}))],"map-view-base")}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new f.b({x:e[0],y:e[1],spatialReference:t})}set center(e){if(null==e)return;if(!this._normalizeInput(e))return void Y.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");const t=this.viewpoint;(0,p.w)(t,t,e),this.viewpoint=t}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-base-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(e.on("update",(()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))})),"map-view-base-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(null==e)return;const t=this._normalizeInput(e);if(!t)return void Y.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!t.width||!t.height)return void Y.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const r=this.viewpoint;(0,p.t)(r,r,t,this.size,{constraints:this.constraints}),this.viewpoint=r}get initialExtentRequired(){const{extent:e,center:t,scale:r,viewpoint:i,zoom:s}=this;return!(this.get("map.initialViewProperties.viewpoint")||e||t&&(0!==r||-1!==s)||i)}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;(0,p.A)(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;(0,p.k)(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some((e=>!e.destroyed&&!("layerViews"in e)&&!0===e.updating)))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(null==e)return;const t=this._normalizeInput(e);if(!t)return void(!e.scale||isNaN(e.scale)?Y.error("#viewpoint",`invalid scale value of ${e.scale}`):(0,l.t)(e.targetGeometry)?Y.error("#viewpoint","geometry not defined"):Y.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(e.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const r=new p.u({targetGeometry:new f.b,scale:0,rotation:0});(0,p.Z)(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(null==e)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",e),this._set("scale",0);const t=this._get("extent");t&&(this._set("extent",null),this._set("center",t.center))}if(!this.constraints.effectiveLODs)return;const t=this.viewpoint;(0,p.k)(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),(0,u.x)(this,"ready",t&&t.signal).then((()=>{const r={animate:!0,...t},i=(0,p.h)(e,this);return this.animation.update(i),this._gotoTask={},r.animate?this._gotoAnimated(i,r):this._gotoImmediate(i,r)}));Y.error("#goTo()","target cannot be null or undefined")}hitTest(e){return Promise.reject("Should be implemented by subclasses")}popupHitTest(e){return this.hitTest(e).then((t=>({...t,mapPoint:this.toMap(e)})))}toMap(e){if(!this.ready)return null;const[t,r]=this.state.toMap([0,0],[e.x,e.y]),i=this.spatialReference;return new f.b({x:t,y:r,spatialReference:i})}isTileInfoRequired(){return!0}toScreen(e){if(!this.ready)return null;const t=this._normalizeInput(e),r=[t.x,t.y];return this.state.toScreen(r,r),(0,y.c)(r[0],r[1])}pixelSizeAt(){return this.ready?this.state.resolution:(Y.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}getDefaultSpatialReference(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}isSpatialReferenceSupported(e,t){return!(!t&&!this._get("ready"))||null!==this._getDefaultViewpoint()}importLayerView(e){return(e=>{const t=L[e.type];if(!(0,l.r)(t))throw function(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new a.s(`${r}:view-not-supported`,`${t} is not supported in 2D`)}(e);return t(e)})(e)}hasLayerViewModule(e){return(e=>(0,l.r)(L[e.type]))(e)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new p.n),this.animation}_cancellableGoTo(e,t,r){const i=()=>e===this._gotoTask,s=r.then((()=>{i()&&(this.animation=null)})).catch((e=>{throw i()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),e})),n=new Promise((e=>e(s)));return t.when().catch((()=>{i()&&n.cancel&&n.cancel()})),n}_gotoImmediate(e,t){const r=this._gotoTask,i=this.animation,s=e.then((e=>{if((0,a.a)(t),r!==this._gotoTask)throw new a.s("view:goto-interrupted","Goto was interrupted");this.viewpoint=i.target=e,i.finish()}));return this._cancellableGoTo(r,i,s)}_gotoAnimated(e,t){const r=this._gotoTask,i=this.animation,s=e.then((e=>{if((0,a.a)(t),r!==this._gotoTask)throw new a.s("view:goto-interrupted","Goto was interrupted");return i.update(e),this.animationManager.animate(i,this.viewpoint,t),i.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(r,i,s)}_resizeHandler(e){const t=this.state;if(!t)return;let r=this.state.paddedViewState.viewpoint;const i=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],(0,p.G)(r,r,i,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints.constrain(r,null),this.state.viewpoint=r}_startup(){const e=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(e),this._set("animationManager",new A({view:this})),this._set("state",new Z({padding:this._get("padding"),size:this.size,viewpoint:e})),this._set("featuresTilingScheme",new x.h(m.S.create({spatialReference:this.spatialReference,size:512,numLODs:36}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[e,t],spatialReference:r,rotation:i,scale:s}=this.state.paddedViewState,n=new f.b({x:e,y:t,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",n),this._set("zoom",-1),this._set("rotation",i),this._set("scale",s),this._set("spatialReference",r),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}_flipStationary(e){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<160&&(this._stationaryTimer=this._flipStationary(e))}),e)),this._stationaryTimer}_normalizeInput(e,t=this.spatialReference){const r=e&&e.targetGeometry||e;return t?r?t.equals(r.spatialReference)?e:(0,f.x)(r,t)?function(e){return e&&"esri.Viewpoint"===e.declaredClass}(e)?(e.targetGeometry=(0,f.g)(r,t),e):(0,f.g)(r,t):null:null:e}_getDefaultViewpoint(){const e=this.constraints,t={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};e.effectiveLODs?-1!==t.zoom&&(t.scale=e.zoomToScale(t.zoom)):t.zoom=-1;let r=null,i=null,s=0;const n=t.viewpoint&&t.viewpoint.rotation,o=t.viewpoint&&t.viewpoint.targetGeometry;(0,l.r)(o)&&("extent"===o.type?r=o:"point"===o.type&&(i=o,s=t.viewpoint.scale));const a=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),u=this._normalizeInput(this.initialExtent),c=t.extent||r||a||u,h=t.center||i||c&&c.center,d=this.get("map.initialViewProperties.viewpoint.scale"),y=t.scale||s||d||c&&(0,p.J)(c,this.size),f=this.get("map.initialViewProperties.viewpoint.rotation"),m=t.rotation||n||f||0;return h&&y?new p.u({targetGeometry:h,scale:y,rotation:m}):null}};(0,i.e)([(0,h.y)()],Q.prototype,"_stationaryTimer",void 0),(0,i.e)([(0,h.y)()],Q.prototype,"animation",null),(0,i.e)([(0,h.y)({readOnly:!0})],Q.prototype,"animationManager",void 0),(0,i.e)([(0,h.y)({value:null,type:f.b,dependsOn:["state.id","ready"]})],Q.prototype,"center",null),(0,i.e)([(0,h.y)({type:W})],Q.prototype,"constraints",null),(0,i.e)([(0,h.y)({value:null,type:b.M,dependsOn:["state.id","ready"]})],Q.prototype,"extent",null),(0,i.e)([(0,h.y)({readOnly:!0})],Q.prototype,"featuresTilingScheme",void 0),(0,i.e)([(0,h.y)()],Q.prototype,"fullOpacity",void 0),(0,i.e)([(0,h.y)()],Q.prototype,"graphicsView",void 0),(0,i.e)([(0,h.y)({type:b.M})],Q.prototype,"initialExtent",void 0),(0,i.e)([(0,h.y)({dependsOn:["map.initialViewProperties?.viewpoint"]})],Q.prototype,"initialExtentRequired",null),(0,i.e)([(0,h.y)()],Q.prototype,"labelManager",void 0),(0,i.e)([(0,h.y)({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Q.prototype,"padding",null),(0,i.e)([(0,h.y)({type:Object})],Q.prototype,"renderingOptions",void 0),(0,i.e)([(0,h.y)()],Q.prototype,"resizeAlign",void 0),(0,i.e)([(0,h.y)({readOnly:!0,dependsOn:["state.id"]})],Q.prototype,"resolution",null),(0,i.e)([(0,h.y)({value:0,type:Number,dependsOn:["state.id","ready"]})],Q.prototype,"rotation",null),(0,i.e)([(0,h.y)({value:0,type:Number,dependsOn:["state.id","ready"]})],Q.prototype,"scale",null),(0,i.e)([(0,h.y)({type:S.k,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],Q.prototype,"spatialReference",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],Q.prototype,"state",void 0),(0,i.e)([(0,h.y)({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],Q.prototype,"stationary",null),(0,i.e)([(0,h.y)({readOnly:!0})],Q.prototype,"supportsGround",void 0),(0,i.e)([(0,h.y)({type:X,readOnly:!0})],Q.prototype,"timeline",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],Q.prototype,"type",void 0),(0,i.e)([(0,h.y)({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],Q.prototype,"updating",null),(0,i.e)([(0,h.y)({value:null,type:p.u,dependsOn:["state.id","ready"]})],Q.prototype,"viewpoint",null),(0,i.e)([(0,h.y)({value:-1,dependsOn:["state.id"]})],Q.prototype,"zoom",null),Q=(0,i.e)([(0,h.n)("esri.views.MapViewBase")],Q);var K=Q;class ee extends p.i{constructor(e,t){super(!0),this.view=e,this.registerIncoming("double-click",t,(e=>this._handleDoubleClick(e,t)))}_handleDoubleClick(e,t){(0,p.c)(e.data,"primary")&&(e.stopPropagation(),t?this.view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this.view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}class te extends p.i{constructor(e,t,r){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",r,(e=>this._handleDoubleTapDrag(e)))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:r}=t;if(r!==this.pointerType)return;e.stopPropagation();const{action:i,delta:s}=t,{view:n}=this,{mapViewNavigation:o}=n;switch(i){case"begin":{const{scale:e}=n;this._startScale=e,this._currentScale=e,this._previousDelta=s,o.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const e=1.015**s.y,t=this._startScale*e,r=t/this._currentScale;o.setViewpointImmediate(r),this._currentScale=t;break}case"end":{const{constraints:e}=n,{effectiveLODs:t,snapToZoom:r}=e;if(!r||!t)return void o.end();const i=e.snapScale(this._currentScale),a=(s.y>0?Math.max(i,e.snapToPreviousScale(this._startScale)):Math.min(i,e.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(a);break}}}}class re extends p.i{constructor(e,t,r){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",r,(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const i=this.view.mapViewNavigation;this.dragEventSeparator=new p.d({start:(e,t)=>{i.pan.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{i.pan.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{i.pan.end(this.view,t.data),t.stopPropagation()},condition:(e,t)=>1===e&&(0,p.c)(t.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class ie extends p.i{constructor(e,t,r){super(!0),this.view=e,this.pointerAction=t;const i=this.view.mapViewNavigation;this.dragEventSeparator=new p.d({start:(e,t)=>{i.rotate.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{i.rotate.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{i.rotate.end(),t.stopPropagation()},condition:(e,t)=>1===e&&(0,p.c)(t.data,this.pointerAction)}),this.registerIncoming("drag",r,(e=>this.dragEventSeparator.handle(e)))}}class se extends p.i{constructor(e){super(!0),this.view=e,this.frameTask=null,this.watchHandles=new T.u,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",(e=>this.handleEvent(e))),this.handle.pause()}onInstall(e){super.onInstall(e),this.watchHandles.add([(0,u.d)(this.view.navigation.gamepad,"enabled",(e=>{e?(this.handle.resume(),this.frameTask||(this.frameTask=(0,i.A)({update:e=>this.frameUpdate(e.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))}))])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}handleEvent(e){const t=this.view.navigation.gamepad.device;t&&e.data.device!==t||this.currentDevice&&this.currentDevice!==e.data.device||("end"===e.data.action?(this.currentDevice=null,(0,p.e)(this.transformation)):(this.currentDevice=e.data.device,(0,p.f)(e.data,this.view.navigation.gamepad,this.transformation)))}frameUpdate(e){const t=this.transformation;if((0,p.s)(t))return;const r=this.view.viewpoint.clone(),i=this.view.navigation.gamepad.velocityFactor,s=oe*i*e;(0,p.F)(r,r,[t.translation[0]*s,-t.translation[1]*s]);const n=1+t.translation[2]*ae*e,o=this.view.constraints.rotationEnabled?-t.heading*ne*e:0,a=this.view.size,l=[a[0]/2,a[1]];(0,p.S)(r,r,n,o,l,a);const u=this.view.constraints.constrain(r,this.view.viewpoint);this.view.viewpoint=u}}const ne=.06,oe=.7,ae=6e-4;class le extends p.i{constructor(e,t,r){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",r,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",r,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",r,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const r=this._keyMap[e.data.key];if(this._pressed=null!=r,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class ue extends p.i{constructor(e,t,r){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",r,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",r,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",r,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const i=this._keyToDirection[e.data.key];if(this._pressed=null!=i,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class ce extends p.i{constructor(e,t,r){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",r,(e=>this._handleKeyDown(e))),t.zoomIn.forEach((e=>this._keysToZoomAction[e]=0)),t.zoomOut.forEach((e=>this._keysToZoomAction[e]=1))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const i=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let n=null;switch(i){case 0:n=s.zoomIn();break;case 1:n=s.zoomOut();break;default:return}s.begin(),n.then((()=>s.end())),e.stopPropagation()}}class he extends p.i{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)))}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const t=this.view.mapViewNavigation,{x:r,y:i,deltaY:s}=e.data,n=1/.6**(1/60*s),o=t.zoom(n,[r,i]);o&&(this._canZoom=!1,o.catch((()=>{})).then((()=>{this._canZoom=!0,t.end()})))}}class pe extends p.i{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const t=this.view.mapViewNavigation;this.dragEventSeparator=new p.d({start:(e,r)=>{t.pinch.begin(this.view,r.data),r.stopPropagation()},update:(e,r)=>{t.pinch.update(this.view,r.data),r.stopPropagation()},end:(e,r)=>{t.pinch.end(this.view),r.stopPropagation()},condition:e=>e>=2})}_handleDrag(e){this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}class de extends p.i{constructor(e=p.l.maximumDoubleClickDelay,t=p.l.maximumDoubleClickDistance,r=p.l.maximumDoubleTouchDelay,i=p.l.maximumDoubleTouchDistance,s=a.o){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=i,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,y.c)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new p.d({start:(e,t)=>this._dragStart(e,t),update:(e,t)=>this._dragUpdate(t),end:(e,t)=>this._dragEnd(t)}),this.registerIncoming("drag",(e=>this._dragEventSeparator.handle(e))),this.registerIncoming("pointer-down",(e=>this._handlePointerDown(e))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{null!=e.doubleTapTimeout&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null)}))}get hasPendingInputs(){return(0,p.g)(this._pointerState,(e=>null!=e.doubleTapTimeout))}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}_dragStart(e,t){if(!this._doubleTapDragReady||1!==e)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:i}=t,{center:s}=r;this._dragStartCenter=s;const n=this._createDoubleTapDragData("begin",(0,y.c)(0,0),r);this._doubleTapDrag.emit(n,void 0,i),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:r}=e,{center:i}=t,s=(0,y.c)(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("update",s,t);this._doubleTapDrag.emit(n,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:r}=e,{center:i}=t,s=(0,y.c)(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("end",s,t);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,r=this._pointerId(t),i=this._pointerState.get(r),{pointerType:s}=t.native;if(i){const n="touch"===s?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(r),(0,p.j)(i.event.data,t)>n?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(e){const{native:t}=e,{pointerId:r,button:i,pointerType:s}=t;return"mouse"===s?`${r}:${i}`:`${s}`}_storePointerDown(e){const{data:t}=e,{pointerType:r}=t.native,i=this._pointerId(t),s="touch"===r?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,n=this._clock.setTimeout((()=>this._clearPointerDown(i)),s);this._pointerState.set(i,{event:e,doubleTapTimeout:n}),this.refreshHasPendingInputs()}}const ye={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},fe={zoomIn:["=","+"],zoomOut:["-","_"]},me={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let ge=class extends i.p{constructor(){super(...arguments),this._handles=new T.u}initialize(){this._handles.add([(0,u.b)(this.view,"ready",(()=>this._disconnect())),(0,u.y)(this.view,"ready",(()=>this._connect()))])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new p.m(e,this.view.input),r=[new p.o,new p.p,new p.q,new p.r(this.view.navigation),new de],i=new p.v({eventSource:t,recognizers:r});i.installHandlers("prevent-context-menu",[new p.x],p.y.INTERNAL),i.installHandlers("navigation",[new pe(this.view),new se(this.view),new he(this.view),new ee(this.view),new ee(this.view,["Ctrl"]),new re(this.view,"primary"),new le(this.view,ye),new ce(this.view,fe),new ue(this.view,me),new ie(this.view,"secondary"),new te(this.view,"touch")],p.y.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,(0,u.d)(this.view.navigation,"browserTouchPanEnabled",(e=>{this._source.browserTouchPanningEnabled=!e}))}get test(){return{inputManager:this._inputManager}}};(0,i.e)([(0,h.y)()],ge.prototype,"view",void 0),ge=(0,i.e)([(0,h.n)("esri.views.2d.input.MapViewInputManager")],ge);var ve=ge;let be=0,we=class extends i.p{constructor(){super(...arguments),this.color=new M.o([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return be++}};(0,i.e)([(0,h.y)({readOnly:!0})],we.prototype,"version",null),(0,i.e)([(0,h.y)({type:M.o})],we.prototype,"color",void 0),(0,i.e)([(0,h.y)({type:M.o})],we.prototype,"haloColor",void 0),(0,i.e)([(0,h.y)()],we.prototype,"haloOpacity",void 0),(0,i.e)([(0,h.y)()],we.prototype,"fillOpacity",void 0),we=(0,i.e)([(0,h.n)("esri.views.2d.support.HighlightOptions")],we);var _e=we;let xe=class extends p.z{constructor(e){super(e),this.components=["attribution","zoom"]}};(0,i.e)([(0,h.y)()],xe.prototype,"components",void 0),xe=(0,i.e)([(0,h.n)("esri.views.ui.2d.DefaultUI2D")],xe);var Se,Te=xe;let Me=Se=class extends i.a{constructor(e){super(e),this.color=new M.o([0,0,0,1])}clone(){return new Se((0,l.y)({color:this.color}))}};(0,i.e)([(0,h.y)({type:M.o,json:{write:!0}})],Me.prototype,"color",void 0),Me=Se=(0,i.e)([(0,h.n)("esri.webmap.background.ColorBackground")],Me);var Ee=Me;const Ie=l.n.getLogger("esri.views.MapView");let Oe,Ae,Pe,Re,Fe,Ce;function Le(e,t,r){if(e)if(Array.isArray(e)||n.L.isCollection(e)){if(0===e.length)return;e.forEach((e=>Le(e,t,r)))}else!function(e){return e instanceof s.h}(e)?r.add(e):t.add(e)}let ke=class extends((0,p.B)((0,p._)(K))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new o.p({getCollections:()=>{var e,t;return[null==(e=this.basemapView)?void 0:e.baseLayerViews,this.layerViews,null==(t=this.basemapView)?void 0:t.referenceLayerViews]},getChildrenFunction:()=>null}),this.floors=new n.L,this.graphicsView=null,this.highlightOptions=new _e,this.inputManager=new ve({view:this}),this.mapViewNavigation=null,this.supersampleScreenhotsEnabled=!1,this.ui=new Te,this.rendering=!1,(0,c.m)()}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e)}get textureManager(){return this._stage.painter.textureManager}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(e){if((0,p.C)(e)){const t=(0,p.D)(this,e);return super.toMap(t)}return super.toMap(e)}hitTest(e,t){const r=(0,p.C)(e)?(0,p.D)(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return Promise.resolve({screenPoint:r,results:[]});const i=this.toMap(r),s=[this.graphicsView];s.push.apply(s,this.allLayerViews.toArray().reverse());const n=new Set,o=new Set,a=new Set,l=new Set;return t&&(Le(t&&t.include,n,a),Le(t&&t.exclude,o,l)),Promise.all(s.map((e=>!e||!e.hitTest||a.size>0&&!e.layer||a.size>0&&e.layer&&!a.has(e.layer)||l.size>0&&e.layer&&l.has(e.layer)?null:e.hitTest(r.x,r.y)))).then((e=>({screenPoint:r,results:e.filter((e=>null!=e&&(!(n.size>0)||n.has(e))&&(!(o.size>0)||!o.has(e)))).map((e=>({mapPoint:i,graphic:e})))})))}takeScreenshot(e){return this.ready?this._stage.takeScreenshot((0,E.n)(e,this),this.allLayerViews):Promise.reject("Map view cannot be used before it is ready")}on(e,t,r,i){return this.inputManager&&this.viewEvents.on(e,t,r,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}validate(){let e=(0,p.E)({checkMajorWebPerformanceCaveat:!1});return(0,l.c)("safari")&&(0,l.c)("safari")<9&&(e=new a.s("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,l.c)("safari")})),(0,l.r)(e)?(Ie.warn("#validate()",e.message),Promise.reject(e)):async function(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:s,MagnifierView2D:n,Stage:o}]=await Promise.all([Promise.all([r.e(9351),r.e(9654)]).then(r.bind(r,59654)),Promise.all([r.e(918),r.e(265),r.e(9351)]).then(r.bind(r,40398))]);Ae=e,Pe=t,Re=i,Fe=s,Ce=n,Oe=o}()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const e={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},t=new Oe(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:e,renderingOptions:this.renderingOptions,timeline:this.timeline}),r=new Ae({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Pe(this.featuresTilingScheme)}),i=new Fe({view:this,animationManager:this.animationManager}),s=new Re({view:this});this._magnifierView=new Ce,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=r,this._set("graphicsView",r),this._set("mapViewNavigation",i),this._set("labelManager",s),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),t.on("post-render",(()=>this._set("rendering",t.renderRequested))),t.on("will-render",(()=>this._set("rendering",t.renderRequested))),t.on("webgl-error",(e=>this.fatalError=e.error)),(0,u.d)(this,"stationary",(e=>t.stationary=e),!0),(0,u.d)(this,"state.id",(()=>t.state=this.state),!0),(0,u.d)(this,"background",(e=>{t.background=e,this._magnifierView.background=e}),!0),(0,u.d)(this,"magnifier",(e=>this._magnifierView.magnifier=e),!0),(0,u.d)(this,"renderingOptions",(e=>t.renderingOptions=e),!0),(0,u.d)(this,"highlightOptions",(()=>t.highlightOptions=this.highlightOptions),!0)],"map-view"),t.state=this.state,this._updateStageChildren();const n=this._resolveWhenReady;this._resolveWhenReady=[],n.forEach((e=>e(this))),this.timeline.end("MapView Startup")}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown()}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this._stage.addChild(e.container)}));const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}};(0,i.e)([(0,h.y)({type:Ee})],ke.prototype,"background",null),(0,i.e)([(0,h.y)()],ke.prototype,"floors",void 0),(0,i.e)([(0,h.y)()],ke.prototype,"graphicsView",void 0),(0,i.e)([(0,h.y)({type:_e})],ke.prototype,"highlightOptions",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],ke.prototype,"inputManager",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],ke.prototype,"textureManager",null),(0,i.e)([(0,h.y)({readOnly:!0})],ke.prototype,"mapViewNavigation",void 0),(0,i.e)([(0,h.y)({type:Boolean})],ke.prototype,"navigating",null),(0,i.e)([(0,h.y)({type:Boolean,constructOnly:!0})],ke.prototype,"supersampleScreenhotsEnabled",void 0),(0,i.e)([(0,h.y)({type:Te})],ke.prototype,"ui",void 0),(0,i.e)([(0,h.y)({readOnly:!0})],ke.prototype,"rendering",void 0),(0,i.e)([(0,h.y)({constructOnly:!0})],ke.prototype,"renderCanvas",void 0),(0,i.e)([(0,h.y)({constructOnly:!0})],ke.prototype,"deactivatedWebGLExtensions",void 0),(0,i.e)([(0,h.y)({constructOnly:!0})],ke.prototype,"debugWebGLExtensions",void 0),ke=(0,i.e)([(0,h.n)("esri.views.MapView")],ke);var Ne=ke},3629:(e,t,r)=>{"use strict";r.d(t,{e:()=>s,i:()=>o,s:()=>n});var i=r(78155);const s=-3;class n{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,r,i=0){this._storage.put(this._namespace+e,t,r,i)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class o{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.f,this._users=new i.f}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,i){const n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),r>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(i,s)-s;this._db.set(e,{entry:t,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(e,t,r){const i=this._db.get(e);if(i&&i.entry===t){if(this._size-=i.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);i.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,i)=>{const s=e.lifetime;r[s]=(r[s]||0)+e.size,this._users.forAll((r=>{const s=r.namespace;if(i.startsWith(s)){const r=t[s]||0;t[s]=r+e.size}}))}));const i={};this._users.forAll((e=>{const r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const s=t[r]||0;t[r]=s,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"}));const n=Object.keys(t);n.forEach((e=>t[e]=t[e]/this._size*100)),n.sort(((e,r)=>t[r]-t[e])),n.forEach((r=>e[r]=Math.round(t[r])+"% / "+i[r]));for(let t=r.length-1;t>=0;--t){const i=r[t];i&&(e["Priority "+(t+s-1)]=Math.round(i/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},84320:(e,t,r)=>{"use strict";r.d(t,{c:()=>A,f:()=>U,l:()=>m,m:()=>S,o:()=>f,p:()=>R,y:()=>N}),r(33807);var i,s=r(87405),n=r(98548),o=r(78082),a=r(78155),l=r(80219),u=r(88903),c=r(20736),h=r(17762),p=r(4169),d=r(29832),y=r(93450);function f(e){const t=m(e.rings,e.hasZ,1),r=[];let i=0,n=0;for(const e of t.polygons){const o=e.count,a=e.index,l=new Float64Array(t.position.buffer,3*a*t.position.BYTES_PER_ELEMENT,3*o),u=e.holeIndices.map((e=>e-a)),c=new Uint32Array((0,s.r)(l,u,3));r.push({position:l,faces:c}),i+=l.length,n+=c.length}const a=function(e,t,r){if(1===e.length)return e[0];const i=new Float64Array(t),s=new Uint32Array(r);let n=0,o=0,a=0;for(const t of e){for(let e=0;e<t.position.length;e++)i[n++]=t.position[e];for(let e=0;e<t.faces.length;e++)s[o++]=t.faces[e]+a;a=n/3}return{position:i,faces:s}}(r,i,n),l=(0,o.n)(a.position.buffer,6,{originalIndices:a.faces});return a.position=new Float64Array(l.buffer),a.faces=l.indices,a}function m(e,t,r){const i=e.length,s=new Array(i),n=new Array(i),o=new Array(i);let a=0,l=0,u=0,c=0;for(let t=0;t<i;++t)c+=e[t].length;const h=new Float64Array(3*c);let p=0;for(let c=i-1;c>=0;c--){const d=e[c],y=1===r&&v(d);if(y&&1!==i)s[a++]=d;else{let e=d.length;for(let t=0;t<a;++t)e+=s[t].length;const r={index:p,pathLengths:new Array(a+1),count:e,holeIndices:new Array(a)};r.pathLengths[0]=d.length,d.length>0&&(o[u++]={index:p,count:d.length}),p=y?g(d,d.length-1,-1,h,p,d.length,t):g(d,0,1,h,p,d.length,t);for(let e=0;e<a;++e){const i=s[e];r.holeIndices[e]=p,r.pathLengths[e+1]=i.length,i.length>0&&(o[u++]={index:p,count:i.length}),p=g(i,0,1,h,p,i.length,t)}a=0,r.count>0&&(n[l++]=r)}}for(let e=0;e<a;++e){const r=s[e];r.length>0&&(o[u++]={index:p,count:r.length}),p=g(r,0,1,h,p,r.length,t)}return l<i&&(n.length=l),u<i&&(o.length=u),{position:h,polygons:n,outlines:o}}function g(e,t,r,i,s,n,o){s*=3;for(let a=0;a<n;++a){const n=e[t];i[s++]=n[0],i[s++]=n[1],i[s++]=o?n[2]:0,t+=r}return s/3}function v(e){return!(0,n.b)(e,!1,!1)}const b=new WeakMap;let w=0,_=i=class extends a.a{constructor(e){super(e),this.wrap="repeat"}get url(){return this._get("url")||null}set url(e){this._set("url",e),e&&this._set("data",null)}get data(){return this._get("data")||null}set data(e){this._set("data",e),e&&this._set("url",null)}writeData(e,t,r,i){if(e instanceof HTMLImageElement){const s={type:"image-element",src:(0,d.i)(e.src,i),crossOrigin:e.crossOrigin};t[r]=s}else if(e instanceof HTMLCanvasElement){const i=e.getContext("2d").getImageData(0,0,e.width,e.height),s={type:"canvas-element",imageData:this.encodeImageData(i)};t[r]=s}else if(e instanceof HTMLVideoElement){const s={type:"video-element",src:(0,d.i)(e.src,i),autoplay:e.autoplay,loop:e.loop,muted:e.muted,crossOrigin:e.crossOrigin,preload:e.preload};t[r]=s}else{const i={type:"image-data",imageData:this.encodeImageData(e)};t[r]=i}}readData(e){switch(e.type){case"image-element":{const t=new Image;return t.src=e.src,t.crossOrigin=e.crossOrigin,t}case"canvas-element":{const t=this.decodeImageData(e.imageData),r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").putImageData(t,0,0),r}case"image-data":return this.decodeImageData(e.imageData);case"video-element":{const t=document.createElement("video");return t.src=e.src,t.crossOrigin=e.crossOrigin,t.autoplay=e.autoplay,t.loop=e.loop,t.muted=e.muted,t.preload=e.preload,t}default:return}}get transparent(){const e=this.data,t=this.url;if(e instanceof HTMLCanvasElement)return this.imageDataContainsTransparent(e.getContext("2d").getImageData(0,0,e.width,e.height));if(e instanceof ImageData)return this.imageDataContainsTransparent(e);if(t){const e=t.substr(t.length-4,4).toLowerCase(),r=t.substr(0,15).toLocaleLowerCase();if(".png"===e||"data:image/png;"===r)return!0}return!1}set transparent(e){null!=e?this._override("transparent",e):this._clearOverride("transparent")}get contentHash(){const e="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",t=(t="")=>`d:${t},t:${this.transparent},w:${e}`;return null!=this.url?t(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?t(this.data.src):(b.has(this.data)||b.set(this.data,++w),t(b.get(this.data))):t()}clone(){const e={url:this.url,data:this.data,wrap:this.cloneWrap()};return new i(e)}cloneWithDeduplication(e){const t=e.get(this);if(t)return t;const r=this.clone();return e.set(this,r),r}cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}encodeImageData(e){let t="";for(let r=0;r<e.data.length;r++)t+=String.fromCharCode(e.data[r]);return{data:btoa(t),width:e.width,height:e.height}}decodeImageData(e){const t=atob(e.data),r=new Uint8ClampedArray(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return(0,y.g)(r,e.width,e.height)}imageDataContainsTransparent(e){for(let t=3;t<e.data.length;t+=4)if(255!==e.data[t])return!0;return!1}static from(e){return"string"==typeof e?new i({url:e}):e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLVideoElement?new i({data:e}):(0,u.B)(i,e)}};(0,a.e)([(0,u.y)({type:String,json:{write:d.p}})],_.prototype,"url",null),(0,a.e)([(0,u.y)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,u.y)()],_.prototype,"data",null),(0,a.e)([(0,a.o)("data")],_.prototype,"writeData",null),(0,a.e)([(0,p.e)("data")],_.prototype,"readData",null),(0,a.e)([(0,u.y)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],_.prototype,"transparent",null),(0,a.e)([(0,u.y)({json:{write:!0}})],_.prototype,"wrap",void 0),(0,a.e)([(0,u.y)({readOnly:!0})],_.prototype,"contentHash",null),_=i=(0,a.e)([(0,u.n)("esri.geometry.support.MeshTexture")],_);var x,S=_;let T=x=class extends a.a{constructor(e){super(e),this.color=null,this.colorTexture=null,this.normalTexture=null,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(e,t){const r=(0,l.r)(e)?e.get(this):null;if(r)return r;const i=new x(this.clonePropertiesWithDeduplication(t));return(0,l.r)(e)&&e.set(this,i),i}clonePropertiesWithDeduplication(e){return{color:(0,l.r)(this.color)?this.color.clone():null,colorTexture:(0,l.r)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(e):null,normalTexture:(0,l.r)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(e):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided}}};(0,a.e)([(0,u.y)({type:h.o,json:{write:!0}})],T.prototype,"color",void 0),(0,a.e)([(0,u.y)({type:S,json:{write:!0}})],T.prototype,"colorTexture",void 0),(0,a.e)([(0,u.y)({type:S,json:{write:!0}})],T.prototype,"normalTexture",void 0),(0,a.e)([(0,u.y)({nonNullable:!0,json:{write:!0}})],T.prototype,"alphaMode",void 0),(0,a.e)([(0,u.y)({nonNullable:!0,json:{write:!0}})],T.prototype,"alphaCutoff",void 0),(0,a.e)([(0,u.y)({nonNullable:!0,json:{write:!0}})],T.prototype,"doubleSided",void 0),T=x=(0,a.e)([(0,u.n)("esri.geometry.support.MeshMaterial")],T);var M,E=T;let I=M=class extends E{constructor(e){super(e),this.emissiveColor=null,this.emissiveTexture=null,this.occlusionTexture=null,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(e,t){const r=(0,l.r)(e)?e.get(this):null;if(r)return r;const i=new M(this.clonePropertiesWithDeduplication(t));return(0,l.r)(e)&&e.set(this,i),i}clonePropertiesWithDeduplication(e){return{...super.clonePropertiesWithDeduplication(e),emissiveColor:(0,l.r)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,l.r)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(e):null,occlusionTexture:(0,l.r)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(e):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,l.r)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(e):null}}};(0,a.e)([(0,u.y)({type:h.o,json:{write:!0}})],I.prototype,"emissiveColor",void 0),(0,a.e)([(0,u.y)({type:S,json:{write:!0}})],I.prototype,"emissiveTexture",void 0),(0,a.e)([(0,u.y)({type:S,json:{write:!0}})],I.prototype,"occlusionTexture",void 0),(0,a.e)([(0,u.y)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],I.prototype,"metallic",void 0),(0,a.e)([(0,u.y)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],I.prototype,"roughness",void 0),(0,a.e)([(0,u.y)({type:S,json:{write:!0}})],I.prototype,"metallicRoughnessTexture",void 0),I=M=(0,a.e)([(0,u.n)("esri.geometry.support.MeshMaterialMetallicRoughness")],I);var O,A=I;const P=l.n.getLogger("esri.geometry.support.MeshVertexAttributes");let R=O=class extends a.a{constructor(e){super(e),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(e){return C(e,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},P)}castPosition(e){return e&&e instanceof Float32Array&&P.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),C(e,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},P)}castUv(e){return C(e,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},P)}castNormal(e){return C(e,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},P)}castTangent(e){return C(e,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},P)}clone(){const e={position:(0,l.y)(this.position),uv:(0,l.y)(this.uv),normal:(0,l.y)(this.normal),tangent:(0,l.y)(this.tangent),color:(0,l.y)(this.color)};return new O(e)}clonePositional(){const e={position:(0,l.y)(this.position),normal:(0,l.y)(this.normal),tangent:(0,l.y)(this.tangent),uv:this.uv,color:this.color};return new O(e)}};function F(e,t,r,i){const{loggerTag:s,stride:n}=t;return e.length%n!=0?(i.error(s,`Invalid array length, expected a multiple of ${n}`),new r([])):e}function C(e,t,r,i,s){if(!e)return e;if(e instanceof t)return F(e,i,t,s);for(const n of r)if(e instanceof n)return F(new t(e),i,t,s);if(Array.isArray(e))return F(new t(e),i,t,s);{const i=r.map((e=>`'${e.name}'`));return s.error(`Failed to set property, expected one of ${i}, but got ${e.constructor.name}`),new t([])}}function L(e,t,r){t[r]=function(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r];return t}(e)}(0,a.e)([(0,u.y)({json:{write:L}})],R.prototype,"color",void 0),(0,a.e)([(0,c.c)("color")],R.prototype,"castColor",null),(0,a.e)([(0,u.y)({nonNullable:!0,json:{write:L}})],R.prototype,"position",void 0),(0,a.e)([(0,c.c)("position")],R.prototype,"castPosition",null),(0,a.e)([(0,u.y)({json:{write:L}})],R.prototype,"uv",void 0),(0,a.e)([(0,c.c)("uv")],R.prototype,"castUv",null),(0,a.e)([(0,u.y)({json:{write:L}})],R.prototype,"normal",void 0),(0,a.e)([(0,c.c)("normal")],R.prototype,"castNormal",null),(0,a.e)([(0,u.y)({json:{write:L}})],R.prototype,"tangent",void 0),(0,a.e)([(0,c.c)("tangent")],R.prototype,"castTangent",null),R=O=(0,a.e)([(0,u.n)("esri.geometry.support.MeshVertexAttributes")],R);var k,N=R;const j=l.n.getLogger("esri.geometry.support.MeshComponent");let D=k=class extends a.a{constructor(e){super(e),this.faces=null,this.material=null,this.shading="source",this.trustSourceNormals=!1}static from(e){return(0,u.B)(k,e)}castFaces(e){return C(e,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},j)}castMaterial(e){return(0,u.B)(e&&"object"==typeof e&&("metallic"in e||"roughness"in e||"metallicRoughnessTexture"in e)?A:E,e)}clone(){return new k({faces:(0,l.y)(this.faces),shading:this.shading,material:(0,l.y)(this.material),trustSourceNormals:this.trustSourceNormals})}cloneWithDeduplication(e,t){const r={faces:(0,l.y)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(e,t):null,trustSourceNormals:this.trustSourceNormals};return new k(r)}};(0,a.e)([(0,u.y)({json:{write:!0}})],D.prototype,"faces",void 0),(0,a.e)([(0,c.c)("faces")],D.prototype,"castFaces",null),(0,a.e)([(0,u.y)({type:E,json:{write:!0}})],D.prototype,"material",void 0),(0,a.e)([(0,c.c)("material")],D.prototype,"castMaterial",null),(0,a.e)([(0,u.y)({type:String,json:{write:!0}})],D.prototype,"shading",void 0),(0,a.e)([(0,u.y)({type:Boolean})],D.prototype,"trustSourceNormals",void 0),D=k=(0,a.e)([(0,u.n)("esri.geometry.support.MeshComponent")],D);var U=D},80219:(e,t,r)=>{"use strict";r.d(t,{A:()=>O,B:()=>_,C:()=>U,D:()=>V,E:()=>B,F:()=>F,G:()=>c,H:()=>D,I:()=>N,J:()=>C,K:()=>L,L:()=>z,M:()=>R,N:()=>te,O:()=>d,P:()=>M,Q:()=>E,R:()=>m,S:()=>k,T:()=>j,U:()=>T,V:()=>ie,a:()=>w,b:()=>ee,c:()=>u,d:()=>Y,e:()=>i,f:()=>f,g:()=>A,h:()=>x,i:()=>q,j:()=>H,k:()=>v,l:()=>$,m:()=>P,n:()=>ne,o:()=>J,p:()=>S,q:()=>g,r:()=>h,s:()=>ae,t:()=>p,u:()=>W,v:()=>I,w:()=>re,x:()=>y,y:()=>G,z:()=>b}),r(33807);const i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:void 0;var s,n;let o;var a,l;function u(e){return"function"==typeof o[e]?o[e]=o[e](i):o[e]}o=null!=(s=i.dojoConfig)&&s.has||null!=(n=i.esriConfig)&&n.has?{...null==(a=i.dojoConfig)?void 0:a.has,...null==(l=i.esriConfig)?void 0:l.has}:{},u.add=(e,t,r,i)=>((i||void 0===o[e])&&(o[e]=t),r&&u(e)),u.cache=o,u.add("esri-deprecation-warnings",!0),(()=>{u.add("host-webworker",void 0!==i.WorkerGlobalScope&&self instanceof i.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(u.add("host-browser",e),u.add("host-node","object"==typeof i.process&&i.process.versions&&i.process.versions.node&&i.process.versions.v8),u.add("dom",e),u("host-browser")){const e=navigator,t=e.userAgent,r=e.appVersion,i=parseFloat(r);if(u.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),u.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),u.add("khtml",r.includes("Konqueror")?i:void 0),u.add("edge",parseFloat(t.split("Edge/")[1])||void 0),u.add("opr",parseFloat(t.split("OPR/")[1])||void 0),u.add("webkit",!u("wp")&&!u("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),u.add("chrome",!u("edge")&&!u("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),u.add("android",!u("wp")&&parseFloat(t.split("Android ")[1])||void 0),u.add("safari",!r.includes("Safari")||u("wp")||u("chrome")||u("android")||u("edge")||u("opr")?void 0:parseFloat(r.split("Version/")[1])),u.add("mac",r.includes("Macintosh")),!u("wp")&&t.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),r=t.match(/OS ([\d_]+)/)?RegExp.$1:"1",i=parseFloat(r.replace(/_/,".").replace(/_/g,""));u.add(e,i),u.add("ios",i)}u.add("trident",parseFloat(r.split("Trident/")[1])||void 0),u("webkit")||(!t.includes("Gecko")||u("wp")||u("khtml")||u("trident")||u("edge")||u.add("mozilla",i),u("mozilla")&&u.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(i.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&u.add("esri-mobile",t),r&&u.add("esri-iPhone",r),u.add("esri-geolocation",!!navigator.geolocation)}u.add("esri-canvas-svg-support",!u("trident")),u.add("esri-wasm","WebAssembly"in i),u.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in i,t=!1===i.crossOriginIsolated;return e&&!t})),u.add("esri-atomics","Atomics"in i),u.add("esri-workers","Worker"in i),u.add("esri-text-decoder","TextDecoder"in i),u.add("esri-text-encoder","TextEncoder"in i),u.add("web-feat:cache","caches"in i),u.add("esri-workers-arraybuffer-transfer",!u("safari")||Number(u("safari"))>=12),u.add("featurelayer-snapshot-enabled",!0),u.add("featurelayer-snapshot-point-min-threshold",8e4),u.add("featurelayer-snapshot-point-max-threshold",4e5),u.add("featurelayer-snapshot-point-coverage",.1),u.add("featurelayer-advanced-symbols",!1),u.add("featurelayer-pbf",!0),u.add("featurelayer-pbf-statistics",!1),u.add("feature-layers-workers",!0),u.add("mapview-transitions-duration",200),u.add("mapserver-pbf-enabled",!1),u("host-webworker")||u("host-browser")&&(u.add("csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),u.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{u.add("esri-image-decode",!0,!0,!0)})).catch((()=>{u.add("esri-image-decode",!1,!0,!0)}))}return!1})),u.add("esri-url-encodes-apostrophe",(()=>{const e=i.document.createElement("a");return e.href="?'",e.href.includes("?%27")})),u.add("vectortilelayer-max-buffers",u("ff")?160:Number.POSITIVE_INFINITY))})();const c=null;function h(e){return null!=e}function p(e){return null==e}function d(e){return void 0===e}function y(e,t){return h(e)?t(e):c}function f(e){return e}function m(e,t){if(p(e))throw new Error(t);return e}function g(e,t){return h(e)?e:"function"==typeof t?t():t}function v(e){return h(e)&&e.destroy(),null}function b(e){return h(e)&&e.dispose(),null}function w(e){return h(e)&&e.remove(),null}function _(e){return h(e)&&e.abort(),null}function x(e){return h(e)&&e.release(),null}function S(e){return null}function T(e,t){const r=new Array;return e.forEach((e=>{const i=t(e);h(i)&&r.push(i)})),r}function M(e,t){const r=new Array;for(const i of e)r.push(I(i,null,t));return r}function E(e,t){for(const r of e)I(r,null,t)}function I(e,t,r){return h(e)?r(e):t}function O(e,t){return h(e)?t(e):null}function A(e,...t){let r=e;for(let e=0;e<t.length&&r;++e)r=r[t[e]];return r}function P(e){return e}function R(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function F(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const i=Math.max(0,r-t),s=new e.constructor(i);for(let r=0;r<i;r++)s[r]=e[t+r];return s}function C(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function L(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function k(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function N(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function j(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function D(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function U(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function V(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function B(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r];return t}function z(e){return p(e)?0:128+e.buffer.byteLength+64}function q(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&q(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function G(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(function(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}(e)||L(e)||function(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}(e)||k(e)||N(e)||j(e)||D(e)||U(e)||V(e))return F(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach(((e,r)=>{t.set(r,G(e))})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(G(e))})),t}let t;const r=e;if("function"==typeof r.clone)t=r.clone();else if("function"==typeof r.map&&"function"==typeof r.forEach)t=r.map(G);else if("function"==typeof r.notifyChange&&"function"==typeof r.watch)t=r.clone();else{t={};for(const r of Object.getOwnPropertyNames(e))t[r]=G(e[r])}return t}function $(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}function W(e,t,r=!1){return X(e,t,r)}function H(e,t){if(null!=t)return t[e]||Z(e.split("."),!1,t)}function J(e,t,r){const i=e.split("."),s=i.pop(),n=Z(i,!0,r);n&&s&&(n[s]=t)}function Z(e,t,r){let i=r;for(const r of e){if(null==i)return;if(!(r in i)){if(!t)return;i[r]={}}i=i[r]}return i}function X(e,t,r){return t?Object.keys(t).reduce((function(e,i){let s=e[i],n=t[i];return s===n?e:void 0===s?(e[i]=G(n),e):(Array.isArray(n)||Array.isArray(e)?(s=s?Array.isArray(s)?e[i]=s.concat():e[i]=[s]:e[i]=[],n&&(Array.isArray(n)||(n=[n]),r?n.forEach((e=>{-1===s.indexOf(e)&&s.push(e)})):e[i]=n.concat())):n&&"object"==typeof n?e[i]=X(s,n,r):e.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(e[i]=n),e)}),e||{}):e}const Y={apiKey:void 0,applicationUrl:i.location&&i.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(i.esriConfig&&(W(Y,i.esriConfig,!0),delete Y.has),!Y.assetsPath){const e="4.20.1";Y.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Y.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Y,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Y.request.corsEnabledServers=[],Y.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const Q=/\{([^\}]+)\}/g;function K(e){return null==e?"":e}function ee(e,t){return e.replace(Q,"object"==typeof t?(e,r)=>K(H(r,t)):(e,r)=>K(t(r)))}function te(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:`\\${e}`))}function re(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function ie(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}const se={info:0,warn:1,error:2,none:3};class ne{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,ne._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=ne.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const t=ne._loggers;return ne._loggers=e,t},set throttlingDisabled(e){ne._throttlingDisabled=e}}}static getLogger(e){let t=ne._loggers[e];return t||(t=new ne({module:e})),t}_log(e,t,...r){if(this._matchLevel(e)){if("always"!==t&&!ne._throttlingDisabled){const i=this._argsToKey(r),s=this._loggedMessages[e].get(i);if("once"===t&&null!=s||"oncePerTick"===t&&s&&s>=ne._tickCounter)return;this._loggedMessages[e].set(i,ne._tickCounter),ne._scheduleTickCounterIncrement()}for(const t of Y.log.interceptors)if(t(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){let r=this;for(;h(r);){const t=r[e];if(h(t))return t;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e](`[${t}]`,...r)}_matchLevel(e){const t=Y.log.level?Y.log.level:"warn";return se[this._parentWithMember("level",t)]<=se[e]}_argsToKey(...e){return re(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){ne._tickCounterScheduled||(ne._tickCounterScheduled=!0,Promise.resolve().then((()=>{ne._tickCounter++,ne._tickCounterScheduled=!1})))}}function oe(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,r){if(""===r)return"$";const i=H(r,t),s=null==i?"":i;if(void 0===s)throw new Error(`could not find key "${r}" in template`);return s.toString()}))}ne._loggers={},ne._tickCounter=0,ne._tickCounterScheduled=!1,ne._throttlingDisabled=!1;class ae{constructor(e,t,r){this.name=e,this.details=r,this.message=void 0,this instanceof ae&&(this.message=t&&oe(t,r)||"")}toString(){return"["+this.name+"]: "+this.message}}},79506:(e,t,r)=>{"use strict";r.d(t,{O:()=>d,l:()=>p});var i=r(78155),s=r(80219),n=r(88903);class o{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(i.r),this._values=new Map}clone(e){const t=new o,r=this._originStores[0];r&&r.forEach(((e,r)=>{t.set(r,(0,s.y)(e),0)}));for(let r=2;r<i.r;r++){const i=this._originStores[r];i&&i.forEach(((i,n)=>{e&&e.has(n)||t.set(n,(0,s.y)(i),r)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||(0,s.m)(this._propertyOriginMap.get(e))<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r&&r.get(e),s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),s!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}const a=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,s.m)((0,n.e)(this)),r=t.metadatas,i=t.store,a=new o;t.store=a,i.keys().forEach((e=>{a.set(e,i.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&a.set(e,t.internalGet(e),0)}))}read(e,t){(0,i.u)(this,e,t)}getAtOrigin(e,t){const r=l(this),s=(0,i.t)(t);if("string"==typeof e)return r.get(e,s);const n={};return e.forEach((e=>{n[e]=r.get(e,s)})),n}originOf(e){return(0,i.n)(this.originIdOf(e))}originIdOf(e){return l(this).originOf(e)}revert(e,t){const r=l(this),s=(0,i.t)(t),o=(0,n.e)(this);let a;a="string"==typeof e?"*"===e?r.keys(s):[e]:e,a.forEach((e=>{o.invalidate(e),r.revert(e,s),o.commit(e)}))}};return t=(0,i.e)([(0,n.n)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function l(e){return(0,n.e)(e).store}let u=class extends(a(i.p)){};u=(0,i.e)([(0,n.n)("esri.core.ReadOnlyMultiOriginJSONSupport")],u);const c=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return h(this).delete(e,(0,i.t)(t))}write(e={},t){return(0,i.g)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,n.e)(this).setAtOrigin(e,t,(0,i.t)(r))}removeOrigin(e){const t=h(this),r=(0,i.t)(e),s=t.keys(r);for(const e of s)t.originOf(e)===r&&t.set(e,t.get(e,r),6)}updateOrigin(e,t){const r=h(this),s=(0,i.t)(t),n=this.get(e);for(let t=s+1;t<i.r;++t)r.delete(e,t);r.set(e,n,s)}toJSON(e){return this.write({},e)}};return t=(0,i.e)([(0,n.n)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function h(e){return(0,n.e)(e).store}const p=e=>{let t=class extends(c(a(e))){constructor(...e){super(...e)}};return t=(0,i.e)([(0,n.n)("esri.core.MultiOriginJSONSupport")],t),t};let d=class extends(p(i.p)){};d=(0,i.e)([(0,n.n)("esri.core.MultiOriginJSONSupport")],d)},13895:(e,t,r)=>{"use strict";r.d(t,{a:()=>P,c:()=>C,d:()=>L,f:()=>F,g:()=>U,j:()=>B,l:()=>z,m:()=>k,n:()=>w,o:()=>O,p:()=>R,r:()=>_,s:()=>A,u:()=>j,v:()=>V,w:()=>D,x:()=>I,y:()=>N});var i=r(78155),s=r(20215),n=r(88903),o=r(80219),a=r(91236),l=r(98548),u=r(92858),c=r(29832),h=r(31531),p=r(4169),d=r(52957),y=r(4618),f=r(61888);const m={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var g;let v=g=class extends i.a{async collectRequiredFields(e,t){return(0,d.T)(e,t,this.expression)}clone(){return new g({expression:this.expression,title:this.title})}};(0,i.e)([(0,n.y)({type:String,json:{write:!0}})],v.prototype,"expression",void 0),(0,i.e)([(0,n.y)({type:String,json:{write:!0}})],v.prototype,"title",void 0),v=g=(0,i.e)([(0,n.n)("esri.layers.support.FeatureExpressionInfo")],v);var b=v;function w(e){return null!=y.m[e]}function _(e){return 1/(y.m[e]||1)}const x=function(){const e=Object.keys(y.m);return e.sort(),e}();var S;const T=(0,h.s)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),M=new h.o({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let E=S=class extends i.a{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write(null,i),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):(0,o.r)(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new S({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};(0,i.e)([(0,n.y)({type:b,json:{write:!0}})],E.prototype,"featureExpressionInfo",void 0),(0,i.e)([(0,p.e)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],E.prototype,"readFeatureExpressionInfo",null),(0,i.e)([(0,i.o)("featureExpressionInfo",{featureExpressionInfo:{type:b},"featureExpression.value":{type:[0]}})],E.prototype,"writeFeatureExpressionInfo",null),(0,i.e)([(0,n.y)({type:T.apiValues,nonNullable:!0,json:{type:T.jsonValues,read:T.read,write:{writer:T.write,isRequired:!0}}})],E.prototype,"mode",null),(0,i.e)([(0,n.y)({type:Number,json:{write:!0}})],E.prototype,"offset",void 0),(0,i.e)([(0,n.y)({type:x,json:{type:String,read:M.read,write:M.write}})],E.prototype,"unit",null),E=S=(0,i.e)([(0,n.n)("esri.layers.support.ElevationInfo")],E);var I=E;const O={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},A={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},P={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},R={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:c.p}}},F={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},C={value:null,type:I,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function L(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const k={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},N={...k,json:{...k.json,origins:{"web-document":{...k.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,f.r)(t.layerDefinition.drawingInfo.transparency):void 0:(0,f.r)(t.drawingInfo.transparency)}}},j={type:a.y,readOnly:!0,get(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;const r=null==(t=this.view)?void 0:t.timeExtent,i=this.layer.timeExtent,s=this.layer.useViewTime?r&&i?r.intersection(i):r||i:i;if(!s||s.isEmpty)return s;const n=this.layer.timeOffset,o=n?s.offset(-n.value,n.unit):s,a=this._get("timeExtent");return o.equals(a)?a:o}},D={type:l.M,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=l.M.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=u.k.fromJSON(t.spatialReference)),r}}}},read:!1}},U={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},V={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},B={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},z=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(e,t,r,s){(s&&"ground"===s.layerContainerType||e&&(0,i.b)(this,r,{},s))&&(t[r]=e)}writeOperationalLayerType(e,t,r,i){!e||i&&"tables"===i.layerContainerType||(t.layerType=e)}writeTitle(e,t){t.title=e||"Layer"}read(e,t){t&&(t.layer=this),(0,i.d)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=m[e];let i=r&&r[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(i=!1),!i)return t.messages&&t.messages.push(new s.s("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof s.s&&"web-document-write:property-required"===e.name)).length;return!this.url&&i?null:r}beforeSave(){}};return(0,i.e)([(0,n.y)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,i.e)([(0,n.y)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),(0,i.e)([(0,i.o)("listMode")],t.prototype,"writeListMode",null),(0,i.e)([(0,n.y)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),(0,i.e)([(0,i.o)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,i.e)([(0,n.y)(k)],t.prototype,"opacity",void 0),(0,i.e)([(0,n.y)({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,i.e)([(0,i.o)("title")],t.prototype,"writeTitle",null),(0,i.e)([(0,n.y)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=(0,i.e)([(0,n.n)("esri.layers.mixins.OperationalLayer")],t),t}},91728:(e,t,r)=>{"use strict";r.d(t,{a:()=>i,t:()=>s});class i{constructor(e=[],t=[],r=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=r}get isPoint(){return 0===this.lengths.length}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const i=this.lengths[r];for(let r=0;r<i;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=i}}clone(){return new i(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class s{constructor(e=null,t={},r,i){this.displayId=0,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=i&&(this.objectId=i)}get hasGeometry(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}weakClone(){const e=new s(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}},30691:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});class i{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new i;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},20736:(e,t,r)=>{"use strict";r.d(t,{M:()=>I,R:()=>P,a:()=>w,b:()=>N,c:()=>h,d:()=>A,e:()=>g,f:()=>_,g:()=>E,p:()=>d,s:()=>f,t:()=>m,x:()=>M,y:()=>O});var i=r(78155),s=r(80219),n=r(88903),o=r(4169),a=r(92858);const l=Object.prototype.toString;function u(e){const t="__accessorMetadata__"in e?(0,n.d)(e):e;return function(...e){if(e.push(t),"number"==typeof e[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return c.apply(this,e)}}function c(e,t,r,i){(0,n.s)(e,t).cast=i}function h(...e){if(3!==e.length||"string"!=typeof e[1])return 1===e.length&&"[object Function]"===l.call(e[0])?u(e[0]):1===e.length&&"string"==typeof e[0]?function(e){return function(t,r){(0,n.s)(t,e).cast=t[r]}}(e[0]):void 0}let p=class extends i.a{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=a.k.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof a.k)return e;if(null!=e){const r=new a.k;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};(0,i.e)([(0,n.y)()],p.prototype,"type",void 0),(0,i.e)([(0,n.y)({readOnly:!0})],p.prototype,"cache",null),(0,i.e)([(0,n.y)({readOnly:!0})],p.prototype,"extent",null),(0,i.e)([(0,n.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],p.prototype,"hasM",void 0),(0,i.e)([(0,n.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],p.prototype,"hasZ",void 0),(0,i.e)([(0,n.y)({type:a.k,json:{write:!0}})],p.prototype,"spatialReference",void 0),(0,i.e)([(0,o.e)("spatialReference")],p.prototype,"readSpatialReference",null),p=(0,i.e)([(0,n.n)("esri.geometry.Geometry")],p);var d=p;class y{constructor(e,t,r,i){this.semiMajorAxis=e,this.flattening=t,this.outerAtmosphereRimWidth=r;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const f=new y(6378137,1/298.257223563,3e5,.006694379990137799),m=new y(3396190,1/169.8944472236118,23e4),g=new y(1737400,0,0);function v(e){return 57.29577951308232*e}function b(e){return.017453292519943*e}function w(e){return e/f.radius}function _(e){return Math.PI/2-2*Math.atan(Math.exp(-1*e/f.radius))}function x(e){return null!=e.wkid||null!=e.wkt}const S=[0,0];function T(e,t,r,i,s){const n=e,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,S,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,S,i),[o.xmax,o.ymax]=t(n.xmax,n.ymax,S,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const e="paths"in n?n.paths:n.rings,r=[];let s;for(let n=0;n<e.length;n++){const o=e[n];s=[],r.push(s);for(let e=0;e<o.length;e++)s.push(t(o[e][0],o[e][1],[0,0],i)),o[e].length>2&&s[e].push(o[e][2]),o[e].length>3&&s[e].push(o[e][3])}"paths"in o?o.paths=r:o.rings=r}else if("points"in n&&"points"in o){const e=n.points,r=[];for(let s=0;s<e.length;s++)r[s]=t(e[s][0],e[s][1],[0,0],i),e[s].length>2&&r[s].push(e[s][2]),e[s].length>3&&r[s].push(e[s][3]);o.points=r}return s}function M(e,t){const r=e&&(x(e)?e:e.spatialReference),i=t&&(x(t)?t:t.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||t&&"type"in t&&"mesh"===t.type||!r||!i)&&(!!(0,a.d)(i,r)||(0,a.u)(i)&&(0,a.A)(r)||(0,a.u)(r)&&(0,a.A)(i))}function E(e,t){const r=e&&e.spatialReference,i=t&&(x(t)?t:t.spatialReference);return M(r,i)?(0,a.d)(r,i)?(0,s.y)(e):(0,a.u)(i)?T(e,I,a.k.WebMercator,!1,(0,s.y)(e)):(0,a.A)(i)?T(e,O,a.k.WGS84,!1,(0,s.y)(e)):null:null}function I(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=b(t);return r[0]=b(e)*f.radius,r[1]=f.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function O(e,t,r=[0,0],i=!1){const s=v(e/f.radius);return r[0]=i?s:s-360*Math.floor((s+180)/360),r[1]=v(Math.PI/2-2*Math.atan(Math.exp(-1*t/f.radius))),r}function A(e,t=!1,r=(0,s.y)(e)){return T(e,I,a.k.WebMercator,t,r)}function P(e,t=!1,r=(0,s.y)(e)){return T(e,O,a.k.WGS84,t,r)}var R;const F=[0,0];function C(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}const L=s.n.getLogger("esri.geometry.Point");let k=R=class extends d{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(e,t,r,i,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],r=n[2],i=n[3];else if(e&&"object"==typeof e){if(n=e,e=null!=n.x?n.x:n.longitude,t=null!=n.y?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&"esri.geometry.SpatialReference"!==s.declaredClass&&(s=new a.k(s)),null!=n.longitude||null!=n.latitude)if(null==n.longitude)L.warn(".longitude=","Latitude was defined without longitude");else if(null==n.latitude)L.warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s&&s.isWebMercator){const r=I(n.longitude,n.latitude,F);e=r[0],t=r[1]}}else C(r)?(s=r,r=null):C(i)&&(s=i,i=null);const o={x:e,y:t};return null==o.x&&null!=o.y?L.warn(".y=","Y coordinate was defined without an X coordinate"):null==o.y&&null!=o.x&&L.warn(".x=","X coordinate was defined without a Y coordinate"),null!=s&&(o.spatialReference=s),null!=r&&(o.z=r),null!=i&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return O(t,r,F)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",I(r,e,F)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return O(e,t,F)[0];if(r.isGeographic)return e}return NaN}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",I(e,t,F)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return"string"==typeof e?NaN:e}clone(){const e=new R;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return R.copy(e,this),this}equals(e){if(!e)return!1;const{x:t,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:c}=e;if(!n.equals(c))if(n.isWebMercator&&c.isWGS84)[l,u]=I(l,u),c=n;else{if(!n.isWGS84||!c.isWebMercator)return!1;[l,u]=O(l,u),c=n}return t===l&&r===u&&i===o&&s===a&&n.wkid===c.wkid}offset(e,t,r){return function(e,t,r,i){var s;return e.x=e.x+t,e.y=e.y+r,null!=i&&(e.z=(null!=(s=e.z)?s:0)+i),e}(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=(0,a.S)(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let n;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s),this._set("x",t),this}distance(e){return function(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write(null,e)}};(0,i.e)([(0,n.y)({readOnly:!0})],k.prototype,"cache",null),(0,i.e)([(0,n.y)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasM",null),(0,i.e)([(0,n.y)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasZ",null),(0,i.e)([(0,n.y)({type:Number})],k.prototype,"latitude",null),(0,i.e)([(0,n.y)({type:Number})],k.prototype,"longitude",null),(0,i.e)([(0,n.y)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),h((e=>isNaN(e)?e:(0,n.u)(e)))],k.prototype,"x",void 0),(0,i.e)([(0,i.o)("x")],k.prototype,"writeX",null),(0,i.e)([(0,o.e)("x")],k.prototype,"readX",null),(0,i.e)([(0,n.y)({type:Number,json:{write:!0}})],k.prototype,"y",void 0),(0,i.e)([(0,n.y)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],k.prototype,"z",void 0),(0,i.e)([(0,n.y)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],k.prototype,"m",void 0),k=R=(0,i.e)([(0,n.n)("esri.geometry.Point")],k),k.prototype.toJSON.isDefaultToJSON=!0;var N=k},98548:(e,t,r)=>{"use strict";r.d(t,{G:()=>R,M:()=>N,a:()=>X,b:()=>H,c:()=>oe,d:()=>ge,e:()=>v,f:()=>y,g:()=>Z,h:()=>J,i:()=>ae,j:()=>Te,k:()=>p,l:()=>W,m:()=>Ee,o:()=>q,r:()=>c,s:()=>$,t:()=>u,u:()=>V,v:()=>ve,y:()=>I,z:()=>P});var i=r(78155),s=r(80219),n=r(88903),o=r(20736),a=r(92858);const l=[0,0];function u(e,t){return d(e,t.x,t.y,t.z)}function c(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!h(e,r))return!1;return!0}function h(e,t){return d(e,t[0],t[1])}function p(e,t){return d(e,t[0],t[1],t[2])}function d(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(null==i||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function y(e,t){return l[1]=t.y,l[0]=t.x,f(e,l)}function f(e,t){return function(e,t){if(!e)return!1;if(function(e){return!Array.isArray(e[0][0])}(e))return m(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=m(r,e[i],t);return r}(e.rings,t)}function m(e,t,r){const[i,s]=r;let n=e,o=0;for(let e=0,r=t.length;e<r;e++){o++,o===r&&(o=0);const[a,l]=t[e],[u,c]=t[o];(l<s&&c>=s||c<s&&l>=s)&&a+(s-l)/(c-l)*(u-a)<i&&(n=!n)}return n}function g(e,t){return u(e,t)}function v(e,t){const r=e.hasZ&&t.hasZ;let i,s,n;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ)if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1;return!0}function b(e,t){const{points:r,hasZ:i}=t,s=i?p:h;for(const t of r)if(s(e,t))return!0;return!1}const w=[0,0],_=[0,0],x=[0,0],S=[0,0],T=[w,_,x,S],M=[[x,w],[w,_],[_,S],[S,x]];function E(e,t){w[0]=e.xmin,w[1]=e.ymax,_[0]=e.xmax,_[1]=e.ymax,x[0]=e.xmin,x[1]=e.ymin,S[0]=e.xmax,S[1]=e.ymin;for(const e of T)if(f(t,e))return!0;for(const r of t.rings){if(!r.length)continue;let t=r[0];if(h(e,t))return!0;for(let i=1;i<r.length;i++){const s=r[i];if(h(e,s)||A(t,s,M))return!0;t=s}}return!1}function I(e,t){w[0]=e.xmin,w[1]=e.ymax,_[0]=e.xmax,_[1]=e.ymax,x[0]=e.xmin,x[1]=e.ymin,S[0]=e.xmax,S[1]=e.ymin;const r=t.paths;for(const t of r){if(!r.length)continue;let i=t[0];if(h(e,i))return!0;for(let r=1;r<t.length;r++){const s=t[r];if(h(e,s)||A(i,s,M))return!0;i=s}}return!1}const O=[0,0];function A(e,t,r){for(let i=0;i<r.length;i++)if(P(e,t,r[i][0],r[i][1]))return!0;return!1}function P(e,t,r,i,s){const[n,o]=e,[a,l]=t,[u,c]=r,[h,p]=i,d=h-u,y=n-u,f=a-n,m=p-c,g=o-c,v=l-o,b=m*f-d*v;if(0===b)return!1;const w=(d*g-m*y)/b,_=(f*g-v*y)/b;return w>=0&&w<=1&&_>=0&&_<=1&&(s&&(s[0]=n+w*(a-n),s[1]=o+w*(l-o)),!0)}function R(e){switch(e){case"esriGeometryEnvelope":case"extent":return v;case"esriGeometryMultipoint":case"multipoint":return b;case"esriGeometryPoint":case"point":return g;case"esriGeometryPolygon":case"polygon":return E;case"esriGeometryPolyline":case"polyline":return I}}var F;function C(e,t,r){return null==t?r:null==r?t:e(t,r)}let L=F=class extends o.p{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof e?(e.spatialReference=null==e.spatialReference?a.k.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:null==s?a.k.WGS84:s}}static fromBounds(e,t){return new F({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new o.b({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new F;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&(0,o.x)(t,r)&&(e=t.isWebMercator?(0,o.d)(e):(0,o.R)(e,!0)),"point"===e.type?u(this,e):"extent"===e.type&&function(e,t){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?d(e,r,i,s)&&d(e,r,o,s)&&d(e,n,o,s)&&d(e,n,i,s)&&d(e,r,i,a)&&d(e,r,o,a)&&d(e,n,o,a)&&d(e,n,i,a):d(e,r,i)&&d(e,r,o)&&d(e,n,o)&&d(e,n,i)}(this,e)}equals(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&(0,o.x)(t,r)&&(e=t.isWebMercator?(0,o.d)(e):(0,o.R)(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const e=(this.zmax-this.zmin)*t;this.zmin+=e,this.zmax-=e}if(this.hasM){const e=(this.mmax-this.mmin)*t;this.mmin+=e,this.mmax-=e}return this}intersects(e){if((0,s.t)(e))return!1;"mesh"===e.type&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&(0,o.x)(t,r)&&(e=t.isWebMercator?(0,o.d)(e):(0,o.R)(e,!0)),R(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=r&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=C(Math.min,this.zmin,e.zmin),this.zmax=C(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=C(Math.min,this.mmin,e.mmin),this.mmax=C(Math.max,this.mmax,e.mmax)),this}intersection(e){return this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=C(Math.max,this.zmin,e.zmin),this.zmax=C(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=C(Math.max,this.mmin,e.mmin),this.mmax=C(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write(null,e)}_shiftCM(e=(0,a.S)(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?(0,o.R)(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=this._normalizeX(i.x,e).x),this.spatialReference=new a.k((0,s.b)(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;if(!(r=r||(0,a.S)(i)))return this;const s=this._getParts(r).map((e=>e.extent));if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return s;let n=!0,o=!0;return s.forEach((e=>{e.hasZ||(n=!1),e.hasM||(o=!1)})),{rings:s.map((e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(n){const r=(e.zmax-e.zmin)/2;for(let e=0;e<t.length;e++)t[e].push(r)}if(o){const r=(e.mmax-e.mmin)/2;for(let e=0;e<t.length;e++)t[e].push(r)}return t})),hasZ:n,hasM:o,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:r,ymax:i,spatialReference:s}=this,n=this.width,o=this.xmin,l=this.xmax;let u;e=e||(0,a.S)(s);const[c,h]=e.valid;u=this._normalizeX(this.xmin,e);const p=u.x,d=u.frameId;u=this._normalizeX(this.xmax,e);const y=u.x,f=u.frameId,m=p===y&&n>0;if(n>2*h){const e=new F(o<l?p:y,r,h,i,s),n=new F(c,r,o<l?y:p,i,s),a=new F(0,r,h,i,s),u=new F(c,r,0,i,s),m=[],g=[];e.contains(a)&&m.push(d),e.contains(u)&&g.push(d),n.contains(a)&&m.push(f),n.contains(u)&&g.push(f);for(let e=d+1;e<f;e++)m.push(e),g.push(e);t.push({extent:e,frameIds:[d]},{extent:n,frameIds:[f]},{extent:a,frameIds:m},{extent:u,frameIds:g})}else p>y||m?t.push({extent:new F(p,r,h,i,s),frameIds:[d]},{extent:new F(c,r,y,i,s),frameIds:[f]}):t.push({extent:new F(p,r,y,i,s),frameIds:[d]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const e={};r&&(e.zmin=this.zmin,e.zmax=this.zmax),i&&(e.mmin=this.mmin,e.mmax=this.mmax);for(let r=0;r<t.length;r++)t[r].extent.set(e)}return t}_normalizeX(e,t){const[r,i]=t.valid,s=2*i;let n,o=0;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s,o=n):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s,o=-n),{x:e,frameId:o}}};(0,i.e)([(0,n.y)({readOnly:!0})],L.prototype,"cache",null),(0,i.e)([(0,n.y)({readOnly:!0})],L.prototype,"center",null),(0,i.e)([(0,n.y)({readOnly:!0})],L.prototype,"extent",null),(0,i.e)([(0,n.y)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],L.prototype,"hasM",null),(0,i.e)([(0,n.y)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],L.prototype,"hasZ",null),(0,i.e)([(0,n.y)({readOnly:!0})],L.prototype,"height",null),(0,i.e)([(0,n.y)({readOnly:!0})],L.prototype,"width",null),(0,i.e)([(0,n.y)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],L.prototype,"xmin",void 0),(0,i.e)([(0,n.y)({type:Number,json:{write:!0}})],L.prototype,"ymin",void 0),(0,i.e)([(0,n.y)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],L.prototype,"mmin",void 0),(0,i.e)([(0,n.y)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],L.prototype,"zmin",void 0),(0,i.e)([(0,n.y)({type:Number,json:{write:!0}})],L.prototype,"xmax",void 0),(0,i.e)([(0,n.y)({type:Number,json:{write:!0}})],L.prototype,"ymax",void 0),(0,i.e)([(0,n.y)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],L.prototype,"mmax",void 0),(0,i.e)([(0,n.y)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],L.prototype,"zmax",void 0),L=F=(0,i.e)([(0,n.n)("esri.geometry.Extent")],L),L.prototype.toJSON.isDefaultToJSON=!0;var k,N=L;function j(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?4!==t.length||i||s?3===t.length&&r&&!i?(s=!0,i=!1):3===t.length&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}function D(e){return(t,r)=>null==t?r:null==r?t:e(t,r)}let U=k=class extends o.p{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=r.points&&r.points[0];return i&&(void 0===r.hasZ&&void 0===r.hasM?(r.hasZ=i.length>2,r.hasM=!1):void 0===r.hasZ?r.hasZ=i.length>3:void 0===r.hasM&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new N,r=this.hasZ,i=this.hasM,s=r?3:2,n=e[0],o=D(Math.min),a=D(Math.max);let l,u,c,h,[p,d]=n,[y,f]=n;for(let t=0,n=e.length;t<n;t++){const n=e[t],[m,g]=n;if(p=o(p,m),d=o(d,g),y=a(y,m),f=a(f,g),r&&n.length>2){const e=n[2];l=o(l,e),c=a(c,e)}if(i&&n.length>s){const e=n[s];u=o(u,e),h=a(h,e)}}return t.xmin=p,t.ymin=d,t.xmax=y,t.ymax=f,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=c):(t.zmin=null,t.zmax=null),i?(t.mmin=u,t.mmax=h):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=(0,s.y)(this.points)}addPoint(e){return j(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:(0,s.y)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new k(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new o.b(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new o.b(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(j(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write(null,e)}_validateInputs(e){return null!=e&&e>=0&&e<this.points.length}};(0,i.e)([(0,n.y)({readOnly:!0})],U.prototype,"cache",null),(0,i.e)([(0,n.y)()],U.prototype,"extent",null),(0,i.e)([(0,n.y)({type:[[Number]],json:{write:{isRequired:!0}}})],U.prototype,"points",void 0),(0,i.e)([(0,i.o)("points")],U.prototype,"writePoints",null),U=k=(0,i.e)([(0,n.n)("esri.geometry.Multipoint")],U),U.prototype.toJSON.isDefaultToJSON=!0;var V=U;function B(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function z(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function q(e,t,r,i){const[s,n]=t,[o,a]=r[i],[l,u]=r[i+1],c=l-o,h=u-a,p=c*c+h*h,d=(s-o)*c+(n-a)*h,y=Math.min(1,Math.max(0,d/p));return e[0]=o+c*y,e[1]=a+h*y,e}function G(e,t){return z(e,t,.5)}function $(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=B(e[i],e[i+1]);return r}function W(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let s=0;s<r-1;++s){const r=B(e[s],e[s+1]);if(t-i<r){const n=(t-i)/r;return z(e[s],e[s+1],n)}i+=r}return e[r-1]}function H(e,t,r){const i=e.length;let s=0,n=0,o=0;for(let a=0;a<i;a++){const l=e[a],u=e[(a+1)%i];let c=2;s+=l[0]*u[1]-u[0]*l[1],l.length>2&&u.length>2&&r&&(n+=l[0]*u[2]-u[0]*l[2],c=3),l.length>c&&u.length>c&&t&&(o+=l[0]*u[c]-u[0]*l[c])}return s<=0&&n<=0&&o<=0}function J(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!H(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function Z(e){return e?X(e.rings,e.hasZ):null}function X(e,t){if(!e||!e.length)return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,n=e.length;r<n;r++){const n=Y(e[r],t,s);n&&i.push(n)}if(i.sort(((e,r)=>{let i=e[2]-r[2];return 0===i&&t&&(i=e[4]-r[4]),i})),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const i=e[0]&&e[0].length?function(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const u=e[l],c=e[l+1];if(u&&c){r[0]=u[0],r[1]=u[1],i[0]=c[0],i[1]=c[1],t&&u.length>2&&c.length>2&&(r[2]=u[2],i[2]=c[2]);const e=B(r,i);if(e){s+=e;const r=G(u,c);n+=e*r[0],o+=e*r[1],t&&r.length>2&&(a+=e*r[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}(e[0],t):null;if(!i)return null;r[0]=i[0],r[1]=i[1],t&&i.length>2&&(r[2]=i[2])}return r}function Y(e,t,r){let i=0,s=0,n=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,c=e.length&&t?e[0][2]:0;for(let h=0;h<e.length;h++){const p=e[h],d=e[(h+1)%e.length],[y,f,m]=p,g=y-l,v=f-u,b=t?m-c:void 0,[w,_,x]=d,S=w-l,T=_-u,M=t?x-c:void 0,E=g*T-S*v;if(o+=E,i+=(g+S)*E,s+=(v+T)*E,t&&p.length>2&&d.length>2){const e=g*M-S*b;n+=(b+M)*e,a+=e}y<r[0]&&(r[0]=y),y>r[1]&&(r[1]=y),f<r[2]&&(r[2]=f),f>r[3]&&(r[3]=f),t&&(m<r[4]&&(r[4]=m),m>r[5]&&(r[5]=m))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[i/(6*o)+l,s/(6*o)+u,o];return t&&(r[4]===r[5]||0===a?(h[3]=(r[4]+r[5])/2,h[4]=0):(h[3]=n/(6*a)+c,h[4]=a)),h}function Q(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function K(e){return void 0!==e.points}function ee(e){return void 0!==e.x&&void 0!==e.y}function te(e){return void 0!==e.paths}function re(e){return void 0!==e.rings}function ie(e){return(t,r)=>null==t?r:null==r?t:e(t,r)}const se=ie(Math.min),ne=ie(Math.max);function oe(e,t){return te(t)?le(e,t.paths,!1,!1):re(t)?le(e,t.rings,!1,!1):K(t)?ce(e,t.points,!1,!1,!1,!1):Q(t)?ue(e,t):(ee(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function ae(e,t){return te(t)?le(e,t.paths,!0,!1):re(t)?le(e,t.rings,!0,!1):K(t)?ce(e,t.points,!0,!1,!0,!1):Q(t)?ue(e,t,0,0,!0,!1):(ee(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function le(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let n,o,a,l,[u,c]=t[0][0],[h,p]=t[0][0];for(let e=0;e<t.length;e++){const d=t[e];for(let e=0;e<d.length;e++){const t=d[e],[y,f]=t;if(u=se(u,y),c=se(c,f),h=ne(h,y),p=ne(p,f),r&&t.length>2){const e=t[2];n=se(n,e),o=ne(o,e)}if(i&&t.length>s){const e=t[s];a=se(n,e),l=ne(o,e)}}}return r?i?(e[0]=u,e[1]=c,e[2]=n,e[3]=a,e[4]=h,e[5]=p,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=c,e[2]=n,e[3]=h,e[4]=p,e[5]=o,e.length=6,e):i?(e[0]=u,e[1]=c,e[2]=a,e[3]=h,e[4]=p,e[5]=l,e.length=6,e):(e[0]=u,e[1]=c,e[2]=h,e[3]=p,e.length=4,e)}function ue(e,t,r,i,s,n){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let c=t.zmin,h=t.zmax,p=t.mmin,d=t.mmax;return s?(c=c||0,h=h||0,n?(p=p||0,d=d||0,e[0]=o,e[1]=l,e[2]=c,e[3]=p,e[4]=a,e[5]=u,e[6]=h,e[7]=d,e):(e[0]=o,e[1]=l,e[2]=c,e[3]=a,e[4]=u,e[5]=h,e)):n?(p=p||0,d=d||0,e[0]=o,e[1]=l,e[2]=p,e[3]=a,e[4]=u,e[5]=d,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function ce(e,t,r,i,s,n){const o=r?3:2,a=i&&n,l=r&&s;if(!t.length||!t[0].length)return null;let u,c,h,p,[d,y]=t[0],[f,m]=t[0];for(let e=0;e<t.length;e++){const r=t[e],[i,s]=r;if(d=se(d,i),y=se(y,s),f=ne(f,i),m=ne(m,s),l&&r.length>2){const e=r[2];u=se(u,e),c=ne(c,e)}if(a&&r.length>o){const e=r[o];h=se(u,e),p=ne(c,e)}}return s?(u=u||0,c=c||0,n?(h=h||0,p=p||0,e[0]=d,e[1]=y,e[2]=u,e[3]=h,e[4]=f,e[5]=m,e[6]=c,e[7]=p,e):(e[0]=d,e[1]=y,e[2]=u,e[3]=f,e[4]=m,e[5]=c,e)):n?(h=h||0,p=p||0,e[0]=d,e[1]=y,e[2]=h,e[3]=f,e[4]=m,e[5]=p,e):(e[0]=d,e[1]=y,e[2]=f,e[3]=m,e)}const he=[];function pe(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function de(e,t,r,i,s,n){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:n}}function ye(e,t,r,i,s,n){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:n}}function fe(e,t,r,i,s,n,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:a}}function me(e,t=!1,r=!1){return t?r?fe(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):de(e[0],e[1],e[2],e[3],e[4],e[5]):r?ye(e[0],e[1],e[2],e[3],e[4],e[5]):pe(e[0],e[1],e[2],e[3])}function ge(e){return e?function(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}(e)?e:function(e){return void 0!==e.x&&void 0!==e.y}(e)?function(e){const{x:t,y:r,z:i,m:s}=e,n=null!=s;return null!=i?n?fe(t,r,i,s,t,r,i,s):de(t,r,i,t,r,i):n?ye(t,r,s,t,r,s):pe(t,r,t,r)}(e):function(e){return void 0!==e.rings}(e)?ve(e):function(e){return void 0!==e.paths}(e)?be(e):function(e){return void 0!==e.points}(e)?function(e){const{hasZ:t,hasM:r,points:i}=e;return me(ce(he,i,t,r),t,r)}(e):null:null}function ve(e){const{hasZ:t,hasM:r,rings:i}=e,s=le(he,i,t,r);return s?me(s,t,r):null}function be(e){const{hasZ:t,hasM:r,paths:i}=e,s=le(he,i,t,r);return s?me(s,t,r):null}var we;function _e(e){return!Array.isArray(e[0])}let xe=we=class extends o.p{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let i=!1,s=!1;t.map((e=>{e.hasZ&&(i=!0),e.hasM&&(s=!0)}));const n={rings:t.map((function(e){const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(i&&e.hasZ){const r=e.zmin+.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(r)}if(s&&e.hasM){const r=e.mmin+.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(r)}return t})),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new we(n)}normalizeCtorArgs(e,t){let r,i,s=null,n=null;return e&&!Array.isArray(e)?(s=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):s=e,s=s||[],t=t||a.k.WGS84,s.length&&s[0]&&null!=s[0][0]&&"number"==typeof s[0][0]&&(s=[s]),n=s[0]&&s[0][0],n&&(void 0===r&&void 0===i?(r=n.length>2,i=n.length>3):void 0===r?r=i?n.length>3:n.length>2:void 0===i&&(i=r?n.length>3:n.length>2)),{rings:s,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Z(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new o.b;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=ve(this);if(!t)return null;const r=new N(t);return r.spatialReference=e,r}get isSelfIntersecting(){return function(e){for(let t=0;t<e.length;t++){const r=e[t];for(let i=0;i<r.length-1;i++){const s=r[i],n=r[i+1];for(let r=t+1;r<e.length;r++)for(let t=0;t<e[r].length-1;t++){const i=e[r][t],o=e[r][t+1];if(P(s,n,i,o,O)&&!(O[0]===s[0]&&O[1]===s[1]||O[0]===i[0]&&O[1]===i[1]||O[0]===n[0]&&O[1]===n[1]||O[0]===o[0]&&O[1]===o[1]))return!0}}const i=r.length;if(!(i<=4))for(let e=0;e<i-3;e++){let t=i-1;0===e&&(t=i-2);const s=r[e],n=r[e+1];for(let i=e+2;i<t;i++){const e=r[i],t=r[i+1];if(P(s,n,e,t,O)&&!(O[0]===s[0]&&O[1]===s[1]||O[0]===e[0]&&O[1]===e[1]||O[0]===n[0]&&O[1]===n[1]||O[0]===t[0]&&O[1]===t[1]))return!0}}}return!1}(this.rings)}writeRings(e,t){t.rings=(0,s.y)(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(_e(e)){const i=[];for(let t=0,r=e.length;t<r;t++)i[t]=e[t].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new we;return e.spatialReference=this.spatialReference,e.rings=(0,s.y)(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}contains(e){return!!e&&((0,o.x)(e,this.spatialReference)&&(e=(0,o.g)(e,this.spatialReference)),y(this,e))}isClockwise(e){let t;return t=_e(e)?e.map((e=>this.hasZ?this.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y])):e,H(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new o.b(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new o.b(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new o.b(r[0],r[1],r[2],r[3],this.spatialReference):new o.b(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(j(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new o.b(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map((e=>new o.b(e,r)));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(j(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(null==e||e<0||e>=this.rings.length)return!1;if(null!=t){const i=this.rings[e];if(r&&(t<0||t>i.length))return!1;if(!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write(null,e)}};(0,i.e)([(0,n.y)({readOnly:!0})],xe.prototype,"cache",null),(0,i.e)([(0,n.y)({readOnly:!0})],xe.prototype,"centroid",null),(0,i.e)([(0,n.y)({readOnly:!0})],xe.prototype,"extent",null),(0,i.e)([(0,n.y)({readOnly:!0})],xe.prototype,"isSelfIntersecting",null),(0,i.e)([(0,n.y)({type:[[[Number]]],json:{write:{isRequired:!0}}})],xe.prototype,"rings",void 0),(0,i.e)([(0,i.o)("rings")],xe.prototype,"writeRings",null),xe=we=(0,i.e)([(0,n.n)("esri.geometry.Polygon")],xe),xe.prototype.toJSON.isDefaultToJSON=!0;var Se,Te=xe;let Me=Se=class extends o.p{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,i,s=null,n=null;return e&&!Array.isArray(e)?(s=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):s=e,s=s||[],t=t||a.k.WGS84,s.length&&s[0]&&null!=s[0][0]&&"number"==typeof s[0][0]&&(s=[s]),n=s[0]&&s[0][0],n&&(void 0===r&&void 0===i?(r=n.length>2,i=!1):void 0===r?r=!i&&n.length>3:void 0===i&&(i=!r&&n.length>3)),{paths:s,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=be(this);if(!t)return null;const r=new N(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=(0,s.y)(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(function(e){return!Array.isArray(e[0])}(e)){const i=[];for(let t=0,r=e.length;t<r;t++)i[t]=e[t].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Se;return e.spatialReference=this.spatialReference,e.paths=(0,s.y)(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new o.b(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new o.b(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new o.b(r[0],r[1],r[2],r[3],this.spatialReference):new o.b(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(j(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map((e=>new o.b(e,r)));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new o.b(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(j(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(null==e||e<0||e>=this.paths.length)return!1;if(null!=t){const i=this.paths[e];if(r&&(t<0||t>i.length))return!1;if(!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write(null,e)}};(0,i.e)([(0,n.y)({readOnly:!0})],Me.prototype,"cache",null),(0,i.e)([(0,n.y)({readOnly:!0})],Me.prototype,"extent",null),(0,i.e)([(0,n.y)({type:[[[Number]]],json:{write:{isRequired:!0}}})],Me.prototype,"paths",void 0),(0,i.e)([(0,i.o)("paths")],Me.prototype,"writePaths",null),Me=Se=(0,i.e)([(0,n.n)("esri.geometry.Polyline")],Me),Me.prototype.toJSON.isDefaultToJSON=!0;var Ee=Me},82906:(e,t,r)=>{"use strict";r.d(t,{M:()=>$e,a:()=>R,b:()=>C,c:()=>Ee,d:()=>U,e:()=>fe,f:()=>ke,g:()=>Fe,h:()=>De,i:()=>we,l:()=>O,o:()=>f,p:()=>_});var i=r(78155),s=r(40130),n=r(80219),o=r(20215),a=r(88903),l=r(20736),u=r(4169),c=r(52957),h=r(31531),p=r(29126),d=r(6585),y=r(62121);function f(e,t){const r=t?{...t,source:e}:e;return(0,a.y)({aliasOf:r})}let m=class extends i.a{constructor(e){super(e),this.type=null}};(0,i.e)([(0,a.y)({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=(0,i.e)([(0,a.n)("esri.popup.content.Content")],m);var g,v=m;let b=g=class extends v{constructor(e){super(e),this.description=null,this.displayType=null,this.title=null,this.type="attachments"}clone(){return new g({description:this.description,displayType:this.displayType,title:this.title})}};(0,i.e)([(0,a.y)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"description",void 0),(0,i.e)([(0,a.y)({type:["preview","list"],json:{write:!0}})],b.prototype,"displayType",void 0),(0,i.e)([(0,a.y)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"title",void 0),(0,i.e)([(0,a.y)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0),b=g=(0,i.e)([(0,a.n)("esri.popup.content.AttachmentsContent")],b);var w,_=b;let x=w=class extends v{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new w({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?(0,n.y)(this.outFields):null})}};(0,i.e)([(0,a.y)()],x.prototype,"creator",void 0),(0,i.e)([(0,a.y)()],x.prototype,"destroyer",void 0),(0,i.e)([(0,a.y)()],x.prototype,"outFields",void 0),(0,i.e)([(0,a.y)({type:["custom"],readOnly:!0})],x.prototype,"type",void 0),x=w=(0,i.e)([(0,a.n)("esri.popup.content.CustomContent")],x);var S=x;const T=(0,h.s)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});var M;T.toJSON.bind(T),T.fromJSON.bind(T);let E=M=class extends i.a{constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}clone(){return new M({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?(0,d.L)(e,(0,d.S)(this.dateFormat)):(0,d.m)(e,(0,d.u)(this))}};(0,i.e)([(0,p.r)(T)],E.prototype,"dateFormat",void 0),(0,i.e)([(0,a.y)({type:Boolean,json:{write:!0}})],E.prototype,"digitSeparator",void 0),(0,i.e)([(0,a.y)({type:a.N,json:{write:!0}})],E.prototype,"places",void 0),E=M=(0,i.e)([(0,a.n)("esri.popup.support.FieldInfoFormat")],E);var I,O=E;let A=I=class extends i.a{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new I({fieldName:this.fieldName,format:this.format?(0,n.y)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],A.prototype,"fieldName",void 0),(0,i.e)([(0,a.y)({type:O,json:{write:!0}})],A.prototype,"format",void 0),(0,i.e)([(0,a.y)({type:Boolean,json:{write:!0,default:!1}})],A.prototype,"isEditable",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],A.prototype,"label",void 0),(0,i.e)([(0,p.r)(new h.o({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],A.prototype,"stringFieldOption",void 0),(0,i.e)([(0,a.y)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],A.prototype,"statisticType",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],A.prototype,"tooltip",void 0),(0,i.e)([(0,a.y)({type:Boolean,json:{write:!0}})],A.prototype,"visible",void 0),A=I=(0,i.e)([(0,a.n)("esri.popup.FieldInfo")],A);var P,R=A;let F=P=class extends v{constructor(e){super(e),this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map((e=>e.toJSON()))}clone(){return new P({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?(0,n.y)(this.fieldInfos):null,title:this.title})}};(0,i.e)([(0,a.y)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],F.prototype,"description",void 0),(0,i.e)([(0,a.y)({type:[R]})],F.prototype,"fieldInfos",void 0),(0,i.e)([(0,i.o)("fieldInfos")],F.prototype,"writeFieldInfos",null),(0,i.e)([(0,a.y)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],F.prototype,"title",void 0),(0,i.e)([(0,a.y)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],F.prototype,"type",void 0),F=P=(0,i.e)([(0,a.n)("esri.popup.content.FieldsContent")],F);var C=F;let L=class extends i.a{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],L.prototype,"altText",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],L.prototype,"caption",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],L.prototype,"title",void 0),(0,i.e)([(0,a.y)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=(0,i.e)([(0,a.n)("esri.popup.content.mixins.MediaInfo")],L);var k,N=L;let j=k=class extends i.p{constructor(e){super(e),this.tooltip=null,this.value=null,this.x=null,this.y=null}clone(){return new k({tooltip:this.tooltip,value:this.value})}};(0,i.e)([(0,a.y)()],j.prototype,"tooltip",void 0),(0,i.e)([(0,a.y)()],j.prototype,"value",void 0),(0,i.e)([f("value")],j.prototype,"x",void 0),(0,i.e)([f("tooltip")],j.prototype,"y",void 0),j=k=(0,i.e)([(0,a.n)("esri.popup.content.support.ChartMediaInfoValueSeries")],j);var D,U=j;let V=D=class extends i.a{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new D({fields:(0,n.y)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};(0,i.e)([(0,a.y)({type:[String],json:{write:!0}})],V.prototype,"fields",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],V.prototype,"normalizeField",void 0),(0,i.e)([(0,a.y)({type:[U],json:{read:!1}})],V.prototype,"series",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],V.prototype,"tooltipField",void 0),V=D=(0,i.e)([(0,a.n)("esri.popup.content.support.ChartMediaInfoValue")],V);var B=V;let z=class extends N{constructor(e){super(e),this.type=null,this.value=null}};(0,i.e)([(0,a.y)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0),(0,i.e)([(0,a.y)({type:B,json:{write:!0}})],z.prototype,"value",void 0),z=(0,i.e)([(0,a.n)("esri.popup.content.mixins.ChartMediaInfo")],z);var q=z;const G=(0,h.s)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var $;let W=$=class extends q{constructor(e){super(e),this.type="bar-chart"}clone(){return new $({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,i.e)([(0,a.y)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:G.write}})],W.prototype,"type",void 0),W=$=(0,i.e)([(0,a.n)("esri.popup.content.BarChartMediaInfo")],W);var H,J=W;let Z=H=class extends q{constructor(e){super(e),this.type="column-chart"}clone(){return new H({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,i.e)([(0,a.y)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:G.write}})],Z.prototype,"type",void 0),Z=H=(0,i.e)([(0,a.n)("esri.popup.content.ColumnChartMediaInfo")],Z);var X,Y=Z;let Q=X=class extends i.a{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new X({linkURL:this.linkURL,sourceURL:this.sourceURL})}};(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],Q.prototype,"linkURL",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],Q.prototype,"sourceURL",void 0),Q=X=(0,i.e)([(0,a.n)("esri.popup.content.support.ImageMediaInfoValue")],Q);var K,ee=Q;let te=K=class extends N{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new K({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};(0,i.e)([(0,a.y)({type:Number,json:{write:!0}})],te.prototype,"refreshInterval",void 0),(0,i.e)([(0,a.y)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],te.prototype,"type",void 0),(0,i.e)([(0,a.y)({type:ee,json:{write:!0}})],te.prototype,"value",void 0),te=K=(0,i.e)([(0,a.n)("esri.popup.content.ImageMediaInfo")],te);var re,ie=te;let se=re=class extends q{constructor(e){super(e),this.type="line-chart"}clone(){return new re({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,i.e)([(0,a.y)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:G.write}})],se.prototype,"type",void 0),se=re=(0,i.e)([(0,a.n)("esri.popup.content.LineChartMediaInfo")],se);var ne,oe=se;let ae=ne=class extends q{constructor(e){super(e),this.type="pie-chart"}clone(){return new ne({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,i.e)([(0,a.y)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:G.write}})],ae.prototype,"type",void 0),ae=ne=(0,i.e)([(0,a.n)("esri.popup.content.PieChartMediaInfo")],ae);var le=ae;const ue={base:N,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":J,"column-chart":Y,"line-chart":oe,"pie-chart":le,image:ie}};var ce;let he=ce=class extends v{constructor(e){super(e),this.activeMediaInfoIndex=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map((e=>"image"===e.type?ie.fromJSON(e):"barchart"===e.type?J.fromJSON(e):"columnchart"===e.type?Y.fromJSON(e):"linechart"===e.type?oe.fromJSON(e):"piechart"===e.type?le.fromJSON(e):void 0)).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map((e=>e.toJSON()))}clone(){return new ce({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?(0,n.y)(this.mediaInfos):null,title:this.title})}};(0,i.e)([(0,a.y)()],he.prototype,"activeMediaInfoIndex",void 0),(0,i.e)([(0,a.y)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],he.prototype,"description",void 0),(0,i.e)([(0,a.y)({types:[ue]})],he.prototype,"mediaInfos",void 0),(0,i.e)([(0,u.e)("mediaInfos")],he.prototype,"readMediaInfos",null),(0,i.e)([(0,i.o)("mediaInfos")],he.prototype,"writeMediaInfos",null),(0,i.e)([(0,a.y)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],he.prototype,"title",void 0),(0,i.e)([(0,a.y)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],he.prototype,"type",void 0),he=ce=(0,i.e)([(0,a.n)("esri.popup.content.MediaContent")],he);var pe,de=he;let ye=pe=class extends v{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new pe({text:this.text})}};(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],ye.prototype,"text",void 0),(0,i.e)([(0,a.y)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],ye.prototype,"type",void 0),ye=pe=(0,i.e)([(0,a.n)("esri.popup.content.TextContent")],ye);var fe=ye;const me={base:null,key:"type",typeMap:{attachment:_,media:de,text:fe,field:C}};var ge;let ve=ge=class extends i.a{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new ge({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],ve.prototype,"name",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],ve.prototype,"title",void 0),(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],ve.prototype,"expression",void 0),(0,i.e)([(0,a.y)({type:["string","number"],json:{write:!0}})],ve.prototype,"returnType",void 0),ve=ge=(0,i.e)([(0,a.n)("esri.popup.ExpressionInfo")],ve);var be,we=ve;let _e=be=class extends i.a{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new be({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};(0,i.e)([(0,a.y)({type:Boolean,json:{write:!0}})],_e.prototype,"returnTopmostRaster",void 0),(0,i.e)([(0,a.y)({type:Boolean,json:{write:!0}})],_e.prototype,"showNoDataRecords",void 0),_e=be=(0,i.e)([(0,a.n)("esri.popup.LayerOptions")],_e);var xe,Se=_e;let Te=xe=class extends i.a{constructor(e){super(e),this.field=null,this.order=null}clone(){return new xe({field:this.field,order:this.order})}};(0,i.e)([(0,a.y)({type:String,json:{write:!0}})],Te.prototype,"field",void 0),(0,i.e)([(0,a.y)({type:["asc","desc"],json:{write:!0}})],Te.prototype,"order",void 0),Te=xe=(0,i.e)([(0,a.n)("esri.popup.support.RelatedRecordsInfoFieldOrder")],Te);var Me,Ee=Te;let Ie=Me=class extends i.a{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Me({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?(0,n.y)(this.orderByFields):null})}};(0,i.e)([(0,a.y)({type:Boolean,json:{write:!0}})],Ie.prototype,"showRelatedRecords",void 0),(0,i.e)([(0,a.y)({type:[Ee],json:{write:!0}})],Ie.prototype,"orderByFields",void 0),Ie=Me=(0,i.e)([(0,a.n)("esri.popup.RelatedRecordsInfo")],Ie);var Oe,Ae=Ie;let Pe=Oe=class extends((0,y.r)(i.p)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Oe({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,i.e)([(0,a.y)()],Pe.prototype,"active",void 0),(0,i.e)([(0,a.y)()],Pe.prototype,"className",void 0),(0,i.e)([(0,a.y)()],Pe.prototype,"disabled",void 0),(0,i.e)([(0,a.y)()],Pe.prototype,"id",void 0),(0,i.e)([(0,a.y)()],Pe.prototype,"indicator",void 0),(0,i.e)([(0,a.y)()],Pe.prototype,"title",void 0),(0,i.e)([(0,a.y)()],Pe.prototype,"type",void 0),(0,i.e)([(0,a.y)()],Pe.prototype,"visible",void 0),Pe=Oe=(0,i.e)([(0,a.n)("esri.support.actions.ActionBase")],Pe);var Re,Fe=Pe;let Ce=Re=class extends Fe{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new Re({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,i.e)([(0,a.y)()],Ce.prototype,"image",void 0),Ce=Re=(0,i.e)([(0,a.n)("esri.support.Action.ActionButton")],Ce);var Le,ke=Ce;let Ne=Le=class extends Fe{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Le({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,i.e)([(0,a.y)()],Ne.prototype,"image",void 0),(0,i.e)([(0,a.y)()],Ne.prototype,"value",void 0),Ne=Le=(0,i.e)([(0,a.n)("esri.support.Action.ActionToggle")],Ne);var je,De=Ne;const Ue=s.L.ofType({key:"type",defaultKeyValue:"button",base:Fe,typeMap:{button:ke,toggle:De}}),Ve={base:v,key:"type",typeMap:{media:de,custom:S,text:fe,attachments:_,fields:C}},Be="esri.PopupTemplate",ze=n.n.getLogger(Be),qe=["attachments","fields","media","text"];let Ge=je=class extends i.a{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map((e=>(0,a.w)(Ve,e))):"string"==typeof e||"function"==typeof e||e instanceof HTMLElement||(0,o.U)(e)?e:(ze.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,r,i){"string"!=typeof e?Array.isArray(e)&&(t.popupElements=e.filter((e=>-1!==qe.indexOf(e.type))).map((e=>e&&e.toJSON(i))),t.popupElements.forEach((e=>{"attachments"===e.type?this._writeAttachmentContent(t):"media"===e.type?this._writeMediaContent(e,t):"text"===e.type&&this._writeTextContent(e,t)}))):t.description=e}writeFieldInfos(e,t,r,i){const{content:s}=this,n=Array.isArray(s)?s:null;if(e){const r=n?n.filter((e=>"fields"===e.type)):[],s=r.length&&r.every((e=>{var t;return null==(t=e.fieldInfos)?void 0:t.length}));t.fieldInfos=e.filter(Boolean).map((e=>{const t=e.toJSON(i);return s&&(t.visible=!1),t}))}if(n)for(const e of n)"fields"===e.type&&this._writeFieldsContent(e,t)}writeLayerOptions(e,t,r,i){t[r]=!e||null===e.showNoDataRecords&&null===e.returnTopmostRaster?null:e.toJSON(i)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?(0,n.y)(e.toArray()):[];return new je({actions:t,content:Array.isArray(this.content)?(0,n.y)(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?(0,n.y)(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?(0,n.y)(this.fieldInfos):null,layerOptions:this.layerOptions?(0,n.y)(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?(0,n.y)(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?(0,n.y)(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){await this._collectExpressionInfoFields(e,t,this.expressionInfos),(0,c.g)(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=(0,n.y)(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach((e=>{const r=t.fieldInfos.find((t=>t.fieldName.toLowerCase()===e.fieldName.toLowerCase()));r?r.visible=!0:t.fieldInfos.push(e)})):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=(0,n.y)(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:r}){const i={description:!1,mediaInfos:!1};return r.map((r=>"media"===r.type?(r.mediaInfos||!t||i.mediaInfos||(r.mediaInfos=t,i.mediaInfos=!0),de.fromJSON(r)):"text"===r.type?(r.text||!e||i.description||(r.text=e,i.description=!0),fe.fromJSON(r)):"attachments"===r.type?_.fromJSON(r):"fields"===r.type?C.fromJSON(r):void 0)).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r}){const i=[];return e?i.push(new fe({text:e})):i.push(new C),Array.isArray(t)&&t.length&&i.push(de.fromJSON({mediaInfos:t})),r&&i.push(_.fromJSON({displayType:"list"})),i.length?i:e}_getContentElementFields(e){return e&&"attachments"!==e.type?"custom"===e.type?e.outFields||[]:"fields"===e.type?this._getFieldInfoFields(e.fieldInfos||this.fieldInfos):"media"===e.type?(e.mediaInfos||[]).reduce(((e,t)=>[...e,...this._getMediaInfoFields(t)]),[]):"text"===e.type?this._extractFieldNames(e.text):void 0:[]}_getMediaInfoFields(e){const{caption:t,title:r,value:i}=e,s=i||{},{fields:n=[],normalizeField:o,tooltipField:a,sourceURL:l,linkURL:u}=s,c=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(u),...n];return o&&c.push(o),a&&c.push(a),c}_getContentFields(e){return"string"==typeof e?this._extractFieldNames(e):Array.isArray(e)?e.reduce(((e,t)=>[...e,...this._getContentElementFields(t)]),[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map((r=>(0,c.T)(e,t,r.expression))))}_getFieldInfoFields(e){return e?e.filter((e=>void 0===e.visible||!!e.visible)).map((e=>e.fieldName)).filter((e=>-1===e.indexOf("relationships/")&&-1===e.indexOf("expression/"))):[]}_getActionsFields(e){return e?e.toArray().reduce(((e,t)=>[...e,...this._getActionFields(t)]),[]):[]}_getActionFields(e){const{className:t,title:r,type:i}=e,s="button"===i||"toggle"===i?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return"string"==typeof e?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||"string"!=typeof e)return[];const t=e.match(/{[^}]*}/g);if(!t)return[];const r=/\{(\w+):.+\}/,i=t.filter((e=>!(0===e.indexOf("{relationships/")||0===e.indexOf("{expression/")))).map((e=>e.replace(r,"{$1}")));return i?i.map((e=>e.slice(1,-1))):[]}};(0,i.e)([(0,a.y)({type:Ue})],Ge.prototype,"actions",void 0),(0,i.e)([(0,a.y)()],Ge.prototype,"content",void 0),(0,i.e)([(0,l.c)("content")],Ge.prototype,"castContent",null),(0,i.e)([(0,u.e)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Ge.prototype,"readContent",null),(0,i.e)([(0,i.o)("content",{popupElements:{type:s.L.ofType(me)},showAttachments:{type:Boolean},mediaInfos:{type:s.L.ofType(ue)},description:{type:String}})],Ge.prototype,"writeContent",null),(0,i.e)([(0,a.y)({type:[we],json:{write:!0}})],Ge.prototype,"expressionInfos",void 0),(0,i.e)([(0,a.y)({type:[R]})],Ge.prototype,"fieldInfos",void 0),(0,i.e)([(0,i.o)("fieldInfos")],Ge.prototype,"writeFieldInfos",null),(0,i.e)([(0,a.y)({type:Se})],Ge.prototype,"layerOptions",void 0),(0,i.e)([(0,i.o)("layerOptions")],Ge.prototype,"writeLayerOptions",null),(0,i.e)([(0,a.y)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ge.prototype,"lastEditInfoEnabled",void 0),(0,i.e)([(0,a.y)()],Ge.prototype,"outFields",void 0),(0,i.e)([(0,a.y)()],Ge.prototype,"overwriteActions",void 0),(0,i.e)([(0,a.y)()],Ge.prototype,"returnGeometry",void 0),(0,i.e)([(0,a.y)({json:{type:String}})],Ge.prototype,"title",void 0),(0,i.e)([(0,i.o)("title")],Ge.prototype,"writeTitle",null),(0,i.e)([(0,a.y)({type:Ae,json:{write:!0}})],Ge.prototype,"relatedRecordsInfo",void 0),Ge=je=(0,i.e)([(0,a.n)(Be)],Ge);var $e=Ge},52109:(e,t,r)=>{"use strict";r.d(t,{G:()=>C,c:()=>g,p:()=>O});var i,s=r(78155),n=r(80219),o=(r(6585),r(80987)),a=r(20215),l=r(88903),u=r(4169),c=r(98548),h=r(31531),p=r(92858),d=r(20736),y=r(3621);const f=new h.o({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let m=i=class extends s.p{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}clone(){return new i({categories:this.categories?(0,n.y)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r,i;if(this.categories&&(r=this.categories.map((e=>Array.isArray(e)?JSON.stringify(e):e))),this.extent){const e=(0,d.g)(this.extent,p.k.WGS84);e&&(i=`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:i,q:s,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map((e=>f.toJSON(e.trim()))).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};(0,s.e)([(0,l.y)()],m.prototype,"categories",void 0),(0,s.e)([(0,l.y)()],m.prototype,"disableExtraQuery",void 0),(0,s.e)([(0,l.y)({type:c.M})],m.prototype,"extent",void 0),(0,s.e)([(0,l.y)()],m.prototype,"num",void 0),(0,s.e)([(0,l.y)()],m.prototype,"query",void 0),(0,s.e)([(0,l.y)()],m.prototype,"sortField",void 0),(0,s.e)([(0,l.y)()],m.prototype,"sortOrder",null),(0,s.e)([(0,l.y)()],m.prototype,"start",void 0),m=i=(0,s.e)([(0,l.n)("esri.portal.PortalQueryParams")],m);var g=m;let v=class extends s.p{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,s.e)([(0,l.y)()],v.prototype,"nextQueryParams",void 0),(0,s.e)([(0,l.y)()],v.prototype,"queryParams",void 0),(0,s.e)([(0,l.y)()],v.prototype,"results",void 0),(0,s.e)([(0,l.y)()],v.prototype,"total",void 0),v=(0,s.e)([(0,l.n)("esri.portal.PortalQueryResult")],v);var b=v;let w=class extends s.a{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new a.s("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,s.e)([(0,l.y)({type:Date})],w.prototype,"created",void 0),(0,s.e)([(0,l.y)()],w.prototype,"id",void 0),(0,s.e)([(0,l.y)()],w.prototype,"portal",void 0),(0,s.e)([(0,l.y)()],w.prototype,"title",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],w.prototype,"url",null),(0,s.e)([(0,l.y)()],w.prototype,"username",void 0),w=(0,s.e)([(0,l.n)("esri.portal.PortalFolder")],w);var _=w;let x=class extends s.a{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then((t=>{const r=t.categorySchema||[];return r.some((e=>"contentCategorySetsGroupQuery.LivingAtlas"===e.source))?this._fetchCategorySchemaSet("LivingAtlas",e):r}))}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new a.s("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let r=(0,l.d)(g,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new g,this.portal._queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new g,r.query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then((e=>{const r=e.contentCategorySetsGroupQuery;if(r){const e=new g;return e.disableExtraQuery=!0,e.num=1,e.query=r,this.portal.queryGroups(e,t)}throw new a.s("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((r=>{if(r.total){const i=r.results[0],s=new g;return s.num=1,s.query=`typekeywords:"${e}"`,i.queryItems(s,t)}throw new a.s("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((e=>e.total?e.results[0].fetchData("json",t).then((e=>{const t=e&&e.categorySchema;return t&&t.length?t:[]})):[]))}};(0,s.e)([(0,l.y)()],x.prototype,"access",void 0),(0,s.e)([(0,l.y)({type:Date})],x.prototype,"created",void 0),(0,s.e)([(0,l.y)()],x.prototype,"description",void 0),(0,s.e)([(0,l.y)()],x.prototype,"id",void 0),(0,s.e)([(0,l.y)()],x.prototype,"isInvitationOnly",void 0),(0,s.e)([(0,l.y)({type:Date})],x.prototype,"modified",void 0),(0,s.e)([(0,l.y)()],x.prototype,"owner",void 0),(0,s.e)([(0,l.y)()],x.prototype,"portal",void 0),(0,s.e)([(0,l.y)()],x.prototype,"snippet",void 0),(0,s.e)([(0,l.y)()],x.prototype,"sortField",void 0),(0,s.e)([(0,l.y)()],x.prototype,"sortOrder",void 0),(0,s.e)([(0,l.y)()],x.prototype,"tags",void 0),(0,s.e)([(0,l.y)()],x.prototype,"thumbnail",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],x.prototype,"thumbnailUrl",null),(0,s.e)([(0,l.y)()],x.prototype,"title",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],x.prototype,"url",null),x=(0,s.e)([(0,l.n)("esri.portal.PortalGroup")],x);var S,T=x,M=Object.freeze({__proto__:null,default:T});let E=S=class extends s.a{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e&&e.data,i=e&&e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),null!=r&&("string"==typeof r?s.query.text=r:"object"==typeof r&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+("string"==typeof i?i:i.id)),this.portal._request(n+"/addItem",s).then((e=>(t.id=e.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then((()=>{e.id=null,e.portal=null}))}deleteItems(e){const t=this.userContentUrl+"/deleteItems",r=e.map((e=>e.id));if(r.length){const i={method:"post",query:{items:r.join(",")}};return this.portal._request(t,i).then((()=>{e.forEach((e=>{e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then((e=>{let t;return t=e&&e.folders?e.folders.map((e=>{const t=_.fromJSON(e);return t.portal=this.portal,t})):[],t}))}fetchGroups(){return this.portal._request(this.url).then((e=>{let t;return t=e&&e.groups?e.groups.map((e=>{const t=T.fromJSON(e);return t.portal=this.portal,t})):[],t}))}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),Promise.resolve().then(r.bind(r,76326)).then((({default:r})=>{t=r;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:s})})).then((e=>{let r;return e&&e.items?(r=e.items.map((e=>{const r=t.fromJSON(e);return r.portal=this.portal,r})),Promise.all(r.map((e=>e.load()))).catch((e=>e)).then((()=>({items:r,nextStart:e.nextStart,total:e.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal._request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new T({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new a.s("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new a.s("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new S;return t.sourceJSON=e,t.read(e),t}};(0,s.e)([(0,l.y)()],E.prototype,"access",void 0),(0,s.e)([(0,l.y)({type:Date})],E.prototype,"created",void 0),(0,s.e)([(0,l.y)()],E.prototype,"culture",void 0),(0,s.e)([(0,l.y)()],E.prototype,"description",void 0),(0,s.e)([(0,l.y)()],E.prototype,"email",void 0),(0,s.e)([(0,l.y)()],E.prototype,"favGroupId",void 0),(0,s.e)([(0,l.y)()],E.prototype,"fullName",void 0),(0,s.e)([(0,l.y)({type:Date})],E.prototype,"modified",void 0),(0,s.e)([(0,l.y)()],E.prototype,"orgId",void 0),(0,s.e)([(0,l.y)()],E.prototype,"portal",void 0),(0,s.e)([(0,l.y)()],E.prototype,"preferredView",void 0),(0,s.e)([(0,l.y)()],E.prototype,"privileges",void 0),(0,s.e)([(0,l.y)()],E.prototype,"region",void 0),(0,s.e)([(0,l.y)()],E.prototype,"role",void 0),(0,s.e)([(0,l.y)()],E.prototype,"roleId",void 0),(0,s.e)([(0,l.y)()],E.prototype,"sourceJSON",void 0),(0,s.e)([(0,l.y)()],E.prototype,"thumbnail",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],E.prototype,"thumbnailUrl",null),(0,s.e)([(0,l.y)()],E.prototype,"units",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],E.prototype,"userContentUrl",null),(0,s.e)([(0,l.y)({readOnly:!0})],E.prototype,"url",null),(0,s.e)([(0,l.y)()],E.prototype,"username",void 0),(0,s.e)([(0,l.y)()],E.prototype,"userType",void 0),E=S=(0,s.e)([(0,l.n)("esri.portal.PortalUser")],E);var I,O=E,A=Object.freeze({__proto__:null,default:O});let P;const R={PortalGroup:()=>Promise.resolve().then((function(){return M})),PortalItem:()=>Promise.resolve().then(r.bind(r,76326)),PortalUser:()=>Promise.resolve().then((function(){return A}))};let F=I=class extends((0,s.i)(o.f)){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=n.d.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)-1===n.d.request.trustedServers.indexOf(t)&&n.d.request.trustedServers.push(t);return e}readDefaultBasemap(e){if(e){const t=P.fromJSON(e);return t.portalItem={portal:this},t}return null}readDefaultVectorBasemap(e){if(e){const t=P.fromJSON(e);return t.portalItem={portal:this},t}return null}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=O.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(r.bind(r,15015)).then((function(e){return e.B})).then((({default:t})=>{(0,a.a)(e),P=t})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e))).then((e=>{if(o.a){const e=o.a;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==I.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=e.on("credential-create",(()=>{e.findCredential(this.restUrl)&&this._signIn()})))}this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){await this.load();const e=this._getHelperServiceUrl("closestFacility");return new((await Promise.all([r.e(9351),r.e(7898)]).then(r.bind(r,57898))).default)(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await Promise.resolve().then(r.bind(r,74869))).default;return e?e.map((e=>new t({id:e.id,url:e.url}))):[]}async createGeometryService(){await this.load();const e=this._getHelperServiceUrl("geometry");return new((await r.e(8397).then(r.bind(r,18397))).default)({url:e})}async createPrintTask(){await this.load();const e=this._getHelperServiceUrl("printTask");return new((await Promise.all([r.e(9351),r.e(4573)]).then(r.bind(r,54573))).default)(e)}async createRouteTask(){await this.load();const e=this._getHelperServiceUrl("route");return new((await Promise.all([r.e(9351),r.e(8908)]).then(r.bind(r,38908))).default)(e)}async createServiceAreaTask(){await this.load();const e=this._getHelperServiceUrl("serviceArea");return new((await Promise.all([r.e(9351),r.e(9238)]).then(r.bind(r,49238))).default)(e)}fetchBasemaps(e,t){const r=new g;return r.query=e||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then((e=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',e.total){const i=e.results[0];return r.sortField=i.sortField||"name",r.sortOrder=i.sortOrder||"desc",i.queryItems(r,t)}return null})).then((e=>{let t;return t=e&&e.total?e.results.filter((e=>"Web Map"===e.type)).map((e=>new P({portalItem:e}))):[],t}))}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((e=>e.categorySchema)):(0,a.b)(e)?Promise.reject((0,a.m)()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new g;if(r.num=100,r.sortField="title",t&&t.length){const i=[];for(const e of t)i.push(`(title:"${e.title}" AND owner:${e.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then((e=>e.results))}return(0,a.b)(e)?Promise.reject((0,a.m)()):Promise.resolve([])}fetchRegions(e){const t=this.user&&this.user.culture||this.culture||(0,y.i)();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}static getDefault(){return I._default&&!I._default.destroyed||(I._default=new I),I._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new a.s("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new I({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new a.s("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new a.s("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:(0,y.i)().toLowerCase()},...r};return"auto"===s.authMode&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(i,s)}_queryPortal(e,t,r,i){const s=(0,l.d)(g,t),n=t=>this._request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then((e=>{const r=s.clone();return r.start=e.nextStart,new b({nextQueryParams:r,queryParams:s,total:e.total,results:I._resultsToTypedArray(t,{portal:this},e,i)})})).then((e=>Promise.all(e.results.map((t=>"function"==typeof t.when?t.when():e))).then((()=>e),(t=>((0,a.w)(t),e)))));return r&&R[r]?R[r]().then((({default:e})=>((0,a.a)(i),n(e)))):n()}_signIn(){if(this.authMode===I.AUTH_MODE_ANONYMOUS)return Promise.reject(new a.s("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then((()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this._fetchSelf("immediate")))):this.user&&this.credential===e?null:(this.credential=e,this._fetchSelf("immediate")))).then((e=>{e&&(this.sourceJSON=e,this.read(e))}));return o.a?o.a.getCredential(this.restUrl).then((t=>e(t))):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then((e=>{const t=I._resultsToTypedArray(r,{portal:this},e);return Promise.all(t.map((t=>"function"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}_request(e,t={}){const r={f:"json",...t.query},{authMode:i=(this.authMode===I.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:s=null,cacheBust:n=!1,method:a="auto",responseType:l="json",signal:u}=t,c={authMode:i,body:s,cacheBust:n,method:a,query:r,responseType:l,timeout:0,signal:u};return(0,o.L)(this._normalizeSSL(e),c).then((e=>e.data))}static _resultsToTypedArray(e,t,r,i){let s;if(r){const o=(0,n.r)(i)?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map((r=>{const i=Object.assign(e?e.fromJSON(r):r,t);return"function"==typeof i.load&&i.load(o),i})))}else s=[];return s}};F.AUTH_MODE_ANONYMOUS="anonymous",F.AUTH_MODE_AUTO="auto",F.AUTH_MODE_IMMEDIATE="immediate",(0,s.e)([(0,l.y)()],F.prototype,"access",void 0),(0,s.e)([(0,l.y)()],F.prototype,"allSSL",void 0),(0,s.e)([(0,l.y)()],F.prototype,"authMode",void 0),(0,s.e)([(0,l.y)()],F.prototype,"authorizedCrossOriginDomains",void 0),(0,s.e)([(0,u.e)("authorizedCrossOriginDomains")],F.prototype,"readAuthorizedCrossOriginDomains",null),(0,s.e)([(0,l.y)()],F.prototype,"basemapGalleryGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"bingKey",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canListApps",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canListData",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canListPreProvisionedItems",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canProvisionDirectPurchase",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canSearchPublic",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canShareBingPublic",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canSharePublic",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canSignInArcGIS",void 0),(0,s.e)([(0,l.y)()],F.prototype,"canSignInIDP",void 0),(0,s.e)([(0,l.y)()],F.prototype,"colorSetsGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"commentsEnabled",void 0),(0,s.e)([(0,l.y)({type:Date})],F.prototype,"created",void 0),(0,s.e)([(0,l.y)()],F.prototype,"credential",void 0),(0,s.e)([(0,l.y)()],F.prototype,"culture",void 0),(0,s.e)([(0,l.y)()],F.prototype,"currentVersion",void 0),(0,s.e)([(0,l.y)()],F.prototype,"customBaseUrl",void 0),(0,s.e)([(0,l.y)()],F.prototype,"defaultBasemap",void 0),(0,s.e)([(0,u.e)("defaultBasemap")],F.prototype,"readDefaultBasemap",null),(0,s.e)([(0,l.y)({type:c.M})],F.prototype,"defaultExtent",void 0),(0,s.e)([(0,l.y)()],F.prototype,"defaultVectorBasemap",void 0),(0,s.e)([(0,u.e)("defaultVectorBasemap")],F.prototype,"readDefaultVectorBasemap",null),(0,s.e)([(0,l.y)()],F.prototype,"description",void 0),(0,s.e)([(0,l.y)()],F.prototype,"eueiEnabled",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],F.prototype,"extraQuery",null),(0,s.e)([(0,l.y)()],F.prototype,"featuredGroups",void 0),(0,s.e)([(0,l.y)()],F.prototype,"featuredItemsGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"galleryTemplatesGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"livingAtlasGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"hasCategorySchema",void 0),(0,s.e)([(0,l.y)()],F.prototype,"helpBase",void 0),(0,s.e)([(0,l.y)()],F.prototype,"helperServices",void 0),(0,s.e)([(0,l.y)()],F.prototype,"helpMap",void 0),(0,s.e)([(0,l.y)()],F.prototype,"homePageFeaturedContent",void 0),(0,s.e)([(0,l.y)()],F.prototype,"homePageFeaturedContentCount",void 0),(0,s.e)([(0,l.y)()],F.prototype,"httpPort",void 0),(0,s.e)([(0,l.y)()],F.prototype,"httpsPort",void 0),(0,s.e)([(0,l.y)()],F.prototype,"id",void 0),(0,s.e)([(0,l.y)()],F.prototype,"ipCntryCode",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],F.prototype,"isOrganization",null),(0,s.e)([(0,l.y)()],F.prototype,"isPortal",void 0),(0,s.e)([(0,l.y)()],F.prototype,"isReadOnly",void 0),(0,s.e)([(0,l.y)()],F.prototype,"layerTemplatesGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"maxTokenExpirationMinutes",void 0),(0,s.e)([(0,l.y)({type:Date})],F.prototype,"modified",void 0),(0,s.e)([(0,l.y)()],F.prototype,"name",void 0),(0,s.e)([(0,l.y)()],F.prototype,"portalHostname",void 0),(0,s.e)([(0,l.y)()],F.prototype,"portalMode",void 0),(0,s.e)([(0,l.y)()],F.prototype,"portalProperties",void 0),(0,s.e)([(0,l.y)()],F.prototype,"region",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],F.prototype,"restUrl",null),(0,s.e)([(0,l.y)()],F.prototype,"rotatorPanels",void 0),(0,s.e)([(0,l.y)()],F.prototype,"showHomePageDescription",void 0),(0,s.e)([(0,l.y)()],F.prototype,"sourceJSON",void 0),(0,s.e)([(0,l.y)()],F.prototype,"staticImagesUrl",void 0),(0,s.e)([(0,l.y)()],F.prototype,"stylesGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"supportsHostedServices",void 0),(0,s.e)([(0,l.y)()],F.prototype,"symbolSetsGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"templatesGroupQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"thumbnail",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],F.prototype,"thumbnailUrl",null),(0,s.e)([(0,l.y)()],F.prototype,"units",void 0),(0,s.e)([(0,l.y)()],F.prototype,"url",void 0),(0,s.e)([(0,l.y)()],F.prototype,"urlKey",void 0),(0,s.e)([(0,u.e)("urlKey")],F.prototype,"readUrlKey",null),(0,s.e)([(0,l.y)()],F.prototype,"user",void 0),(0,s.e)([(0,u.e)("user")],F.prototype,"readUser",null),(0,s.e)([(0,l.y)()],F.prototype,"useStandardizedQuery",void 0),(0,s.e)([(0,l.y)()],F.prototype,"useVectorBasemaps",void 0),(0,s.e)([(0,l.y)()],F.prototype,"vectorBasemapGalleryGroupQuery",void 0),F=I=(0,s.e)([(0,l.n)("esri.portal.Portal")],F);var C=F},76326:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var i=r(78155),s=r(63358),n=r(20215),o=r(80219),a=r(80987),l=r(88903),u=r(4169),c=r(98548),h=r(52109),p=r(20736);r(92858),r(31531),r(6585),r(3621);const d=o.n.getLogger("esri.portal.PortalItemResource");let y=class extends i.p{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){(0,o.r)(e)&&(0,a.Q)(e)?d.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if((0,o.t)(r))throw new n.s("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:(0,o.g)(t,"signal")})}async update(e,t){return(await r.e(9351).then(r.bind(r,80962))).addOrUpdateResource(this,"update",e,t)}hasPath(){return(0,o.r)(this.path)}normalizePath(e,t){return(0,o.t)(e)?e:(e=e.replace(/^\/+/,""),(0,o.r)(t)&&(0,a.Q)(e)&&(e=(0,a.W)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,i.e)([(0,l.y)()],y.prototype,"portalItem",void 0),(0,i.e)([(0,l.y)({type:String,value:null})],y.prototype,"path",null),(0,i.e)([(0,p.c)("path")],y.prototype,"_castPath",null),(0,i.e)([(0,l.y)({type:String,readOnly:!0})],y.prototype,"url",null),(0,i.e)([(0,l.y)({type:String,readOnly:!0})],y.prototype,"itemRelativeUrl",null),y=(0,i.e)([(0,l.n)("esri.portal.PortalItemResource")],y);var f=y;let m=class extends i.p{constructor(e){super(e),this.created=null,this.rating=null}};(0,i.e)([(0,l.y)()],m.prototype,"created",void 0),(0,i.e)([(0,l.y)()],m.prototype,"rating",void 0),m=(0,i.e)([(0,l.n)("esri.portal.PortalRating")],m);var g,v=m;let b=g=class extends((0,i.i)(a.f)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return(0,l.B)(g,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e?r="Tile Package (tpkx)":"OGCFeatureServer"===e&&(r="OGC Feature Layer"),r}readExtent(e){return e&&e.length?new c.M(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,i=!1,n=!1,o=!1,a=!1,l=!1,u=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(i=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(n=t.indexOf("Table")>-1,o=t.indexOf("Route Layer")>-1,a=t.indexOf("Markup")>-1,l=-1!==t.indexOf("Spatiotemporal"),u=-1!==t.indexOf("UtilityNetwork"),r=l&&n?"spatiotemporaltable":n?"table":o?"routelayer":a?"markup":l?"spatiotemporal":i?"featureshosted":u?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?i||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"maps",r?(0,s.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=h.G.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:(0,o.r)(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof v&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new v({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,o.y)(this.applicationProxies),avgRating:this.avgRating,categories:(0,o.y)(this.categories),created:(0,o.y)(this.created),culture:this.culture,description:this.description,extent:(0,o.y)(this.extent),groupCategories:(0,o.y)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,o.y)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,o.y)(this.screenshots),size:this.size,snippet:this.snippet,tags:(0,o.y)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,o.y)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new g({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new v(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},g)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new n.s("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if("string"==typeof t)(0,a.G)(t)?i.query={data:t}:i.query={url:(0,a.T)(t)},(0,o.r)(r)&&(i.query.filename=r);else{const e=new FormData;(0,o.r)(r)?e.append("file",t,r):e.append("file",t),i.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,i).then((()=>this.reload()))})):Promise.reject(new n.s("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(9351).then(r.bind(r,80962))).fetchResources(this,e,t)}async addResource(e,t,i){const s=await r.e(9351).then(r.bind(r,80962));return e.portalItem=this,s.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await r.e(9351).then(r.bind(r,80962));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new n.s("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(9351).then(r.bind(r,80962))).removeAllResources(this,e)}resourceFromPath(e){return new f({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return(0,o.i)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new g({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};(0,i.e)([(0,l.y)({type:["private","shared","org","public"]})],b.prototype,"access",void 0),(0,i.e)([(0,l.y)()],b.prototype,"accessInformation",void 0),(0,i.e)([(0,l.y)({type:String})],b.prototype,"apiKey",void 0),(0,i.e)([(0,l.y)({json:{read:{source:"appProxies"}}})],b.prototype,"applicationProxies",void 0),(0,i.e)([(0,l.y)()],b.prototype,"avgRating",void 0),(0,i.e)([(0,l.y)()],b.prototype,"categories",void 0),(0,i.e)([(0,l.y)({type:Date})],b.prototype,"created",void 0),(0,i.e)([(0,l.y)()],b.prototype,"culture",void 0),(0,i.e)([(0,l.y)()],b.prototype,"description",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],b.prototype,"displayName",null),(0,i.e)([(0,l.y)({type:c.M})],b.prototype,"extent",void 0),(0,i.e)([(0,u.e)("extent")],b.prototype,"readExtent",null),(0,i.e)([(0,l.y)()],b.prototype,"groupCategories",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],b.prototype,"iconUrl",null),(0,i.e)([(0,l.y)()],b.prototype,"id",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],b.prototype,"isLayer",null),(0,i.e)([(0,l.y)()],b.prototype,"itemControl",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],b.prototype,"itemUrl",null),(0,i.e)([(0,l.y)()],b.prototype,"licenseInfo",void 0),(0,i.e)([(0,l.y)({type:Date})],b.prototype,"modified",void 0),(0,i.e)([(0,l.y)()],b.prototype,"name",void 0),(0,i.e)([(0,l.y)()],b.prototype,"numComments",void 0),(0,i.e)([(0,l.y)()],b.prototype,"numRatings",void 0),(0,i.e)([(0,l.y)()],b.prototype,"numViews",void 0),(0,i.e)([(0,l.y)()],b.prototype,"owner",void 0),(0,i.e)([(0,l.y)()],b.prototype,"ownerFolder",void 0),(0,i.e)([(0,l.y)({type:h.G})],b.prototype,"portal",void 0),(0,i.e)([(0,l.y)()],b.prototype,"screenshots",void 0),(0,i.e)([(0,l.y)()],b.prototype,"size",void 0),(0,i.e)([(0,l.y)()],b.prototype,"snippet",void 0),(0,i.e)([(0,l.y)()],b.prototype,"sourceJSON",void 0),(0,i.e)([(0,l.y)()],b.prototype,"tags",void 0),(0,i.e)([(0,l.y)()],b.prototype,"thumbnail",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],b.prototype,"thumbnailUrl",null),(0,i.e)([(0,l.y)()],b.prototype,"title",void 0),(0,i.e)([(0,l.y)()],b.prototype,"type",void 0),(0,i.e)([(0,l.y)()],b.prototype,"typeKeywords",void 0),(0,i.e)([(0,l.y)()],b.prototype,"url",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],b.prototype,"userItemUrl",null),b=g=(0,i.e)([(0,l.n)("esri.portal.PortalItem")],b);const w=b},15576:(e,t,r)=>{"use strict";r.d(t,{w:()=>d});var i=r(78155),s=r(80987),n=r(9612),o=r(20215),a=r(80219),l=r(88903),u=r(4169),c=r(52109),h=r(76326);const p=a.n.getLogger("esri.layers.mixins.PortalLayer"),d=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new h.default({id:t.itemId,portal:r&&r.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const i=await r.e(9351).then(r.bind(r,42495)).then((function(e){return e.l}));return(0,o.a)(t),await i.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw(0,o.g)(e)||p.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this.fetchUserHasEditingPrivileges(e).catch((e=>((0,o.w)(e),!0))))}async fetchUserHasEditingPrivileges(e){const t=this.url?null==s.a?void 0:s.a.findCredential(this.url):null;if(!t)return!0;const r=y.credential===t?y.user:await this.fetchEditingUser(e);return y.credential=t,y.user=r,(0,a.t)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async fetchEditingUser(e){var t,r;const i=null==(t=this.portalItem)||null==(r=t.portal)?void 0:r.user;if(i)return i;const o=s.a.findServerInfo(this.url);if(null==o||!o.owningSystemUrl)return null;const l=`${o.owningSystemUrl}/sharing/rest`,u=c.G.getDefault();if(u&&u.loaded&&(0,s.z)(u.restUrl)===(0,s.z)(l))return u.user;const h=`${l}/community/self`,p=(0,a.r)(e)?e.signal:null,d=await(0,n.a)((0,s.L)(h,{authMode:"no-prompt",query:{f:"json"},signal:p}));return d.ok?c.p.fromJSON(d.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||c.G.getDefault());return r&&i&&!(0,s.P)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new o.s("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i.e)([(0,l.y)({type:h.default})],t.prototype,"portalItem",null),(0,i.e)([(0,u.e)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i.e)([(0,i.o)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i.e)([(0,l.y)()],t.prototype,"resourceReferences",void 0),(0,i.e)([(0,l.y)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,i.e)([(0,l.n)("esri.layers.mixins.PortalLayer")],t),t},y={credential:null,user:null}},79949:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var i=r(78155),s=r(88903),n=(r(80219),r(89710));let o=class extends i.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:(0,n.d)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,i.e)([(0,s.y)()],o.prototype,"geometries",void 0),(0,i.e)([(0,s.y)({json:{read:{source:"outSR"}}})],o.prototype,"outSpatialReference",void 0),(0,i.e)([(0,s.y)()],o.prototype,"transformation",void 0),(0,i.e)([(0,s.y)()],o.prototype,"transformForward",void 0),o=(0,i.e)([(0,s.n)("esri.rest.support.ProjectParameters")],o);var a=o},37191:(e,t,r)=>{"use strict";r.d(t,{r:()=>s});var i=r(20215);class s{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(e,t,r){return new Promise(((i,s)=>this._tasks.push(new n(i,s,e,t,r))))}unshift(e,t,r){return new Promise(((i,s)=>this._tasks.unshift(new n(i,s,e,t,r))))}process(){if(0===this._tasks.length)return!1;const e=this._tasks.shift();try{const t=(0,i.b)(e.signal);if(t&&!e.abortCallback)e.reject((0,i.m)());else{const r=t?e.abortCallback((0,i.m)()):e.callback();(0,i.z)(r)?r.then(e.resolve,e.reject):e.resolve(r)}}catch(t){e.reject(t)}return!0}cancelAll(){const e=(0,i.m)();for(const t of this._tasks)if(t.abortCallback){const r=t.abortCallback(e);t.resolve(r)}else t.reject(e);this._tasks.length=0}}class n{constructor(e,t,r,i,s){this.resolve=e,this.reject=t,this.callback=r,this.signal=i,this.abortCallback=s}}},18143:(e,t,r)=>{"use strict";r.d(t,{K:()=>C,a:()=>D,b:()=>W,c:()=>g,m:()=>z});var i,s=r(78155),n=r(80987),o=r(91236),a=r(31531),l=r(80219),u=r(88903),c=r(20736),h=r(29126),p=r(89710),d=r(4169),y=r(47365),f=r(92858),m=r(98548);let g=i=class extends s.a{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new i({mapLayerId:e,gdbVersion:t})}};var v;(0,s.e)([(0,h.r)({mapLayer:"map-layer"})],g.prototype,"type",void 0),(0,s.e)([(0,u.y)({type:u.N,json:{write:!0}})],g.prototype,"mapLayerId",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],g.prototype,"gdbVersion",void 0),g=i=(0,s.e)([(0,u.n)("esri.layers.support.source.MapLayerSource")],g);let b=v=class extends s.a{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:i,spatialReference:s,geometryType:n}=this,o={workspaceId:t,query:r,oidFields:i,spatialReference:null!=(e=null==s?void 0:s.clone())?e:void 0,geometryType:n};return new v(o)}};var w;(0,s.e)([(0,h.r)({queryTable:"query-table"})],b.prototype,"type",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],b.prototype,"workspaceId",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],b.prototype,"query",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],b.prototype,"oidFields",void 0),(0,s.e)([(0,u.y)({type:f.k,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,s.e)([(0,h.r)(n.i)],b.prototype,"geometryType",void 0),b=v=(0,s.e)([(0,u.n)("esri.layers.support.source.QueryTableDataSource")],b);let _=w=class extends s.a{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new w({workspaceId:e,dataSourceName:t})}};var x;(0,s.e)([(0,h.r)({raster:"raster"})],_.prototype,"type",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],_.prototype,"dataSourceName",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],_.prototype,"workspaceId",void 0),_=w=(0,s.e)([(0,u.n)("esri.layers.support.source.RasterDataSource")],_);let S=x=class extends s.a{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new x({workspaceId:e,gdbVersion:t,dataSourceName:r})}};var T,M;(0,s.e)([(0,h.r)({table:"table"})],S.prototype,"type",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],S.prototype,"gdbVersion",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],S.prototype,"dataSourceName",void 0),S=x=(0,s.e)([(0,u.n)("esri.layers.support.source.TableDataSource")],S);const E=(0,a.s)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let I=T=class extends s.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return A()(e,t,r)}castLeftTableSource(e){return(0,u.w)(R(),e)}readRightTableSource(e,t,r){return A()(e,t,r)}castRightTableSource(e){return(0,u.w)(R(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:i,leftTableSource:s,rightTableSource:n,joinType:o}=this,a={leftTableKey:r,rightTableKey:i,leftTableSource:null!=(e=null==s?void 0:s.clone())?e:void 0,rightTableSource:null!=(t=null==n?void 0:n.clone())?t:void 0,joinType:o};return new T(a)}};(0,s.e)([(0,h.r)({joinTable:"join-table"})],I.prototype,"type",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],I.prototype,"leftTableKey",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],I.prototype,"rightTableKey",void 0),(0,s.e)([(0,u.y)({json:{write:!0}})],I.prototype,"leftTableSource",void 0),(0,s.e)([(0,d.e)("leftTableSource")],I.prototype,"readLeftTableSource",null),(0,s.e)([(0,c.c)("leftTableSource")],I.prototype,"castLeftTableSource",null),(0,s.e)([(0,u.y)({json:{write:!0}})],I.prototype,"rightTableSource",void 0),(0,s.e)([(0,d.e)("rightTableSource")],I.prototype,"readRightTableSource",null),(0,s.e)([(0,c.c)("rightTableSource")],I.prototype,"castRightTableSource",null),(0,s.e)([(0,h.r)(E)],I.prototype,"joinType",void 0),I=T=(0,s.e)([(0,u.n)("esri.layers.support.source.JoinTableDataSource")],I);let O=null;function A(){return O||(O=(0,u.D)({types:R()})),O}let P=null;function R(){return P||(P={key:"type",base:null,typeMap:{"data-layer":C,"map-layer":g}}),P}const F={key:"type",base:null,typeMap:{"join-table":I,"query-table":b,raster:_,table:S}};let C=M=class extends s.a{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new M({fields:e,dataSource:t})}};var L;(0,s.e)([(0,h.r)({dataLayer:"data-layer"})],C.prototype,"type",void 0),(0,s.e)([(0,u.y)({type:[y.y],json:{write:!0}})],C.prototype,"fields",void 0),(0,s.e)([(0,u.y)({types:F,json:{write:!0}})],C.prototype,"dataSource",void 0),C=M=(0,s.e)([(0,u.n)("esri.layers.support.source.DataLayerSource")],C),C.from=(0,u.d)(C);const k=new a.o({upperLeft:"upper-left",lowerLeft:"lower-left"});let N=L=class extends s.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new L((0,l.y)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,s.e)([(0,u.y)({type:m.M,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],N.prototype,"extent",void 0),(0,s.e)([(0,u.y)({type:["view","edit"],json:{write:!0}})],N.prototype,"mode",void 0),(0,s.e)([(0,u.y)({type:String,json:{read:k.read,write:k.write}})],N.prototype,"originPosition",void 0),(0,s.e)([(0,u.y)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],N.prototype,"tolerance",void 0),N=L=(0,s.e)([(0,u.n)("esri.rest.support.QuantizationParameters")],N);var j,D=N;const U=new a.o({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let V=j=class extends s.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=(0,l.y)(e))}clone(){return new j({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,l.y)(this.statisticParameters)})}};(0,s.e)([(0,u.y)({type:Number,json:{write:!0}})],V.prototype,"maxPointCount",void 0),(0,s.e)([(0,u.y)({type:Number,json:{write:!0}})],V.prototype,"maxRecordCount",void 0),(0,s.e)([(0,u.y)({type:Number,json:{write:!0}})],V.prototype,"maxVertexCount",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],V.prototype,"onStatisticField",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],V.prototype,"outStatisticFieldName",void 0),(0,s.e)([(0,u.y)({type:String,json:{read:{source:"statisticType",reader:U.read},write:{target:"statisticType",writer:U.write}}})],V.prototype,"statisticType",void 0),(0,s.e)([(0,u.y)({type:Object})],V.prototype,"statisticParameters",void 0),(0,s.e)([(0,s.o)("statisticParameters")],V.prototype,"writeStatisticParameters",null),V=j=(0,s.e)([(0,u.n)("esri.rest.support.StatisticDefinition")],V);var B,z=V;const q=new a.o({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),G=new a.o({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let $=B=class extends s.a{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.units=null,this.where=null}static from(e){return(0,u.B)(B,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const i=e[t];Array.isArray(i)?r[t]=i.map((e=>e instanceof Date?e.getTime():e)):i instanceof Date?r[t]=i.getTime():r[t]=i}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new B((0,l.y)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:(0,l.r)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}};$.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,s.e)([(0,u.y)({json:{write:!0}})],$.prototype,"aggregateIds",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{write:!0}})],$.prototype,"cacheHint",void 0),(0,s.e)([(0,u.y)({json:{write:!0}})],$.prototype,"datumTransformation",void 0),(0,s.e)([(0,c.c)("datumTransformation")],$.prototype,"castDatumTransformation",null),(0,s.e)([(0,u.y)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],$.prototype,"distance",void 0),(0,s.e)([(0,u.y)({type:C,json:{write:!0}})],$.prototype,"dynamicDataSource",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],$.prototype,"formatOf3DObjects",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],$.prototype,"gdbVersion",void 0),(0,s.e)([(0,u.y)({types:n.e,json:{read:p.p,write:!0}})],$.prototype,"geometry",void 0),(0,s.e)([(0,u.y)({type:Number,json:{write:!0}})],$.prototype,"geometryPrecision",void 0),(0,s.e)([(0,u.y)({type:[String],json:{write:!0}})],$.prototype,"groupByFieldsForStatistics",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],$.prototype,"having",void 0),(0,s.e)([(0,u.y)({type:Date})],$.prototype,"historicMoment",void 0),(0,s.e)([(0,s.o)("historicMoment")],$.prototype,"writeHistoricMoment",null),(0,s.e)([(0,u.y)({type:Number,json:{write:!0}})],$.prototype,"maxAllowableOffset",void 0),(0,s.e)([(0,u.y)({type:Number,cast:e=>e<1?1:e>B.MAX_MAX_RECORD_COUNT_FACTOR?B.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],$.prototype,"maxRecordCountFactor",void 0),(0,s.e)([(0,u.y)({type:["xyFootprint"],json:{write:!0}})],$.prototype,"multipatchOption",void 0),(0,s.e)([(0,u.y)({type:Number,json:{read:{source:"resultRecordCount"}}})],$.prototype,"num",void 0),(0,s.e)([(0,u.y)({json:{write:!0}})],$.prototype,"objectIds",void 0),(0,s.e)([(0,u.y)({type:[String],json:{write:!0}})],$.prototype,"orderByFields",void 0),(0,s.e)([(0,u.y)({type:[String],json:{write:!0}})],$.prototype,"outFields",void 0),(0,s.e)([(0,u.y)({type:f.k,json:{name:"outSR",write:!0}})],$.prototype,"outSpatialReference",void 0),(0,s.e)([(0,u.y)({type:[z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,l.r)(this.outStatistics)&&this.outStatistics.length>0}}}}})],$.prototype,"outStatistics",void 0),(0,s.e)([(0,u.y)({json:{write:!0}})],$.prototype,"parameterValues",void 0),(0,s.e)([(0,s.o)("parameterValues")],$.prototype,"writeParameterValues",null),(0,s.e)([(0,u.y)({type:c.b,json:{write:!0}})],$.prototype,"pixelSize",void 0),(0,s.e)([(0,u.y)({type:D,json:{write:!0}})],$.prototype,"quantizationParameters",void 0),(0,s.e)([(0,u.y)({type:[Object],json:{write:!0}})],$.prototype,"rangeValues",void 0),(0,s.e)([(0,u.y)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],$.prototype,"relationParameter",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],$.prototype,"resultType",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{default:!1,write:!0}})],$.prototype,"returnCentroid",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{default:!1,write:!0}})],$.prototype,"returnDistinctValues",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{default:!0,write:!0}})],$.prototype,"returnExceededLimitFeatures",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{write:!0}})],$.prototype,"returnGeometry",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{default:!1,write:!0}})],$.prototype,"returnQueryGeometry",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{default:!1,write:!0}})],$.prototype,"returnM",void 0),(0,s.e)([(0,u.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],$.prototype,"returnZ",void 0),(0,s.e)([(0,u.y)({type:f.k,json:{write:!0}})],$.prototype,"sourceSpatialReference",void 0),(0,s.e)([(0,h.r)(q,{ignoreUnknown:!1,name:"spatialRel"})],$.prototype,"spatialRelationship",void 0),(0,s.e)([(0,u.y)({type:Number,json:{read:{source:"resultOffset"}}})],$.prototype,"start",void 0),(0,s.e)([(0,s.o)("start"),(0,s.o)("num")],$.prototype,"writeStart",null),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],$.prototype,"sqlFormat",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:!0}})],$.prototype,"text",void 0),(0,s.e)([(0,u.y)({type:o.y,json:{write:!0}})],$.prototype,"timeExtent",void 0),(0,s.e)([(0,h.r)(G,{ignoreUnknown:!1}),(0,u.y)({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],$.prototype,"units",void 0),(0,s.e)([(0,u.y)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],$.prototype,"where",void 0),(0,s.e)([(0,s.o)("where")],$.prototype,"writeWhere",null),$=B=(0,s.e)([(0,u.n)("esri.rest.support.Query")],$);var W=$},56803:(e,t,r)=>{"use strict";r.d(t,{Q:()=>U,a:()=>M,l:()=>S});var i,s=r(78155),n=r(20215),o=r(80219),a=r(88903),l=r(18143),u=r(2903),c=r(80987),h=r(85570),p=r(91790),d=r(98548),y=r(52737),f=r(30316),m=r(29831),g=r(98843),v=r(89710),b=r(71470),w=r(85289);const _={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let x=i=class extends s.a{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=function(e){const{exifInfo:t,exifName:r,tagName:i}=e;if(!t||!r||!i)return null;const s=t.find((e=>e.name===r));return s?function(e){const{tagName:t,tags:r}=e;if(!r||!t)return null;const i=r.find((e=>e.name===t));return i&&i.value||null}({tagName:i,tags:s.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return _[t]||null}clone(){return new i({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,s.e)([(0,a.y)({type:String})],x.prototype,"contentType",void 0),(0,s.e)([(0,a.y)()],x.prototype,"exifInfo",void 0),(0,s.e)([(0,a.y)({readOnly:!0})],x.prototype,"orientationInfo",null),(0,s.e)([(0,a.y)({type:a.N})],x.prototype,"id",void 0),(0,s.e)([(0,a.y)({type:String})],x.prototype,"globalId",void 0),(0,s.e)([(0,a.y)({type:String})],x.prototype,"keywords",void 0),(0,s.e)([(0,a.y)({type:String})],x.prototype,"name",void 0),(0,s.e)([(0,a.y)({json:{read:!1}})],x.prototype,"parentGlobalId",void 0),(0,s.e)([(0,a.y)({json:{read:!1}})],x.prototype,"parentObjectId",void 0),(0,s.e)([(0,a.y)({type:a.N})],x.prototype,"size",void 0),(0,s.e)([(0,a.y)({json:{read:!1}})],x.prototype,"url",void 0),x=i=(0,s.e)([(0,a.n)("esri.layers.support.AttachmentInfo")],x);var S=x;function T(e){const t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function M(e,t){const r={};for(const i of e){const{parentObjectId:e,parentGlobalId:s,attachmentInfos:n}=i;for(const i of n){const{id:n}=i,o=(0,c.k)((0,c.l)(`${t}/${e}/attachments/${n}`)),a=S.fromJSON(i);a.set({url:o,parentObjectId:e,parentGlobalId:s}),r[e]?r[e].push(a):r[e]=[a]}}return r}function E(e,t){return t}function I(e,t,r,i){switch(r){case 0:return R(e,t+i,0);case 1:return"lowerLeft"===e.originPosition?R(e,t+i,1):function({translate:e,scale:t},r,i){return e[i]-r*t[i]}(e,t+i,1)}}function O(e,t,r,i){switch(r){case 2:return R(e,t,2);default:return I(e,t,r,i)}}function A(e,t,r,i){switch(r){case 2:return R(e,t,3);default:return I(e,t,r,i)}}function P(e,t,r,i){switch(r){case 3:return R(e,t,3);default:return O(e,t,r,i)}}function R({translate:e,scale:t},r,i){return e[i]+r*t[i]}class F{constructor(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=E,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!e.hasZ)return;const t=(0,g.t)(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){e.fields.push(t);const r=e.fields.map((e=>e.name));this.AttributesConstructor=function(){for(const e of r)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this.transform=e.transform,this.options.applyTransform&&e.transform&&(this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this.addCoordinatePolygon(e,t,r),this.createGeometry=e=>this.createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this.addCoordinatePolyline(e,t,r),this.createGeometry=e=>this.createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this.addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this.createMultipointGeometry(e);break;default:(0,f.n)(e.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:i}=t,s=(0,m.a)(r.clone(),r,!1,!1,this.transform),n=(0,m.e)(s,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...n}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}transformPathLikeValue(e,t){let r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}addCoordinatePolyline(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)}addCoordinatePolygon(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)}addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const i=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(i)}createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const i=this.transformPathLikeValue(t,r),s=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),s.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=i}deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?P:t?O:r?A:I}}function C(e,t){const r=e.toJSON();return r.objectIds&&(r.objectIds=r.objectIds.join(",")),r.orderByFields&&(r.orderByFields=r.orderByFields.join(",")),!r.outFields||null!=t&&t.returnCountOnly?delete r.outFields:-1!==r.outFields.indexOf("*")?r.outFields="*":r.outFields=r.outFields.join(","),r.outSpatialReference&&(r.outSR=r.outSR.wkid||JSON.stringify(r.outSR.toJSON()),delete r.outSpatialReference),r.dynamicDataSource&&(r.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r}async function L(e,t,r={},i){const s=(0,h.t)({...e.query,f:"json",...i,...C(t,i)});return(0,c.L)(e.path+"/queryRelatedRecords",{...r,query:{...r.query,...s}})}const k="Layer does not support extent calculation.";function N(e,t){var r,i;const s=e.geometry,n=e.toJSON(),a=n;if((0,o.r)(s)&&(a.geometry=JSON.stringify(s),a.geometryType=(0,v.d)(s),a.inSR=s.spatialReference.wkid||JSON.stringify(s.spatialReference)),null!=(r=n.topFilter)&&r.groupByFields&&(a.topFilter.groupByFields=n.topFilter.groupByFields.join(",")),null!=(i=n.topFilter)&&i.orderByFields&&(a.topFilter.orderByFields=n.topFilter.orderByFields.join(",")),n.topFilter&&(a.topFilter=JSON.stringify(a.topFilter)),n.objectIds&&(a.objectIds=n.objectIds.join(",")),n.orderByFields&&(a.orderByFields=n.orderByFields.join(",")),n.outFields&&!(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?-1!==n.outFields.indexOf("*")?a.outFields="*":a.outFields=n.outFields.join(","):delete a.outFields,n.outSR?a.outSR=n.outSR.wkid||JSON.stringify(n.outSR):s&&n.returnGeometry&&(a.outSR=a.inSR),n.returnGeometry&&delete n.returnGeometry,n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(a.time=t===r?t:`${null==t?"null":t},${null==r?"null":r}`),delete n.timeExtent}return a}function j(e,t,r,i={},s={}){const n="string"==typeof e?(0,c.U)(e):e,a=t.geometry?[t.geometry]:[];return i.responseType="pbf"===r?"array-buffer":"json",(0,b.L)(a,null,i).then((e=>{const a=e&&e[0];(0,o.r)(a)&&((t=t.clone()).geometry=a);const l=(0,h.t)({...n.query,f:r,...s,...N(t,s)});return(0,c.L)((0,c.D)(n.path,"queryTopFeatures"),{...i,query:{...l,...i.query}})}))}let D=class extends u.p{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(e,t){return this.executeJSON(e,t).then((r=>this.featureSetFromJSON(e,r,t)))}async executeJSON(e,t){var r;const i={...this.requestOptions,...t},s=this._normalizeQuery(e),n=null!=(null==(r=e.outStatistics)?void 0:r[0]),a=(0,o.c)("featurelayer-pbf-statistics"),c=!n||a;let p;if("pbf"===this.format&&c)try{p=await async function(e,t,r){const i=(0,u.e)(e),s={...r},n=l.b.from(t),o=!n.quantizationParameters,{data:a}=await(0,h.c)(i,n,new F({sourceSpatialReference:n.sourceSpatialReference,applyTransform:o}),s);return a}(this.url,s,i)}catch(e){if("query:parsing-pbf"!==e.name)throw e;this.format="json"}return"json"!==this.format&&c||(p=await async function(e,t,r){const i=(0,u.e)(e),s={...r},n=l.b.from(t),{data:o}=await(0,h.y)(i,n,n.sourceSpatialReference,s);return o}(this.url,s,i)),this._normalizeFields(p.fields),p}async featureSetFromJSON(e,t,i){if(!(this._queryIs3DObjectFormat(e)&&(0,o.r)(this.infoFor3D)&&t.features&&t.features.length))return y.default.fromJSON(t);const{meshFeatureSetFromJSON:s}=await(0,n.d)(Promise.all([r.e(9351),r.e(2608)]).then(r.bind(r,52608)),i);return s(e,this.infoFor3D,t)}executeForCount(e,t){const r={...this.requestOptions,...t},i=this._normalizeQuery(e);return async function(e,t,r){const i=(0,u.e)(e);return(0,h.p)(i,l.b.from(t),{...r}).then((e=>e.data.count))}(this.url,i,r)}executeForExtent(e,t){const r={...this.requestOptions,...t},i=this._normalizeQuery(e);return async function(e,t,r){const i=(0,u.e)(e);return(0,h.S)(i,l.b.from(t),{...r}).then((e=>({count:e.data.count,extent:d.M.fromJSON(e.data.extent)})))}(this.url,i,r)}executeForIds(e,t){const r={...this.requestOptions,...t},i=this._normalizeQuery(e);return async function(e,t,r){const i=(0,u.e)(e);return(0,h.f)(i,l.b.from(t),{...r}).then((e=>e.data.objectIds))}(this.url,i,r)}executeRelationshipQuery(e,t){e=p.l.from(e);const r={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),async function(e,t,r){return t=p.l.from(t),async function(e,t,r){const i=await L(e,t,r),s=i.data,n=s.geometryType,o=s.spatialReference,a={};for(const e of s.relatedRecordGroups){const t={fields:void 0,objectIdFieldName:void 0,geometryType:n,spatialReference:o,hasZ:!!s.hasZ,hasM:!!s.hasM,features:e.relatedRecords};if(null!=e.objectId)a[e.objectId]=t;else for(const r in e)e.hasOwnProperty(r)&&"relatedRecords"!==r&&(a[e[r]]=t)}return{...i,data:a}}((0,u.e)(e),t,r).then((e=>{const t=e.data,r={};return Object.keys(t).forEach((e=>r[e]=y.default.fromJSON(t[e]))),r}))}(this.url,e,r)}executeRelationshipQueryForCount(e,t){e=p.l.from(e);const r={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),async function(e,t,r){return t=p.l.from(t),async function(e,t,r){const i=await L(e,t,r,{returnCountOnly:!0}),s=i.data,n={};for(const e of s.relatedRecordGroups)null!=e.objectId&&(n[e.objectId]=e.count);return{...i,data:n}}((0,u.e)(e),t,{...r}).then((e=>e.data))}(this.url,e,r)}executeAttachmentQuery(e,t){const r={...this.requestOptions,...t};return async function(e,t,r){const i=(0,u.e)(e);return function(e,t,r){let i={query:(0,h.t)({...e.query,f:"json",...T(t)})};return r&&(i={...r,...i,query:{...r.query,...i.query}}),(0,c.L)(e.path+"/queryAttachments",i)}(i,p.u.from(t),{...r}).then((e=>M(e.data.attachmentGroups,i.path)))}(this.url,e,r)}executeTopFeaturesQuery(e,t){const r={...this.requestOptions,...t};return async function(e,t,r,i){const s=(0,u.e)(e),n={...i},{data:o}=await async function(e,t,r,i){const s=await j(e,t,"json",i);return(0,w.t)(t,r,s.data),s}(s,p.v.from(t),r,n);return y.default.fromJSON(o)}(this.parsedUrl,e,this.sourceSpatialReference,r)}executeForTopIds(e,t){const r={...this.requestOptions,...t};return async function(e,t,r){const i=(0,u.e)(e);return(await async function(e,t,r){return(0,o.r)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):j(e,t,"json",r,{returnIdsOnly:!0})}(i,p.v.from(t),{...r})).data.objectIds}(this.parsedUrl,e,r)}executeForTopExtents(e,t){const r={...this.requestOptions,...t};return async function(e,t,r){const i=(0,u.e)(e),s=await async function(e,t,r){return(0,o.r)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):j(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(k);if(t.hasOwnProperty("count"))throw new Error(k);return e}))}(i,p.v.from(t),{...r});return{count:s.data.count,extent:d.M.fromJSON(s.data.extent)}}(this.parsedUrl,e,r)}executeForTopCount(e,t){const r={...this.requestOptions,...t};return async function(e,t,r){const i=(0,u.e)(e);return(await function(e,t,r){return(0,o.r)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):j(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}(i,p.v.from(t),{...r})).data.count}(this.parsedUrl,e,r)}_normalizeQuery(e){let t=l.b.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?l.K.from(e.dynamicDataSource):this.dynamicDataSource),(0,o.r)(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;for(const e of this.infoFor3D.queryFormats){if("3D_glb"===e.id){t.formatOf3DObjects=e.id;break}"3D_gltf"!==e.id||t.formatOf3DObjects||(t.formatOf3DObjects=e.id)}if(!t.formatOf3DObjects)throw new n.s("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if((0,o.t)(t.outFields)||!t.outFields.includes("*")){t=t===e?t.clone():t,(0,o.t)(t.outFields)&&(t.outFields=[]);const{originX:r,originY:i,originZ:s,translationX:n,translationY:a,translationZ:l,scaleX:u,scaleY:c,scaleZ:h,rotationX:p,rotationY:d,rotationZ:y,rotationDeg:f}=this.infoFor3D.transformFieldRoles;t.outFields.push(r,i,s,n,a,l,u,c,h,p,d,y,f)}}return t}_normalizeFields(e){if((0,o.r)(this.fieldsIndex)&&(0,o.r)(e))for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return(0,o.r)(this.infoFor3D)&&e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,s.e)([(0,a.y)({type:l.K})],D.prototype,"dynamicDataSource",void 0),(0,s.e)([(0,a.y)()],D.prototype,"fieldsIndex",void 0),(0,s.e)([(0,a.y)()],D.prototype,"format",void 0),(0,s.e)([(0,a.y)()],D.prototype,"gdbVersion",void 0),(0,s.e)([(0,a.y)()],D.prototype,"infoFor3D",void 0),(0,s.e)([(0,a.y)()],D.prototype,"sourceSpatialReference",void 0),D=(0,s.e)([(0,a.n)("esri.tasks.QueryTask")],D);var U=D},13564:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var i=r(80219);class s{constructor(e=(e=>e.values().next().value)){this._peeker=e,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(0===this._items.size)return;let e;for(e of this._items);return e}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(e){this.contains(e)||this._items.add(e)}contains(e){return this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete((0,i.m)(e)),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete((0,i.m)(e)),e}remove(e){this._items.delete(e)}filter(e){return this._items.forEach((t=>{e(t)||this._items.delete(t)})),this}}},28941:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var i=r(78155),s=r(88903);r(80219);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0}refresh(){this.emit("refresh")}};return(0,i.e)([(0,s.y)({type:Number,cast:e=>e>=.1?e:e<=0?0:.1,json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=(0,i.e)([(0,s.n)("esri.layers.mixins.RefreshableLayer")],t),t}},19438:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var i=r(78155),s=r(88903);r(80219);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get scaleRangeId(){return`${this.minScale},${this.maxScale}`}};return(0,i.e)([(0,s.y)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,i.e)([(0,s.y)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,i.e)([(0,s.y)({readOnly:!0})],t.prototype,"scaleRangeId",null),t=(0,i.e)([(0,s.n)("esri.layers.mixins.ScaleRangeLayer")],t),t}},94527:(e,t,r)=>{"use strict";r.d(t,{a:()=>d,c:()=>v,d:()=>S,e:()=>m,i:()=>b,m:()=>F,o:()=>g,p:()=>x,s:()=>w,u:()=>f,x:()=>_});var i=r(78155),s=r(31531),n=r(80219),o=r(88903),a=r(29126),l=r(17762),u=r(4169);const c=new s.o({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let h=0,p=class extends i.a{constructor(e){super(e),this.id="sym"+h++,this.type=null}set color(e){this._set("color",e)}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,i.e)([(0,o.y)({type:c.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:c.write}}})],p.prototype,"type",void 0),(0,i.e)([(0,o.y)({type:l.o,value:new l.o([0,0,0,1]),json:{write:{allowNull:!0}}})],p.prototype,"color",null),(0,i.e)([(0,u.e)("color")],p.prototype,"readColor",null),p=(0,i.e)([(0,o.n)("esri.symbols.Symbol")],p);var d=p;const y=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function f(e){return e?e/72*96:0}function m(e){return e?72*e/96:0}function g(e){if("string"==typeof e){if(y.test(e)){const t=e.match(y),r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s="-"===e.charAt(0),n="px"===i?m(r):r;return s?-n:n}return console.warn("screenUtils.toPt: input not recognized!"),null}return e}function v(e=0,t=0){return{x:e,y:t}}function b(e=0,t=0){return[e,t]}function w(e=0,t=0){return[e,t]}function _(e=0,t=0,r=0){return[e,t,r]}function x(e){return e}function S(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}let T=class extends d{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,i.e)([(0,a.r)({esriSLS:"simple-line"},{readOnly:!0})],T.prototype,"type",void 0),(0,i.e)([(0,o.y)({type:Number,cast:g,json:{write:!0}})],T.prototype,"width",void 0),T=(0,i.e)([(0,o.n)("esri.symbols.LineSymbol")],T);var M,E=T;let I=M=class extends i.a{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){"web-map"===(null==i?void 0:i.origin)?t[r]="arrow":t[r]=e}set color(e){this._set("color",e)}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){"web-map"===(null==i?void 0:i.origin)||(t[r]=e)}clone(){return new M({color:(0,n.y)(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${null==(e=this.color)?void 0:e.hash()}.${this.style}`}};(0,i.e)([(0,o.y)({type:["begin","end","begin-end"],json:{write:!0}})],I.prototype,"placement",void 0),(0,i.e)([(0,a.r)({"line-marker":"line-marker"},{readOnly:!0}),(0,o.y)({json:{origins:{"web-map":{write:!1}}}})],I.prototype,"type",void 0),(0,i.e)([(0,o.y)({type:["arrow","circle","square","diamond","cross","x"]})],I.prototype,"style",void 0),(0,i.e)([(0,i.o)("style")],I.prototype,"writeStyle",null),(0,i.e)([(0,o.y)({type:l.o,value:null,json:{write:{allowNull:!0}}})],I.prototype,"color",null),(0,i.e)([(0,u.e)("color")],I.prototype,"readColor",null),(0,i.e)([(0,i.o)("color")],I.prototype,"writeColor",null),I=M=(0,i.e)([(0,o.n)("esri.symbols.LineSymbolMarker")],I);var O,A=I;const P=new s.o({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let R=O=class extends E{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,n){if(e&&"string"!=typeof e)return e;const o={};return null!=e&&(o.style=e),null!=t&&(o.color=t),null!=r&&(o.width=g(r)),null!=i&&(o.cap=i),null!=s&&(o.join=s),null!=n&&(o.miterLimit=g(n)),o}clone(){var e;return new O({color:(0,n.y)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(e=this.marker)?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${null==(e=this.color)?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(t=this.marker)?void 0:t.hash()}`}};(0,i.e)([(0,a.r)({esriSLS:"simple-line"},{readOnly:!0})],R.prototype,"type",void 0),(0,i.e)([(0,o.y)({type:P.apiValues,json:{read:P.read,write:P.write}})],R.prototype,"style",void 0),(0,i.e)([(0,o.y)({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:"round"!==e&&(null==r||null==r.origin)})}}})],R.prototype,"cap",void 0),(0,i.e)([(0,o.y)({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:"round"!==e&&(null==r||null==r.origin)})}}})],R.prototype,"join",void 0),(0,i.e)([(0,o.y)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":A}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"marker",void 0),(0,i.e)([(0,o.y)({type:Number,json:{read:!1,write:!1}})],R.prototype,"miterLimit",void 0),R=O=(0,i.e)([(0,o.n)("esri.symbols.SimpleLineSymbol")],R);var F=R},92858:(e,t,r)=>{"use strict";r.d(t,{A:()=>v,G:()=>_,I:()=>E,P:()=>T,R:()=>m,S:()=>f,T:()=>b,a:()=>x,d:()=>y,k:()=>A,o:()=>g,r:()=>a,s:()=>M,u:()=>w,w:()=>S});var i=r(78155),s=r(80219),n=r(88903);let o;const a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(o=2e3;o<=2045;o++)a[o]=0;for(o=2056;o<=2065;o++)a[o]=0;for(o=2067;o<=2135;o++)a[o]=0;for(o=2137;o<=2154;o++)a[o]=0;for(o=2161;o<=2170;o++)a[o]=0;for(o=2172;o<=2193;o++)a[o]=0;for(o=2195;o<=2198;o++)a[o]=0;for(o=2200;o<=2203;o++)a[o]=0;for(o=2205;o<=2217;o++)a[o]=0;for(o=2222;o<=2224;o++)a[o]=1;for(o=2225;o<=2250;o++)a[o]=2;for(o=2251;o<=2253;o++)a[o]=1;for(o=2257;o<=2264;o++)a[o]=2;for(o=2274;o<=2279;o++)a[o]=2;for(o=2280;o<=2282;o++)a[o]=1;for(o=2283;o<=2289;o++)a[o]=2;for(o=2290;o<=2292;o++)a[o]=0;for(o=2308;o<=2313;o++)a[o]=0;for(o=2315;o<=2491;o++)a[o]=0;for(o=2494;o<=2866;o++)a[o]=0;for(o=2867;o<=2869;o++)a[o]=1;for(o=2870;o<=2888;o++)a[o]=2;for(o=2891;o<=2895;o++)a[o]=2;for(o=2896;o<=2898;o++)a[o]=1;for(o=2902;o<=2908;o++)a[o]=2;for(o=2915;o<=2920;o++)a[o]=2;for(o=2921;o<=2923;o++)a[o]=1;for(o=2924;o<=2930;o++)a[o]=2;for(o=2931;o<=2962;o++)a[o]=0;for(o=2964;o<=2968;o++)a[o]=2;for(o=2969;o<=2973;o++)a[o]=0;for(o=2975;o<=2991;o++)a[o]=0;for(o=2995;o<=3051;o++)a[o]=0;for(o=3054;o<=3079;o++)a[o]=0;for(o=3081;o<=3088;o++)a[o]=0;for(o=3092;o<=3101;o++)a[o]=0;for(o=3106;o<=3138;o++)a[o]=0;for(o=3146;o<=3151;o++)a[o]=0;for(o=3153;o<=3166;o++)a[o]=0;for(o=3168;o<=3172;o++)a[o]=0;for(o=3174;o<=3203;o++)a[o]=0;for(o=3294;o<=3358;o++)a[o]=0;for(o=3367;o<=3403;o++)a[o]=0;for(o=3408;o<=3416;o++)a[o]=0;for(o=3417;o<=3438;o++)a[o]=2;for(o=3441;o<=3446;o++)a[o]=2;for(o=3447;o<=3450;o++)a[o]=0;for(o=3451;o<=3459;o++)a[o]=2;for(o=3460;o<=3478;o++)a[o]=0;for(o=3554;o<=3559;o++)a[o]=0;for(o=3560;o<=3570;o++)a[o]=2;for(o=3571;o<=3581;o++)a[o]=0;for(o=3594;o<=3597;o++)a[o]=0;for(o=3601;o<=3604;o++)a[o]=0;for(o=3637;o<=3639;o++)a[o]=0;for(o=3665;o<=3667;o++)a[o]=0;for(o=3693;o<=3695;o++)a[o]=0;for(o=3701;o<=3727;o++)a[o]=0;for(o=3728;o<=3739;o++)a[o]=2;for(o=3740;o<=3751;o++)a[o]=0;for(o=3753;o<=3760;o++)a[o]=2;for(o=3761;o<=3773;o++)a[o]=0;for(o=3775;o<=3777;o++)a[o]=0;for(o=3779;o<=3781;o++)a[o]=0;for(o=3783;o<=3785;o++)a[o]=0;for(o=3788;o<=3791;o++)a[o]=0;for(o=3797;o<=3802;o++)a[o]=0;for(o=3814;o<=3816;o++)a[o]=0;for(o=3825;o<=3829;o++)a[o]=0;for(o=3832;o<=3841;o++)a[o]=0;for(o=3844;o<=3852;o++)a[o]=0;for(o=3873;o<=3885;o++)a[o]=0;for(o=3890;o<=3893;o++)a[o]=0;for(o=3907;o<=3912;o++)a[o]=0;for(o=3942;o<=3950;o++)a[o]=0;for(o=3968;o<=3970;o++)a[o]=0;for(o=3973;o<=3976;o++)a[o]=0;for(o=3986;o<=3989;o++)a[o]=0;for(o=3994;o<=3997;o++)a[o]=0;for(o=4048;o<=4051;o++)a[o]=0;for(o=4056;o<=4063;o++)a[o]=0;for(o=4093;o<=4096;o++)a[o]=0;for(o=4390;o<=4398;o++)a[o]=0;for(o=4399;o<=4413;o++)a[o]=2;for(o=4418;o<=4433;o++)a[o]=2;for(o=4455;o<=4457;o++)a[o]=2;for(o=4484;o<=4489;o++)a[o]=0;for(o=4491;o<=4554;o++)a[o]=0;for(o=4568;o<=4589;o++)a[o]=0;for(o=4652;o<=4656;o++)a[o]=0;for(o=4766;o<=4800;o++)a[o]=0;for(o=5014;o<=5016;o++)a[o]=0;for(o=5069;o<=5072;o++)a[o]=0;for(o=5105;o<=5130;o++)a[o]=0;for(o=5173;o<=5188;o++)a[o]=0;for(o=5253;o<=5259;o++)a[o]=0;for(o=5269;o<=5275;o++)a[o]=0;for(o=5292;o<=5311;o++)a[o]=0;for(o=5329;o<=5331;o++)a[o]=0;for(o=5343;o<=5349;o++)a[o]=0;for(o=5355;o<=5357;o++)a[o]=0;for(o=5387;o<=5389;o++)a[o]=0;for(o=5459;o<=5463;o++)a[o]=0;for(o=5479;o<=5482;o++)a[o]=0;for(o=5518;o<=5520;o++)a[o]=0;for(o=5530;o<=5539;o++)a[o]=0;for(o=5550;o<=5552;o++)a[o]=0;for(o=5562;o<=5583;o++)a[o]=0;for(o=5623;o<=5625;o++)a[o]=2;for(o=5631;o<=5639;o++)a[o]=0;for(o=5649;o<=5653;o++)a[o]=0;for(o=5663;o<=5680;o++)a[o]=0;for(o=5682;o<=5685;o++)a[o]=0;for(o=5875;o<=5877;o++)a[o]=0;for(o=5896;o<=5899;o++)a[o]=0;for(o=5921;o<=5940;o++)a[o]=0;for(o=6050;o<=6125;o++)a[o]=0;for(o=6244;o<=6275;o++)a[o]=0;for(o=6328;o<=6348;o++)a[o]=0;for(o=6350;o<=6356;o++)a[o]=0;for(o=6366;o<=6372;o++)a[o]=0;for(o=6381;o<=6387;o++)a[o]=0;for(o=6393;o<=6404;o++)a[o]=0;for(o=6480;o<=6483;o++)a[o]=0;for(o=6511;o<=6514;o++)a[o]=0;for(o=6579;o<=6581;o++)a[o]=0;for(o=6619;o<=6624;o++)a[o]=0;for(o=6625;o<=6627;o++)a[o]=2;for(o=6628;o<=6632;o++)a[o]=0;for(o=6634;o<=6637;o++)a[o]=0;for(o=6669;o<=6692;o++)a[o]=0;for(o=6707;o<=6709;o++)a[o]=0;for(o=6720;o<=6723;o++)a[o]=0;for(o=6732;o<=6738;o++)a[o]=0;for(o=6931;o<=6933;o++)a[o]=0;for(o=6956;o<=6959;o++)a[o]=0;for(o=7005;o<=7007;o++)a[o]=0;for(o=7057;o<=7070;o++)a[o]=2;for(o=7074;o<=7082;o++)a[o]=0;for(o=7109;o<=7118;o++)a[o]=0;for(o=7119;o<=7127;o++)a[o]=1;for(o=7374;o<=7376;o++)a[o]=0;for(o=7528;o<=7586;o++)a[o]=0;for(o=7587;o<=7645;o++)a[o]=2;for(o=7692;o<=7696;o++)a[o]=0;for(o=7755;o<=7787;o++)a[o]=0;for(o=7791;o<=7795;o++)a[o]=0;for(o=7799;o<=7801;o++)a[o]=0;for(o=7803;o<=7805;o++)a[o]=0;for(o=7825;o<=7831;o++)a[o]=0;for(o=7845;o<=7859;o++)a[o]=0;for(o=8013;o<=8032;o++)a[o]=0;for(o=8065;o<=8068;o++)a[o]=1;for(o=8518;o<=8529;o++)a[o]=2;for(o=8533;o<=8536;o++)a[o]=2;for(o=8538;o<=8540;o++)a[o]=2;for(o=8677;o<=8679;o++)a[o]=0;for(o=8836;o<=8840;o++)a[o]=0;for(o=8857;o<=8859;o++)a[o]=0;for(o=8908;o<=8910;o++)a[o]=0;for(o=9154;o<=9159;o++)a[o]=0;for(o=9205;o<=9218;o++)a[o]=0;for(o=9271;o<=9273;o++)a[o]=0;for(o=9295;o<=9297;o++)a[o]=0;for(o=9356;o<=9360;o++)a[o]=0;for(o=9404;o<=9407;o++)a[o]=0;for(o=9476;o<=9482;o++)a[o]=0;for(o=9487;o<=9494;o++)a[o]=0;for(o=9697;o<=9699;o++)a[o]=0;for(o=20002;o<=20032;o++)a[o]=0;for(o=20062;o<=20092;o++)a[o]=0;for(o=20135;o<=20138;o++)a[o]=0;for(o=20248;o<=20258;o++)a[o]=0;for(o=20348;o<=20358;o++)a[o]=0;for(o=20436;o<=20440;o++)a[o]=0;for(o=20822;o<=20824;o++)a[o]=0;for(o=20934;o<=20936;o++)a[o]=0;for(o=21035;o<=21037;o++)a[o]=0;for(o=21095;o<=21097;o++)a[o]=0;for(o=21148;o<=21150;o++)a[o]=0;for(o=21413;o<=21423;o++)a[o]=0;for(o=21453;o<=21463;o++)a[o]=0;for(o=21473;o<=21483;o++)a[o]=0;for(o=21780;o<=21782;o++)a[o]=0;for(o=21891;o<=21894;o++)a[o]=0;for(o=21896;o<=21899;o++)a[o]=0;for(o=22171;o<=22177;o++)a[o]=0;for(o=22181;o<=22187;o++)a[o]=0;for(o=22191;o<=22197;o++)a[o]=0;for(o=22234;o<=22236;o++)a[o]=0;for(o=22521;o<=22525;o++)a[o]=0;for(o=22991;o<=22994;o++)a[o]=0;for(o=23028;o<=23038;o++)a[o]=0;for(o=23830;o<=23853;o++)a[o]=0;for(o=23866;o<=23872;o++)a[o]=0;for(o=23877;o<=23884;o++)a[o]=0;for(o=23886;o<=23894;o++)a[o]=0;for(o=23946;o<=23948;o++)a[o]=0;for(o=24311;o<=24313;o++)a[o]=0;for(o=24342;o<=24347;o++)a[o]=0;for(o=24370;o<=24374;o++)a[o]=10;for(o=24375;o<=24381;o++)a[o]=0;for(o=24718;o<=24721;o++)a[o]=0;for(o=24817;o<=24821;o++)a[o]=0;for(o=24877;o<=24882;o++)a[o]=0;for(o=24891;o<=24893;o++)a[o]=0;for(o=25391;o<=25395;o++)a[o]=0;for(o=25828;o<=25838;o++)a[o]=0;for(o=26191;o<=26195;o++)a[o]=0;for(o=26391;o<=26393;o++)a[o]=0;for(o=26701;o<=26722;o++)a[o]=0;for(o=26729;o<=26799;o++)a[o]=2;for(o=26801;o<=26803;o++)a[o]=2;for(o=26811;o<=26813;o++)a[o]=2;for(o=26847;o<=26870;o++)a[o]=2;for(o=26891;o<=26899;o++)a[o]=0;for(o=26901;o<=26923;o++)a[o]=0;for(o=26929;o<=26946;o++)a[o]=0;for(o=26948;o<=26998;o++)a[o]=0;for(o=27037;o<=27040;o++)a[o]=0;for(o=27205;o<=27232;o++)a[o]=0;for(o=27258;o<=27260;o++)a[o]=0;for(o=27391;o<=27398;o++)a[o]=0;for(o=27561;o<=27564;o++)a[o]=0;for(o=27571;o<=27574;o++)a[o]=0;for(o=27581;o<=27584;o++)a[o]=0;for(o=27591;o<=27594;o++)a[o]=0;for(o=28191;o<=28193;o++)a[o]=0;for(o=28348;o<=28358;o++)a[o]=0;for(o=28402;o<=28432;o++)a[o]=0;for(o=28462;o<=28492;o++)a[o]=0;for(o=29118;o<=29122;o++)a[o]=0;for(o=29168;o<=29172;o++)a[o]=0;for(o=29177;o<=29185;o++)a[o]=0;for(o=29187;o<=29195;o++)a[o]=0;for(o=29900;o<=29903;o++)a[o]=0;for(o=30161;o<=30179;o++)a[o]=0;for(o=30491;o<=30494;o++)a[o]=0;for(o=30729;o<=30732;o++)a[o]=0;for(o=31251;o<=31259;o++)a[o]=0;for(o=31265;o<=31268;o++)a[o]=0;for(o=31275;o<=31279;o++)a[o]=0;for(o=31281;o<=31297;o++)a[o]=0;for(o=31461;o<=31469;o++)a[o]=0;for(o=31491;o<=31495;o++)a[o]=0;for(o=31917;o<=31922;o++)a[o]=0;for(o=31965;o<=32e3;o++)a[o]=0;for(o=32001;o<=32003;o++)a[o]=2;for(o=32005;o<=32031;o++)a[o]=2;for(o=32033;o<=32060;o++)a[o]=2;for(o=32064;o<=32067;o++)a[o]=2;for(o=32074;o<=32077;o++)a[o]=2;for(o=32081;o<=32086;o++)a[o]=0;for(o=32107;o<=32130;o++)a[o]=0;for(o=32133;o<=32158;o++)a[o]=0;for(o=32164;o<=32167;o++)a[o]=2;for(o=32180;o<=32199;o++)a[o]=0;for(o=32201;o<=32260;o++)a[o]=0;for(o=32301;o<=32360;o++)a[o]=0;for(o=32601;o<=32662;o++)a[o]=0;for(o=32664;o<=32667;o++)a[o]=2;for(o=32701;o<=32761;o++)a[o]=0;for(o=53001;o<=53004;o++)a[o]=0;for(o=53008;o<=53019;o++)a[o]=0;for(o=53021;o<=53032;o++)a[o]=0;for(o=53034;o<=53037;o++)a[o]=0;for(o=53042;o<=53046;o++)a[o]=0;for(o=53074;o<=53080;o++)a[o]=0;for(o=54001;o<=54004;o++)a[o]=0;for(o=54008;o<=54019;o++)a[o]=0;for(o=54021;o<=54032;o++)a[o]=0;for(o=54034;o<=54037;o++)a[o]=0;for(o=54042;o<=54046;o++)a[o]=0;for(o=54048;o<=54053;o++)a[o]=0;for(o=54074;o<=54080;o++)a[o]=0;for(o=54098;o<=54101;o++)a[o]=0;for(o=102001;o<=102040;o++)a[o]=0;for(o=102042;o<=102063;o++)a[o]=0;for(o=102065;o<=102067;o++)a[o]=0;for(o=102070;o<=102117;o++)a[o]=0;for(o=102122;o<=102216;o++)a[o]=0;for(o=102221;o<=102377;o++)a[o]=0;for(o=102382;o<=102388;o++)a[o]=0;for(o=102389;o<=102398;o++)a[o]=2;for(o=102399;o<=102444;o++)a[o]=0;for(o=102445;o<=102447;o++)a[o]=2;for(o=102448;o<=102458;o++)a[o]=0;for(o=102459;o<=102468;o++)a[o]=2;for(o=102469;o<=102499;o++)a[o]=0;for(o=102500;o<=102519;o++)a[o]=1;for(o=102520;o<=102524;o++)a[o]=0;for(o=102525;o<=102529;o++)a[o]=2;for(o=102530;o<=102588;o++)a[o]=0;for(o=102590;o<=102598;o++)a[o]=0;for(o=102601;o<=102603;o++)a[o]=0;for(o=102605;o<=102628;o++)a[o]=0;for(o=102629;o<=102646;o++)a[o]=2;for(o=102648;o<=102700;o++)a[o]=2;for(o=102701;o<=102703;o++)a[o]=0;for(o=102707;o<=102730;o++)a[o]=2;for(o=102733;o<=102758;o++)a[o]=2;for(o=102767;o<=102900;o++)a[o]=0;for(o=102965;o<=102969;o++)a[o]=0;for(o=102971;o<=102973;o++)a[o]=0;for(o=102975;o<=102989;o++)a[o]=0;for(o=102990;o<=102992;o++)a[o]=1;for(o=102997;o<=103002;o++)a[o]=0;for(o=103003;o<=103008;o++)a[o]=2;for(o=103009;o<=103011;o++)a[o]=0;for(o=103012;o<=103014;o++)a[o]=2;for(o=103019;o<=103021;o++)a[o]=0;for(o=103022;o<=103024;o++)a[o]=2;for(o=103029;o<=103031;o++)a[o]=0;for(o=103032;o<=103034;o++)a[o]=2;for(o=103065;o<=103068;o++)a[o]=0;for(o=103074;o<=103076;o++)a[o]=0;for(o=103077;o<=103079;o++)a[o]=1;for(o=103080;o<=103082;o++)a[o]=0;for(o=103083;o<=103085;o++)a[o]=2;for(o=103090;o<=103093;o++)a[o]=0;for(o=103097;o<=103099;o++)a[o]=0;for(o=103100;o<=103102;o++)a[o]=2;for(o=103107;o<=103109;o++)a[o]=0;for(o=103110;o<=103112;o++)a[o]=2;for(o=103113;o<=103116;o++)a[o]=0;for(o=103117;o<=103120;o++)a[o]=2;for(o=103153;o<=103157;o++)a[o]=0;for(o=103158;o<=103162;o++)a[o]=2;for(o=103163;o<=103165;o++)a[o]=0;for(o=103166;o<=103168;o++)a[o]=1;for(o=103169;o<=103171;o++)a[o]=2;for(o=103186;o<=103188;o++)a[o]=0;for(o=103189;o<=103191;o++)a[o]=2;for(o=103192;o<=103195;o++)a[o]=0;for(o=103196;o<=103199;o++)a[o]=2;for(o=103200;o<=103224;o++)a[o]=0;for(o=103225;o<=103227;o++)a[o]=1;for(o=103232;o<=103237;o++)a[o]=0;for(o=103238;o<=103243;o++)a[o]=2;for(o=103244;o<=103246;o++)a[o]=0;for(o=103247;o<=103249;o++)a[o]=2;for(o=103254;o<=103256;o++)a[o]=0;for(o=103257;o<=103259;o++)a[o]=2;for(o=103264;o<=103266;o++)a[o]=0;for(o=103267;o<=103269;o++)a[o]=2;for(o=103300;o<=103375;o++)a[o]=0;for(o=103381;o<=103383;o++)a[o]=0;for(o=103384;o<=103386;o++)a[o]=1;for(o=103387;o<=103389;o++)a[o]=0;for(o=103390;o<=103392;o++)a[o]=2;for(o=103397;o<=103399;o++)a[o]=0;for(o=103400;o<=103471;o++)a[o]=2;for(o=103476;o<=103478;o++)a[o]=0;for(o=103479;o<=103481;o++)a[o]=2;for(o=103486;o<=103488;o++)a[o]=0;for(o=103489;o<=103491;o++)a[o]=2;for(o=103492;o<=103495;o++)a[o]=0;for(o=103496;o<=103499;o++)a[o]=2;for(o=103528;o<=103543;o++)a[o]=0;for(o=103544;o<=103548;o++)a[o]=2;for(o=103549;o<=103551;o++)a[o]=0;for(o=103552;o<=103554;o++)a[o]=1;for(o=103555;o<=103557;o++)a[o]=2;for(o=103558;o<=103560;o++)a[o]=0;for(o=103571;o<=103573;o++)a[o]=0;for(o=103574;o<=103576;o++)a[o]=2;for(o=103577;o<=103580;o++)a[o]=0;for(o=103581;o<=103583;o++)a[o]=2;for(o=103595;o<=103694;o++)a[o]=0;for(o=103696;o<=103699;o++)a[o]=0;for(o=103700;o<=103793;o++)a[o]=2;for(o=103794;o<=103872;o++)a[o]=0;for(o=103900;o<=103971;o++)a[o]=2;const l={102113:!0,102100:!0,3857:!0,3785:!0},u={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},c='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',h=[-20037508.342788905,20037508.342788905],p=[-20037508.342787,20037508.342787],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:h,origin:p,dx:1e-5},102100:{wkTemplate:c,valid:h,origin:p,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:h,origin:p,dx:1e-5},3857:{wkTemplate:c,valid:h,origin:p,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function y(e,t){return!(0,s.t)(e)&&!(0,s.t)(t)&&(e===t||(null!=e.wkid||null!=t.wkid?e.wkid===t.wkid||w(e)&&w(t)||null!=t.latestWkid&&e.wkid===t.latestWkid||null!=e.latestWkid&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function f(e){return M(e)&&e.wkid?d[e.wkid]:null}function m(e){return!!M(e)&&(e.wkid?null==a[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function g(e){return!(x(e)||T(e))}function v(e){return M(e)&&4326===e.wkid}function b(e){return M(e)&&4490===e.wkid}function w(e){return M(e)&&null!=e.wkid&&!0===l[e.wkid]}function _(e){return 104971===e||104905===e}function x(e){return M(e)&&null!=e.wkid&&_(e.wkid)}function S(e){return 104903===e}function T(e){return M(e)&&null!=e.wkid&&S(e.wkid)}function M(e){return(0,s.r)(e)&&(null!=e.wkid&&e.wkid>=2e3||null!=e.wkt)}const E={wkid:4326,wkt:(0,s.b)(d[4326].wkTemplate,{Central_Meridian:"0.0"})};var I;let O=I=class extends i.a{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return I.WebMercator;if(4326===e.wkid)return I.WGS84}const t=new I;return t.read(e),t}normalizeCtorArgs(e){return e&&"object"==typeof e?e:{["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return v(this)}get isWebMercator(){return w(this)}get isGeographic(){return m(this)}get isWrappable(){return M(this)&&null!=this.wkid&&!0===u[this.wkid]}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===I.WGS84)return I.WGS84;if(this===I.WebMercator)return I.WebMercator;const e=new I;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=(0,s.y)(this.imageCoordinateSystem)),e}equals(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return null==t||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===t&&s.referenceServiceName===r:s.id===t}return y(this,e)}toJSON(e){return this.write(void 0,e)}};O.GCS_NAD_1927=null,O.WGS84=null,O.WebMercator=null,(0,i.e)([(0,n.y)({readOnly:!0})],O.prototype,"isWGS84",null),(0,i.e)([(0,n.y)({readOnly:!0})],O.prototype,"isWebMercator",null),(0,i.e)([(0,n.y)({readOnly:!0})],O.prototype,"isGeographic",null),(0,i.e)([(0,n.y)({readOnly:!0})],O.prototype,"isWrappable",null),(0,i.e)([(0,n.y)({type:n.N,json:{write:!0}})],O.prototype,"latestWkid",void 0),(0,i.e)([(0,n.y)({type:n.N,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],O.prototype,"wkid",void 0),(0,i.e)([(0,n.y)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],O.prototype,"wkt",void 0),(0,i.e)([(0,i.o)("wkt"),(0,i.o)("web-scene","wkt")],O.prototype,"writeWkt",null),(0,i.e)([(0,n.y)({type:n.N,json:{write:!0}})],O.prototype,"vcsWkid",void 0),(0,i.e)([(0,n.y)({type:n.N,json:{write:!0}})],O.prototype,"latestVcsWkid",void 0),(0,i.e)([(0,n.y)()],O.prototype,"imageCoordinateSystem",void 0),O=I=(0,i.e)([(0,n.n)("esri.geometry.SpatialReference")],O),O.prototype.toJSON.isDefaultToJSON=!0,O.GCS_NAD_1927=new O({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),O.WGS84=new O(E),O.WebMercator=new O({wkid:102100,latestWkid:3857}),Object.freeze&&(Object.freeze(O.GCS_NAD_1927),Object.freeze(O.WGS84),Object.freeze(O.WebMercator));var A=O},17331:(e,t,r)=>{"use strict";r.d(t,{c:()=>v,p:()=>d});var i=r(78155),s=r(40130),n=r(31516),o=r(80219),a=r(20215),l=r(88903),u=r(41290);function c(e){return e&&"group"===e.type}function h(e,t,r){let i,s;if(e)for(let n=0,o=e.length;n<o;n++){if(i=e.getItemAt(n),i[t]===r)return i;if(c(i)&&(s=h(i.layers,t,r),s))return s}}const p=o.n.getLogger("esri.support.LayersMixin"),d=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new s.L;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||p.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,n.n)(e,this._get("layers")))}add(e,t){const r=this.layers;if(t=r.getNextIndex(t),e instanceof u.b){const i=e;i.parent===this?this.reorder(i,t):r.add(i,t)}else(0,a.U)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):p.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return h(this.layers,"id",e)}findLayerByUid(e){return h(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return(0,i.e)([(0,l.y)()],t.prototype,"layers",null),t=(0,i.e)([(0,l.n)("esri.support.LayersMixin")],t),t},y="esri.support.TablesMixin",f=o.n.getLogger(y);function m(e){return e&&"group"===e.type}function g(e,t,r){if(e)for(let i=0,s=e.length;i<s;i++){const s=e.getItemAt(i);if(s[t]===r)return s;if(m(s)){const e=g(s.tables,t,r);if(e)return e}}}const v=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new s.L,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&f.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",(0,n.n)(e,this._get("tables")))}findTableById(e){return g(this.tables,"id",e)}findTableByUid(e){return g(this.tables,"uid",e)}};return(0,i.e)([(0,l.y)()],t.prototype,"tables",null),t=(0,i.e)([(0,l.n)(y)],t),t}},2903:(e,t,r)=>{"use strict";r.d(t,{e:()=>a,n:()=>l,p:()=>c,r:()=>o});var i=r(80987),s=r(78155),n=r(88903);function o(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function a(e){return"string"==typeof e?(0,i.U)(e):e}function l(e,t,r){const i={};for(const s in e){if("declaredClass"===s)continue;const n=e[s];if(null!=n&&"function"!=typeof n)if(Array.isArray(n)){i[s]=[];for(let e=0;e<n.length;e++)i[s][e]=l(n[e])}else if("object"==typeof n)if(n.toJSON){const e=n.toJSON(r&&r[s]);i[s]=t?e:JSON.stringify(e)}else i[s]=t?n:JSON.stringify(n);else i[s]=n}return i}r(80219);let u=class extends s.p{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?(0,i.U)(e):null}_encode(e,t,r){const i={};for(const s in e){if("declaredClass"===s)continue;const n=e[s];if(null!=n&&"function"!=typeof n)if(Array.isArray(n)){i[s]=[];for(let e=0;e<n.length;e++)i[s][e]=this._encode(n[e])}else if("object"==typeof n)if(n.toJSON){const e=n.toJSON(r&&r[s]);i[s]=t?e:JSON.stringify(e)}else i[s]=t?n:JSON.stringify(n);else i[s]=n}return i}};(0,s.e)([(0,n.y)({readOnly:!0})],u.prototype,"parsedUrl",null),(0,s.e)([(0,n.y)()],u.prototype,"requestOptions",void 0),(0,s.e)([(0,n.y)({type:String})],u.prototype,"url",void 0),u=(0,s.e)([(0,n.n)("esri.tasks.Task")],u);var c=u},15022:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var i=r(78155),s=r(91236),n=r(56416),o=r(88903),a=(r(80219),r(4169)),l=r(52957);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const r=t.timeInfo.exportOptions;if(!r)return null;const i=r.timeOffset,s=n.e.fromJSON(r.timeOffsetUnits);return i&&s?new n.l({value:i,unit:s}):null}set timeInfo(e){(0,l.m)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,i.e)([(0,o.y)({type:s.y,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,i.e)([(0,o.y)({type:n.l})],t.prototype,"timeOffset",void 0),(0,i.e)([(0,a.e)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,i.e)([(0,o.y)({value:null,type:n.v,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,i.e)([(0,o.y)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=(0,i.e)([(0,o.n)("esri.layers.mixins.TemporalLayer")],t),t}},14215:(e,t,r)=>{"use strict";r.d(t,{a:()=>n,e:()=>o,n:()=>a,r:()=>l});var i=r(60816),s=r(80219);const n=33984;var o;function a(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}!function(e){e[e.Texture=0]="Texture",e[e.Buffer=1]="Buffer",e[e.VAO=2]="VAO",e[e.Program=3]="Program",e[e.Framebuffer=4]="Framebuffer",e[e.Renderbuffer=5]="Renderbuffer",e[e.COUNT=6]="COUNT"}(o||(o={}));class l{constructor(e,t,r=null){this._context=e,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,e.instanceCounter.increment(o.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...t},this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(o.Texture,this))}release(){this.dispose()}resize(e,t){const r=this._descriptor;r.width===e&&r.height===t||(r.width=e,r.height=t,this.setData(null))}setData(e){if(!this._context||!this._context.gl)return;const t=this._context.gl;this._glName||(this._glName=t.createTexture()),void 0===e&&(e=null),null===e&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);const r=this._context.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES),i=this._descriptor;l._validateTexture(this._context,i),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipped?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.preMultiplyAlpha?1:0);const n=i.pixelFormat;let o=i.internalFormat?i.internalFormat:n;if(e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){let r=e.width,s=e.height;e instanceof HTMLVideoElement&&(r=e.videoWidth,s=e.videoHeight),i.width&&i.height,t.texImage2D(t.TEXTURE_2D,0,o,n,i.dataType,e),i.hasMipmap&&this.generateMipmap(),void 0===i.width&&(i.width=r),void 0===i.height&&(i.height=s)}else{null!=i.width&&null!=i.height||console.error("Width and height must be specified!"),t.DEPTH24_STENCIL8&&o===t.DEPTH_STENCIL&&(o=t.DEPTH24_STENCIL8);let r=i.width,a=i.height;if(function(e){return(0,s.r)(e)&&"type"in e&&"compressed"===e.type}(e)){const s=Math.round(Math.log(Math.max(r,a))/Math.LN2)+1;i.hasMipmap=i.hasMipmap&&s===e.levels.length;for(let s=0;;++s){const n=e.levels[Math.min(s,e.levels.length-1)];if(t.compressedTexImage2D(t.TEXTURE_2D,s,o,r,a,0,n),1===r&&1===a||!i.hasMipmap)break;r=Math.max(1,r>>1),a=Math.max(1,a>>1)}}else if((0,s.r)(e))t.texImage2D(t.TEXTURE_2D,0,o,r,a,0,n,i.dataType,e),i.hasMipmap&&this.generateMipmap();else for(let e=0;t.texImage2D(t.TEXTURE_2D,e,o,r,a,0,n,i.dataType,null),(1!==r||1!==a)&&i.hasMipmap;++e)r=Math.max(1,r>>1),a=Math.max(1,a>>1)}l._applySamplingMode(t,this._descriptor),l._applyWrapMode(t,this._descriptor),l._applyAnisotropicFilteringParameters(this._context,this._descriptor),this._context.bindTexture(r,l.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,t,r,i,s,n){n||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const o=this._context.gl,a=this._descriptor,u=this._context.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES);(t<0||r<0||i>a.width||s>a.height||t+i>a.width||r+s>a.height)&&console.error("An attempt to update out of bounds of the texture!"),o.pixelStorei(o.UNPACK_ALIGNMENT,a.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0),n instanceof ImageData||n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement?o.texSubImage2D(o.TEXTURE_2D,e,t,r,a.pixelFormat,a.dataType,n):o.texSubImage2D(o.TEXTURE_2D,e,t,r,i,s,a.pixelFormat,a.dataType,n),this._context.bindTexture(u,l.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;e.hasMipmap||(e.hasMipmap=!0,this._samplingModeDirty=!0,l._validateTexture(this._context,e)),9729===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9985):9728===e.samplingMode&&(this._samplingModeDirty=!0,e.samplingMode=9984);const t=this._context.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES),r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(t,l.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,l._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const e=this._context.gl,t=this._descriptor;this._samplingModeDirty&&(l._applySamplingMode(e,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(l._applyWrapMode(e,t),this._wrapModeDirty=!1)}static _validateTexture(e,t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!");const r=(0,i.a4)(t.width)&&(0,i.a4)(t.height);a(e.gl)||r||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(e,t){let r=t.samplingMode,i=t.samplingMode;9985===r||9987===r?(r=9729,t.hasMipmap||(i=9729)):9984!==r&&9986!==r||(r=9728,t.hasMipmap||(i=9728)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i)}static _applyWrapMode(e,t){"number"==typeof t.wrapMode?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode.t))}static _applyAnisotropicFilteringParameters(e,t){var r;const i=e.capabilities.textureFilterAnisotropic;if(!i)return;const s=e.gl;s.texParameterf(s.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY,null!=(r=t.maxAnisotropy)?r:1)}}l.TEXTURE_UNIT_FOR_UPDATES=0},25290:(e,t,r)=>{"use strict";r.d(t,{S:()=>g,i:()=>y});var i,s=r(78155),n=r(31531),o=r(65352),a=r(88903),l=(r(80219),r(4169)),u=r(20736),c=r(92858),h=r(58404);let p=i=class extends s.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new i({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};(0,s.e)([(0,a.y)({type:a.N,json:{write:!0}})],p.prototype,"level",void 0),(0,s.e)([(0,a.y)({type:String,json:{write:!0}})],p.prototype,"levelValue",void 0),(0,s.e)([(0,a.y)({type:Number,json:{write:!0}})],p.prototype,"resolution",void 0),(0,s.e)([(0,a.y)({type:Number,json:{write:!0}})],p.prototype,"scale",void 0),p=i=(0,s.e)([(0,a.n)("esri.layers.support.LOD")],p);var d,y=p;const f=new n.o({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let m=d=class extends s.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:s=c.k.WebMercator,numLODs:n=24}=e;if(!(0,c.s)(s)){const e=[];if(r)for(let t=0;t<r.length;t++){const i=r[t];e.push({level:t,scale:i,resolution:i})}else{let t=5e-4;for(let r=n-1;r>=0;r--)e.unshift({level:r,scale:t,resolution:t}),t*=2}return new d({dpi:96,lods:e,origin:new u.b(0,0,s),size:[i,i],spatialReference:s})}const a=(0,c.S)(s),l=e.origin?new u.b({x:e.origin.x,y:e.origin.y,spatialReference:s}):new u.b(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),h=1/(39.37*(0,o.G)(s)*96),p=[];if(r)for(let e=0;e<r.length;e++){const t=r[e],i=t*h;p.push({level:e,scale:t,resolution:i})}else{let e=(0,c.R)(s)?512/i*591657527.5917094:256/i*591657527.591555;const r=Math.ceil(n/t);p.push({level:0,scale:e,resolution:e*h});for(let i=1;i<r;i++){const r=e/2**t,s=r*h;p.push({level:i,scale:r,resolution:s}),e=r}}return new d({dpi:96,lods:p,origin:l,size:[i,i],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=(0,c.S)(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return u.b.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach((e=>{i.push(e.scale),t=e.scale>t?e.scale:t,r=e.scale<r?e.scale:r,this._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const r=t[i],s=t[i+1];if(r<=e)return i;if(s===e)return i+1;if(r>e&&s<e)return i+Math.log(r/e)/Math.log(r/s)}return i}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,i){const s=this.lodAt(e);if(!s)return null;let n,o;if("number"==typeof t)n=t,o=r;else if((0,c.d)(t.spatialReference,this.spatialReference))n=t.x,o=t.y,i=r;else{const e=(0,u.g)(t,this.spatialReference);if(!e)return null;n=e.x,o=e.y,i=r}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:(0,h.i)()}),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=0){let r=this.lodAt(e.level);if(!r&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(r=t)}if(!r)return;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,n=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=(0,h.i)()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))}getTileBounds(e,t){const{resolution:r}=this.lodAt(t.level),i=r*this.size[0],s=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+i,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return d.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};(0,s.e)([(0,a.y)({type:Number,json:{write:!0}})],m.prototype,"compressionQuality",void 0),(0,s.e)([(0,a.y)({type:Number,json:{write:!0}})],m.prototype,"dpi",void 0),(0,s.e)([(0,a.y)({type:String,json:{read:f.read,write:f.write,origins:{"web-scene":{read:!1,write:!1}}}})],m.prototype,"format",void 0),(0,s.e)([(0,a.y)({readOnly:!0})],m.prototype,"isWrappable",null),(0,s.e)([(0,a.y)({type:u.b,json:{write:!0}})],m.prototype,"origin",void 0),(0,s.e)([(0,l.e)("origin")],m.prototype,"readOrigin",null),(0,s.e)([(0,a.y)({type:[y],value:null,json:{write:!0}})],m.prototype,"lods",null),(0,s.e)([(0,a.y)({readOnly:!0})],m.prototype,"minScale",void 0),(0,s.e)([(0,a.y)({readOnly:!0})],m.prototype,"maxScale",void 0),(0,s.e)([(0,a.y)({readOnly:!0})],m.prototype,"scales",void 0),(0,s.e)([(0,a.y)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],m.prototype,"size",void 0),(0,s.e)([(0,l.e)("size",["rows","cols"])],m.prototype,"readSize",null),(0,s.e)([(0,s.o)("size",{cols:{type:a.N},rows:{type:a.N}})],m.prototype,"writeSize",null),(0,s.e)([(0,a.y)({type:c.k,json:{write:!0}})],m.prototype,"spatialReference",void 0),m=d=(0,s.e)([(0,a.n)("esri.layers.support.TileInfo")],m);var g=m},93443:(e,t,r)=>{"use strict";r.d(t,{_:()=>c,h:()=>w,l:()=>f});var i=r(80219),s=r(20215),n=r(13564),o=r(78155),a=r(92858),l=r(29218);class u{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class c{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new n.e(e.peeker),this.process=e.process;const t=e.scheduler;e.priority&&(0,i.r)(t)&&(this._task=t.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((t=>e.push(t))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((t,r)=>e(r)))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,t){const r=this.get(e);if(r)return r;const n=(0,s.h)();let o=null;t&&(o=(0,s.v)(t,(()=>n.abort())));const a=()=>{l.remove(),(0,i.r)(o)&&o.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},l=(0,s.P)(n.signal,(()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),a(),u.reject((0,s.m)())})),u=(0,s.E)();return this._deferreds.set(e,u),this._controllers.set(e,n),u.promise.then(a,a),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach((t=>e.push(t))),this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,o.j)((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if((0,i.t)(e))return;let t;const r=(0,s.h)(),n=new u(e,r);this._processingItems.set(e,n);try{t=this.process(e,r.signal)}catch(e){this._processError(n,e)}(0,s.U)(t)?(n.promise=t,t.then((e=>this._processResult(n,e)),(e=>this._processError(n,e)))):this._processResult(n,t)}get test(){return{update:e=>this.runTask(e)}}}function h(e,t){return[e,t]}function p(e,t,r){return e[0]=t,e[1]=r,e}const d=new l.e("0/0/0/0");class y{constructor(e,t,r,i,s,n,o,a,l,u,c,h){this.level=e,this.resolution=t,this.scale=r,this.origin=i,this.first=s,this.last=n,this.size=o,this.norm=a,this.worldStart=l,this.worldEnd=u,this.worldSize=c,this.wrap=h}static create(e,t,r){const i=(0,a.S)(e.spatialReference),s=h(e.origin.x,e.origin.y),n=h(e.size[0]*t.resolution,e.size[1]*t.resolution),o=h(-1/0,-1/0),l=h(1/0,1/0),u=h(1/0,1/0);let c,d,f,m;return r&&(p(o,Math.max(0,Math.floor((r.xmin-s[0])/n[0])),Math.max(0,Math.floor((s[1]-r.ymax)/n[1]))),p(l,Math.max(0,Math.floor((r.xmax-s[0])/n[0])),Math.max(0,Math.floor((s[1]-r.ymin)/n[1]))),p(u,l[0]-o[0]+1,l[1]-o[1]+1)),e.isWrappable?(c=h(Math.ceil(Math.round((i.valid[1]-i.valid[0])/t.resolution)/e.size[0]),u[1]),d=h(Math.floor((i.origin[0]-s[0])/n[0]),o[1]),f=h(c[0]+d[0]-1,l[1]),m=!0):(d=o,f=l,c=u,m=!1),new y(t.level,t.resolution,t.scale,s,o,l,u,n,d,f,c,m)}normalizeCol(e){if(!this.wrap)return e;const t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}denormalizeCol(e,t){return this.wrap?this.worldSize[0]*t+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,t,r=!1){d.set(t);const i=r?d.col:this.denormalizeCol(d.col,d.world),s=d.row;return function(e,t,r,i,s){e[0]=t,e[1]=r,e[2]=i,e[3]=s}(e,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),e}getTileCoords(e,t,r=!1){d.set(t);const i=r?d.col:this.denormalizeCol(d.col,d.world);return Array.isArray(e)?p(e,this.getXForColumn(i),this.getYForRow(d.row)):(e.x=this.getXForColumn(i),e.y=this.getYForRow(d.row)),e}}class f{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,t){const{spans:r,lodInfo:i}=this,{level:s}=i;if(0!==r.length)for(const{row:n,colFrom:o,colTo:a}of r)for(let r=o;r<=a;r++)e.call(t,s,n,i.normalizeCol(r),i.getWorldForColumn(r))}}f.pool=new o.h(f);class m{constructor(e,t,r){this.row=e,this.colFrom=t,this.colTo=r}}const g=new l.e("0/0/0/0");class v{constructor(e,t,r,i,s,n,o,a){this.x=e,this.ymin=t,this.ymax=r,this.invM=i,this.leftAdjust=s,this.rightAdjust=n,this.leftBound=o,this.rightBound=a}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[r,i]=e,[s,n]=t,o=s-r,a=n-i,l=0!==a?o/a:0,u=(Math.ceil(i)-i)*l,c=(Math.floor(i)-i)*l;return new v(r,Math.floor(i),Math.ceil(n),l,o<0?u:c,o<0?c:u,o<0?s:r,o<0?r:s)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const b=[[0,0],[0,0],[0,0],[0,0]];class w{constructor(e,t){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const r=e.lods.slice();r.sort((function(e,t){return t.scale-e.scale}));const i=this._lodInfos=r.map((r=>y.create(e,r,t)));r.forEach(((e,t)=>{this._infoByLevel[e.level]=i[t],this._infoByScale[e.scale]=i[t],this.scales[t]=e.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,r=!1){g.set(t);const i=this._infoByLevel[g.level];return i?i.getTileBounds(e,g,r):e}getTileCoords(e,t,r=!1){g.set(t);const i=this._infoByLevel[g.level];return i?i.getTileCoords(e,g,r):e}getTileCoverage(e,t=192,r="closest"){const i="closest"===r?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),s=f.pool.acquire(i),n=this._wrap;let o,a,l,u=1/0,c=-1/0;const h=s.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-t,b[1][0]=b[2][0]=e.size[0]+t,b[2][1]=b[3][1]=e.size[1]+t;for(const t of b)e.toMap(t,t),t[0]=i.getColumnForX(t[0]),t[1]=i.getRowForY(t[1]);const p=[];let d=3;for(let e=0;e<4;e++){if(b[e][1]===b[d][1]){d=e;continue}const t=v.create(b[e],b[d]);u=Math.min(t.ymin,u),c=Math.max(t.ymax,c),void 0===p[t.ymin]&&(p[t.ymin]=[]),p[t.ymin].push(t),d=e}if(null==u||null==c||c-u>100)return null;let y=[];for(o=u;o<c;){null!=p[o]&&(y=y.concat(p[o])),a=1/0,l=-1/0;for(let e=y.length-1;e>=0;e--){const t=y[e];a=Math.min(a,t.getLeftCol()),l=Math.max(l,t.getRightCol())}if(a=Math.floor(a),l=Math.floor(l),o>=i.first[1]&&o<=i.last[1])if(n)if(i.size[0]<i.worldSize[0]){const e=Math.floor(l/i.worldSize[0]);for(let t=Math.floor(a/i.worldSize[0]);t<=e;t++)h.push(new m(o,Math.max(i.getFirstColumnForWorld(t),a),Math.min(i.getLastColumnForWorld(t),l)))}else h.push(new m(o,a,l));else a>i.last[0]||l<i.first[0]||(a=Math.max(a,i.first[0]),l=Math.min(l,i.last[0]),h.push(new m(o,a,l)));o+=1;for(let e=y.length-1;e>=0;e--){const t=y[e];t.ymax>=o?t.incrRow():y.splice(e,1)}}return s}getTileParentId(e){g.set(e);const t=this._infoByLevel[g.level],r=this._lodInfos.indexOf(t)-1;return r<0?null:(this._getTileIdAtLOD(g,this._lodInfos[r],g),g.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){g.set(t);const r=this._infoByLevel[g.level],i=e.lodInfo;if(i.resolution>r.resolution){this._getTileIdAtLOD(g,i,g);const t=i.denormalizeCol(g.col,g.world);for(const r of e.spans)if(r.row===g.row&&r.colFrom<=t&&r.colTo>=t)return!0}if(i.resolution<r.resolution){const[t,s,n,o]=e.spans.reduce(((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e)),[1/0,-1/0,1/0,-1/0]),a=r.denormalizeCol(g.col,g.world),l=i.getColumnForX(r.getXForColumn(a)),u=i.getRowForY(r.getYForRow(g.row)),c=i.getColumnForX(r.getXForColumn(a+1))-1,h=i.getRowForY(r.getYForRow(g.row+1))-1;return!(l>o||c<n||u>s||h<t)}const s=i.denormalizeCol(g.col,g.world);return e.spans.some((e=>e.row===g.row&&e.colFrom<=s&&e.colTo>=s))}normalizeBounds(e,t,r){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){const t=(0,a.S)(this.tileInfo.spatialReference),i=-r*(t.valid[1]-t.valid[0]);e[0]+=i,e[2]+=i}return e}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let r=1;r<t.length-1;r++)if(e>t[r]+1e-6)return this._infoByScale[t[r-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce(((t,r)=>Math.abs(r-e)<Math.abs(t-e)?r:t),t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=t.length-1;r>=0;r--)if(e<t[r])return r===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[r]].level+(t[r]-e)/(t[r]-t[r+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,r){const i=this._infoByLevel[r.level];return e.set(r),t.resolution<i.resolution?null:(t.resolution===i.resolution||(e.level=t.level,e.col=Math.floor(r.col*i.resolution/t.resolution+.01),e.row=Math.floor(r.row*i.resolution/t.resolution+.01)),e)}}},29218:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var i=r(78155);class s{constructor(e,t,r,i){this.set(e,t,r,i)}static getId(e,t,r,i){return"object"==typeof e?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${t}/${r}/${i}`}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}acquire(e,t,r,i){this.set(e,t,r,i)}contains(e){const t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new s(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,t,r,i){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){const[t,r,i,s]=e.split("/");this.level=parseFloat(t),this.row=parseFloat(r),this.col=parseFloat(i),this.world=parseFloat(s)}else this.level=+e,this.row=+t,this.col=+r,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new s(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,t=this.row<<1,r=this.col<<1,i=this.world;return[new s(e,t,r,i),new s(e,t,r+1,i),new s(e,t+1,r,i),new s(e,t+1,r+1,i)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}s.pool=new i.h(s,null,null,25,50)},85774:(e,t,r)=>{"use strict";r.d(t,{c:()=>M,p:()=>v});var i=r(78155),s=r(88903),n=(r(80219),r(67726)),o=r(93443),a=r(29218);const l=new Set,u=[],c=new Map,h=[0,0];let p=class extends i.p{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new o._({concurrency:e,process:(e,r)=>{const i=this._keyToItem.get(e);return t(i,{signal:r})},peeker:e=>e.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const r=e.key.id+"-"+t;if(this.has(r))return this.get(r);const i=this._queue.push(r),s=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),s=this.tileInfoView.getTileScale(t.key);c.has(s)||(c.set(s,[]),r=Math.max(s,r),i=Math.min(s,i)),c.get(s).push(t.key),l.add(s)}));let s=this.state.scale;c.has(s)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(u,l),u.sort(),s=u.reduce(((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e),u[0])),s=Math.min(s,r),s=Math.max(s,i);const n=c.get(s),o=t.getClosestInfoForScale(s),a=o.getColumnForX(this.state.center[0]),h=o.getRowForY(this.state.center[1]);return n.sort(((e,t)=>{const r=o.denormalizeCol(e.col,e.world),i=o.denormalizeCol(t.col,t.world);return Math.sqrt((a-r)*(a-r)+(h-e.row)*(h-e.row))-Math.sqrt((a-i)*(a-i)+(h-t.row)*(h-t.row))})),l.clear(),c.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,s=null;return e.forEach((e=>{const o=this._keyToItem.get(e);t.getTileCoords(h,o.key);const a=(0,n.d)(h,r);a<i&&(i=a,s=o.key)})),s.id}};(0,i.e)([(0,s.y)({constructOnly:!0})],p.prototype,"concurrency",void 0),(0,i.e)([(0,s.y)({constructOnly:!0})],p.prototype,"process",void 0),(0,i.e)([(0,s.y)()],p.prototype,"state",void 0),(0,i.e)([(0,s.y)({constructOnly:!0})],p.prototype,"strategy",void 0),(0,i.e)([(0,s.y)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),(0,i.e)([(0,s.y)({readOnly:!0})],p.prototype,"updating",null),p=(0,i.e)([(0,s.n)("esri.views.2d.tiling.PagedTileQueue")],p);const d=new Set,y=[],f=new Map,m=[0,0];let g=class extends i.p{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:r}=this;this._queue=new o._({concurrency:e,process:(e,r)=>{const i=this._keyToItem.get(e);return t(i,{signal:r})},peeker:"scale-first"===r?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const r=this._queue.push(t),i=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),r.then(i,i),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),s=this.tileInfoView.getTileScale(t.key);f.has(s)||(f.set(s,[]),r=Math.max(s,r),i=Math.min(s,i)),f.get(s).push(t.key),d.add(s)}));let s=this.state.scale;f.has(s)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(y,d),y.sort(),s=y.reduce(((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e),y[0])),s=Math.min(s,r),s=Math.max(s,i);const n=f.get(s),o=t.getClosestInfoForScale(s),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return n.sort(((e,t)=>{const r=o.denormalizeCol(e.col,e.world),i=o.denormalizeCol(t.col,t.world);return Math.sqrt((a-r)*(a-r)+(l-e.row)*(l-e.row))-Math.sqrt((a-i)*(a-i)+(l-t.row)*(l-t.row))})),d.clear(),f.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,s=null;return e.forEach((e=>{const o=this._keyToItem.get(e);t.getTileCoords(m,o.key);const a=(0,n.d)(m,r);a<i&&(i=a,s=o.key)})),s.id}};(0,i.e)([(0,s.y)({constructOnly:!0})],g.prototype,"concurrency",void 0),(0,i.e)([(0,s.y)({constructOnly:!0})],g.prototype,"process",void 0),(0,i.e)([(0,s.y)()],g.prototype,"state",void 0),(0,i.e)([(0,s.y)({constructOnly:!0})],g.prototype,"strategy",void 0),(0,i.e)([(0,s.y)({constructOnly:!0})],g.prototype,"tileInfoView",void 0),(0,i.e)([(0,s.y)({readOnly:!0})],g.prototype,"updating",null),g=(0,i.e)([(0,s.n)("esri.views.2d.tiling.TileQueue")],g);var v=g;class b{constructor(e,t,r){this.maxSize=e,this.tileInfoView=t,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const r=t.key.level,i=this._tileKeysPerLevel[r];w(this._tilePerId,e);for(let t=0;t<i.length;t++)if(i[t].id===e){i.splice(t,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,r=t.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const i=t.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(t)}prune(e,t,r){let i=this._tilePerId.size;if(i<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&s>=0;)s!==e&&(i=this._pruneAroundCenterTile(i,t,r,s)),s--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,t,r,e))}_pruneAroundCenterTile(e,t,r,i){const s=this._tileKeysPerLevel[i];if(!s||0===s.length)return e;const{size:o,origin:a}=this.tileInfoView.tileInfo,l=r*o[0],u=r*o[1],c=[0,0],h=[0,0];for(s.sort(((e,r)=>(c[0]=a.x+l*(e.col+.5),c[1]=a.y-u*(e.row+.5),h[0]=a.x+l*(r.col+.5),h[1]=a.y-u*(r.row+.5),(0,n.q)(c,t)-(0,n.q)(h,t))));s.length>0;){const t=s.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),w(this._tilePerId,e)}}function w(e,t){e.delete(t)}const _=new a.e(0,0,0,0),x=new Map,S=[],T=[];class M{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new b(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:r}=this,i=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(T.length=0,S.length=0,x.clear(),!i)return;const{minScale:s,maxScale:n}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=i,{level:u}=l,{scale:c,center:h,resolution:p}=e.state,d=!e.stationary&&c>this._previousScale;if(this._previousScale=c,this.tiles.length=0,!t&&(c>s||c<n))return this.tiles.length=0,x.clear(),r.forEach((e=>{this.releaseTile(e)})),r.clear(),T.length=0,S.length=0,x.clear(),o.l.pool.release(i),!0;r.forEach((e=>e.visible=!0));let y=0,f=0;if(a.length>0)for(const{row:e,colFrom:t,colTo:i}of a)for(let s=t;s<=i;s++){y++;const t=_.set(u,e,l.normalizeCol(s),l.getWorldForColumn(s)).id;if(r.has(t)){const e=r.get(t);e.isReady?(x.set(t,e),f++):d||this._addParentTile(t,x)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){x.set(t,e),f++;continue}}else e=this.acquireTile(_),this.tileIndex.set(t,e);d||this._addParentTile(t,x)}}const m=f===y;r.forEach(((e,t)=>{if(_.set(t),x.has(t))return;const r=this.tileInfoView.intersects(i,_),s="purge"===this.cachePolicy?_.level!==u:_.level>u;!r||!d&&m?!s&&r||S.push(t):e.isReady?T.push(t):s&&S.push(t)}));for(const e of T){const t=r.get(e);t&&t.isReady&&x.set(e,t)}for(const e of S){const t=r.get(e);this._tileCache?this._tileCache.add(t):this.releaseTile(t),r.delete(e)}return x.forEach((e=>this.tiles.push(e))),r.forEach((e=>{x.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(u,h,p),o.l.pool.release(i),x.clear(),m}clear(e=!0){const{tileIndex:t}=this;e&&t.forEach((e=>{this.releaseTile(e)})),t.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let r=e,i=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(i=this.tileIndex.get(r),i&&i.isReady){t.has(i.key.id)||t.set(i.key.id,i);break}}else if(this._tileCache&&this._tileCache.has(r)&&(i=this._tileCache.pop(r),this.tileIndex.set(r,i),i&&i.isReady)){t.has(i.key.id)||t.set(i.key.id,i);break}}}},6783:(e,t,r)=>{"use strict";r.d(t,{r:()=>a}),r(80219);var i=r(95186),s=r(71391),n=r(75200),o=r(29218);class a extends n.a{constructor(e,t,r,i=r){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:(0,s.a0)(),tileMat3:(0,s.a0)()},this.triangleCount=0,this.key=new o.e(e),this.bounds=t,this.size=r,this.coordRange=i}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(e){this._coords=[e[0],e[3]],this._bounds=e}setTransform(e,t){const r=t/(e.resolution*e.pixelRatio),s=this.transforms.tileMat3,[n,o]=e.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*r,l=this.size[1]/this.coordRange[1]*r;(0,i.s)(s,a,0,0,0,l,0,n,o,1),(0,i.i)(this.transforms.dvs,e.displayViewMat3,s)}}},21779:(e,t,r)=>{"use strict";r.d(t,{j:()=>m}),r(33807);var i,s=r(78155),n=r(80987),o=r(20215),a=r(83731),l=r(80219),u=r(97325),c=r(36845),h=r(88903),p=r(20736);class d{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const r=(e-this.location.top)*this.location.width+(t-this.location.left),i=r%8,s=r>>3,n=this._tileAvailabilityBitSet;return s<0||s>n.length?"unknown":n[s]&1<<i?"available":"unavailable"}_updateFromData(e){const t=this.location.width,r=this.location.height;let i=!0,s=!0;const n=Math.ceil(t*r/8),o=new Uint8Array(n);let a=0;for(let t=0;t<e.length;t++){const r=t%8;e[t]?(s=!1,o[a]|=1<<r):i=!1,7===r&&++a}s?this._allAvailability="unavailable":i?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=o,this.byteSize+=o.length)}static fromDefinition(e,t){const r=e.service.request||n.L,{row:i,col:a,width:l,height:u}=e,c={query:{f:"json"}};return t=t?{...c,...t}:c,r(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const r=e.service.query;return r&&(t=`${t}?${r}`),t}(e),t).then((e=>e.data)).catch((e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:i,left:a,width:l,height:u},valid:!0,data:(0,s.c)(l*u,0)};throw e})).then((e=>{if(e.location&&(e.location.top!==i||e.location.left!==a||e.location.width!==l||e.location.height!==u))throw new o.s("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:i,left:a,width:l,height:u}});return d.fromJSON(e)}))}static fromJSON(e){d.validateJSON(e);const t=new d;return t.location=Object.freeze((0,l.y)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new o.s("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new o.s("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new o.s("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new o.s("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new o.s("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function y(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const f=l.n.getLogger("esri.layers.support.TilemapCache");let m=i=class extends s.p{constructor(e){super(e),this._handles=new a.u,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=n.L,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new u.e(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(()=>this._initializeTilemapDefinition())),(0,c.d)(this,"layer.tileInfo.lods",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(f.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,i){if(!this._availableLevels[e])return Promise.reject(new o.s("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const s=this._tmpTilemapDefinition,n=this._tilemapFromCache(e,t,r,s);if(n)return Promise.resolve(n);const a=i&&i.signal;return i={...i,signal:null},new Promise(((e,t)=>{(0,o.v)(a,(()=>t((0,o.m)())));const r=y(s);let n=this._pendingTilemapRequests[r];if(!n){n=d.fromDefinition(s,i).then((e=>(this._tilemapCache.put(r,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[r];this._pendingTilemapRequests[r]=n,n.then(e,e)}n.then(e,t)}))}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";const i=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return i?i.getAvailability(t,r):"unknown"}getAvailabilityUpsample(e,t,r,i){i.level=e,i.row=t,i.col=r;const s=this.layer.tileInfo;for(s.updateTileInfo(i);;){const e=this.getAvailability(i.level,i.row,i.col);if("unavailable"!==e)return e;if(!s.upsampleTile(i))return"unavailable"}}fetchAvailability(e,t,r,i){return this._availableLevels[e]?this.fetchTilemap(e,t,r,i).catch((e=>e)).then((i=>{if(i instanceof d){const s=i.getAvailability(t,r);return"unavailable"===s?Promise.reject(new o.s("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):s}if((0,o.g)(i))throw i;return"unknown"})):Promise.reject(new o.s("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,r,i,s){i.level=e,i.row=t,i.col=r;const n=this.layer.tileInfo;n.updateTileInfo(i);const a=this.fetchAvailability(e,t,r,s).catch((e=>{if((0,o.g)(e))throw e;if(n.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i);throw e}));return this._fetchAvailabilityUpsamplePrefetch(i.id,e,t,r,s,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,r,n,a,l){if(!this._prefetchingEnabled)return;const u=`prefetch-${e}`;if(this._handles.has(u))return;const c=(0,o.h)();l.then((()=>c.abort()),(()=>c.abort()));let h=!1;const p={remove(){h||(h=!0,c.abort())}};if(this._handles.add(p,u),await(0,s.y)(10,c.signal).catch((()=>{})),h||(h=!0,this._handles.remove(u)),(0,o.b)(c))return;const d={id:e,level:t,row:r,col:n},y={...a,signal:c.signal},f=this.layer.tileInfo;for(let e=0;i._prefetches.length<i._maxPrefetch&&f.upsampleTile(d);++e){const e=this.fetchAvailability(d.level,d.row,d.col,y);i._prefetches.push(e);const t=()=>{i._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?(0,n.C)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,i){i.level=e,i.row=t-t%this.size,i.col=r-r%this.size;const s=y(i);return this._tilemapCache.get(s)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,i)=>!!e._tilemapFromCache(t,r,i,e._tmpTilemapDefinition)}}};m._maxPrefetch=4,m._prefetches=new s.f({initialSize:i._maxPrefetch}),(0,s.e)([(0,h.y)({constructOnly:!0,type:Number})],m.prototype,"levels",void 0),(0,s.e)([(0,p.c)("levels")],m.prototype,"castLevels",null),(0,s.e)([(0,h.y)({readOnly:!0,type:Number})],m.prototype,"size",null),(0,s.e)([(0,h.y)({constructOnly:!0,type:Number})],m.prototype,"cacheByteSize",void 0),(0,s.e)([(0,h.y)({constructOnly:!0})],m.prototype,"layer",void 0),(0,s.e)([(0,h.y)({constructOnly:!0})],m.prototype,"request",void 0),m=i=(0,s.e)([(0,h.n)("esri.layers.support.TilemapCache")],m)},91236:(e,t,r)=>{"use strict";r.d(t,{o:()=>h,y:()=>m});var i=r(78155),s=r(80219),n=r(88903),o=r(4169);const a={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},l={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function u(e,t,r){const i=new Date(e.getTime());if(t&&r){const e=l[r],{getter:s,setter:n,multiplier:o}=e;i[n](i[s]()+t*o)}return i}function c(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function h(e,t,r){return 0===e?0:e*a[t]/a[r]}var p;let d=p=class extends i.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return y}static get empty(){return f}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(p.allTime)}get isEmpty(){return this.equals(p.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new p({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=(0,s.A)(this.start,(t=>c(t,e))),r=(0,s.A)(this.end,(t=>u(c(t,e),1,e)));return new p({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return p.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=(0,s.v)(this.start,-1/0,(e=>e.getTime())),r=(0,s.v)(this.end,1/0,(e=>e.getTime())),i=(0,s.v)(e.start,-1/0,(e=>e.getTime())),n=(0,s.v)(e.end,1/0,(e=>e.getTime()));let o,a;if(i>=t&&i<=r?o=i:t>=i&&t<=n&&(o=t),r>=i&&r<=n?a=r:n>=t&&n<=r&&(a=n),!isNaN(o)&&!isNaN(a)){const e=new p;return e.start=o===-1/0?null:new Date(o),e.end=a===1/0?null:new Date(a),e}return p.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new p,{start:i,end:n}=this;return(0,s.r)(i)&&(r.start=u(i,e,t)),(0,s.r)(n)&&(r.end=u(n,e,t)),r}equals(e){if(!e)return!1;const t=(0,s.r)(this.start)?this.start.getTime():this.start,r=(0,s.r)(this.end)?this.end.getTime():this.end,i=(0,s.r)(e.start)?e.start.getTime():e.start,n=(0,s.r)(e.end)?e.end.getTime():e.end;return t===i&&r===n}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return y.clone();const t=(0,s.r)(this.start)&&(0,s.r)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=(0,s.r)(this.end)&&(0,s.r)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new p({start:t,end:r})}};(0,i.e)([(0,n.y)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),(0,i.e)([(0,o.e)("end")],d.prototype,"readEnd",null),(0,i.e)([(0,i.o)("end")],d.prototype,"writeEnd",null),(0,i.e)([(0,n.y)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),(0,i.e)([(0,n.y)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),(0,i.e)([(0,n.y)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),(0,i.e)([(0,o.e)("start")],d.prototype,"readStart",null),(0,i.e)([(0,i.o)("start")],d.prototype,"writeStart",null),d=p=(0,i.e)([(0,n.n)("esri.TimeExtent")],d);const y=new d,f=new d({start:void 0,end:void 0});var m=d},56416:(e,t,r)=>{"use strict";r.d(t,{e:()=>u,l:()=>d,v:()=>v});var i=r(78155),s=r(91236),n=r(88903),o=r(80219),a=r(31531),l=r(4169);const u=(0,a.s)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var c;let h=c=class extends i.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,s.o)(this.value,this.unit,"milliseconds")}clone(){return new c({value:this.value,unit:this.unit})}};(0,i.e)([(0,n.y)({type:Number,json:{write:!0},nonNullable:!0})],h.prototype,"value",void 0),(0,i.e)([(0,n.y)({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write},nonNullable:!0})],h.prototype,"unit",void 0),h=c=(0,i.e)([(0,n.n)("esri.TimeInterval")],h);var p,d=h;let y=p=class extends i.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new p({respectsDaylightSaving:e,timezone:t})}};(0,i.e)([(0,n.y)({type:Boolean,json:{write:!0}})],y.prototype,"respectsDaylightSaving",void 0),(0,i.e)([(0,l.e)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],y.prototype,"readRespectsDaylightSaving",null),(0,i.e)([(0,n.y)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],y.prototype,"timezone",void 0),y=p=(0,i.e)([(0,n.n)("esri.layers.support.TimeReference")],y);var f,m=y;let g=f=class extends i.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new s.y({start:r,end:i})}writeFullTimeExtent(e,t){e&&(0,o.r)(e.start)&&(0,o.r)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new d({value:t.timeInterval,unit:u.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new d({value:t.defaultTimeInterval,unit:u.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:s,timeReference:n,fullTimeExtent:a,trackIdField:l,useTime:u}=this;return new f({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:s,timeReference:(0,o.y)(n),fullTimeExtent:(0,o.y)(a),trackIdField:l,useTime:u})}};(0,i.e)([(0,n.y)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],g.prototype,"cumulative",void 0),(0,i.e)([(0,n.y)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],g.prototype,"endField",void 0),(0,i.e)([(0,n.y)({type:s.y,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"fullTimeExtent",void 0),(0,i.e)([(0,l.e)("fullTimeExtent",["timeExtent"])],g.prototype,"readFullTimeExtent",null),(0,i.e)([(0,i.o)("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null),(0,i.e)([(0,n.y)({type:Boolean,json:{write:!0}})],g.prototype,"hasLiveData",void 0),(0,i.e)([(0,n.y)({type:d,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"interval",void 0),(0,i.e)([(0,l.e)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],g.prototype,"readInterval",null),(0,i.e)([(0,i.o)("interval")],g.prototype,"writeInterval",null),(0,i.e)([(0,n.y)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],g.prototype,"startField",void 0),(0,i.e)([(0,n.y)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"timeReference",void 0),(0,i.e)([(0,n.y)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"trackIdField",void 0),(0,i.e)([(0,n.y)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],g.prototype,"useTime",void 0),g=f=(0,i.e)([(0,n.n)("esri.layers.support.TimeInfo")],g);var v=g},91790:(e,t,r)=>{"use strict";r.d(t,{l:()=>v,u:()=>f,v:()=>M});var i,s=r(78155),n=r(80219),o=r(88903),a=r(80987),l=r(18143),u=r(92858),c=r(91236),h=r(31531),p=r(89710);let d=i=class extends s.a{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new i((0,n.y)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],d.prototype,"attachmentTypes",void 0),(0,s.e)([(0,o.y)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],d.prototype,"attachmentsWhere",void 0),(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],d.prototype,"keywords",void 0),(0,s.e)([(0,o.y)({type:[Number],json:{write:!0}})],d.prototype,"globalIds",void 0),(0,s.e)([(0,o.y)({json:{write:!0}})],d.prototype,"name",void 0),(0,s.e)([(0,o.y)({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0),(0,s.e)([(0,o.y)({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0),(0,s.e)([(0,o.y)({type:Boolean,json:{default:!1,write:!0}})],d.prototype,"returnMetadata",void 0),(0,s.e)([(0,o.y)({type:[Number],json:{write:!0}})],d.prototype,"size",void 0),(0,s.e)([(0,o.y)({type:Number,json:{read:{source:"resultOffset"}}})],d.prototype,"start",void 0),(0,s.e)([(0,s.o)("start"),(0,s.o)("num")],d.prototype,"writeStart",null),(0,s.e)([(0,o.y)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],d.prototype,"where",void 0),d=i=(0,s.e)([(0,o.n)("esri.rest.support.AttachmentQuery")],d),d.from=(0,o.d)(d);var y,f=d;let m=y=class extends s.a{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}clone(){return new y((0,n.y)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,s.e)([(0,o.y)({type:l.K,json:{write:!0}})],m.prototype,"dynamicDataSource",void 0),(0,s.e)([(0,o.y)({type:String,json:{write:!0}})],m.prototype,"gdbVersion",void 0),(0,s.e)([(0,o.y)({type:Number,json:{write:!0}})],m.prototype,"geometryPrecision",void 0),(0,s.e)([(0,o.y)({type:Date})],m.prototype,"historicMoment",void 0),(0,s.e)([(0,s.o)("historicMoment")],m.prototype,"_writeHistoricMoment",null),(0,s.e)([(0,o.y)({type:Number,json:{write:!0}})],m.prototype,"maxAllowableOffset",void 0),(0,s.e)([(0,o.y)({type:[Number],json:{write:!0}})],m.prototype,"objectIds",void 0),(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],m.prototype,"orderByFields",void 0),(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],m.prototype,"outFields",void 0),(0,s.e)([(0,o.y)({type:u.k,json:{read:{source:"outSR"},write:{target:"outSR"}}})],m.prototype,"outSpatialReference",void 0),(0,s.e)([(0,o.y)({json:{write:!0}})],m.prototype,"relationshipId",void 0),(0,s.e)([(0,o.y)({type:Number,json:{read:{source:"resultOffset"}}})],m.prototype,"start",void 0),(0,s.e)([(0,s.o)("start"),(0,s.o)("num")],m.prototype,"writeStart",null),(0,s.e)([(0,o.y)({type:Number,json:{read:{source:"resultRecordCount"}}})],m.prototype,"num",void 0),(0,s.e)([(0,o.y)({json:{write:!0}})],m.prototype,"returnGeometry",void 0),(0,s.e)([(0,o.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"returnM",void 0),(0,s.e)([(0,o.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"returnZ",void 0),(0,s.e)([(0,o.y)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],m.prototype,"where",void 0),m=y=(0,s.e)([(0,o.n)("esri.rest.support.RelationshipQuery")],m),m.from=(0,o.d)(m);var g,v=m;let b=g=class extends s.a{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new g({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],b.prototype,"groupByFields",void 0),(0,s.e)([(0,o.y)({type:Number,json:{write:!0}})],b.prototype,"topCount",void 0),(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0),b=g=(0,s.e)([(0,o.n)("esri.rest.support.TopFilter")],b);var w,_=b;const x=new h.o({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),S=new h.o({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let T=w=class extends s.a{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new w((0,n.y)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,s.e)([(0,o.y)({type:Boolean,json:{write:!0}})],T.prototype,"cacheHint",void 0),(0,s.e)([(0,o.y)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],T.prototype,"distance",void 0),(0,s.e)([(0,o.y)({types:a.e,json:{read:p.p,write:!0}})],T.prototype,"geometry",void 0),(0,s.e)([(0,o.y)({type:Number,json:{write:!0}})],T.prototype,"geometryPrecision",void 0),(0,s.e)([(0,o.y)({type:Number,json:{write:!0}})],T.prototype,"maxAllowableOffset",void 0),(0,s.e)([(0,o.y)({type:Number,json:{read:{source:"resultRecordCount"}}})],T.prototype,"num",void 0),(0,s.e)([(0,o.y)({json:{write:!0}})],T.prototype,"objectIds",void 0),(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],T.prototype,"orderByFields",void 0),(0,s.e)([(0,o.y)({type:[String],json:{write:!0}})],T.prototype,"outFields",void 0),(0,s.e)([(0,o.y)({type:u.k,json:{read:{source:"outSR"},write:{target:"outSR"}}})],T.prototype,"outSpatialReference",void 0),(0,s.e)([(0,o.y)({type:String,json:{write:!0}})],T.prototype,"resultType",void 0),(0,s.e)([(0,o.y)({json:{write:!0}})],T.prototype,"returnGeometry",void 0),(0,s.e)([(0,o.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],T.prototype,"returnM",void 0),(0,s.e)([(0,o.y)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],T.prototype,"returnZ",void 0),(0,s.e)([(0,o.y)({type:Number,json:{read:{source:"resultOffset"}}})],T.prototype,"start",void 0),(0,s.e)([(0,s.o)("start"),(0,s.o)("num")],T.prototype,"writeStart",null),(0,s.e)([(0,o.y)({type:String,json:{read:{source:"spatialRel",reader:x.read},write:{target:"spatialRel",writer:x.write}}})],T.prototype,"spatialRelationship",void 0),(0,s.e)([(0,o.y)({type:c.y,json:{write:!0}})],T.prototype,"timeExtent",void 0),(0,s.e)([(0,o.y)({type:_,json:{write:!0}})],T.prototype,"topFilter",void 0),(0,s.e)([(0,o.y)({type:String,json:{read:S.read,write:{writer:S.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],T.prototype,"units",void 0),(0,s.e)([(0,o.y)({type:String,json:{write:!0}})],T.prototype,"where",void 0),T=w=(0,s.e)([(0,o.n)("esri.rest.support.TopFeaturesQuery")],T),T.from=(0,o.d)(T);var M=T},34396:(e,t,r)=>{"use strict";r.d(t,{N:()=>st,P:()=>ht,a:()=>se,b:()=>Ne,c:()=>He,d:()=>W,g:()=>ee,i:()=>Je,l:()=>Ee,m:()=>H,n:()=>Se,p:()=>J,u:()=>at,v:()=>Ge});var i,s=r(78155),n=r(81135),o=r(31531),a=r(80219),l=r(88903),u=r(20736),c=r(29126),h=r(4169),p=r(52957),d=r(5250),y=r(49878),f=r(20215),m=r(84271),g=r(52109),v=r(17762),b=r(61888),w=r(94527),_=r(2385),x=r(48643),S=r(29832),T=r(80657);let M=i=class extends s.a{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new i({minValue:this.minValue,maxValue:this.maxValue})}};(0,s.e)([(0,l.y)({type:Number,json:{write:!0}})],M.prototype,"minValue",void 0),(0,s.e)([(0,l.y)({type:Number,json:{write:!0}})],M.prototype,"maxValue",void 0),M=i=(0,s.e)([(0,l.n)("esri.renderer.support.AuthoringInfoClassBreakInfo")],M);var E,I=M;let O=E=class extends s.a{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new E({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,a.y)(this.classBreakInfos)})}};(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],O.prototype,"field",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],O.prototype,"normalizationField",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],O.prototype,"label",void 0),(0,s.e)([(0,l.y)({type:[I],json:{write:!0}})],O.prototype,"classBreakInfos",void 0),O=E=(0,s.e)([(0,l.n)("esri.renderers.support.AuthoringInfoFieldInfo")],O);var A,P=O;const R=new o.o({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),F=new o.o({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),C={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},L=["high-to-low","above-and-below","centered-on","extremes"],k=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],N=["seconds","minutes","hours","days","months","years"];let j=A=class extends s.a{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new A({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,s.e)([(0,l.y)({types:C,json:{write:!0}})],j.prototype,"endTime",void 0),(0,s.e)([(0,u.c)("endTime")],j.prototype,"castEndTime",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],j.prototype,"field",void 0),(0,s.e)([(0,l.y)({type:Number,json:{write:!0}})],j.prototype,"maxSliderValue",void 0),(0,s.e)([(0,l.y)({type:Number,json:{write:!0}})],j.prototype,"minSliderValue",void 0),(0,s.e)([(0,l.y)({types:C,json:{write:!0}})],j.prototype,"startTime",void 0),(0,s.e)([(0,u.c)("startTime")],j.prototype,"castStartTime",null),(0,s.e)([(0,l.y)({type:R.apiValues,value:null,json:{type:R.jsonValues,read:R.read,write:R.write}})],j.prototype,"style",null),(0,s.e)([(0,l.y)({type:k,value:null,json:{type:k,origins:{"web-scene":{type:L,write:{writer:(e,t)=>{L.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],j.prototype,"theme",null),(0,s.e)([(0,l.y)({type:F.apiValues,json:{type:F.jsonValues,read:F.read,write:F.write}})],j.prototype,"type",void 0),(0,s.e)([(0,l.y)({type:N,json:{type:N,write:!0}})],j.prototype,"units",void 0),j=A=(0,s.e)([(0,l.n)("esri.renderers.support.AuthoringInfoVisualVariable")],j);var D=j;let U=class extends s.a{constructor(e){super(e),this.type=null}};(0,s.e)([(0,l.y)({readOnly:!0,json:{read:!1,write:!0}})],U.prototype,"type",void 0),U=(0,s.e)([(0,l.n)("esri.rest.support.ColorRamp")],U);var V,B=U;let z=V=class extends B{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new V({fromColor:(0,a.y)(this.fromColor),toColor:(0,a.y)(this.toColor),algorithm:this.algorithm})}};(0,s.e)([(0,c.r)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],z.prototype,"algorithm",void 0),(0,s.e)([(0,l.y)({type:v.o,json:{type:[l.N],write:!0}})],z.prototype,"fromColor",void 0),(0,s.e)([(0,l.y)({type:v.o,json:{type:[l.N],write:!0}})],z.prototype,"toColor",void 0),(0,s.e)([(0,l.y)({type:["algorithmic"]})],z.prototype,"type",void 0),z=V=(0,s.e)([(0,l.n)("esri.rest.support.AlgorithmicColorRamp")],z);var q,G=z;let $=q=class extends B{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new q({colorRamps:(0,a.y)(this.colorRamps)})}};(0,s.e)([(0,l.y)({type:[G],json:{write:!0}})],$.prototype,"colorRamps",void 0),(0,s.e)([(0,l.y)({type:["multipart"]})],$.prototype,"type",void 0),$=q=(0,s.e)([(0,l.n)("esri.rest.support.MultipartColorRamp")],$);var W=$;const H={key:"type",base:B,typeMap:{algorithmic:G,multipart:W}};function J(e){return e&&e.type?"algorithmic"===e.type?G.fromJSON(e):"multipart"===e.type?W.fromJSON(e):null:null}var Z;const X=new o.o({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Y=new o.o({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Q=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let K=Z=class extends s.a{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return J(e)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new Z({classificationMethod:this.classificationMethod,colorRamp:(0,a.y)(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:(0,a.y)(this.field1),field2:(0,a.y)(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}};(0,s.e)([(0,l.y)({type:X.apiValues,value:null,json:{type:X.jsonValues,read:X.read,write:X.write,origins:{"web-document":{default:"manual",type:X.jsonValues,read:X.read,write:X.write}}}})],K.prototype,"classificationMethod",null),(0,s.e)([(0,l.y)({types:H,json:{write:!0}})],K.prototype,"colorRamp",void 0),(0,s.e)([(0,h.e)("colorRamp")],K.prototype,"readColorRamp",null),(0,s.e)([(0,l.y)({type:[String],value:null,json:{write:!0}})],K.prototype,"fields",null),(0,s.e)([(0,l.y)({type:P,value:null,json:{write:!0}})],K.prototype,"field1",null),(0,s.e)([(0,l.y)({type:P,value:null,json:{write:!0}})],K.prototype,"field2",null),(0,s.e)([(0,l.y)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],K.prototype,"focus",null),(0,s.e)([(0,l.y)({type:Number,value:null,json:{type:l.N,write:!0}})],K.prototype,"numClasses",null),(0,s.e)([(0,l.y)({type:Q,json:{type:Q,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],K.prototype,"lengthUnit",void 0),(0,s.e)([(0,l.y)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],K.prototype,"maxSliderValue",void 0),(0,s.e)([(0,l.y)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],K.prototype,"minSliderValue",void 0),(0,s.e)([(0,l.y)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],K.prototype,"statistics",null),(0,s.e)([(0,l.y)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],K.prototype,"standardDeviationInterval",null),(0,s.e)([(0,l.y)({type:Y.apiValues,value:null,json:{type:Y.jsonValues,read:Y.read,write:Y.write}})],K.prototype,"type",null),(0,s.e)([(0,l.y)({type:[D],json:{write:!0}})],K.prototype,"visualVariables",void 0),(0,s.e)([(0,l.y)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],K.prototype,"univariateSymbolStyle",null),(0,s.e)([(0,l.y)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],K.prototype,"univariateTheme",null),K=Z=(0,s.e)([(0,l.n)("esri.renderers.support.AuthoringInfo")],K);var ee=K;const te=new o.o({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let re=class extends s.a{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,s.e)([(0,l.y)({type:ee,json:{write:!0}})],re.prototype,"authoringInfo",void 0),(0,s.e)([(0,l.y)({type:te.apiValues,readOnly:!0,json:{type:te.jsonValues,read:!1,write:{writer:te.write,ignoreOrigin:!0}}})],re.prototype,"type",void 0),re=(0,s.e)([(0,l.n)("esri.renderers.Renderer")],re);var ie,se=re;let ne=ie=class extends y.c{constructor(){super(...arguments),this.showLegend=null}clone(){return new ie({title:this.title,showLegend:this.showLegend})}};(0,s.e)([(0,l.y)({type:Boolean,json:{write:!0}})],ne.prototype,"showLegend",void 0),ne=ie=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],ne);var oe=ne;const ae=a.n.getLogger("esri.renderers.visualVariables.VisualVariable"),le=new o.o({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ue=class extends s.a{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(ae.error(".field: field must be a string value"),null):(0,l.E)(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,s.e)([(0,l.y)()],ue.prototype,"index",void 0),(0,s.e)([(0,l.y)({type:le.apiValues,readOnly:!0,json:{read:le.read,write:le.write}})],ue.prototype,"type",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ue.prototype,"field",void 0),(0,s.e)([(0,u.c)("field")],ue.prototype,"castField",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ue.prototype,"valueExpression",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ue.prototype,"valueExpressionTitle",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],ue.prototype,"arcadeRequired",null),(0,s.e)([(0,l.y)({type:oe,json:{write:!0}})],ue.prototype,"legendOptions",void 0),ue=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.VisualVariable")],ue);var ce,he=ue;let pe=ce=class extends he{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new ce({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,s.e)([(0,l.y)({readOnly:!0})],pe.prototype,"cache",null),(0,s.e)([(0,l.y)({type:["color"],json:{type:["colorInfo"]}})],pe.prototype,"type",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],pe.prototype,"normalizationField",void 0),(0,s.e)([(0,l.y)({type:[y.a],json:{write:!0}})],pe.prototype,"stops",null),pe=ce=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.ColorVariable")],pe);var de,ye=pe;let fe=de=class extends s.a{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return(0,b.r)(t.transparency)}writeOpacity(e,t,r){t[r]=(0,b.n)(e)}clone(){return new de({label:this.label,opacity:this.opacity,value:this.value})}};(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],fe.prototype,"label",void 0),(0,s.e)([(0,l.y)({type:Number,json:{type:l.N,write:{target:"transparency"}}})],fe.prototype,"opacity",void 0),(0,s.e)([(0,h.e)("opacity",["transparency"])],fe.prototype,"readOpacity",null),(0,s.e)([(0,s.o)("opacity")],fe.prototype,"writeOpacity",null),(0,s.e)([(0,l.y)({type:Number,json:{write:!0}})],fe.prototype,"value",void 0),fe=de=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.support.OpacityStop")],fe);var me,ge=fe;let ve=me=class extends he{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new me({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,s.e)([(0,l.y)({readOnly:!0})],ve.prototype,"cache",null),(0,s.e)([(0,l.y)({type:["opacity"],json:{type:["transparencyInfo"]}})],ve.prototype,"type",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ve.prototype,"normalizationField",void 0),(0,s.e)([(0,l.y)({type:[ge],json:{write:!0}})],ve.prototype,"stops",null),ve=me=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.OpacityVariable")],ve);var be,we=ve;let _e=be=class extends he{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i&&i.messages){const e=`visualVariables[${this.index}]`;i.messages.push(new f.s("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:e+".valueExpressionTitle",context:i}))}}clone(){return new be({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};(0,s.e)([(0,l.y)({readOnly:!0})],_e.prototype,"cache",null),(0,s.e)([(0,l.y)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],_e.prototype,"axis",void 0),(0,s.e)([(0,l.y)({type:["rotation"],json:{type:["rotationInfo"]}})],_e.prototype,"type",void 0),(0,s.e)([(0,l.y)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],_e.prototype,"rotationType",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],_e.prototype,"valueExpressionTitle",void 0),(0,s.e)([(0,s.o)("web-scene","valueExpressionTitle")],_e.prototype,"writeValueExpressionTitleWebScene",null),_e=be=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.RotationVariable")],_e);var xe,Se=_e;let Te=xe=class extends s.a{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new xe({label:this.label,size:this.size,value:this.value})}};(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],Te.prototype,"label",void 0),(0,s.e)([(0,l.y)({type:Number,cast:w.o,json:{write:!0}})],Te.prototype,"size",void 0),(0,s.e)([(0,l.y)({type:Number,json:{write:!0}})],Te.prototype,"value",void 0),Te=xe=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.support.SizeStop")],Te);var Me,Ee=Te;let Ie=Me=class extends oe{constructor(){super(...arguments),this.customValues=null}clone(){return new Me({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};(0,s.e)([(0,l.y)({type:[Number],json:{write:!0}})],Ie.prototype,"customValues",void 0),Ie=Me=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Ie);var Oe,Ae=Ie;const Pe=a.n.getLogger("esri.renderers.visualVariables.SizeVariable"),Re=new o.o({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Fe=new o.o({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function Ce(e){if(null!=e)return"string"==typeof e||"number"==typeof e?(0,w.o)(e):"size"===e.type?(0,_.n)(e)?e:(delete(e={...e}).type,new ke(e)):void 0}function Le(e,t,r){if("object"!=typeof e)return e;const i=new ke;return i.read(e,r),i}let ke=Oe=class extends he{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:x.viewScaleRE.test(this.valueExpression)}}set expression(e){Pe.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){(0,_.n)(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),(0,_.n)(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return(0,_.i)(this)}set maxDataValue(e){e&&this.stops&&(Pe.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Pe.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return Ce(e)}readMaxSize(e,t,r){return Le(e,0,r)}set minDataValue(e){e&&this.stops&&(Pe.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Pe.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return Ce(e)}readMinSize(e,t,r){return Le(e,0,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(Pe.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return(0,_.l)(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if("$view.scale"===e){if(i&&i.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;i.messages.push(new f.s("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?Fe.read(e):null}clone(){return new Oe({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,_.n)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,_.n)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){const e=this.stops,t=e.map((e=>e.size)).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,s.e)([(0,l.y)({readOnly:!0})],ke.prototype,"cache",null),(0,s.e)([(0,l.y)({type:Re.apiValues,json:{type:Re.jsonValues,origins:{"web-map":{read:!1}},read:Re.read,write:Re.write}})],ke.prototype,"axis",void 0),(0,s.e)([(0,l.y)({type:String,value:null,json:{read:!1}})],ke.prototype,"expression",null),(0,s.e)([(0,l.y)()],ke.prototype,"index",null),(0,s.e)([(0,l.y)({type:String,readOnly:!0})],ke.prototype,"inputValueType",null),(0,s.e)([(0,l.y)({type:Ae,json:{write:!0}})],ke.prototype,"legendOptions",void 0),(0,s.e)([(0,l.y)({type:Number,value:null,json:{write:!0}})],ke.prototype,"maxDataValue",null),(0,s.e)([(0,l.y)({type:Number,value:null,json:{write:!0}})],ke.prototype,"maxSize",null),(0,s.e)([(0,u.c)("maxSize")],ke.prototype,"castMaxSize",null),(0,s.e)([(0,h.e)("maxSize")],ke.prototype,"readMaxSize",null),(0,s.e)([(0,l.y)({type:Number,value:null,json:{write:!0}})],ke.prototype,"minDataValue",null),(0,s.e)([(0,l.y)({type:Number,value:null,json:{write:!0}})],ke.prototype,"minSize",null),(0,s.e)([(0,u.c)("minSize")],ke.prototype,"castMinSize",null),(0,s.e)([(0,h.e)("minSize")],ke.prototype,"readMinSize",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ke.prototype,"normalizationField",void 0),(0,s.e)([(0,l.y)({readOnly:!0})],ke.prototype,"arcadeRequired",null),(0,s.e)([(0,l.y)({type:String})],ke.prototype,"scaleBy",void 0),(0,s.e)([(0,l.y)({type:[Ee],value:null,json:{write:!0}})],ke.prototype,"stops",null),(0,s.e)([(0,l.y)({type:["outline"],json:{write:!0}})],ke.prototype,"target",void 0),(0,s.e)([(0,l.y)({type:String,readOnly:!0})],ke.prototype,"transformationType",null),(0,s.e)([(0,l.y)({type:["size"],json:{type:["sizeInfo"]}})],ke.prototype,"type",void 0),(0,s.e)([(0,l.y)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ke.prototype,"useSymbolValue",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ke.prototype,"valueExpression",void 0),(0,s.e)([(0,h.e)("valueExpression",["valueExpression","expression"])],ke.prototype,"readValueExpression",null),(0,s.e)([(0,s.o)("web-scene","valueExpression")],ke.prototype,"writeValueExpressionWebScene",null),(0,s.e)([(0,l.y)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ke.prototype,"valueRepresentation",void 0),(0,s.e)([(0,l.y)({type:Fe.apiValues,json:{write:Fe.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],ke.prototype,"valueUnit",void 0),(0,s.e)([(0,h.e)("valueUnit")],ke.prototype,"readValueUnit",null),ke=Oe=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.SizeVariable")],ke);var Ne=ke;const je=a.n.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),De={color:ye,size:Ne,opacity:we,rotation:Se},Ue=new o.o({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ve=/^\[([^\]]+)\]$/i;let Be=class extends s.p{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter((e=>!!e)))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some((e=>!!e.target))&&e.sort(((e,t)=>{let r=null;return r=e.target===t.target?0:e.target?1:-1,r}));for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:i,rotationType:s}=t,n=i&&i.match(Ve),o=n&&n[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:o})),e)return e.map((e=>{const t=Ue.read(e.type),i=De[t];i||(je.warn(`Unknown variable type: ${t}`),r&&r.messages&&r.messages.push(new l.z("visual-variable:unsupported",`visualVariable of type '${t}' is not supported`,{definition:e,context:r})));const s=new i;return s.read(e,r),s}))}writeVariables(e,t){const r=[];for(const i of e){const e=i.toJSON(t);e&&r.push(e)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,s.e)([(0,l.y)()],Be.prototype,"visualVariables",null),Be=(0,s.e)([(0,l.n)("esri.renderers.visualVariables.VisualVariableFactory")],Be);var ze=Be;const qe={base:he,key:"type",typeMap:{opacity:we,color:ye,rotation:Se,size:Ne}},Ge=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new ze}set visualVariables(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(e,t,r){return this._vvFactory.readVariables(e,t,r)}writeVisualVariables(e,t,r,i){t[r]=this._vvFactory.writeVariables(e,i)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const e of this.visualVariables)if(e.arcadeRequired)return!0;return!1}hasVisualVariables(e,t){return e?!!this.getVisualVariablesForType(e,t):!!(this.getVisualVariablesForType("size",t)||this.getVisualVariablesForType("color",t)||this.getVisualVariablesForType("opacity",t)||this.getVisualVariablesForType("rotation",t))}getVisualVariablesForType(e,t){const r=this.visualVariables;if(!r)return;const i=r.filter((r=>r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target)));return i&&0===i.length?void 0:i}async collectVVRequiredFields(e,t){let r=[];this.visualVariables&&(r=r.concat(this.visualVariables));for(const i of r)i&&(i.field&&(0,p.F)(e,t,i.field),i.normalizationField&&(0,p.F)(e,t,i.normalizationField),i.valueExpression&&await(0,p.T)(e,t,i.valueExpression))}};return(0,s.e)([(0,l.y)({types:[qe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,s.e)([(0,h.e)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,s.e)([(0,s.o)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,s.e)([(0,l.n)("esri.renderers.mixins.VisualVariablesMixin")],t),t};var $e;let We=$e=class extends s.a{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new $e({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],We.prototype,"description",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],We.prototype,"label",void 0),(0,s.e)([(0,l.y)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],We.prototype,"minValue",void 0),(0,s.e)([(0,l.y)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],We.prototype,"maxValue",void 0),(0,s.e)([(0,l.y)({types:n.M,json:{origins:{"web-scene":{types:n.h,write:d.t}},write:d.t}})],We.prototype,"symbol",void 0),We=$e=(0,s.e)([(0,l.n)("esri.renderers.support.ClassBreakInfo")],We);var He=We;const Je={types:n.M,json:{write:{writer:d.t},origins:{"web-scene":{types:n.h,write:{writer:d.t}}}}},Ze={types:{base:w.a,key:"type",typeMap:{"simple-fill":n.j.typeMap["simple-fill"],"picture-fill":n.j.typeMap["picture-fill"],"polygon-3d":n.j.typeMap["polygon-3d"]}},json:{write:{writer:d.t},origins:{"web-scene":{type:n.a,write:{writer:d.t}}}}};var Xe;const Ye=a.n.getLogger("esri.renderers.ClassBreaksRenderer"),Qe="percent-of-total",Ke="field",et=new o.o({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:Qe,esriNormalizeByField:Ke}),tt=(0,l.d)(He);let rt=Xe=class extends(Ge(se)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map((e=>{const t=new He;return t.read(e,r),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t}))}writeClassBreakInfos(e,t,r,i){const s=e.map((e=>e.write({},i)));this._areClassBreaksConsecutive()&&s.forEach((e=>delete e.classMinValue)),t[r]=s}castField(e){return null==e?e:"function"==typeof e?(Ye.error(".field: field must be a string value"),null):(0,l.E)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=(t?Ke:r&&Qe)||null,t&&r&&Ye.warn("warning: both normalizationField and normalizationTotal are set!")):e!==Ke&&e!==Qe||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i="number"==typeof e?new He({minValue:e,maxValue:t,symbol:(0,n.g)(r)}):tt((0,a.y)(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&((0,a.t)(t)||(0,a.t)(t.arcade))&&Ye.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&((0,a.t)(t)||(0,a.t)(t.arcade))&&(r={...r,arcade:await(0,p.a)()});const i=this.getBreakIndex(e,r);return-1!==i?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&((0,a.t)(t)||(0,a.t)(t.arcade)))return void Ye.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&((0,a.t)(t)||(0,a.t)(t.arcade))){const e=await(0,p.a)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new Xe({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,a.y)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,a.y)(this.visualVariables),legendOptions:(0,a.y)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,p.T)(e,t,this.valueExpression)];(0,p.F)(e,t,this.field),(0,p.F)(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n}=(0,a.q)(t,{});let o=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const l=(0,a.f)(n).arcadeUtils;if(!o){const e=l.createSyntaxTree(this.valueExpression);o=l.createFunction(e),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=this.valueExpression;const u=l.executeFunction(o,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:i,spatialReference:s})));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let s=parseFloat(r[t]);if(i){const e=this.normalizationTotal,t=parseFloat(r[this.normalizationField]);if("log"===i)s=Math.log(s)*Math.LOG10E;else if(i!==Qe||isNaN(e)){if(i===Ke&&!isNaN(t)){if(isNaN(s)||isNaN(t))return-1;s/=t}}else s=s/e*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};(0,s.e)([(0,l.y)(Ze)],rt.prototype,"backgroundFillSymbol",void 0),(0,s.e)([(0,l.y)({type:[He]})],rt.prototype,"classBreakInfos",void 0),(0,s.e)([(0,h.e)("classBreakInfos")],rt.prototype,"readClassBreakInfos",null),(0,s.e)([(0,s.o)("classBreakInfos")],rt.prototype,"writeClassBreakInfos",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],rt.prototype,"defaultLabel",void 0),(0,s.e)([(0,l.y)(Je)],rt.prototype,"defaultSymbol",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],rt.prototype,"field",void 0),(0,s.e)([(0,u.c)("field")],rt.prototype,"castField",null),(0,s.e)([(0,l.y)({type:Boolean})],rt.prototype,"isMaxInclusive",void 0),(0,s.e)([(0,l.y)({type:y.c,json:{write:!0}})],rt.prototype,"legendOptions",void 0),(0,s.e)([(0,l.y)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],rt.prototype,"minValue",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],rt.prototype,"normalizationField",void 0),(0,s.e)([(0,l.y)({type:Number,cast:e=>(0,l.u)(e),json:{write:!0}})],rt.prototype,"normalizationTotal",void 0),(0,s.e)([(0,l.y)({type:et.apiValues,value:null,json:{type:et.jsonValues,read:et.read,write:et.write}})],rt.prototype,"normalizationType",null),(0,s.e)([(0,c.r)({classBreaks:"class-breaks"})],rt.prototype,"type",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],rt.prototype,"valueExpression",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],rt.prototype,"valueExpressionTitle",void 0),rt=Xe=(0,s.e)([(0,l.n)("esri.renderers.ClassBreaksRenderer")],rt);var it,st=rt;let nt=it=class extends s.a{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new it({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],nt.prototype,"description",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],nt.prototype,"label",void 0),(0,s.e)([(0,l.y)({types:n.M,json:{origins:{"web-scene":{types:n.h,write:d.t}},write:d.t}})],nt.prototype,"symbol",void 0),(0,s.e)([(0,l.y)({type:[String,Number],json:{type:String,write:{writer:(e,t)=>{t.value=null==e?void 0:e.toString()}}}})],nt.prototype,"value",void 0),nt=it=(0,s.e)([(0,l.n)("esri.renderers.support.UniqueValueInfo")],nt);var ot,at=nt;const lt=a.n.getLogger("esri.renderers.UniqueValueRenderer"),ut=(0,l.d)(at);let ct=ot=class extends(Ge(se)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:"complete",oldValue:e,newValue:t};let r=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<t.length;s++){const n=e.find((e=>e.value===t[s].value));n?(0,m.m)(n,t[s])?(i.changed.push({type:"complete",oldValue:n,newValue:t[s]}),r=!0):i.unchanged.push({oldValue:n,newValue:t[s]}):(i.added.push(t[s]),r=!0)}for(let s=0;s<e.length;s++)t.find((t=>t.value===e[s].value))||(i.removed.push(e[s]),r=!0);return r?i:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return null==e||"function"==typeof e?e:(0,l.E)(e)}writeField(e,t,r,i){"string"==typeof e?t[r]=e:i&&i.messages?i.messages.push(new f.s("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):lt.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,r){return r.portal||g.G.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=(0,S.c)(t.styleUrl,r);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,S.i)(e.styleUrl,i))}set uniqueValueInfos(e){this.styleOrigin?lt.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void lt.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?ut(e):new at({value:e,symbol:(0,n.g)(t)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r}removeUniqueValueInfo(e){if(this.styleOrigin)lt.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&((0,a.t)(t)||(0,a.t)(t.arcade))&&(r={...r,arcade:await(0,p.a)()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&((0,a.t)(t)||(0,a.t)(t.arcade)))return void lt.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&((0,a.t)(r)||(0,a.t)(r.arcade))){const e=await(0,p.a)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const i=this._getUniqueValueInfo(e,r);return i&&i.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const e=new ot({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,a.y)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,a.y)(this.visualVariables),legendOptions:(0,a.y)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,a.y)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=(0,a.y)(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,a.y)(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,p.T)(e,t,this.valueExpression)];(0,p.F)(e,t,this.field),(0,p.F)(e,t,this.field2),(0,p.F)(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return(0,T.g)(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach((r=>{const i=new n.b({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new at({value:r.name,symbol:i});t.push(s),this._valueInfoMap[r.name]=s})),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach((e=>this._valueInfoMap[e.value+""]=e))}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n}=(0,a.q)(t,{});let o=this._cache.compiledFunc;const l=(0,a.f)(n).arcadeUtils;if(!o){const e=l.createSyntaxTree(this.valueExpression);o=l.createFunction(e),this._cache.compiledFunc=o}const u=l.executeFunction(o,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:i,spatialReference:s})));return this._valueInfoMap[u+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if("function"!=typeof t&&this.field2){const e=this.field2,s=this.field3,n=[];t&&n.push(r[t]),e&&n.push(r[e]),s&&n.push(r[s]),i=n.join(this.fieldDelimiter||"")}else"function"==typeof t?i=t(e):t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new ot(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||g.G.getDefault());const i=r.populateFromStyle();return i.catch((t=>{lt.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t)})),i}static fromStyleUrl(e,t){const r=new ot(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch((t=>{lt.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t)})),i}};(0,s.e)([(0,l.y)({readOnly:!0})],ct.prototype,"_cache",null),(0,s.e)([(0,c.r)({uniqueValue:"unique-value"})],ct.prototype,"type",void 0),(0,s.e)([(0,l.y)(Ze)],ct.prototype,"backgroundFillSymbol",void 0),(0,s.e)([(0,l.y)({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ct.prototype,"field",void 0),(0,s.e)([(0,u.c)("field")],ct.prototype,"castField",null),(0,s.e)([(0,s.o)("field")],ct.prototype,"writeField",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ct.prototype,"field2",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ct.prototype,"field3",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ct.prototype,"valueExpression",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ct.prototype,"valueExpressionTitle",void 0),(0,s.e)([(0,l.y)({type:y.c,json:{write:!0}})],ct.prototype,"legendOptions",void 0),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ct.prototype,"defaultLabel",void 0),(0,s.e)([(0,l.y)((0,a.u)({...Je},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ct.prototype,"defaultSymbol",null),(0,s.e)([(0,l.y)({type:String,json:{write:!0}})],ct.prototype,"fieldDelimiter",void 0),(0,s.e)([(0,l.y)({type:g.G,readOnly:!0})],ct.prototype,"portal",void 0),(0,s.e)([(0,h.e)("portal",["styleName"])],ct.prototype,"readPortal",null),(0,s.e)([(0,l.y)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ct.prototype,"styleOrigin",void 0),(0,s.e)([(0,h.e)("styleOrigin",["styleName","styleUrl"])],ct.prototype,"readStyleOrigin",null),(0,s.e)([(0,s.o)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ct.prototype,"writeStyleOrigin",null),(0,s.e)([(0,l.y)({type:[at],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ct.prototype,"uniqueValueInfos",null),ct=ot=(0,s.e)([(0,l.n)("esri.renderers.UniqueValueRenderer")],ct);var ht=ct},6660:(e,t,r)=>{"use strict";r.d(t,{d:()=>_,h:()=>y,l:()=>h,o:()=>p,s:()=>c,u:()=>S}),r(33807);var i=r(80219),s=r(95186),n=r(71391),o=r(93875),a=(r(14215),r(87682)),l=r(6783);class u{constructor(e){this.xTile=0,this.yTile=0,this.hash=0,this.priority=1,this.colliders=[],this.textVertexRanges=[],this.iconVertexRanges=[],this.tile=e}}class c{constructor(){this.tileSymbols=[],this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}],this.show=!1}}function h(e,t,r,i,s,n){const o=r-s;if(o>=0)return(t>>o)+(i-(n<<o))*(e>>o);const a=-o;return t-(n-(i<<a))*(e>>a)<<a}class p{constructor(e,t,r){this._rows=Math.ceil(t/r),this._columns=Math.ceil(e/r),this._cellSize=r,this.cells=new Array(this._rows);for(let e=0;e<this._rows;e++){this.cells[e]=new Array(this._columns);for(let t=0;t<this._columns;t++)this.cells[e][t]=[]}}getCell(e,t){const r=Math.min(Math.max(Math.floor(t/this._cellSize),0),this._rows-1),i=Math.min(Math.max(Math.floor(e/this._cellSize),0),this._columns-1);return this.cells[r]&&this.cells[r][i]||null}getCellSpan(e,t,r,i){return[Math.min(Math.max(Math.floor(e/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(t/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(r/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(i/this._cellSize),0),this.rows-1)]}get cellSize(){return this._cellSize}get columns(){return this._columns}get rows(){return this._rows}}function d(e,t,r,i,s,n){const o=t[i++];for(let a=0;a<o;a++){const o=new u(n);o.xTile=t[i++],o.yTile=t[i++],o.hash=t[i++],o.priority=t[i++];const a=t[i++];for(let e=0;e<a;e++){const e=t[i++],s=t[i++],n=t[i++],a=t[i++],l=!!t[i++],u=t[i++],c=r[i++],h=r[i++],p=t[i++],d=t[i++];o.colliders.push({xTile:e,yTile:s,dxPixels:n,dyPixels:a,hard:l,partIndex:u,width:p,height:d,minLod:c,maxLod:h})}const l=e[i++];for(let t=0;t<l;t++)o.textVertexRanges.push([e[i++],e[i++]]);const c=e[i++];for(let t=0;t<c;t++)o.iconVertexRanges.push([e[i++],e[i++]]);s.push(o)}return i}function y(e,t,r){for(const[i,s]of e.symbols)f(e,t,r,s,i)}function f(e,t,r,i,s){const n=e.layerData.get(s);if(3===n.type){for(const t of i){const i=t.unique;let s;if(t.selectedForRendering){const t=i.parts[0],n=t.startOpacity,o=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===o;const a=r?Math.floor(127*n)|o<<7:o?255:0;s=a<<24|a<<16|a<<8|a}else s=0;for(const[e,r]of t.iconVertexRanges)for(let t=e;t<e+r;t+=4)n.iconOpacity[t/4]=s;if(t.selectedForRendering){const t=i.parts[1],n=t.startOpacity,o=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===o;const a=r?Math.floor(127*n)|o<<7:o?255:0;s=a<<24|a<<16|a<<8|a}else s=0;for(const[e,r]of t.textVertexRanges)for(let t=e;t<e+r;t+=4)n.textOpacity[t/4]=s}n.lastOpacityUpdate=t,n.opacityChanged=!0}}class m{constructor(e,t){this.layerUIDs=[],this.isDestroyed=!1,this.data=e,this.memoryUsed=e.byteLength;let r=1;const i=new Uint32Array(e);this.layerUIDs=[];const s=i[r++];for(let e=0;e<s;e++)this.layerUIDs[e]=i[r++];this.bufferDataOffset=r,t&&(this.layer=t.getStyleLayerByUID(this.layerUIDs[0]))}get isPreparedForRendering(){return(0,i.t)(this.data)}get offset(){return this.bufferDataOffset}destroy(){this.isDestroyed||(this.doDestroy(),this.isDestroyed=!0)}prepareForRendering(e){(0,i.t)(this.data)||(this.doPrepareForRendering(e,this.data,this.bufferDataOffset),this.data=null)}}class g extends m{constructor(e,t){super(e,t),this.type=2,this.lineIndexStart=0,this.lineIndexCount=0;const r=new Uint32Array(e);let i=this.bufferDataOffset;this.lineIndexStart=r[i++],this.lineIndexCount=r[i++];const s=r[i++];if(s>0){const e=new Map;for(let t=0;t<s;t++){const t=r[i++],s=r[i++],n=r[i++];e.set(t,[s,n])}this.patternMap=e}this.bufferDataOffset=i}hasData(){return this.lineIndexCount>0}triangleCount(){return this.lineIndexCount/3}doDestroy(){(0,i.r)(this.lineVertexArrayObject)&&this.lineVertexArrayObject.dispose(),(0,i.r)(this.lineVertexBuffer)&&this.lineVertexBuffer.dispose(),(0,i.r)(this.lineIndexBuffer)&&this.lineIndexBuffer.dispose(),this.lineVertexArrayObject=null,this.lineVertexBuffer=null,this.lineIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(e,t,r){const i=new Uint32Array(t),s=new Int32Array(i.buffer),n=i[r++];this.lineVertexBuffer=o.h.createVertex(e,35044,new Int32Array(s.buffer,4*r,n)),r+=n;const a=i[r++];this.lineIndexBuffer=o.h.createIndex(e,35044,new Uint32Array(i.buffer,4*r,a)),r+=a;const l=this.layer.lineMaterial;this.lineVertexArrayObject=new o.f(e,l.getAttributeLocations(),l.getLayoutInfo(),{geometry:this.lineVertexBuffer},this.lineIndexBuffer)}}class v extends m{constructor(e,t){super(e,t),this.type=1,this.fillIndexStart=0,this.fillIndexCount=0,this.outlineIndexStart=0,this.outlineIndexCount=0;const r=new Uint32Array(e);let i=this.bufferDataOffset;this.fillIndexStart=r[i++],this.fillIndexCount=r[i++],this.outlineIndexStart=r[i++],this.outlineIndexCount=r[i++];const s=r[i++];if(s>0){const e=new Map;for(let t=0;t<s;t++){const t=r[i++],s=r[i++],n=r[i++];e.set(t,[s,n])}this.patternMap=e}this.bufferDataOffset=i}hasData(){return this.fillIndexCount>0||this.outlineIndexCount>0}triangleCount(){return(this.fillIndexCount+this.outlineIndexCount)/3}doDestroy(){(0,i.r)(this.fillVertexArrayObject)&&this.fillVertexArrayObject.dispose(),(0,i.r)(this.fillVertexBuffer)&&this.fillVertexBuffer.dispose(),(0,i.r)(this.fillIndexBuffer)&&this.fillIndexBuffer.dispose(),this.fillVertexArrayObject=null,this.fillVertexBuffer=null,this.fillIndexBuffer=null,(0,i.r)(this.outlineVertexArrayObject)&&this.outlineVertexArrayObject.dispose(),(0,i.r)(this.outlineVertexBuffer)&&this.outlineVertexBuffer.dispose(),(0,i.r)(this.outlineIndexBuffer)&&this.outlineIndexBuffer.dispose(),this.outlineVertexArrayObject=null,this.outlineVertexBuffer=null,this.outlineIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(e,t,r){const i=new Uint32Array(t),s=new Int32Array(i.buffer),n=i[r++];this.fillVertexBuffer=o.h.createVertex(e,35044,new Int32Array(s.buffer,4*r,n)),r+=n;const a=i[r++];this.fillIndexBuffer=o.h.createIndex(e,35044,new Uint32Array(i.buffer,4*r,a)),r+=a;const l=i[r++];this.outlineVertexBuffer=o.h.createVertex(e,35044,new Int32Array(s.buffer,4*r,l)),r+=l;const u=i[r++];this.outlineIndexBuffer=o.h.createIndex(e,35044,new Uint32Array(i.buffer,4*r,u)),r+=u;const c=this.layer,h=c.fillMaterial,p=c.outlineMaterial;this.fillVertexArrayObject=new o.f(e,h.getAttributeLocations(),h.getLayoutInfo(),{geometry:this.fillVertexBuffer},this.fillIndexBuffer),this.outlineVertexArrayObject=new o.f(e,p.getAttributeLocations(),p.getLayoutInfo(),{geometry:this.outlineVertexBuffer},this.outlineIndexBuffer)}}class b extends m{constructor(e,t,r){super(e,t),this.type=3,this.iconPerPageElementsMap=new Map,this.glyphPerPageElementsMap=new Map,this.symbolInstances=[],this.isIconSDF=!1,this.opacityChanged=!1,this.lastOpacityUpdate=0,this.symbols=[];const i=new Uint32Array(e),s=new Int32Array(e),n=new Float32Array(e);let o=this.bufferDataOffset;this.isIconSDF=!!i[o++];const a=i[o++];for(let e=0;e<a;e++){const e=i[o++],t=i[o++],r=i[o++];this.iconPerPageElementsMap.set(e,[t,r])}const l=i[o++];for(let e=0;e<l;e++){const e=i[o++],t=i[o++],r=i[o++];this.glyphPerPageElementsMap.set(e,[t,r])}const u=i[o++],c=i[o++];this.iconOpacity=new Int32Array(u),this.textOpacity=new Int32Array(c),o=d(i,s,n,o,this.symbols,r),this.bufferDataOffset=o}hasData(){return this.iconPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0}triangleCount(){let e=0;for(const[t,r]of this.iconPerPageElementsMap)e+=r[1];for(const[t,r]of this.glyphPerPageElementsMap)e+=r[1];return e/3}doDestroy(){(0,i.r)(this.iconVertexArrayObject)&&this.iconVertexArrayObject.dispose(),(0,i.r)(this.iconVertexBuffer)&&this.iconVertexBuffer.dispose(),(0,i.r)(this.iconOpacityBuffer)&&this.iconOpacityBuffer.dispose(),(0,i.r)(this.iconIndexBuffer)&&this.iconIndexBuffer.dispose(),this.iconVertexArrayObject=null,this.iconVertexBuffer=null,this.iconOpacityBuffer=null,this.iconIndexBuffer=null,(0,i.r)(this.textVertexArrayObject)&&this.textVertexArrayObject.dispose(),(0,i.r)(this.textVertexBuffer)&&this.textVertexBuffer.dispose(),(0,i.r)(this.textOpacityBuffer)&&this.textOpacityBuffer.dispose(),(0,i.r)(this.textIndexBuffer)&&this.textIndexBuffer.dispose(),this.textVertexArrayObject=null,this.textVertexBuffer=null,this.textOpacityBuffer=null,this.textIndexBuffer=null,this.memoryUsed=0}updateOpacityInfo(){if(!this.opacityChanged)return;this.opacityChanged=!1;const e=(0,i.f)(this.iconOpacity),t=(0,i.f)(this.iconOpacityBuffer);e.length>0&&e.byteLength===t.size&&t.setSubData(e);const r=(0,i.f)(this.textOpacity),s=(0,i.f)(this.textOpacityBuffer);r.length>0&&r.byteLength===s.size&&s.setSubData(r)}doPrepareForRendering(e,t,r){const s=new Uint32Array(t),n=new Int32Array(s.buffer),a=s[r++];this.iconVertexBuffer=o.h.createVertex(e,35044,new Int32Array(n.buffer,4*r,a)),r+=a;const l=s[r++];this.iconIndexBuffer=o.h.createIndex(e,35044,new Uint32Array(s.buffer,4*r,l)),r+=l;const u=s[r++];this.textVertexBuffer=o.h.createVertex(e,35044,new Int32Array(n.buffer,4*r,u)),r+=u;const c=s[r++];this.textIndexBuffer=o.h.createIndex(e,35044,new Uint32Array(s.buffer,4*r,c)),r+=c,this.iconOpacityBuffer=o.h.createVertex(e,35044,(0,i.f)(this.iconOpacity).buffer),this.textOpacityBuffer=o.h.createVertex(e,35044,(0,i.f)(this.textOpacity).buffer);const h=this.layer,p=h.iconMaterial,d=h.textMaterial;this.iconVertexArrayObject=new o.f(e,p.getAttributeLocations(),p.getLayoutInfo(),{geometry:this.iconVertexBuffer,opacity:this.iconOpacityBuffer},this.iconIndexBuffer),this.textVertexArrayObject=new o.f(e,d.getAttributeLocations(),d.getLayoutInfo(),{geometry:this.textVertexBuffer,opacity:this.textOpacityBuffer},this.textIndexBuffer)}}class w extends m{constructor(e,t){super(e,t),this.type=4,this.circleIndexStart=0,this.circleIndexCount=0;const r=new Uint32Array(e);let i=this.bufferDataOffset;this.circleIndexStart=r[i++],this.circleIndexCount=r[i++],this.bufferDataOffset=i}hasData(){return this.circleIndexCount>0}triangleCount(){return this.circleIndexCount/3}doDestroy(){(0,i.r)(this.circleVertexArrayObject)&&this.circleVertexArrayObject.dispose(),(0,i.r)(this.circleVertexBuffer)&&this.circleVertexBuffer.dispose(),(0,i.r)(this.circleIndexBuffer)&&this.circleIndexBuffer.dispose(),this.circleVertexArrayObject=null,this.circleVertexBuffer=null,this.circleIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(e,t,r){const i=new Uint32Array(t),s=new Int32Array(i.buffer),n=i[r++];this.circleVertexBuffer=o.h.createVertex(e,35044,new Int32Array(s.buffer,4*r,n)),r+=n;const a=i[r++];this.circleIndexBuffer=o.h.createIndex(e,35044,new Uint32Array(i.buffer,4*r,a)),r+=a;const l=this.layer.circleMaterial;this.circleVertexArrayObject=new o.f(e,l.getAttributeLocations(),l.getLayoutInfo(),{geometry:this.circleVertexBuffer},this.circleIndexBuffer)}}class _ extends l.r{constructor(e,t,r,i,s=null){super(e,r,i,[4096,4096]),this._memCache=s,this._referenced=0,this._hasSymbolBuckets=!1,this._memoryUsedByLayerData=0,this.layerData=new Map,this.layerCount=0,this.status="loading",this.allSymbolsFadingOut=!1,this.lastOpacityUpdate=0,this.symbols=new Map,this.isCoverage=!1,this.neededForCoverage=!1,this.decluttered=!1,this.invalidating=!1,this.parentTile=null,this.childrenTiles=new Set,this._processed=!1,this._referenced=1,this.styleRepository=t,this.id=e.id,this.transforms.tileUnitsToPixels=(0,n.a0)()}get hasSymbolBuckets(){return this._hasSymbolBuckets}get isFading(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<a.e}get isHoldingForFade(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<a.e)}get wasRequested(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}setData(e){this.changeDataImpl(e),this.requestRender(),this.ready(),this.invalidating=!1,this._processed=!0}deleteLayerData(e){let t=!1;for(const r of e)if(this.layerData.has(r)){const e=this.layerData.get(r);this._memoryUsedByLayerData-=e.memoryUsed,3===e.type&&this.symbols.has(r)&&(this.symbols.delete(r),t=!0),e.destroy(),this.layerData.delete(r),this.layerCount--}(0,i.r)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData),t&&this.emit("symbols-changed"),this.requestRender()}processed(){return this._processed}hasData(){return this.layerCount>0}dispose(){"unloaded"!==this.status&&(x.delete(this),_._destroyRenderBuckets(this.layerData),this.layerData=null,this.layerCount=0,this._memoryUsedByLayerData=0,this.destroy(),this.status="unloaded")}release(){return 0==--this._referenced&&(this.dispose(),this.stage=null,!0)}retain(){++this._referenced}get referenced(){return this._referenced}get memoryUsage(){return(this._memoryUsedByLayerData+256)/(this._referenced||1)}changeDataImpl(e){let t=!1;if(e){const r=this._createRenderBuckets(e);for(const[e,i]of r){if(this.layerData.has(e)){const t=this.layerData.get(e);this._memoryUsedByLayerData-=i.memoryUsed,t.destroy(),this.layerData.delete(e),this.layerCount--}3===i.type&&(this.symbols.set(e,i.symbols),t=!0),this._memoryUsedByLayerData+=i.memoryUsed,this.layerData.set(e,i),this.layerCount++}(0,i.r)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData)}this._hasSymbolBuckets=!1;for(const[e,t]of this.layerData)3===t.type&&(this._hasSymbolBuckets=!0);t&&this.emit("symbols-changed")}attachWithContext(e){this.stage={context:e,trashDisplayObject(e){e.processDetach()},untrashDisplayObject:()=>!1}}setTransform(e,t){super.setTransform(e,t);const r=t/(e.resolution*e.pixelRatio),i=this.size[0]/this.coordRange[0]*r,n=this.size[1]/this.coordRange[1]*r,o=[0,0];e.toScreen(o,this.coords);const a=this.transforms.tileUnitsToPixels;(0,s.r)(a),(0,s.M)(a,a,o),(0,s.h)(a,a,Math.PI*e.rotation/180),(0,s.f)(a,a,[i,n,1])}static _destroyRenderBuckets(e){if(!e)return;const t=new Set;e.forEach((e=>{t.has(e)||(e.destroy(),t.add(e))})),e.clear()}_createRenderBuckets(e){const t=new Map,r=new Map;for(const i of e){const e=this._deserializeBucket(i,r);for(const r of e.layerUIDs)t.set(r,e)}return t}_deserializeBucket(e,t){let r=t.get(e);if(r)return r;switch(new Uint32Array(e)[0]){case 1:r=new v(e,this.styleRepository);break;case 2:r=new g(e,this.styleRepository);break;case 3:r=new b(e,this.styleRepository,this);break;case 4:r=new w(e,this.styleRepository)}return t.set(e,r),r}}const x=new Map;function S(){x.forEach(((e,t)=>{console.log(`\n${t.key}:`),e[0].forEach((e=>console.log(e))),console.log("========"),e[1].forEach((e=>console.log(e)))}))}},43194:(e,t,r)=>{"use strict";r.d(t,{r:()=>s});var i=r(20215);class s{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new i.s(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new s(this.major,this.minor,this._context)}static parse(e,t=""){const[r,n]=e.split("."),o=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(o))throw new i.s((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!n.match(o))throw new i.s((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const a=parseInt(r,10),l=parseInt(n,10);return new s(a,l,t)}}},53185:(e,t,r)=>{"use strict";r.d(t,{A:()=>O,B:()=>A,C:()=>N,D:()=>j,E:()=>_,F:()=>b,G:()=>P,H:()=>D,I:()=>y,M:()=>c,N:()=>m,O:()=>R,R:()=>T,S:()=>C,V:()=>M,a:()=>n,b:()=>x,c:()=>l,f:()=>a,g:()=>g,h:()=>u,j:()=>S,k:()=>L,l:()=>d,p:()=>v,q:()=>E,s:()=>p,u:()=>o,v:()=>k,w:()=>I,x:()=>h,y:()=>f,z:()=>w});var i=r(80219),s=(r(98548),r(58404));function n(e=D){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,r,i,s,o,a=n()){return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a[4]=s,a[5]=o,a}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function u(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function c(e,t,r=0,i=t.length/3){let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],u=e[5];for(let e=0;e<i;e++)s=Math.min(s,t[r+3*e]),n=Math.min(n,t[r+3*e+1]),o=Math.min(o,t[r+3*e+2]),a=Math.max(a,t[r+3*e]),l=Math.max(l,t[r+3*e+1]),u=Math.max(u,t[r+3*e+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=u}function h(e,t,r,i){e[0]=Math.min(e[0],e[0]+t),e[3]=Math.max(e[3],e[3]+t),e[1]=Math.min(e[1],e[1]+r),e[4]=Math.max(e[4],e[4]+r),e[2]=Math.min(e[2],e[2]+i),e[5]=Math.max(e[5],e[5]+i)}function p(e,t,r){const i=t.length;let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],u=e[5];if(r)for(let e=0;e<i;e++){const r=t[e];s=Math.min(s,r[0]),n=Math.min(n,r[1]),o=Math.min(o,r[2]),a=Math.max(a,r[0]),l=Math.max(l,r[1]),u=Math.max(u,r[2])}else for(let e=0;e<i;e++){const r=t[e];s=Math.min(s,r[0]),n=Math.min(n,r[1]),a=Math.max(a,r[0]),l=Math.max(l,r[1])}e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=u}function d(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function y(e){return e[0]>=e[3]?0:e[3]-e[0]}function f(e){return e[1]>=e[4]?0:e[4]-e[1]}function m(e){return e[2]>=e[5]?0:e[5]-e[2]}function g(e){const t=y(e),r=m(e),i=f(e);return Math.sqrt(t*t+r*r+i*i)}function v(e,t=[0,0,0]){return t[0]=e[0]+y(e)/2,t[1]=e[1]+f(e)/2,t[2]=e[2]+m(e)/2,t}function b(e,t=[0,0,0]){return t[0]=y(e),t[1]=f(e),t[2]=m(e),t}function w(e){return Math.max(y(e),m(e),f(e))}function _(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function x(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]}function S(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function T(e,t){return!!(0,i.t)(t)||S(e,t)}function M(e,t,r,i,s=e){return s[0]=e[0]+t,s[1]=e[1]+r,s[2]=e[2]+i,s[3]=e[3]+t,s[4]=e[4]+r,s[5]=e[5]+i,s}function E(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function I(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function A(e){return e?O(e,j):n(j)}function P(e,t){return t||(t=(0,s.i)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function R(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function F(e){return 6===e.length}function C(e){return 0===y(e)&&0===f(e)&&0===m(e)}function L(e,t,r){if((0,i.t)(e)||(0,i.t)(t))return e===t;if(!F(e)||!F(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function k(e,t,r,i,s,n){return o(e,t,r,i,s,n,U)}const N=[-1/0,-1/0,-1/0,1/0,1/0,1/0],j=[1/0,1/0,1/0,-1/0,-1/0,-1/0],D=[0,0,0,0,0,0],U=n()},58404:(e,t,r)=>{"use strict";r.d(t,{A:()=>M,B:()=>E,D:()=>O,F:()=>w,G:()=>A,I:()=>R,J:()=>F,K:()=>C,M:()=>f,R:()=>T,a:()=>l,c:()=>h,e:()=>o,f:()=>c,g:()=>v,h:()=>d,i:()=>n,j:()=>b,k:()=>S,l:()=>m,m:()=>p,o:()=>u,q:()=>_,u:()=>a,w:()=>x,x:()=>y,y:()=>g});var i=r(80219),s=r(98548);function n(e=C){return[e[0],e[1],e[2],e[3]]}function o(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,r,i,s=n()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function l(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function u(e,t){return new s.M({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function h(e,t,r=e){if("length"in t)I(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}return r}function p(e,t,r=e){const i=t.length;let s=e[0],n=e[1],o=e[2],a=e[3];for(let e=0;e<i;e++){const r=t[e];s=Math.min(s,r[0]),n=Math.min(n,r[1]),o=Math.max(o,r[0]),a=Math.max(a,r[1])}return r[0]=s,r[1]=n,r[2]=o,r[3]=a,r}function d(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function y(e){return e[0]>=e[2]?0:e[2]-e[0]}function f(e){return e[1]>=e[3]?0:e[3]-e[1]}function m(e){return y(e)*f(e)}function g(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function v(e,t){return function(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}(e,t[0],t[1])}function b(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function w(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function _(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function x(e,t,r=e){const i=t[0],s=t[1],n=t[2],o=t[3];return r[0]=P(e[0],i,n),r[1]=P(e[1],s,o),r[2]=P(e[2],i,n),r[3]=P(e[3],s,o),r}function S(e,t){const r=(e[0]+e[2])/2,i=(e[1]+e[3])/2,s=Math.max(Math.abs(t[0]-r)-y(e)/2,0),n=Math.max(Math.abs(t[1]-i)-f(e)/2,0);return Math.sqrt(s*s+n*n)}function T(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function E(e){return e?M(e,F):n(F)}function I(e){return 4===e.length}function O(e){return!(0!==y(e)&&isFinite(e[0])||0!==f(e)&&isFinite(e[1]))}function A(e,t,r){if((0,i.t)(e)||(0,i.t)(t))return e===t;if(!I(e)||!I(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function P(e,t,r){return e<t?t:e>r?r:e}const R=[-1/0,-1/0,1/0,1/0],F=[1/0,1/0,-1/0,-1/0],C=[0,0,0,0]},8725:(e,t,r)=>{"use strict";r.d(t,{O:()=>v,S:()=>b,d:()=>h,g:()=>g,h:()=>y,m:()=>p,p:()=>c,v:()=>d,w:()=>f,x:()=>m});var i=r(80219),s=r(80987),n=r(29832);const o=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],a=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function c(e){return!!a.test(e)}function h(e){const t=(0,s.U)(e),r=t.path.match(a)||t.path.match(l);if(!r)return null;const[,i,n,o,u]=r,c=n.indexOf("/");return{title:d(-1!==c?n.slice(c+1):n),serverType:o,sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:i}}}function p(e){const t=(0,s.U)(e).path.match(u);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function d(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function y(e,t){const r=[];if(e){const t=h(e);(0,i.r)(t)&&t.title&&r.push(t.title)}if(t){const e=d(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function f(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function m(e,t){return e?(0,s.g)((0,s.b)(e,t)):e}function g(e){let{url:t}=e;if(!t)return{url:t};t=(0,s.b)(t,e.logger);const r=(0,s.U)(t),n=h(r.path);let o;if((0,i.r)(n))null!=n.sublayer&&null==e.layer.layerId&&(o=n.sublayer),t=n.url.path;else if(e.nonStandardUrlAllowed){const e=p(r.path);(0,i.r)(e)&&(t=e.serviceUrl,o=e.sublayerId)}return{url:(0,s.g)(t),layerId:o}}function v(e,t,r,i,o){(0,n.p)(t,i,"url",o),i.url&&null!=e.layerId&&(i.url=(0,s.D)(i.url,r,e.layerId.toString()))}function b(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),s=-1!==t.indexOf("/imageserver/wmsserver"),n=-1!==t.indexOf("/wmsserver");return r&&(i||s||n)}},63358:(e,t,r)=>{"use strict";r.d(t,{a:()=>l,n:()=>a});var i=r(80219),s=r(80987),n=r(20215);const o=i.n.getLogger("esri.assets");function a(e,t){return(0,s.L)(l(e),t)}function l(e){if(!i.d.assetsPath)throw o.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new n.s("assets:path-not-set","config.assetsPath is not set");return(0,s.D)(i.d.assetsPath,e)}},9612:(e,t,r)=>{"use strict";r.d(t,{a:()=>a,i:()=>u,n:()=>n,p:()=>l,u:()=>o});var i=r(80219),s=r(20215);function n(e,t,r){return(0,s.A)(e.map(((e,i)=>t.apply(r,[e,i]))))}function o(e,t,r){return(0,s.A)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function a(e){return(0,i.t)(e)?(0,s.x)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function l(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>((0,s.w)(e),{ok:!1,error:e})))}function u(e){if(!0===e.ok)return e.value;throw e.error}},42296:(e,t,r)=>{"use strict";r.d(t,{c:()=>a,f:()=>u,u:()=>l});var i=r(15015),s=(r(40130),r(80219)),n=(r(80987),r(88903));const o=s.n.getLogger("esri.support.basemapUtils");function a(){return{}}function l(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function u(e,t){var r;let s;if("string"==typeof e){if(!(e in i.s)){const t=Object.keys(i.s).map((e=>`"${e}"`)).join(", ");return o.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(s=t[e]),s||(s=i.U.fromId(e),t&&(t[e]=s))}else s=(0,n.d)(i.U,e);return null!=(r=s)&&r.destroyed&&(o.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}},7121:(e,t,r)=>{"use strict";function i(e){return 32+e.length}function s(){return 16}function n(e){if(!e)return 0;let t=32;for(const r in e)if(e.hasOwnProperty(r)){const s=e[r];switch(typeof s){case"string":t+=i(s);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function o(e,t){return 32+e.length*t}r.d(t,{e:()=>n,n:()=>i,r:()=>o,t:()=>s})},97431:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var i=r(20215),s=r(80219),n=r(28090);function o(e,t,r,i,n){const o=e.referencesGeometry()&&n?l(t,i,n):t,a=e.repurposeFeature(o);try{return e.evaluate({...r,$feature:a})}catch(e){return s.n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}const a=new Map;function l(e,t,r){const{transform:o,hasZ:l,hasM:u}=r;a.has(t)||a.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,r,i,s)=>(0,n.k)(r,t,e,i,s);case"esriGeometryPolygon":return(e,r,i,s)=>(0,n.q)(r,t,e,i,s);case"esriGeometryPolyline":return(e,r,i,s)=>(0,n.v)(r,t,e,i,s);case"esriGeometryMultipoint":return(e,r,i,s)=>(0,n.U)(r,t,e,i,s);default:return s.n.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i.s("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const c=a.get(t)(e.geometry,o,l,u);return{...e,geometry:c}}},732:(e,t,r)=>{"use strict";function i(e,t={},r){return window.WebGLRenderingContext?s(e,t,r)||(n(e,a),null):(n(e,o),null)}function s(e,t={},r){let i;switch(r){case"webgl":i=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case"webgl2":i=["webgl2"];break;default:i=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}let s=null;for(const r of i){try{s=e.getContext(r,t)}catch(e){}if(s)break}return s}function n(e,t){const r=e.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}r.d(t,{e:()=>i,r:()=>u});const o='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',a='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';let l;function u(){return l||(l=function(){const e={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return e;const t=document.createElement("canvas");if(!t)return e;let r=s(t,{failIfMajorPerformanceCaveat:!0},"webgl");if(r||(r=s(t,{},"webgl"),r&&(e.majorPerformanceCaveat=!0)),!r)return e;const i=r.getParameter(r.VERSION);if(!i)return e;const n=i.match(/^WebGL\s+([\d.]*)/);if(n){const t=parseFloat(n[1]);e.available=t>=.94;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);i&&(e.supportsHighPrecisionFragment=i.precision>0),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,e.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),e.supportsColorBufferFloat=null!==r.getExtension("WEBGL_color_buffer_float")&&null!==r.getExtension("EXT_float_blend")}return e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;const e=document.createElement("canvas");return!!e&&!!s(e,{},"webgl2")}()?2:1,e}()),l}},31516:(e,t,r)=>{"use strict";r.d(t,{n:()=>s,t:()=>n});var i=r(40130);function s(e,t,r=i.L){return t||(t=new r),t===e||(t.removeAll(),(s=e)&&(Array.isArray(s)||"items"in s&&Array.isArray(s.items))?t.addMany(e):e&&t.add(e)),t;var s}function n(e){return e}},30316:(e,t,r)=>{"use strict";function i(e){}function s(e){return()=>e}r.d(t,{n:()=>i,o:()=>s}),r(80219)},87682:(e,t,r)=>{"use strict";r.d(t,{c:()=>n,e:()=>o,o:()=>i,t:()=>s});const i=!0,s=32,n=1.5,o=200},78082:(e,t,r)=>{"use strict";r.d(t,{n:()=>s}),r(33807);var i=r(60816);function s(e,t,r){var s;const u=e.byteLength/(4*t),c=new Uint32Array(e,0,u*t);let h=new Uint32Array(u);const p=null!=(s=null==r?void 0:r.minReduction)?s:0,d=(null==r?void 0:r.originalIndices)||null,y=d?d.length:0,f=(null==r?void 0:r.componentOffsets)||null;let m=0;if(f)for(let e=0;e<f.length-1;e++){const t=f[e+1]-f[e];t>m&&(m=t)}else m=u;const g=Math.floor(1.1*m)+1;(null==l||l.length<2*g)&&(l=new Uint32Array((0,i.O)(2*g)));for(let e=0;e<2*g;e++)l[e]=0;let v=0;const b=!!f&&!!d,w=b?y:u,_=b?new Uint32Array(y):null,x=1.96;let S=0!==p?Math.ceil(4*x*x/(p*p)*p*(1-p)):w,T=1,M=f?f[1]:w;for(let e=0;e<w;e++){if(e===S){const t=1-v/e;if(t+x*Math.sqrt(t*(1-t)/e)<p)return null;S*=2}if(e===M){for(let e=0;e<2*g;e++)l[e]=0;if(d)for(let e=f[T-1];e<f[T];e++)_[e]=h[d[e]];M=f[++T]}const r=b?d[e]:e,i=r*t,s=a(c,i,t);let o=s%g,u=v;for(;0!==l[2*o+1];){if(l[2*o]===s){const e=l[2*o+1]-1;if(n(c,i,e*t,t)){u=h[e];break}}o++,o>=g&&(o-=g)}u===v&&(l[2*o]=s,l[2*o+1]=r+1,v++),h[r]=u}if(0!==p&&1-v/u<p)return null;if(b){for(let e=f[T-1];e<_.length;e++)_[e]=h[d[e]];h=_}const E=new Uint32Array(t*v);v=0;for(let e=0;e<w;e++)h[e]===v&&(o(c,(b?d[e]:e)*t,E,v*t,t),v++);if(d&&!b){const e=new Uint32Array(y);for(let t=0;t<e.length;t++)e[t]=h[d[t]];h=e}return{buffer:E.buffer,indices:h,uniqueCount:v}}function n(e,t,r,i){for(let s=0;s<i;s++)if(e[t+s]!==e[r+s])return!1;return!0}function o(e,t,r,i,s){for(let n=0;n<s;n++)r[i+n]=e[t+n]}function a(e,t,r){let i=0;for(let s=0;s<r;s++)i=e[t+s]+i|0,i=i+(i<<11)+(i>>>2)|0;return i>>>0}let l=null},40481:(e,t,r)=>{"use strict";r.d(t,{N:()=>c,O:()=>h,a:()=>l,c:()=>o,j:()=>p,u:()=>a,y:()=>u}),r(80219);var i=r(81135),s=r(94527),n=r(78730);const o=i.y.fromJSON(n.l),a=s.m.fromJSON(n.o),l=i.S.fromJSON(n.S),u=i.i.fromJSON(n.t),c=i.y.fromJSON(n.r),h=s.m.fromJSON(n.s),p=i.S.fromJSON(n.y)},78730:(e,t,r)=>{"use strict";r.d(t,{S:()=>a,e:()=>i,i:()=>s,l:()=>n,o:()=>o,r:()=>u,s:()=>c,t:()=>l,y:()=>h});const i=[252,146,31,255],s=[153,153,153,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},h={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},30665:(e,t,r)=>{"use strict";r.d(t,{A:()=>v,J:()=>x,M:()=>d,N:()=>y,O:()=>S,S:()=>w,T:()=>_,j:()=>p,v:()=>g,w:()=>b,z:()=>f});var i=r(7121),s=r(80219),n=r(61481),o=r(92858),a=r(53185),l=r(58404),u=r(28090),c=r(80987),h=r(47365);class p{constructor(e,t,r){this.uid=e,this.geometry=t,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null}}function d(e){return(0,s.r)(e.geometry)}class y{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function f(e){const t=c.i.fromJSON(e.geometryType),r=o.k.fromJSON(e.spatialReference),i=e.transform,a=e.features.map((o=>{const a=function(e,t,r,i){return{uid:(0,n.e)(),objectId:i&&e.attributes?e.attributes[i]:null,attributes:e.attributes,geometry:m(e.geometry,t,r),visible:!0}}(o,t,r,e.objectIdFieldName),l=a.geometry;if((0,s.r)(l)&&i)switch(l.type){case"point":a.geometry=(0,u.k)(i,l,l,l.hasZ,l.hasM);break;case"multipoint":a.geometry=(0,u.U)(i,l,l,l.hasZ,l.hasM);break;case"polygon":a.geometry=(0,u.q)(i,l,l,l.hasZ,l.hasM);break;case"polyline":a.geometry=(0,u.v)(i,l,l,l.hasZ,l.hasM);break;case"extent":case"mesh":a.geometry=l}return a}));return{geometryType:t,features:a,spatialReference:r,fields:e.fields?e.fields.map((e=>h.y.fromJSON(e))):null,objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}}function m(e,t,r){if(!e)return null;switch(t){case"point":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:"point",spatialReference:r}}case"polyline":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polyline",spatialReference:r}}case"polygon":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polygon",spatialReference:r}}case"multipoint":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"multipoint",spatialReference:r}}}}function g(e,t,r,i){return{x:e,y:t,z:r,hasZ:null!=r,hasM:!1,spatialReference:i,type:"point"}}function v(e){let t=32;return t+=(0,i.e)(e.attributes),t+=3,t+=8+function(e){if((0,s.t)(e))return 0;let t=32;switch(e.type){case"point":t+=42;break;case"polyline":case"polygon":{let r=0;const i=2+(e.hasZ?1:0)+(e.hasM?1:0),s="polyline"===e.type?e.paths:e.rings;for(const e of s)r+=e.length;t+=8*r*i+64,t+=128*r,t+=34,t+=32*(s.length+1);break}case"multipoint":{const r=2+(e.hasZ?1:0)+(e.hasM?1:0),i=e.points.length;t+=8*i*r+64,t+=128*i,t+=34,t+=32;break}case"extent":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case"mesh":t+=(0,s.L)(e.vertexAttributes.position),t+=(0,s.L)(e.vertexAttributes.normal),t+=(0,s.L)(e.vertexAttributes.uv),t+=(0,s.L)(e.vertexAttributes.tangent)}return t}(e.geometry),t}function b(e){if((0,s.t)(e))return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const r of e.paths)t+=r.length;return t}case"polygon":{let t=0;for(const r of e.rings)t+=r.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function w(e){if((0,s.t)(e))return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":for(const t of e.paths)if(t.length>0)return!0;return!1;case"polygon":for(const t of e.rings)if(t.length>0)return!0;return!1;case"multipoint":return e.points.length>0;case"mesh":return!e.loaded||e.vertexAttributes.position.length>0}}function _(e,t){switch((0,a.B)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let r=0;r<e.paths.length;r++)(0,a.s)(t,e.paths[r],e.hasZ);break;case"polygon":for(let r=0;r<e.rings.length;r++)(0,a.s)(t,e.rings[r],e.hasZ);break;case"multipoint":(0,a.s)(t,e.points,e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function x(e,t){switch((0,l.B)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let r=0;r<e.paths.length;r++)(0,l.m)(t,e.paths[r]);break;case"polygon":for(let r=0;r<e.rings.length;r++)(0,l.m)(t,e.rings[r]);break;case"multipoint":(0,l.m)(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function S(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}(0,a.a)(),(0,l.i)()},84271:(e,t,r)=>{"use strict";r.d(t,{a:()=>d,d:()=>m,m:()=>f,y:()=>y});var i=r(78155),s=r(40130),n=r(80219),o=r(88903);const a=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function l(e){return e instanceof i.p}function u(e){return e instanceof s.L?Object.keys(e.items):l(e)?(0,o.e)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof s.L?e.items[t]:e[t]}function h(e){return e?e.declaredClass:null}function p(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const i=u(e),s=u(t);if(0===i.length&&0===s.length)return;if(!i.length||!s.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=s.filter((e=>-1===i.indexOf(e))),d=i.filter((e=>-1===s.indexOf(e))),y=i.filter((r=>s.indexOf(r)>-1&&c(e,r)!==c(t,r))).concat(o,d).sort(),f=h(e);if(f&&a.indexOf(f)>-1&&y.length)return{type:"complete",oldValue:e,newValue:t};let m;const g=l(e)&&l(t);for(const i of y){const s=c(e,i),o=c(t,i);let a;(g||"function"!=typeof s&&"function"!=typeof o)&&s!==o&&(null==s&&null==o||(a=r&&r[i]&&"function"==typeof r[i]?r[i](s,o):"object"==typeof s&&"object"==typeof o&&h(s)===h(o)?p(s,o):{type:"complete",oldValue:s,newValue:o},(0,n.r)(a)&&((0,n.r)(m)?m.diff[i]=a:m={type:"partial",diff:{[i]:a}})))}return m}function d(e,t){if((0,n.t)(e))return!1;const r=t.split(".");let i=e;for(const e of r){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const t=i.diff[e];if(!t)return!1;i=t}}return!0}function y(e,t){for(const r of t)if(d(e,r))return!0;return!1}function f(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&h(e)!==h(t)?{type:"complete",oldValue:e,newValue:t}:p(e,t)}function m(e){if((0,n.t)(e))return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},87405:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var i,s,n={exports:{}};i=n,void 0!==(s=function(){function e(e,r,s){s=s||2;var n,o,a,u,c,h,p,d=r&&r.length,y=d?r[0]*s:e.length,f=t(e,0,y,s,!0),m=[];if(!f||f.next===f.prev)return m;if(d&&(f=l(e,r,f,s)),e.length>80*s){n=a=e[0],o=u=e[1];for(var g=s;g<y;g+=s)(c=e[g])<n&&(n=c),(h=e[g+1])<o&&(o=h),c>a&&(a=c),h>u&&(u=h);p=0!==(p=Math.max(a-n,u-o))?1/p:0}return i(f,m,s,n,o,p),m}function t(e,t,r,i,s){var n,o;if(s===I(e,t,r,i)>0)for(n=t;n<r;n+=i)o=T(n,e[n],e[n+1],o);else for(n=r-i;n>=t;n-=i)o=T(n,e[n],e[n+1],o);return o&&v(o,o.next)&&(M(o),o=o.next),o}function r(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!v(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(M(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function i(e,t,l,u,c,h,d){if(e){!d&&h&&p(e,u,c,h);for(var y,f,m=e;e.prev!==e.next;)if(y=e.prev,f=e.next,h?n(e,u,c,h):s(e))t.push(y.i/l),t.push(e.i/l),t.push(f.i/l),M(e),e=f.next,m=f.next;else if((e=f)===m){d?1===d?i(e=o(r(e),t,l),t,l,u,c,h,2):2===d&&a(e,t,l,u,c,h):i(r(e),t,l,u,c,h,1);break}}}function s(e){var t=e.prev,r=e,i=e.next;if(g(t,r,i)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(f(t.x,t.y,r.x,r.y,i.x,i.y,s.x,s.y)&&g(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function n(e,t,r,i){var s=e.prev,n=e,o=e.next;if(g(s,n,o)>=0)return!1;for(var a=s.x<n.x?s.x<o.x?s.x:o.x:n.x<o.x?n.x:o.x,l=s.y<n.y?s.y<o.y?s.y:o.y:n.y<o.y?n.y:o.y,u=s.x>n.x?s.x>o.x?s.x:o.x:n.x>o.x?n.x:o.x,c=s.y>n.y?s.y>o.y?s.y:o.y:n.y>o.y?n.y:o.y,h=d(a,l,t,r,i),p=d(u,c,t,r,i),y=e.prevZ,m=e.nextZ;y&&y.z>=h&&m&&m.z<=p;){if(y!==e.prev&&y!==e.next&&f(s.x,s.y,n.x,n.y,o.x,o.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,m!==e.prev&&m!==e.next&&f(s.x,s.y,n.x,n.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;y&&y.z>=h;){if(y!==e.prev&&y!==e.next&&f(s.x,s.y,n.x,n.y,o.x,o.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;m&&m.z<=p;){if(m!==e.prev&&m!==e.next&&f(s.x,s.y,n.x,n.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function o(e,t,i){var s=e;do{var n=s.prev,o=s.next.next;!v(n,o)&&b(n,s,s.next,o)&&x(n,o)&&x(o,n)&&(t.push(n.i/i),t.push(s.i/i),t.push(o.i/i),M(s),M(s.next),s=e=o),s=s.next}while(s!==e);return r(s)}function a(e,t,s,n,o,a){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&m(l,u)){var c=S(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,t,s,n,o,a),void i(c,t,s,n,o,a)}u=u.next}l=l.next}while(l!==e)}function l(e,i,s,n){var o,a,l,h=[];for(o=0,a=i.length;o<a;o++)(l=t(e,i[o]*n,o<a-1?i[o+1]*n:e.length,n,!1))===l.next&&(l.steiner=!0),h.push(y(l));for(h.sort(u),o=0;o<h.length;o++)c(h[o],s),s=r(s,s.next);return s}function u(e,t){return e.x-t.x}function c(e,t){if(t=function(e,t){var r,i=t,s=e.x,n=e.y,o=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var a=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=s&&a>o){if(o=a,a===s){if(n===i.y)return i;if(n===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(s===o)return r;var l,u=r,c=r.x,p=r.y,d=1/0;i=r;do{s>=i.x&&i.x>=c&&s!==i.x&&f(n<p?s:o,n,c,p,n<p?o:s,n,i.x,i.y)&&(l=Math.abs(n-i.y)/(s-i.x),x(i,e)&&(l<d||l===d&&(i.x>r.x||i.x===r.x&&h(r,i)))&&(r=i,d=l)),i=i.next}while(i!==u);return r}(e,t)){var i=S(t,e);r(t,t.next),r(i,i.next)}}function h(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function p(e,t,r,i){var s=e;do{if(null===s.z&&(s.z=d(s.x,s.y,t,r,i)),s.prev.next!==s||s.next.prev!==s)return s.prev.next=s,s.next.prev=s,p(e,t,r,i);s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,r,i,s,n,o,a,l,u=1;do{for(r=e,e=null,n=null,o=0;r;){for(o++,i=r,a=0,t=0;t<u&&(a++,i=i.nextZ);t++);for(l=u;a>0||l>0&&i;)0!==a&&(0===l||!i||r.z<=i.z)?(s=r,r=r.nextZ,a--):(s=i,i=i.nextZ,l--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;r=i}n.nextZ=null,u*=2}while(o>1)}(s)}function d(e,t,r,i,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function y(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function f(e,t,r,i,s,n,o,a){return(s-o)*(t-a)-(e-o)*(n-a)>=0&&(e-o)*(i-a)-(r-o)*(t-a)>=0&&(r-o)*(n-a)-(s-o)*(i-a)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&b(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var r=e,i=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do{r.y>n!=r.next.y>n&&r.next.y!==r.y&&s<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||v(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,r,i){var s=_(g(e,t,r)),n=_(g(e,t,i)),o=_(g(r,i,e)),a=_(g(r,i,t));return s!==n&&o!==a||!(0!==s||!w(e,r,t))||!(0!==n||!w(e,i,t))||!(0!==o||!w(r,e,i))||!(0!==a||!w(r,t,i))}function w(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function _(e){return e>0?1:e<0?-1:0}function x(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function S(e,t){var r=new E(e.i,e.x,e.y),i=new E(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,i.next=r,r.prev=i,n.next=i,i.prev=n,i}function T(e,t,r,i){var s=new E(e,t,r);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function E(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,r,i){for(var s=0,n=t,o=r-i;n<r;n+=i)s+=(e[o]-e[n])*(e[n+1]+e[o+1]),o=n;return s}return e.deviation=function(e,t,r,i){var s=t&&t.length,n=s?t[0]*r:e.length,o=Math.abs(I(e,0,n,r));if(s)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;o-=Math.abs(I(e,u,c,r))}var h=0;for(a=0;a<i.length;a+=3){var p=i[a]*r,d=i[a+1]*r,y=i[a+2]*r;h+=Math.abs((e[p]-e[y])*(e[d+1]-e[p+1])-(e[p]-e[d])*(e[y+1]-e[p+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var o=0;o<t;o++)r.vertices.push(e[s][n][o]);s>0&&(i+=e[s-1].length,r.holes.push(i))}return r},e}())&&(i.exports=s);var o=n.exports},29126:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var i=r(31531),s=r(88903);function n(e,t={}){var r;const n=e instanceof i.o?e:new i.o(e,t),o={type:null==(r=null==t?void 0:t.ignoreUnknown)||r?n.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:n.jsonValues,read:(null==t||!t.readOnly)&&{reader:n.read},write:{writer:n.write}}};return void 0!==(null==t?void 0:t.default)&&(o.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(o.json.name=t.name),(0,s.y)(o)}},29831:(e,t,r)=>{"use strict";r.d(t,{$:()=>j,A:()=>L,B:()=>V,C:()=>U,I:()=>g,J:()=>q,K:()=>G,Q:()=>$,U:()=>N,V:()=>R,W:()=>W,X:()=>H,a:()=>ne,b:()=>ue,c:()=>ee,e:()=>J,f:()=>se,g:()=>oe,l:()=>te,n:()=>X,o:()=>Y,p:()=>m,r:()=>Q,s:()=>K,w:()=>w,y:()=>le});var i=r(20215),s=r(80219),n=r(89710),o=r(91728),a=r(30691);function l(e,t){return e?t?4:3:t?3:2}const u=s.n.getLogger("esri.tasks.support.optimizedFeatureSet"),c={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},h=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n},p=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[i+2]},d=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[i+3]},y=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[i+2],e[r+3]=t[i+3]};function f(e,t,r,i){if(e){if(r)return t&&i?y:p;if(t&&i)return d}else if(t&&i)return p;return h}function m({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function g({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function v({scale:e,translate:t},r){return r*e[0]+t[0]}function b({scale:e,translate:t},r){return t[1]-r*e[1]}function w(e,t,r){return e?t?r?I(e):S(e):r?M(e):_(e):null}function _(e){const t=e.coords;return{x:t[0],y:t[1]}}function x(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function S(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function M(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function E(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function I(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function O(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function A(e,t){return e&&t?O:e?T:t?E:x}function P(e,t,r,i,s){const n=A(r,i);for(const r of t){const{geometry:t,attributes:i}=r;let a;t&&(a=n(new o.a,t)),e.push(new o.t(a,i,null,i[s]))}return e}function R(e,t,r){if(!e)return null;const i=l(t,r),s=[];for(let t=0;t<e.coords.length;t+=i){const r=[];for(let s=0;s<i;s++)r.push(e.coords[t+s]);s.push(r)}return t?r?{points:s,hasZ:t,hasM:r}:{points:s,hasZ:t}:r?{points:s,hasM:r}:{points:s}}function F(e,t,r,i,s){const n=l(r,i);for(const r of t){const t=r.geometry,i=r.attributes;let a;t&&(a=C(new o.a,t,n)),e.push(new o.t(a,i,null,i[s]))}return e}function C(e,t,r=l(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const i=e.coords;let s=0;for(const e of t.points)for(let t=0;t<r;t++)i[s++]=e[t];return e}function L(e,t,r){if(!e)return null;const i=l(t,r),{coords:s,lengths:n}=e,o=[];let a=0;for(const e of n){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<i;t++)e.push(s[a++]);t.push(e)}o.push(t)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function k(e,t,r,i,s){const n=l(r,i);for(const r of t){const t=r.geometry,i=r.attributes;let a;t&&(a=N(new o.a,t,n)),e.push(new o.t(a,i,null,i[s]))}return e}function N(e,t,r=l(t.hasZ,t.hasM)){const{lengths:i,coords:s}=e;let n=0;for(const e of t.paths){for(const t of e)for(let e=0;e<r;e++)s[n++]=t[e];i.push(e.length)}return e}function j(e,t,r){if(!e)return null;const i=l(t,r),{coords:s,lengths:n}=e,o=[];let a=0;for(const e of n){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<i;t++)e.push(s[a++]);t.push(e)}o.push(t)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function D(e,t,r,i,s){for(const n of t){const t=n.geometry,a=n.centroid,l=n.attributes;let u;t&&(u=U(new o.a,t,r,i)),a?e.push(new o.t(u,l,x(new o.a,a),l[s])):e.push(new o.t(u,l,null,l[s]))}return e}function U(e,t,r=t.hasZ,i=t.hasM){return V(e,t.rings,r,i),e}function V(e,t,r,i){const s=l(r,i),{lengths:n,coords:o}=e;let a=0;n.length=o.length=0;for(const e of t){for(const t of e)for(let e=0;e<s;e++)o[a++]=t[e];n.push(e.length)}return e}const B=[],z=[];function q(e,t,r,i,s){B[0]=e;const[n]=G(z,B,t,r,i,s);return B.length=z.length=0,n}function G(e,t,r,s,n,a){if(e.length=0,!r){for(const r of t){const t=r.attributes[a];e.push(new o.t(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return P(e,t,s,n,a);case"esriGeometryMultipoint":return F(e,t,s,n,a);case"esriGeometryPolyline":return k(e,t,s,n,a);case"esriGeometryPolygon":return D(e,t,s,n,a);default:u.error("convertToFeatureSet:unknown-geometry",new i.s(`Unable to parse unknown geometry type '${r}'`)),e.length=0}return e}function $(e,t,r,s,n,o){const a=e.length;switch(r){case"esriGeometryPoint":P(e,t,s,n,o);break;case"esriGeometryMultipoint":F(e,t,s,n,o);break;case"esriGeometryPolyline":k(e,t,s,n,o);break;case"esriGeometryPolygon":D(e,t,s,n,o);break;default:u.error("convertToFeatureSet:unknown-geometry",new i.s(`Unable to parse unknown geometry type '${r}'`))}for(let i=0;i<t.length;i++)e[i+a].geometryType=r,e[i+a].insertAfter=t[i].insertAfter,e[i+a].groupId=t[i].groupId;return e}function W(e,t,r,i){z[0]=e,Z(B,z,t,r,i);const s=B[0];return B.length=z.length=0,s}function H(e,t,r){if(!e)return null;const s=new o.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,n.l)(e)?A(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(s,e):(0,n.y)(e)?U(s,e,t,r):(0,n.f)(e)?N(s,e,l(t,r)):(0,n.s)(e)?C(s,e,l(t,r)):void u.error("convertFromGeometry:unknown-geometry",new i.s(`Unable to parse unknown geometry type '${e}'`))}function J(e,t,r,s){const n=e&&("coords"in e?e:e.geometry);if(!n)return null;switch(t){case"esriGeometryPoint":{let e=_;return r&&s?e=I:r?e=S:s&&(e=M),e(n)}case"esriGeometryMultipoint":return R(n,r,s);case"esriGeometryPolyline":return L(n,r,s);case"esriGeometryPolygon":return j(n,r,s);default:return void u.error("convertToGeometry:unknown-geometry",new i.s(`Unable to parse unknown geometry type '${t}'`))}}function Z(e,t,r,s,n){switch(e.length=0,r){case"esriGeometryPoint":return function(e,t,r,i){let s=_;r&&i?s=I:r?s=S:i&&(s=M);for(const r of t){const{geometry:t,attributes:i}=r,n=t?s(t):null;e.push({attributes:i,geometry:n})}return e}(e,t,s,n);case"esriGeometryMultipoint":return function(e,t,r,i){for(const s of t){const{geometry:t,attributes:n}=s;let o;t&&(o=R(t,r,i)),e.push({attributes:n,geometry:o})}return e}(e,t,s,n);case"esriGeometryPolyline":return function(e,t,r,i){for(const s of t){const{geometry:t,attributes:n}=s;let o;t&&(o=L(t,r,i)),e.push({attributes:n,geometry:o})}return e}(e,t,s,n);case"esriGeometryPolygon":return function(e,t,r,i){for(const s of t){const{geometry:t,attributes:n,centroid:o}=s;let a;if(t&&(a=j(t,r,i)),o){const t=_(o);e.push({attributes:n,centroid:t,geometry:a})}else e.push({attributes:n,geometry:a})}return e}(e,t,s,n);default:u.error("convertToFeatureSet:unknown-geometry",new i.s(`Unable to parse unknown geometry type '${r}'`))}return e}function X(e){const{objectIdFieldName:t,spatialReference:r,transform:i,fields:s,hasM:n,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:h,queryGeometryType:p}=e,d={features:Z([],a,l,o,n),fields:s,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:c,queryGeometry:J(h,p,!1,!1)};return i&&(d.transform=i),u&&(d.exceededTransferLimit=u),n&&(d.hasM=n),o&&(d.hasZ=o),d}function Y(e,t){const r=new a.e,{hasM:s,hasZ:n,features:o,objectIdFieldName:l,spatialReference:c,geometryType:h,exceededTransferLimit:p,transform:d,fields:y}=e;return y&&(r.fields=y),r.geometryType=h,r.objectIdFieldName=l||t,r.spatialReference=c,r.objectIdFieldName?(o&&G(r.features,o,h,n,s,r.objectIdFieldName),p&&(r.exceededTransferLimit=p),s&&(r.hasM=s),n&&(r.hasZ=n),d&&(r.transform=d),r):(u.error(new i.s("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function Q(e){const{transform:t,features:r,hasM:i,hasZ:s}=e;if(!t)return e;for(const e of r)e.geometry&&ne(e.geometry,e.geometry,i,s,t),e.centroid&&ne(e.centroid,e.centroid,i,s,t);return e.transform=null,e}function K(e,t){const{geometryType:r,features:i,hasM:s,hasZ:n}=t;if(!e)return t;for(let t=0;t<i.length;t++){const a=i[t],l=a.weakClone();l.geometry=new o.a,ee(l.geometry,a.geometry,s,n,r,e),a.centroid&&(l.centroid=new o.a,ee(l.centroid,a.centroid,s,n,"esriGeometryPoint",e)),i[t]=l}return t.transform=e,t}function ee(e,t,r,i,s,n,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=c[s],{coords:h,lengths:p}=t,d=l(r,i),y=l(r&&o,i&&a),v=f(r,i,o,a);if(!p.length)return v(e.coords,h,0,0,m(n,h[0]),g(n,h[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=d,e;let b,w,_,x,S=0,T=0,M=T;for(const t of p){if(t<u)continue;let r=0;T=M,_=b=m(n,h[S]),x=w=g(n,h[S+1]),v(e.coords,h,T,S,_,x),r++,S+=d,T+=y;for(let i=1;i<t;i++,S+=d)_=m(n,h[S]),x=g(n,h[S+1]),_===b&&x===w||(v(e.coords,h,T,S,_-b,x-w),T+=y,r++,b=_,w=x);r>=u&&(e.lengths.push(r),M=T)}return e.coords.length=M,e.coords.length?e:null}function te(e,t,r,i,s,n,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=c[s],{coords:h,lengths:p}=t,d=l(r,i),y=l(r&&o,i&&a),m=f(r,i,o,a);if(!p.length)return m(e.coords,h,0,0,h[0],h[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=d,e;let g=0;const v=n*n;for(const t of p){if(t<u){g+=t*d;continue}const r=e.coords.length/y,i=g,s=g+(t-1)*d;m(e.coords,h,e.coords.length,i,h[i],h[i+1]),ie(e.coords,h,d,v,m,i,s),m(e.coords,h,e.coords.length,s,h[s],h[s+1]);const n=e.coords.length/y-r;n>=u?e.lengths.push(n):e.coords.length=r*y,g+=t*d}return e.coords.length?e:null}function re(e,t,r,i){const s=e[t],n=e[t+1],o=e[r],a=e[r+1],l=e[i],u=e[i+1];let c=o,h=a,p=l-c,d=u-h;if(0!==p||0!==d){const e=((s-c)*p+(n-h)*d)/(p*p+d*d);e>1?(c=l,h=u):e>0&&(c+=p*e,h+=d*e)}return p=s-c,d=n-h,p*p+d*d}function ie(e,t,r,i,s,n,o){let a,l=i,u=0;for(let e=n+r;e<o;e+=r)a=re(t,e,n,o),a>l&&(u=e,l=a);l>i&&(u-n>r&&ie(e,t,r,i,s,n,u),s(e,t,e.length,u,t[u],t[u+1]),o-u>r&&ie(e,t,r,i,s,u,o))}function se(e,t,r,i){if(!t||!t.coords||!t.coords.length)return null;const s=l(r,i);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=s){const r=e[t],i=e[t+1];n=Math.min(n,r),a=Math.max(a,r),o=Math.min(o,i),u=Math.max(u,i)}}return e[0]=n,e[1]=o,e[2]=a,e[3]=u,e}function ne(e,t,r,i,s){const{coords:n,lengths:o}=t,a=r?i?y:p:i?p:h,u=l(r,i);if(!n.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,n,0,0,v(s,n[0]),b(s,n[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;const[c,d]=s.scale;let f=0;for(let t=0;t<o.length;t++){const r=o[t];e.lengths[t]=r;let i=v(s,n[f]),l=b(s,n[f+1]);a(e.coords,n,f,f,i,l),f+=u;for(let t=1;t<r;t++,f+=u)i+=n[f]*c,l-=n[f+1]*d,a(e.coords,n,f,f,i,l)}return e!==t&&(e.lengths.length=o.length,e.coords.length=n.length),e}function oe(e,t,r,i,s,n){const o=l(r,i),a=f(r,i,s,n),u=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let t=0;t<u.length;t+=o)a(e.coords,u,e.coords.length,t,u[t],u[t+1]);return e}function ae(e,t,r,i){let s=0,n=e[i*t],o=e[i*(t+1)];for(let a=1;a<r;a++){const r=n+e[i*(t+a)],l=o+e[i*(t+a)+1],u=(r-n)*(l+o);n=r,o=l,s+=u}return.5*s}function le(e,t){const{coords:r,lengths:i}=e;let s=0,n=0;for(let e=0;e<i.length;e++)n+=ae(r,s,i[e],t),s+=e;return Math.abs(n)}function ue(e,t){const r=e.clone(),i=e.coords,s=e.lengths;let n=0;for(let e=0;e<s.length;e++){const o=s[e];let a=i[t*n],l=i[t*n+1];for(let e=1;e<o;e++){const s=a+i[t*(n+e)],o=l+i[t*(n+e)+1];r.coords[t*(n+e)]=s,r.coords[t*(n+e)+1]=o,a=s,l=o}n+=o}return r}},2570:(e,t,r)=>{"use strict";r.d(t,{c:()=>l,s:()=>o,u:()=>a});var i=r(20215),s=r(80219),n=r(92758);const o={key:"type",base:n.p,typeMap:{selection:n.c}};function a(e,t){const r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return n.c.fromJSON(r);case"cluster":return n.b.fromJSON(r)}return null}function l(e,t,r,n){const o=(l=n,(a=e)?"selection"!==a.type?(l.messages&&l.messages.push(new i.s("featureReduction:unsupported",`FeatureReduction of type '${a.declaredClass}' are not supported in scenes.`,{featureReduction:a,context:l})),null):a.write({},l):null);var a,l;o&&(0,s.o)(r,o,t)}},72257:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var i=r(80219),s=r(47365),n=r(2502),o=r(52957);const a=i.n.getLogger("esri.layers.support.fieldProperties");function l(){return{fields:{type:[s.y],value:null},fieldsIndex:{readOnly:!0,get(){return new n.e(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||a.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return(0,o.p)(this.fieldsIndex,e)}}}}},67079:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});const i=new(r(31531).o)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},52957:(e,t,r)=>{"use strict";r.d(t,{A:()=>Z,D:()=>Q,E:()=>X,F:()=>q,I:()=>G,J:()=>ce,L:()=>K,T:()=>$,V:()=>Y,X:()=>he,Z:()=>ye,a:()=>P,b:()=>x,c:()=>j,d:()=>O,e:()=>E,f:()=>xe,g:()=>z,h:()=>H,i:()=>b,j:()=>F,k:()=>ee,l:()=>fe,m:()=>U,n:()=>C,o:()=>_e,p:()=>B,q:()=>L,r:()=>Se,s:()=>R,t:()=>p,u:()=>I});var i,s=r(20215),n=r(80219),o=r(78155),a=r(88903),l=r(29126),u=r(31531),c=(r(80987),r(92858));let h=i=class extends o.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,o.e)([(0,a.y)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,o.e)([(0,a.y)({type:[String,Number],json:{write:!0}})],h.prototype,"code",void 0),h=i=(0,o.e)([(0,a.n)("esri.layers.support.CodedValue")],h);var p=h;const d=new u.o({inherited:"inherited",codedValue:"coded-value",range:"range"});let y=class extends o.a{constructor(e){super(e),this.name=null,this.type=null}};(0,o.e)([(0,a.y)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,o.e)([(0,l.r)(d)],y.prototype,"type",void 0),y=(0,o.e)([(0,a.n)("esri.layers.support.Domain")],y);var f,m=y;let g=f=class extends m{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new f({codedValues:(0,n.y)(this.codedValues),name:this.name})}};(0,o.e)([(0,a.y)({type:[p],json:{write:!0}})],g.prototype,"codedValues",void 0),(0,o.e)([(0,l.r)({codedValue:"coded-value"})],g.prototype,"type",void 0),g=f=(0,o.e)([(0,a.n)("esri.layers.support.CodedValueDomain")],g);var v,b=g;let w=v=class extends m{constructor(e){super(e),this.type="inherited"}clone(){return new v}};(0,o.e)([(0,l.r)({inherited:"inherited"})],w.prototype,"type",void 0),w=v=(0,o.e)([(0,a.n)("esri.layers.support.InheritedDomain")],w);var _,x=w;let S=_=class extends m{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new _({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,o.e)([(0,a.y)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],S.prototype,"maxValue",void 0),(0,o.e)([(0,a.y)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],S.prototype,"minValue",void 0),(0,o.e)([(0,l.r)({range:"range"})],S.prototype,"type",void 0),S=_=(0,o.e)([(0,a.n)("esri.layers.support.RangeDomain")],S);var T,M,E=S;(M=T||(T={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",M.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const I={key:"type",base:m,typeMap:{range:E,"coded-value":b,inherited:x}};function O(e){if(!e||!e.type)return null;switch(e.type){case"range":return E.fromJSON(e);case"codedValue":return b.fromJSON(e);case"inherited":return x.fromJSON(e)}return null}let A;async function P(){return A||(A=(async()=>{const e=await Promise.all([r.e(9787),r.e(9351)]).then(r.bind(r,9389)).then((function(e){return e.aq}));return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),A}const R=(e,t,r)=>L.create(e,t,r,null,["$feature"]),F=(e,t,r)=>L.create(e,t,r,null,["$feature","$view"]),C=(e,t,r,i)=>L.create(e,t,r,i,["$feature","$view"]);class L{constructor(e,t,r,i,s,n,o,a){this.script=e,this.evaluate=s;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=i,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=n,this._spatialReference=a,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,r,i,s,o){const{arcade:a,Feature:l,Dictionary:u}=await P(),h=c.k.fromJSON(t),p=a.parseScript(e,o),d=s.reduce(((e,t)=>({...e,[t]:null})),{});let y=null;(0,n.r)(i)&&(y=new u(i),y.immutable=!0,d.$config=null);const f=a.scriptUsesGeometryEngine(p)&&a.enableGeometrySupport(),m=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),g=a.scriptIsAsync(p)&&a.enableAsyncSupport(),v={vars:d,spatialReference:h,useAsync:!!g},b=new u;b.immutable=!1,b.setField("scale",0);const w=a.compileScript(p,v);return await Promise.all([f,m,g]),new L(e,a,u,p,(e=>("$view"in e&&e.$view&&(b.setField("scale",e.$view.scale),e.$view=b),y&&(e.$config=y),w({vars:e,spatialReference:h}))),new l,r,h)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}const k=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],N=["field","normalizationField"];function j(e,t){if(null!=e&&null!=t)for(const r of Array.isArray(e)?e:[e])if(D(k,r,t),"visualVariables"in r&&r.visualVariables)for(const e of r.visualVariables)D(N,e,t)}function D(e,t,r){if(e)for(const i of e){const e=(0,n.j)(i,t),s=e&&"function"!=typeof e&&r.get(e);s&&(0,n.o)(i,s.name,t)}}function U(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=r&&r.name||null,e.endField=i&&i.name||null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=i&&i.name||null}}const V=new Set;function B(e,t){return e&&t?(V.clear(),z(V,e,t),Array.from(V).sort()):[]}function z(e,t,r){var i;if(r)if(null!=t&&null!=(i=t.fields)&&i.length)if(r.includes("*"))for(const{name:r}of t.fields)e.add(r);else for(const i of r)q(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const t of r)e.add(t)}}function q(e,t,r){if("string"==typeof r)if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function G(e,t){return(0,n.t)(t)||(0,n.t)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function $(e,t,r){if(!r)return;const{arcadeUtils:i}=await P(),s=i.extractFieldNames(r);for(const r of s)q(e,t,r)}async function W(e,t,i){if(i&&"1=1"!==i){const n=(await r.e(9351).then(r.bind(r,54622))).WhereClause.create(i,t);if(!n.isStandardized)throw new s.s("fieldUtils:collectFilterFields","Where clause is not standardized");z(e,t,n.fieldNames)}}function H({displayField:e,fields:t}){return e||(t&&t.length?J(t,"name-or-title")||J(t,"unique-identifier")||J(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function J(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function Z(e,t){if(!t)return;const r=(0,n.j)("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function X(e,t,r){t&&r&&"cluster"===r.type&&r.fields&&await Promise.all(r.fields.map((r=>async function(e,t,r){r.outStatistic.onStatisticValueExpression?$(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}(e,t.fieldsIndex,r))))}async function Y(e,t,r){t&&(t.timeInfo&&(0,n.r)(r)&&r.timeExtent&&z(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&z(e,t.fieldsIndex,[t.floorInfo.floorField]),(0,n.r)(r)&&(0,n.r)(r.where)&&await W(e,t.fieldsIndex,r.where))}function Q(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?B(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function K(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r&&r.length&&await Promise.all(r.map((t=>async function(e,t,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if("arcade"===i.type)await $(e,t,i.expression);else{const r=i.expression.match(/{[^}]*}/g);r&&r.forEach((r=>{q(e,t,r.slice(1,-1))}))}await W(e,t,s)}(e,i,t))))}function ee(e){const t=e.defaultValue;return void 0!==t&&le(e,t)?t:e.nullable?null:void 0}function te(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function re(e){return null===e||te(e)}const ie="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function se(e){return null===e||ie(e)}function ne(e){return null!=e&&"string"==typeof e}function oe(e){return null===e||ne(e)}function ae(){return!0}function le(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?se:ie;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?re:te;break;case"string":case"esriFieldTypeString":r=e.nullable?oe:ne;break;default:r=ae}return 1===arguments.length?r:r(t)}const ue=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function ce(e){return null!=e&&ue.has(e.type)}function he(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}var pe,de;function ye(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function fe(e,t){return e.nullable&&null===t?null:ce(e)&&!function(e,t){const r="string"==typeof e?me(e):e;return!!r&&(r.isInteger?ie(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?pe.OUT_OF_RANGE:le(e,t)?e.domain?function(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return T.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return T.INVALID_CODED_VALUE}return null}(e.domain,t):null:de.INVALID_TYPE}function me(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return ge;case"esriFieldTypeInteger":case"integer":return ve;case"esriFieldTypeSingle":case"single":return be;case"esriFieldTypeDouble":case"double":return we}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(pe||(pe={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(de||(de={}));const ge={min:-32768,max:32767,isInteger:!0},ve={min:-2147483648,max:2147483647,isInteger:!0},be={min:-34e37,max:12e37,isInteger:!1},we={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function _e(e,t,r){switch(e){case T.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case T.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case de.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case pe.OUT_OF_RANGE:{const{min:e,max:i}=me(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${i}`}}}function xe(e,t){return!Se(e,t,null)}function Se(e,t,r){if(!t||!t.attributes||!e){if((0,n.r)(r))for(const t of e)r.add(t);return!0}const i=t.attributes;let s=!1;for(const t of e)if(!(t in i)){if(s=!0,!(0,n.r)(r))break;r.add(t)}return s}},41392:(e,t,r)=>{"use strict";r.r(t),r.d(t,{create:()=>a,projectGeometry:()=>l});var i=r(80219),s=r(20215),n=r(52109),o=r(79949);async function a(e=null,t){if(i.d.geometryServiceUrl)return new((await r.e(8397).then(r.bind(r,18397))).default)({url:i.d.geometryServiceUrl});if(!e)throw new s.s("internal:geometry-service-url-not-configured");let o;if(o="portal"in e?e.portal||n.G.getDefault():e,await o.load({signal:t}),o.helperServices&&o.helperServices.geometry&&o.helperServices.geometry.url)return new((await r.e(8397).then(r.bind(r,18397))).default)({url:o.helperServices.geometry.url});throw new s.s("internal:geometry-service-url-not-configured")}async function l(e,t,r=null,i){const n=await a(r,i),l=new o.a;l.geometries=[e],l.outSpatialReference=t;const u=await n.project(l,{signal:i});if(u&&Array.isArray(u)&&1===u.length)return u[0];throw new s.s("internal:geometry-service-projection-failed")}r(78155),r(88903),r(6585),r(31531),r(3621),r(80987),r(98548),r(20736),r(4169),r(92858),r(63358),r(89710)},6585:(e,t,r)=>{"use strict";r.d(t,{L:()=>_,S:()=>w,a:()=>k,m:()=>E,s:()=>O,u:()=>M});var i=r(31531),s=r(3621),n=r(80219),o=r(20215),a=r(80987),l=r(63358);const u={year:"numeric",month:"numeric",day:"numeric"},c={year:"numeric",month:"long",day:"numeric"},h={year:"numeric",month:"short",day:"numeric"},p={year:"numeric",month:"long",weekday:"long",day:"numeric"},d={hour:"numeric",minute:"numeric"},y={...d,second:"numeric"},f={"short-date":u,"short-date-short-time":{...u,...d},"short-date-short-time-24":{...u,...d,hour12:!1},"short-date-long-time":{...u,...y},"short-date-long-time-24":{...u,...y,hour12:!1},"short-date-le":u,"short-date-le-short-time":{...u,...d},"short-date-le-short-time-24":{...u,...d,hour12:!1},"short-date-le-long-time":{...u,...y},"short-date-le-long-time-24":{...u,...y,hour12:!1},"long-month-day-year":c,"long-month-day-year-short-time":{...c,...d},"long-month-day-year-short-time-24":{...c,...d,hour12:!1},"long-month-day-year-long-time":{...c,...y},"long-month-day-year-long-time-24":{...c,...y,hour12:!1},"day-short-month-year":h,"day-short-month-year-short-time":{...h,...d},"day-short-month-year-short-time-24":{...h,...d,hour12:!1},"day-short-month-year-long-time":{...h,...y},"day-short-month-year-long-time-24":{...h,...y,hour12:!1},"long-date":p,"long-date-short-time":{...p,...d},"long-date-short-time-24":{...p,...d,hour12:!1},"long-date-long-time":{...p,...y},"long-date-long-time-24":{...p,...y,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":d,"long-time":y},m=(0,i.s)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});m.toJSON.bind(m),m.fromJSON.bind(m);const g={ar:"ar-u-nu-latn-ca-gregory"};let v=new WeakMap,b=f["short-date-short-time"];function w(e){return f[e]||null}function _(e,t){return function(e){const t=e||b;if(!v.has(t)){const e=(0,s.i)(),r=g[(0,s.i)()]||e;v.set(t,new Intl.DateTimeFormat(r,t))}return v.get(t)}(t).format(e)}(0,s.p)((()=>{v=new WeakMap,b=f["short-date-short-time"]}));const x={ar:"ar-u-nu-latn"};let S=new WeakMap,T={};function M(e={}){const t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function E(e,t){return function(e){const t=e||T;if(!S.has(t)){const r=(0,s.i)(),i=x[(0,s.i)()]||r;S.set(t,new Intl.NumberFormat(i,e))}return(0,n.m)(S.get(t))}(t).format(e)}(0,s.p)((()=>{S=new WeakMap,T={}}));const I=n.n.getLogger("esri.intl");function O(e,t,r={}){const{format:i={}}=r;return(0,n.b)(e,(e=>function(e,t,r){let i,s;const o=e.indexOf(":");if(-1===o?i=e.trim():(i=e.slice(0,o).trim(),s=e.slice(o+1).trim()),!i)return"";const a=(0,n.j)(i,t);if(null==a)return"";const l=r[s]||r[i];return l?function(e,t){switch(t.type){case"date":return _(e,t.intlOptions);case"number":return E(e,t.intlOptions);default:return I.warn("missing format descriptor for key {key}"),A(e)}}(a,l):s?function(e,t){switch(t.toLowerCase()){case"dateformat":return _(e);case"numberformat":return E(e);default:return I.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?_(e):/^numberformat/i.test(t)?E(e):A(e)}}(a,s):A(a)}(e,t,i)))}function A(e){switch(typeof e){case"string":return e;case"number":return E(e);case"boolean":return""+e;default:return e instanceof Date?_(e):""}}const P=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,R={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function F(e){var t;return null!=(t=R[e])&&t}const C=[],L=new Map;async function k(e){const t=(0,s.i)();L.has(e)||L.set(e,async function(e,t){const r=[];for(const i of C)if(N(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(e){r.push(e)}if(r.length)throw new o.s("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r});throw new o.s("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const r=L.get(e);return await j.add(r),r}function N(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}(0,s.p)((()=>{L.clear()}));const j=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,o.E)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}};async function D(e){if((0,n.r)(V.fetchBundleAsset))return V.fetchBundleAsset(e);const t=await(0,a.L)(e,{responseType:"text"});return JSON.parse(t.data)}class U{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let i;i="string"==typeof r?e=>new URL(e,new URL(r,n.e.location)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=i,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,t){return async function(e,t,r,i){const s=t.exec(r);if(!s)throw new o.s("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",a=s[2],l=function(e){if(!P.test(e))return null;const[,t,r]=P.exec(e),i=t+(r?"-"+r.toUpperCase():"");return F(i)?i:F(t)?t:null}(i),u=`${n}${a}.json`,c=l?`${n}${a}_${l}.json`:u;let h;try{h=await D(e(c))}catch(t){if(c===u)throw new o.s("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:t});try{h=await D(e(u))}catch(e){throw new o.s("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:e})}}return h}(this.getAssetUrl,this.matcher,e,t)}}const V={};var B;B=function(e){return new U(e)}({pattern:"esri/",location:l.a}),C.includes(B)||(function(e){for(const t of L.keys())N(e.pattern,t)&&L.delete(t)}(B),C.unshift(B))},31531:(e,t,r)=>{"use strict";r.d(t,{o:()=>s,s:()=>n});var i=r(80219);class s{constructor(e,t={ignoreUnknown:!1}){this.jsonToAPI=e,this.options=t,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(e),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,r)=>{const s=this.toJSON(e);void 0!==s&&(0,i.o)(r,s,t)},this.write.isJSONMapWriter=!0}toJSON(e){return this.apiToJSON.hasOwnProperty(e)?this.apiToJSON[e]:this.options.ignoreUnknown?void 0:e}fromJSON(e){return this.jsonToAPI.hasOwnProperty(e)?this.jsonToAPI[e]:this.options.ignoreUnknown?void 0:e}invertMap(e){const t={};for(const r in e)t[e[r]]=r;return t}getKeysSorted(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}}function n(){return function(e){return new s(e,{ignoreUnknown:!0})}}},5250:(e,t,r)=>{"use strict";r.d(t,{i:()=>l,p:()=>o,t:()=>a});var i=r(81135),s=r(20215),n=r(94527);function o(e,t=!1,r=!1,o=!0){if(!e)return{symbol:null};let a;if((0,i.c)(e)||e instanceof i.b)a=e.clone();else if("cim"===e.type)a=i.k.fromCIMSymbol(e);else if(e instanceof n.m)a=i.l.fromSimpleLineSymbol(e);else if(e instanceof i.y)a=i.k.fromSimpleMarkerSymbol(e);else if(e instanceof i.n)a=i.k.fromPictureMarkerSymbol(e);else if(e instanceof i.S)a=i.a.fromSimpleFillSymbol(e);else{if(!(e instanceof i.i))return{error:new s.s("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=o?i.m.fromTextSymbol(e):i.k.fromTextSymbol(e)}if(t&&(a.id=e.id),r&&(0,i.c)(a))for(let e=0;e<a.symbolLayers.length;++e)a.symbolLayers.getItemAt(e)._ignoreDrivers=!0;return{symbol:a}}function a(e,t,r,n){const a=function(e,t,r){if(!e)return null;if(r&&"web-scene"===r.origin&&!(e instanceof i.A)&&!(e instanceof i.b)){const i="cim"!==e.type?o(e):{symbol:null,error:new s.s("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return i.symbol?i.symbol.write(t,r):(r.messages&&r.messages.push(new s.s("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:i.error})),null)}return r&&"web-map"===r.origin&&"web-style"===e.type?(r.messages&&r.messages.push(new s.s("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:r})),null):e.write(t,r)}(e,{},n);a&&(t[r]=a)}function l(e,t){return(0,i.o)(e,null,t)}},94449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{D:()=>S,a:()=>z,c:()=>$,m:()=>B,n:()=>q,o:()=>G,p:()=>H});var i,s=r(80219),n=r(20215),o=r(88903),a=r(34396),l=r(78155),u=r(17762),c=r(80987),h=r(97325),p=r(52957),d=r(81135),y=r(82906),f=r(29126),m=r(20736),g=r(94527);const v=s.n.getLogger("esri.renderers.DictionaryRenderer"),b={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let w=i=class extends((0,a.v)(a.a)){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new h.e(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){null!=i&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new i({config:(0,s.y)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,s.y)(this.fieldMap),url:(0,s.y)(this.url),visualVariables:(0,s.y)(this.visualVariables)})}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise}catch(e){if((0,n.g)(e))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const t of this._symbolFields){const r=this.fieldMap[t];if(r&&null!==e.attributes[r]&&void 0!==e.attributes[r]){const s=""+e.attributes[r];i[t]=s}else i[t]=""}const o=r(i,t);if(!o||"string"!=typeof o)return null;const a=(0,s.w)(o).toString(),l=this._symbolCache.get(a);if(l)return l.catch((()=>{this._symbolCache.pop(a)})),l;const c=o.split(";"),h=[],p=[];for(const e of c)if(e&&0!==e.length)if(-1===e.indexOf("po:"))if(-1!==e.indexOf("|"))for(const t of e.split("|"))this._itemNames.has(t)&&h.push(t);else this._itemNames.has(e)&&h.push(e);else{const t=e.substr(3).split("|");if(3===t.length){const e=t[0],r=t[1];let i=t[2];if("DashTemplate"===r)i=i.split(" ").map((e=>Number(e)));else if("Color"===r){const e=new u.o(i).toRgba();i=[e[0],e[1],e[2],255*e[3]]}else i=Number(i);p.push({primitiveName:e,propertyName:r,value:i})}}const d=!(0,s.r)(e.geometry)||!e.geometry.hasZ&&"point"===e.geometry.type,y=this._cimPartsToCIMSymbol(h,p,d,t);return this._symbolCache.put(a,y,1),y}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await(0,p.T)(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void v.error("no valid URL!");const t=(0,s.r)(e)?e.abortOptions:null,r=(0,c.L)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...t}),[{data:i}]=await Promise.all([r,(0,p.a)()]);if(!i)throw this._dictionaryPromise=null,new n.s("esri.renderers.DictionaryRenderer","Bad dictionary data!");const o=i.expression,a=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=a.symbol;const l={};if(this.config){const e=this.config;for(const t in e)l[t]=e[t]}if(a.configuration)for(const e of a.configuration)l.hasOwnProperty(e.name)||(l[e.name]=e.value);const u=[];if((0,s.r)(e)&&e.fields&&this.fieldMap)for(const t of this._symbolFields){const r=this.fieldMap[t],i=e.fields.filter((e=>e.name===r));i.length>0&&u.push({...i[0],name:t})}return this._dictionaryPromise=(0,p.n)(o,(0,s.r)(e)?e.spatialReference:null,u,l).then((e=>{const t={scale:0};return(r,i)=>{const n=e.repurposeFeature({geometry:null,attributes:r});return t.scale=(0,s.r)(i)?i.scale:void 0,e.evaluate({$feature:n,$view:t})}})).catch((e=>(v.error("Creating dictinoary expression failed:",e),null))),this._dictionaryPromise}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._symbolFields}async _getSymbolPart(e,t){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),i=(0,c.L)(r,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,i);try{return(await i).data}catch(t){return this._ongoingRequests.delete(e),Promise.reject(t)}}_combineSymbolParts(e,t,r){if(!e||0===e.length)return null;const i={...e[0]};if(e.length>1){i.symbolLayers=[];for(const t of e){const e=t;i.symbolLayers.unshift(...e.symbolLayers)}}return r&&(i.callout=b),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}async _cimPartsToCIMSymbol(e,t,r,i){const s=new Array(e.length);for(let t=0;t<e.length;t++)s[t]=this._getSymbolPart(e[t],i);const n=await Promise.all(s);return new d.d({data:this._combineSymbolParts(n,t,r)})}};(0,l.e)([(0,o.y)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],w.prototype,"config",void 0),(0,l.e)([(0,o.y)({type:Object,json:{write:!0}})],w.prototype,"fieldMap",void 0),(0,l.e)([(0,o.y)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],w.prototype,"scaleExpression",void 0),(0,l.e)([(0,l.o)("scaleExpression")],w.prototype,"writeData",null),(0,l.e)([(0,o.y)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],w.prototype,"scaleExpressionTitle",void 0),(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],w.prototype,"url",void 0),(0,l.e)([(0,l.o)("visualVariables")],w.prototype,"writeVisualVariables",null),w=i=(0,l.e)([(0,o.n)("esri.renderers.DictionaryRenderer")],w);var _,x=w,S=Object.freeze({__proto__:null,default:x});const T=s.n.getLogger("esri.renderers.support.AttributeColorInfo");let M=_=class extends l.a{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(T.error(".field: field must be a string value"),null):(0,o.E)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new _({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,l.e)([(0,o.y)({type:u.o,json:{type:[Number],write:!0}})],M.prototype,"color",void 0),(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],M.prototype,"field",void 0),(0,l.e)([(0,m.c)("field")],M.prototype,"castField",null),(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],M.prototype,"label",void 0),(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],M.prototype,"valueExpression",void 0),(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],M.prototype,"valueExpressionTitle",void 0),M=_=(0,l.e)([(0,o.n)("esri.renderers.support.AttributeColorInfo")],M);var E,I=M;let O=E=class extends l.a{constructor(){super(...arguments),this.unit=null}clone(){return new E({unit:this.unit})}};(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],O.prototype,"unit",void 0),O=E=(0,l.e)([(0,o.n)("esri.renderers.support.DotDensityLegendOptions")],O);var A,P=O;let R=A=class extends((0,a.v)(a.a)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new u.o([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new g.m,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new d.S({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new A({attributes:(0,s.y)(this.attributes),backgroundColor:(0,s.y)(this.backgroundColor),dotBlendingEnabled:(0,s.y)(this.dotBlendingEnabled),dotShape:(0,s.y)(this.dotShape),dotSize:(0,s.y)(this.dotSize),dotValue:(0,s.y)(this.dotValue),legendOptions:(0,s.y)(this.legendOptions),outline:(0,s.y)(this.outline),referenceScale:(0,s.y)(this.referenceScale),visualVariables:(0,s.y)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map((e=>e.field||e.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await(0,p.T)(e,t,r.valueExpression),r.field&&e.add(r.field)}};(0,l.e)([(0,o.y)({type:[I],json:{write:!0}})],R.prototype,"attributes",void 0),(0,l.e)([(0,o.y)({type:u.o,json:{write:!0}})],R.prototype,"backgroundColor",void 0),(0,l.e)([(0,o.y)({type:Boolean}),(0,y.o)("dotBlendingEnabled")],R.prototype,"blendDots",void 0),(0,l.e)([(0,o.y)({type:Boolean,json:{write:!0}})],R.prototype,"dotBlendingEnabled",void 0),(0,l.e)([(0,o.y)({type:String,json:{write:!1}})],R.prototype,"dotShape",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:!1}})],R.prototype,"dotSize",void 0),(0,l.e)([(0,o.y)({type:P,json:{write:!0}})],R.prototype,"legendOptions",void 0),(0,l.e)([(0,o.y)({type:g.m,json:{default:null,write:!0}})],R.prototype,"outline",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:!0}})],R.prototype,"dotValue",void 0),(0,l.e)([(0,o.y)({type:Number}),(0,y.o)("dotValue")],R.prototype,"referenceDotValue",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:!0}})],R.prototype,"referenceScale",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:!0}})],R.prototype,"seed",void 0),(0,l.e)([(0,f.r)({dotDensity:"dot-density"})],R.prototype,"type",void 0),R=A=(0,l.e)([(0,o.n)("esri.renderers.DotDensityRenderer")],R);var F,C=R;let L=F=class extends l.a{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new F({color:this.color,ratio:this.ratio})}};(0,l.e)([(0,o.y)({type:u.o,json:{write:!0}})],L.prototype,"color",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:!0}})],L.prototype,"ratio",void 0),L=F=(0,l.e)([(0,o.n)("esri.renderers.support.HeatmapColorStop")],L);var k,N=L;let j=k=class extends a.a{constructor(e){super(e),this.blurRadius=10,this.colorStops=[new N({ratio:0,color:new u.o("rgba(255, 140, 0, 0)")}),new N({ratio:.75,color:new u.o("rgba(255, 140, 0, 1)")}),new N({ratio:.9,color:new u.o("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}async collectRequiredFields(e,t){const r=this.field;r&&"string"==typeof r&&(0,p.F)(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new k({blurRadius:this.blurRadius,colorStops:(0,s.y)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};(0,l.e)([(0,o.y)({type:Number,json:{write:!0}})],j.prototype,"blurRadius",void 0),(0,l.e)([(0,o.y)({type:[N],json:{write:!0}})],j.prototype,"colorStops",void 0),(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],j.prototype,"field",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:null==r})}}})],j.prototype,"fieldOffset",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:!0}})],j.prototype,"maxPixelIntensity",void 0),(0,l.e)([(0,o.y)({type:Number,json:{write:!0}})],j.prototype,"minPixelIntensity",void 0),(0,l.e)([(0,f.r)({heatmap:"heatmap"})],j.prototype,"type",void 0),j=k=(0,l.e)([(0,o.n)("esri.renderers.HeatmapRenderer")],j);var D,U=j;let V=D=class extends((0,a.v)(a.a)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((r=>r.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new D({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,s.y)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],V.prototype,"description",void 0),(0,l.e)([(0,o.y)({type:String,json:{write:!0}})],V.prototype,"label",void 0),(0,l.e)([(0,o.y)(a.i)],V.prototype,"symbol",void 0),(0,l.e)([(0,f.r)({simple:"simple"})],V.prototype,"type",void 0),V=D=(0,l.e)([(0,o.n)("esri.renderers.SimpleRenderer")],V);var B=V;const z={key:"type",base:a.a,typeMap:{heatmap:U,simple:B,"unique-value":a.P,"class-breaks":a.N,"dot-density":C,dictionary:x},errorContext:"renderer"},q={key:"type",base:a.a,typeMap:{simple:B,"unique-value":a.P,"class-breaks":a.N},errorContext:"renderer"};function G(e,t,r,i){const o=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;case"heatmap":case"dictionary":case"dot-density":default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new n.s("renderer:unsupported",`Renderer of type '${e.declaredClass}' are not supported in scenes.`,{renderer:e,context:t})),null):null}(e,i);o&&(0,s.o)(r,o,t)}function $(e,t){return H(e,null,t)}const W=(0,o.D)({types:z});function H(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new o.z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):W(e,t,r):null}},89710:(e,t,r)=>{"use strict";r.d(t,{G:()=>d,d:()=>h,f:()=>l,l:()=>a,p:()=>c,s:()=>o,u:()=>n,y:()=>u});var i=r(98548),s=r(20736);function n(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function o(e){return void 0!==e.points}function a(e){return void 0!==e.x&&void 0!==e.y}function l(e){return void 0!==e.paths}function u(e){return void 0!==e.rings}function c(e){return e?e instanceof s.p?e:a(e)?s.b.fromJSON(e):l(e)?i.m.fromJSON(e):u(e)?i.j.fromJSON(e):o(e)?i.u.fromJSON(e):n(e)?i.M.fromJSON(e):null:null}function h(e){return e?a(e)?"esriGeometryPoint":l(e)?"esriGeometryPolyline":u(e)?"esriGeometryPolygon":n(e)?"esriGeometryEnvelope":o(e)?"esriGeometryMultipoint":null:null}const p={esriGeometryPoint:s.b,esriGeometryPolyline:i.m,esriGeometryPolygon:i.j,esriGeometryEnvelope:i.M,esriGeometryMultipoint:i.u};function d(e){return e&&p[e]||null}},84796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createLabelFunction:()=>h,formatField:()=>p});var i=r(20215),s=r(80219),n=r(6585),o=r(52957),a=r(53902);r(31531),r(3621),r(80987),r(88903),r(98548),r(78155),r(20736),r(4169),r(92858),r(63358),r(29126);const l=s.n.getLogger("esri.layers.support.labelFormatUtils"),u={type:"simple",evaluate:()=>null},c={getAttribute:(e,t)=>e.field(t)};async function h(e,t,s){if(!e||!e.symbol)return u;const n=e.where,h=(0,a.x)(e),d=n?await r.e(9351).then(r.bind(r,54622)):null;let y;if("arcade"===h.type){const e=await(0,o.s)(h.expression,s,t);y={type:"arcade",evaluate(t){try{const r=e.evaluate({$feature:"attributes"in t?e.repurposeFeature(t):e.repurposeAdapter(t)});if(null!=r)return r.toString()}catch(e){l.error(new i.s("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:t,expression:h}))}return null},needsHydrationToEvaluate:()=>null==(0,a._)(h.expression)}}else y={type:"simple",evaluate:e=>h.expression.replace(/{[^}]*}/g,(r=>{const i=r.slice(1,-1),s=t.get(i);if(!s)return r;let n=null;return"attributes"in e?e&&e.attributes&&(n=e.attributes[s.name]):n=e.field(s.name),null==n?"":p(n,s)}))};if(n){let e;try{e=d.WhereClause.create(n,t)}catch(e){return u}const r=y.evaluate;y.evaluate=t=>{const i="attributes"in t?void 0:c;return e.testFeature(t,i)?r(t):null}}return y}function p(e,t){if(null==e)return"";const r=t.domain;if(r)if("codedValue"===r.type||"coded-value"===r.type){const t=e;for(const e of r.codedValues)if(e.code===t)return e.name}else if("range"===r.type){const t=+e,i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue;if(i<=t&&t<=s)return r.name}let i=e;return"date"===t.type||"esriFieldTypeDate"===t.type?i=(0,n.L)(i,(0,n.S)("short-date")):(0,o.J)(t)&&(i=(0,n.m)(+i)),i||""}},53902:(e,t,r)=>{"use strict";r.d(t,{_:()=>b,f:()=>p,g:()=>d,u:()=>c,w:()=>y,x:()=>h});var i=r(80219);const s="__begin__",n="__end__",o=new RegExp(s,"ig"),a=new RegExp(n,"ig"),l=new RegExp("^"+s,"i"),u=new RegExp(n+"$","i");function c(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function h(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function p(e){const t=h(e);if(!t)return null;switch(t.type){case"conventional":return y(t.expression);case"arcade":return t.expression}return null}function d(e){const t=h(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e.match(f);return t&&t[1].trim()||null}(t.expression);case"arcade":return b(t.expression)}return null}function y(e){let t;return e?(t=(0,i.b)(e,(e=>s+'$feature["'+e+'"]'+n)),t=l.test(t)?t.replace(l,""):'"'+t,t=u.test(t)?t.replace(u,""):t+'"',t=t.replace(o,'" + ').replace(a,' + "')):t='""',t}const f=/^\s*\{([^}]+)\}\s*$/i,m=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,g=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,v=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function b(e){if(!e)return null;let t=m.exec(e)||g.exec(e);return t?t[1]||t[3]:(t=v.exec(e),t?t[2]:null)}},92758:(e,t,r)=>{"use strict";r.d(t,{b:()=>x,c:()=>T,p:()=>d,r:()=>E});var i=r(78155),s=r(82906),n=r(81135),o=r(80219),a=r(94527),l=r(88903),u=r(13895),c=r(78435);let h=class extends i.a{constructor(){super(...arguments),this.type=null}};(0,i.e)([(0,l.y)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=(0,i.e)([(0,l.n)("esri.layers.support.FeatureReduction")],h);var p,d=h;let y=p=class extends i.a{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new p({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};(0,i.e)([(0,l.y)({type:String,json:{write:!0}})],y.prototype,"statisticType",void 0),(0,i.e)([(0,l.y)({type:String,json:{write:!0}})],y.prototype,"onStatisticField",void 0),(0,i.e)([(0,l.y)({type:String,json:{write:!0}})],y.prototype,"onStatisticValueExpression",void 0),y=p=(0,i.e)([(0,l.n)("esri.layers.support.OutStatistic")],y);var f,m=y;let g=f=class extends i.a{constructor(){super(...arguments),this.name=null}clone(){return new f({name:this.name,outStatistic:this.outStatistic.clone()})}};(0,i.e)([(0,l.y)({type:String,json:{write:!0}})],g.prototype,"name",void 0),(0,i.e)([(0,l.y)({type:m,json:{write:!0}})],g.prototype,"outStatistic",void 0),g=f=(0,i.e)([(0,l.n)("esri.layers.support.AggregateField")],g);var v,b=g;let w=v=class extends i.a{constructor(e){super(e),this.type="cluster",this.clusterRadius=(0,a.o)("80px"),this.clusterMinSize=(0,a.o)("12px"),this.clusterMaxSize=(0,a.o)("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new v({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,o.y)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,o.y)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:(0,o.y)(this.popupTemplate)})}};(0,i.e)([(0,l.y)({type:["cluster"],readOnly:!0,json:{write:!0}})],w.prototype,"type",void 0),(0,i.e)([(0,l.y)({type:Number,cast:e=>"auto"===e?e:(0,a.o)(e),json:{write:!0}})],w.prototype,"clusterRadius",void 0),(0,i.e)([(0,l.y)({type:Number,cast:a.o,json:{write:!0}})],w.prototype,"clusterMinSize",void 0),(0,i.e)([(0,l.y)({type:Number,cast:a.o,json:{write:!0}})],w.prototype,"clusterMaxSize",void 0),(0,i.e)([(0,l.y)(u.s)],w.prototype,"popupEnabled",void 0),(0,i.e)([(0,l.y)({type:s.M,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],w.prototype,"popupTemplate",void 0),(0,i.e)([(0,l.y)({types:n.D})],w.prototype,"symbol",void 0),(0,i.e)([(0,l.y)({type:[c.E],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],w.prototype,"labelingInfo",void 0),(0,i.e)([(0,l.y)(u.a)],w.prototype,"labelsVisible",void 0),(0,i.e)([(0,l.y)({type:[b],json:{write:!0}})],w.prototype,"fields",void 0),w=v=(0,i.e)([(0,l.n)("esri.layers.support.FeatureReductionCluster")],w);var _,x=w;let S=_=class extends d{constructor(e){super(e),this.type="selection"}clone(){return new _}};(0,i.e)([(0,l.y)({type:["selection"]})],S.prototype,"type",void 0),S=_=(0,i.e)([(0,l.n)("esri.layers.support.FeatureReductionSelection")],S);var T=S;const M=/\[([^\[\]]+)\]/gi;function E(e,t,r){return e?e.map((e=>{const i=new c.E;if(i.read(e,r),i.labelExpression){const e=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;i.labelExpression=i.labelExpression.replace(M,((t,r)=>`[${function(e,t){if(!t)return e;const r=e.toLowerCase();for(let e=0;e<t.length;e++){const i=t[e].name;if(i.toLowerCase()===r)return i}return e}(r,e)}]`))}return i})):null}},4618:(e,t,r)=>{"use strict";r.d(t,{m:()=>n});var i=r(65352),s=r(20736);const n={inches:(0,i.I)(1,"meters","inches"),feet:(0,i.I)(1,"meters","feet"),"us-feet":(0,i.I)(1,"meters","us-feet"),yards:(0,i.I)(1,"meters","yards"),miles:(0,i.I)(1,"meters","miles"),"nautical-miles":(0,i.I)(1,"meters","nautical-miles"),millimeters:(0,i.I)(1,"meters","millimeters"),centimeters:(0,i.I)(1,"meters","centimeters"),decimeters:(0,i.I)(1,"meters","decimeters"),meters:(0,i.I)(1,"meters","meters"),kilometers:(0,i.I)(1,"meters","kilometers"),"decimal-degrees":1/(0,i.R)(1,"meters",s.s.radius)}},95629:(e,t,r)=>{"use strict";r.d(t,{i:()=>l,n:()=>a});var i=r(9612),s=r(40130),n=r(80987),o=r(80219);async function a(e,t){return await e.load(),l(e,t)}async function l(e,t){const r=[],a=(...e)=>{for(const t of e)(0,o.t)(t)||(Array.isArray(t)?a(...t):s.L.isCollection(t)?t.forEach((e=>a(e))):n.f.isLoadable(t)&&r.push(t))};t(a);let l=null;if(await(0,i.u)(r,(async e=>{!1!==(await(0,i.a)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||l||(l=e)})),l)throw l.loadError;return e}},3621:(e,t,r)=>{"use strict";r.d(t,{g:()=>p,i:()=>c,p:()=>y});var i,s,n,o=r(80219);let a;const l=null!=(i=null==(s=o.e.esriConfig)?void 0:s.locale)?i:null==(n=o.e.dojoConfig)?void 0:n.locale;function u(){var e,t;return null!=(e=null!=l?l:null==(t=o.e.navigator)?void 0:t.language)?e:"en"}function c(){return void 0===a&&(a=u()),a}const h=[];function p(e){return h.push(e),{remove(){h.splice(h.indexOf(e),1)}}}const d=[];function y(e){return d.push(e),{remove(){h.splice(d.indexOf(e),1)}}}null==o.e.addEventListener||o.e.addEventListener("languagechange",(function(){const e=u();a!==e&&(a=e,[...d].forEach((t=>{t.call(null,e)})),[...h].forEach((t=>{t.call(null,e)})))}))},95186:(e,t,r)=>{"use strict";r.d(t,{B:()=>b,M:()=>h,a:()=>s,b:()=>y,f:()=>d,h:()=>p,i:()=>c,j:()=>g,n:()=>n,o:()=>l,p:()=>f,r:()=>a,s:()=>o,u:()=>u,y:()=>m});var i=r(60816);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function o(e,t,r,i,s,n,o,a,l,u){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function l(e,t){if(e===t){const r=t[1],i=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function u(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=c*o-a*u,p=-c*n+a*l,d=u*n-o*l;let y=r*h+i*p+s*d;return y?(y=1/y,e[0]=h*y,e[1]=(-c*i+s*u)*y,e[2]=(a*i-s*o)*y,e[3]=p*y,e[4]=(c*r-s*l)*y,e[5]=(-a*r+s*n)*y,e[6]=d*y,e[7]=(-u*r+i*l)*y,e[8]=(o*r-i*n)*y,e):null}function c(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=r[0],d=r[1],y=r[2],f=r[3],m=r[4],g=r[5],v=r[6],b=r[7],w=r[8];return e[0]=p*i+d*o+y*u,e[1]=p*s+d*a+y*c,e[2]=p*n+d*l+y*h,e[3]=f*i+m*o+g*u,e[4]=f*s+m*a+g*c,e[5]=f*n+m*l+g*h,e[6]=v*i+b*o+w*u,e[7]=v*s+b*a+w*c,e[8]=v*n+b*l+w*h,e}function h(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=r[0],d=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l,e[6]=p*i+d*o+u,e[7]=p*s+d*a+c,e[8]=p*n+d*l+h,e}function p(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=Math.sin(r),d=Math.cos(r);return e[0]=d*i+p*o,e[1]=d*s+p*a,e[2]=d*n+p*l,e[3]=d*o-p*i,e[4]=d*a-p*s,e[5]=d*l-p*n,e[6]=u,e[7]=c,e[8]=h,e}function d(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function y(e,t,r){const i=r[0],s=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function f(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,u=r*o,c=i*o,h=i*a,p=s*o,d=s*a,y=s*l,f=n*o,m=n*a,g=n*l;return e[0]=1-h-y,e[3]=c-g,e[6]=p+m,e[1]=c+g,e[4]=1-u-y,e[7]=d-f,e[2]=p-m,e[5]=d+f,e[8]=1-u-h,e}function m(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10],h=c*o-a*u,p=-c*n+a*l,d=u*n-o*l,y=r*h+i*p+s*d;if(!y)return null;const f=1/y;return e[0]=h*f,e[1]=(-c*i+s*u)*f,e[2]=(a*i-s*o)*f,e[3]=p*f,e[4]=(c*r-s*l)*f,e[5]=(-a*r+s*n)*f,e[6]=d*f,e[7]=(-u*r+i*l)*f,e[8]=(o*r-i*n)*f,e}function g(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],d=t[11],y=t[12],f=t[13],m=t[14],g=t[15],v=r*a-i*o,b=r*l-s*o,w=r*u-n*o,_=i*l-s*a,x=i*u-n*a,S=s*u-n*l,T=c*f-h*y,M=c*m-p*y,E=c*g-d*y,I=h*m-p*f,O=h*g-d*f,A=p*g-d*m;let P=v*A-b*O+w*I+_*E-x*M+S*T;return P?(P=1/P,e[0]=(a*A-l*O+u*I)*P,e[1]=(l*E-o*A-u*M)*P,e[2]=(o*O-a*E+u*T)*P,e[3]=(s*O-i*A-n*I)*P,e[4]=(r*A-s*E+n*M)*P,e[5]=(i*E-r*O-n*T)*P,e[6]=(f*S-m*x+g*_)*P,e[7]=(m*w-y*S-g*b)*P,e[8]=(y*x-f*w+g*v)*P,e):null}function v(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function b(e){const t=i.f,r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8];return Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+c*c))<=t&&Math.abs(1-(n*n+l*l+h*h))<=t}const w=c,_=v;Object.freeze({__proto__:null,fromMat4:s,copy:n,set:o,identity:a,transpose:l,invert:u,adjoint:function(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-a*u,e[1]=s*u-i*c,e[2]=i*a-s*o,e[3]=a*l-n*c,e[4]=r*c-s*l,e[5]=s*n-r*a,e[6]=n*u-o*l,e[7]=i*l-r*u,e[8]=r*o-i*n,e},determinant:function(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*n-o*l)+r*(-u*s+o*a)+i*(l*s-n*a)},multiply:c,translate:h,rotate:p,scale:d,scaleByVec2:y,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:f,normalFromMat4Legacy:m,normalFromMat4:g,projection:function(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},subtract:v,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=t[0],d=t[1],y=t[2],f=t[3],m=t[4],g=t[5],v=t[6],b=t[7],w=t[8];return Math.abs(r-p)<=i.f*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(s-d)<=i.f*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(n-y)<=i.f*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-f)<=i.f*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-m)<=i.f*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-g)<=i.f*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-v)<=i.f*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-b)<=i.f*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(h-w)<=i.f*Math.max(1,Math.abs(h),Math.abs(w))},isOrthoNormal:b,mul:w,sub:_})},93242:(e,t,r)=>{"use strict";r.d(t,{A:()=>S,B:()=>I,C:()=>O,E:()=>T,F:()=>M,G:()=>A,P:()=>x,b:()=>d,c:()=>c,e:()=>u,f:()=>p,g:()=>v,h:()=>l,i:()=>h,l:()=>y,m:()=>f,n:()=>s,o:()=>a,q:()=>g,r:()=>o,s:()=>n,x:()=>m,y:()=>_});var i=r(60816);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function n(e,t,r,i,s,n,o,a,l,u,c,h,p,d,y,f,m){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=h,e[11]=p,e[12]=d,e[13]=y,e[14]=f,e[15]=m,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function l(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],d=t[11],y=t[12],f=t[13],m=t[14],g=t[15],v=r*a-i*o,b=r*l-s*o,w=r*u-n*o,_=i*l-s*a,x=i*u-n*a,S=s*u-n*l,T=c*f-h*y,M=c*m-p*y,E=c*g-d*y,I=h*m-p*f,O=h*g-d*f,A=p*g-d*m;let P=v*A-b*O+w*I+_*E-x*M+S*T;return P?(P=1/P,e[0]=(a*A-l*O+u*I)*P,e[1]=(s*O-i*A-n*I)*P,e[2]=(f*S-m*x+g*_)*P,e[3]=(p*x-h*S-d*_)*P,e[4]=(l*E-o*A-u*M)*P,e[5]=(r*A-s*E+n*M)*P,e[6]=(m*w-y*S-g*b)*P,e[7]=(c*S-p*w+d*b)*P,e[8]=(o*O-a*E+u*T)*P,e[9]=(i*E-r*O-n*T)*P,e[10]=(y*x-f*w+g*v)*P,e[11]=(h*w-c*x-d*v)*P,e[12]=(a*M-o*I-l*T)*P,e[13]=(r*I-i*M+s*T)*P,e[14]=(f*b-y*_-m*v)*P,e[15]=(c*_-h*b+p*v)*P,e):null}function u(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=t[9],d=t[10],y=t[11],f=t[12],m=t[13],g=t[14],v=t[15];let b=r[0],w=r[1],_=r[2],x=r[3];return e[0]=b*i+w*a+_*h+x*f,e[1]=b*s+w*l+_*p+x*m,e[2]=b*n+w*u+_*d+x*g,e[3]=b*o+w*c+_*y+x*v,b=r[4],w=r[5],_=r[6],x=r[7],e[4]=b*i+w*a+_*h+x*f,e[5]=b*s+w*l+_*p+x*m,e[6]=b*n+w*u+_*d+x*g,e[7]=b*o+w*c+_*y+x*v,b=r[8],w=r[9],_=r[10],x=r[11],e[8]=b*i+w*a+_*h+x*f,e[9]=b*s+w*l+_*p+x*m,e[10]=b*n+w*u+_*d+x*g,e[11]=b*o+w*c+_*y+x*v,b=r[12],w=r[13],_=r[14],x=r[15],e[12]=b*i+w*a+_*h+x*f,e[13]=b*s+w*l+_*p+x*m,e[14]=b*n+w*u+_*d+x*g,e[15]=b*o+w*c+_*y+x*v,e}function c(e,t,r){const i=r[0],s=r[1],n=r[2];let o,a,l,u,c,h,p,d,y,f,m,g;return t===e?(e[12]=t[0]*i+t[4]*s+t[8]*n+t[12],e[13]=t[1]*i+t[5]*s+t[9]*n+t[13],e[14]=t[2]*i+t[6]*s+t[10]*n+t[14],e[15]=t[3]*i+t[7]*s+t[11]*n+t[15]):(o=t[0],a=t[1],l=t[2],u=t[3],c=t[4],h=t[5],p=t[6],d=t[7],y=t[8],f=t[9],m=t[10],g=t[11],e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=h,e[6]=p,e[7]=d,e[8]=y,e[9]=f,e[10]=m,e[11]=g,e[12]=o*i+c*s+y*n+t[12],e[13]=a*i+h*s+f*n+t[13],e[14]=l*i+p*s+m*n+t[14],e[15]=u*i+d*s+g*n+t[15]),e}function h(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,r,s){let n,o,a,l,u,c,h,p,d,y,f,m,g,v,b,w,_,x,S,T,M,E,I,O,A=s[0],P=s[1],R=s[2],F=Math.sqrt(A*A+P*P+R*R);return F<i.f?null:(F=1/F,A*=F,P*=F,R*=F,n=Math.sin(r),o=Math.cos(r),a=1-o,l=t[0],u=t[1],c=t[2],h=t[3],p=t[4],d=t[5],y=t[6],f=t[7],m=t[8],g=t[9],v=t[10],b=t[11],w=A*A*a+o,_=P*A*a+R*n,x=R*A*a-P*n,S=A*P*a-R*n,T=P*P*a+o,M=R*P*a+A*n,E=A*R*a+P*n,I=P*R*a-A*n,O=R*R*a+o,e[0]=l*w+p*_+m*x,e[1]=u*w+d*_+g*x,e[2]=c*w+y*_+v*x,e[3]=h*w+f*_+b*x,e[4]=l*S+p*T+m*M,e[5]=u*S+d*T+g*M,e[6]=c*S+y*T+v*M,e[7]=h*S+f*T+b*M,e[8]=l*E+p*I+m*O,e[9]=u*E+d*I+g*O,e[10]=c*E+y*I+v*O,e[11]=h*E+f*I+b*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function d(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+u*i,e[5]=o*s+c*i,e[6]=a*s+h*i,e[7]=l*s+p*i,e[8]=u*s-n*i,e[9]=c*s-o*i,e[10]=h*s-a*i,e[11]=p*s-l*i,e}function y(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],u=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-u*i,e[1]=o*s-c*i,e[2]=a*s-h*i,e[3]=l*s-p*i,e[8]=n*i+u*s,e[9]=o*i+c*s,e[10]=a*i+h*s,e[11]=l*i+p*s,e}function f(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+u*i,e[1]=o*s+c*i,e[2]=a*s+h*i,e[3]=l*s+p*i,e[4]=u*s-n*i,e[5]=c*s-o*i,e[6]=h*s-a*i,e[7]=p*s-l*i,e}function m(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function g(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=i+i,l=s+s,u=n+n,c=i*a,h=i*l,p=i*u,d=s*l,y=s*u,f=n*u,m=o*a,g=o*l,v=o*u;return e[0]=1-(d+f),e[1]=h+v,e[2]=p-g,e[3]=0,e[4]=h-v,e[5]=1-(c+f),e[6]=y+m,e[7]=0,e[8]=p+g,e[9]=y-m,e[10]=1-(c+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}const w=(0,i.n)();function _(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function x(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,u=r*o,c=i*o,h=i*a,p=s*o,d=s*a,y=s*l,f=n*o,m=n*a,g=n*l;return e[0]=1-h-y,e[1]=c+g,e[2]=p-m,e[3]=0,e[4]=c-g,e[5]=1-u-y,e[6]=d+f,e[7]=0,e[8]=p+m,e[9]=d-f,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t,r,i,s,n,o){const a=1/(r-t),l=1/(s-i),u=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(s+i)*l,e[10]=(o+n)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*u,e[15]=0,e}function T(e,t,r,i,s,n,o){const a=1/(t-r),l=1/(i-s),u=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(s+i)*l,e[14]=(o+n)*u,e[15]=1,e}function M(e,t,r,s){let n,a,l,u,c,h,p,d,y,f;const m=t[0],g=t[1],v=t[2],b=s[0],w=s[1],_=s[2],x=r[0],S=r[1],T=r[2];return Math.abs(m-x)<i.f&&Math.abs(g-S)<i.f&&Math.abs(v-T)<i.f?o(e):(p=m-x,d=g-S,y=v-T,f=1/Math.sqrt(p*p+d*d+y*y),p*=f,d*=f,y*=f,n=w*y-_*d,a=_*p-b*y,l=b*d-w*p,f=Math.sqrt(n*n+a*a+l*l),f?(f=1/f,n*=f,a*=f,l*=f):(n=0,a=0,l=0),u=d*l-y*a,c=y*n-p*l,h=p*a-d*n,f=Math.sqrt(u*u+c*c+h*h),f?(f=1/f,u*=f,c*=f,h*=f):(u=0,c=0,h=0),e[0]=n,e[1]=u,e[2]=p,e[3]=0,e[4]=a,e[5]=c,e[6]=d,e[7]=0,e[8]=l,e[9]=h,e[10]=y,e[11]=0,e[12]=-(n*m+a*g+l*v),e[13]=-(u*m+c*g+h*v),e[14]=-(p*m+d*g+y*v),e[15]=1,e)}function E(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function O(e,t){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],y=e[11],f=e[12],m=e[13],g=e[14],v=e[15],b=t[0],w=t[1],_=t[2],x=t[3],S=t[4],T=t[5],M=t[6],E=t[7],I=t[8],O=t[9],A=t[10],P=t[11],R=t[12],F=t[13],C=t[14],L=t[15];return Math.abs(r-b)<=i.f*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(s-w)<=i.f*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(n-_)<=i.f*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(o-x)<=i.f*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-S)<=i.f*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(l-T)<=i.f*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-M)<=i.f*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-E)<=i.f*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-I)<=i.f*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-O)<=i.f*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(d-A)<=i.f*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-P)<=i.f*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(f-R)<=i.f*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(m-F)<=i.f*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(g-C)<=i.f*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(v-L)<=i.f*Math.max(1,Math.abs(v),Math.abs(L))}function A(e){const t=i.f,r=e[0],s=e[1],n=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+c*c))<=t&&Math.abs(1-(n*n+l*l+h*h))<=t}const P=u,R=E;Object.freeze({__proto__:null,copy:s,set:n,identity:o,transpose:a,invert:l,adjoint:function(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],d=t[11],y=t[12],f=t[13],m=t[14],g=t[15];return e[0]=a*(p*g-d*m)-h*(l*g-u*m)+f*(l*d-u*p),e[1]=-(i*(p*g-d*m)-h*(s*g-n*m)+f*(s*d-n*p)),e[2]=i*(l*g-u*m)-a*(s*g-n*m)+f*(s*u-n*l),e[3]=-(i*(l*d-u*p)-a*(s*d-n*p)+h*(s*u-n*l)),e[4]=-(o*(p*g-d*m)-c*(l*g-u*m)+y*(l*d-u*p)),e[5]=r*(p*g-d*m)-c*(s*g-n*m)+y*(s*d-n*p),e[6]=-(r*(l*g-u*m)-o*(s*g-n*m)+y*(s*u-n*l)),e[7]=r*(l*d-u*p)-o*(s*d-n*p)+c*(s*u-n*l),e[8]=o*(h*g-d*f)-c*(a*g-u*f)+y*(a*d-u*h),e[9]=-(r*(h*g-d*f)-c*(i*g-n*f)+y*(i*d-n*h)),e[10]=r*(a*g-u*f)-o*(i*g-n*f)+y*(i*u-n*a),e[11]=-(r*(a*d-u*h)-o*(i*d-n*h)+c*(i*u-n*a)),e[12]=-(o*(h*m-p*f)-c*(a*m-l*f)+y*(a*p-l*h)),e[13]=r*(h*m-p*f)-c*(i*m-s*f)+y*(i*p-s*h),e[14]=-(r*(a*m-l*f)-o*(i*m-s*f)+y*(i*l-s*a)),e[15]=r*(a*p-l*h)-o*(i*p-s*h)+c*(i*l-s*a),e},determinant:function(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11],d=e[12],y=e[13],f=e[14],m=e[15];return(t*o-r*n)*(h*m-p*f)-(t*a-i*n)*(c*m-p*y)+(t*l-s*n)*(c*f-h*y)+(r*a-i*o)*(u*m-p*d)-(r*l-s*o)*(u*f-h*d)+(i*l-s*a)*(u*y-c*d)},multiply:u,translate:c,scale:h,rotate:p,rotateX:d,rotateY:y,rotateZ:f,fromTranslation:m,fromScaling:g,fromRotation:function(e,t,r){let s,n,o,a=r[0],l=r[1],u=r[2],c=Math.sqrt(a*a+l*l+u*u);return c<i.f?null:(c=1/c,a*=c,l*=c,u*=c,s=Math.sin(t),n=Math.cos(t),o=1-n,e[0]=a*a*o+n,e[1]=l*a*o+u*s,e[2]=u*a*o-l*s,e[3]=0,e[4]=a*l*o-u*s,e[5]=l*l*o+n,e[6]=u*l*o+a*s,e[7]=0,e[8]=a*u*o+l*s,e[9]=l*u*o-a*s,e[10]=u*u*o+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:v,fromYRotation:function(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:b,fromQuat2:function(e,t){const r=w,i=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=i*i+s*s+n*n+o*o;return h>0?(r[0]=2*(a*o+c*i+l*n-u*s)/h,r[1]=2*(l*o+c*s+u*i-a*n)/h,r[2]=2*(u*o+c*n+a*s-l*i)/h):(r[0]=2*(a*o+c*i+l*n-u*s),r[1]=2*(l*o+c*s+u*i-a*n),r[2]=2*(u*o+c*n+a*s-l*i)),b(e,t,r),e},getTranslation:_,getScaling:function(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+c*c),e},getRotation:function(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},fromRotationTranslationScale:function(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,u=n+n,c=o+o,h=s*l,p=s*u,d=s*c,y=n*u,f=n*c,m=o*c,g=a*l,v=a*u,b=a*c,w=i[0],_=i[1],x=i[2];return e[0]=(1-(y+m))*w,e[1]=(p+b)*w,e[2]=(d-v)*w,e[3]=0,e[4]=(p-b)*_,e[5]=(1-(h+m))*_,e[6]=(f+g)*_,e[7]=0,e[8]=(d+v)*x,e[9]=(f-g)*x,e[10]=(1-(h+y))*x,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,r,i,s){const n=t[0],o=t[1],a=t[2],l=t[3],u=n+n,c=o+o,h=a+a,p=n*u,d=n*c,y=n*h,f=o*c,m=o*h,g=a*h,v=l*u,b=l*c,w=l*h,_=i[0],x=i[1],S=i[2],T=s[0],M=s[1],E=s[2],I=(1-(f+g))*_,O=(d+w)*_,A=(y-b)*_,P=(d-w)*x,R=(1-(p+g))*x,F=(m+v)*x,C=(y+b)*S,L=(m-v)*S,k=(1-(p+f))*S;return e[0]=I,e[1]=O,e[2]=A,e[3]=0,e[4]=P,e[5]=R,e[6]=F,e[7]=0,e[8]=C,e[9]=L,e[10]=k,e[11]=0,e[12]=r[0]+T-(I*T+P*M+C*E),e[13]=r[1]+M-(O*T+R*M+L*E),e[14]=r[2]+E-(A*T+F*M+k*E),e[15]=1,e},fromQuat:x,frustum:S,perspective:function(e,t,r,i,s){const n=1/Math.tan(t/2);let o;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(o=1/(i-s),e[10]=(s+i)*o,e[14]=2*s*i*o):(e[10]=-1,e[14]=-2*i),e},perspectiveFromFieldOfView:function(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(s+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(s-n)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e},ortho:T,lookAt:M,targetTo:function(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=i[0],l=i[1],u=i[2];let c=s-r[0],h=n-r[1],p=o-r[2],d=c*c+h*h+p*p;d>0&&(d=1/Math.sqrt(d),c*=d,h*=d,p*=d);let y=l*p-u*h,f=u*c-a*p,m=a*h-l*c;return d=y*y+f*f+m*m,d>0&&(d=1/Math.sqrt(d),y*=d,f*=d,m*=d),e[0]=y,e[1]=f,e[2]=m,e[3]=0,e[4]=h*m-p*f,e[5]=p*y-c*m,e[6]=c*f-h*y,e[7]=0,e[8]=c,e[9]=h,e[10]=p,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},subtract:E,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e},exactEquals:I,equals:O,isOrthoNormal:A,mul:P,sub:R})},334:(e,t,r)=>{"use strict";function i(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}r.d(t,{r:()=>i}),r(33807);const s=i();Object.freeze({__proto__:null,create:i,clone:function(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(e,t,r,i,s,n,o,a,l,u,c,h,p,d,y,f){const m=new Float32Array(16);return m[0]=e,m[1]=t,m[2]=r,m[3]=i,m[4]=s,m[5]=n,m[6]=o,m[7]=a,m[8]=l,m[9]=u,m[10]=c,m[11]=h,m[12]=p,m[13]=d,m[14]=y,m[15]=f,m},createView:function(e,t){return new Float32Array(e,t,16)},IDENTITY:s})},60816:(e,t,r)=>{"use strict";function i(){return[0,0,0]}function s(e){return[e[0],e[1],e[2]]}function n(e,t,r){return[e,t,r]}function o(e){const t=[0,0,0],r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function a(e,t){return new Float64Array(e,t,3)}function l(){return n(1,1,1)}function u(){return n(1,0,0)}function c(){return n(0,1,0)}function h(){return n(0,0,1)}r.d(t,{$:()=>P,A:()=>xe,B:()=>Ee,C:()=>ye,D:()=>k,E:()=>j,F:()=>H,G:()=>p,H:()=>Z,I:()=>z,J:()=>X,K:()=>ne,L:()=>q,M:()=>o,N:()=>me,O:()=>ae,P:()=>O,Q:()=>ge,R:()=>C,S:()=>K,T:()=>J,U:()=>h,V:()=>de,W:()=>G,X:()=>ee,Y:()=>a,Z:()=>re,_:()=>V,a:()=>M,a0:()=>R,a1:()=>ie,a2:()=>Te,a3:()=>Me,a4:()=>ue,a5:()=>A,a6:()=>te,a7:()=>ce,a8:()=>he,a9:()=>oe,b:()=>x,c:()=>I,d:()=>F,e:()=>pe,f:()=>g,g:()=>fe,h:()=>T,i:()=>n,j:()=>D,k:()=>s,l:()=>d,m:()=>N,n:()=>i,o:()=>le,p:()=>be,q:()=>L,r:()=>_,s:()=>S,t:()=>v,u:()=>E,v:()=>_e,w:()=>we,x:()=>ve,y:()=>B,z:()=>U}),r(33807);const p=[0,0,0],d=l(),y=u(),f=c(),m=h();Object.freeze({__proto__:null,create:i,clone:s,fromValues:n,fromArray:o,createView:a,zeros:function(){return[0,0,0]},ones:l,unitX:u,unitY:c,unitZ:h,ZEROS:p,ONES:d,UNIT_X:y,UNIT_Y:f,UNIT_Z:m});const g=1e-6,v=Math.random,b=Math.PI/180,w=180/Math.PI;function _(e){return e*b}function x(e){return e*w}function S(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function T(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function M(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function E(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function I(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function O(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function A(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function P(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function R(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function F(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function C(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function L(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}function k(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return r*r+i*i+s*s}function N(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function j(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function D(e,t){const r=t[0],i=t[1],s=t[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function U(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function V(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2];return e[0]=s*l-n*a,e[1]=n*o-i*l,e[2]=i*a-s*o,e}function B(e,t,r,i){const s=t[0],n=t[1],o=t[2];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e}function z(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12],e[1]=r[1]*i+r[5]*s+r[9]*n+r[13],e[2]=r[2]*i+r[6]*s+r[10]*n+r[14],e}function q(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=i*r[0]+s*r[3]+n*r[6],e[1]=i*r[1]+s*r[4]+n*r[7],e[2]=i*r[2]+s*r[5]+n*r[8],e}function G(e,t,r){const i=r[0],s=r[1],n=r[2],o=r[3],a=t[0],l=t[1],u=t[2];let c=s*u-n*l,h=n*a-i*u,p=i*l-s*a,d=s*p-n*h,y=n*c-i*p,f=i*h-s*c;const m=2*o;return c*=m,h*=m,p*=m,d*=2,y*=2,f*=2,e[0]=a+c+d,e[1]=l+h+y,e[2]=u+p+f,e}Object.freeze({__proto__:null,EPSILON:g,RANDOM:v,toRadian:_,toDegree:x,equals:function(e,t){return Math.abs(e-t)<=g*Math.max(1,Math.abs(e),Math.abs(t))}});const $=[0,0,0],W=[0,0,0];function H(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function J(e,t){const r=e[0],i=e[1],s=e[2],n=t[0],o=t[1],a=t[2];return Math.abs(r-n)<=g*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=g*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-a)<=g*Math.max(1,Math.abs(s),Math.abs(a))}function Z(e,t,r){const i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const X=I,Y=O,Q=A,K=L,ee=k,te=S,re=N;var ie=Object.freeze({__proto__:null,length:S,copy:T,set:M,add:E,subtract:I,multiply:O,divide:A,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:P,max:R,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:F,scaleAndAdd:C,distance:L,squaredDistance:k,squaredLength:N,negate:j,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:D,dot:U,cross:V,lerp:B,hermite:function(e,t,r,i,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,u=o*(n-1),c=o*(3-2*n);return e[0]=t[0]*a+r[0]*l+i[0]*u+s[0]*c,e[1]=t[1]*a+r[1]*l+i[1]*u+s[1]*c,e[2]=t[2]*a+r[2]*l+i[2]*u+s[2]*c,e},bezier:function(e,t,r,i,s,n){const o=1-n,a=o*o,l=n*n,u=a*o,c=3*n*a,h=3*l*o,p=l*n;return e[0]=t[0]*u+r[0]*c+i[0]*h+s[0]*p,e[1]=t[1]*u+r[1]*c+i[1]*h+s[1]*p,e[2]=t[2]*u+r[2]*c+i[2]*h+s[2]*p,e},random:function(e,t){t=t||1;const r=2*v()*Math.PI,i=2*v()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*s,e[1]=Math.sin(r)*s,e[2]=i*t,e},transformMat4:z,transformMat3:q,transformQuat:G,rotateX:function(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e},rotateY:function(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e},rotateZ:function(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e},angle:function(e,t){T($,e),T(W,t),D($,$),D(W,W);const r=U($,W);return r>1?0:r<-1?Math.PI:Math.acos(r)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:H,equals:J,direction:Z,sub:X,mul:Y,div:Q,dist:K,sqrDist:ee,len:te,sqrLen:re});const se=new Float32Array(1),ne=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},oe=Number.isNaN||function(e){return e!=e};function ae(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function le(e,t,r){return Math.min(Math.max(e,t),r)}function ue(e){return 0==(e&e-1)}function ce(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function he(e){return 10**Math.ceil(Math.LOG10E*Math.log(e))}const pe=Math.sign||function(e){return+(e>0)-+(e<0)||+e},de=Math.log2||function(e){return Math.log(e)/Math.LN2};function ye(e,t,r){return e+(t-e)*r}function fe(e){return e*Math.PI/180}function me(e){return 180*e/Math.PI}function ge(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function ve(e){return Math.acos(le(e,-1,1))}function be(e){return Math.asin(le(e,-1,1))}function we(e,t,r=1e-6){if(oe(e)||oe(t))return!1;if(e===t)return!0;const i=Math.abs(e-t),s=Math.abs(e),n=Math.abs(t);if(0===e||0===t||s<1e-12&&n<1e-12){if(i>.01*r)return!1}else if(i/(s+n)>r)return!1;return!0}function _e(e,t,r=1e-6){return!oe(e)&&!oe(t)&&(e>t?e-t:t-e)<=r}function xe(e){return Se(Math.max(-Ee,Math.min(e,Ee)))}function Se(e){return se[0]=e,se[0]}function Te(e,t,r){const i=le((r-e)/(t-e),0,1);return i*i*(3-2*i)}function Me(e,t){const r=S(e);return M(t,r,be(e[2]/r),Math.atan2(e[1]/r,e[0]/r)),t}const Ee=Se(34028234663852886e22)},71470:(e,t,r)=>{"use strict";r.d(t,{L:()=>x,a:()=>y,i:()=>h,k:()=>S,r:()=>c,s:()=>d});var i=r(80219),s=r(20215),n=r(98548),o=r(92858),a=r(89710),l=r(20736),u=r(80987);const c={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.m({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:o.k.WebMercator}),minus180Line:new n.m({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:o.k.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.m({paths:[[[180,-180],[180,180]]],spatialReference:o.k.WGS84}),minus180Line:new n.m({paths:[[[-180,-180],[-180,180]]],spatialReference:o.k.WGS84})}};function h(e,t){return Math.ceil((e-t)/(2*t))}function p(e,t){const r=d(e);for(const e of r)for(const r of e)r[0]+=t;return e}function d(e){return(0,a.y)(e)?e.rings:e.paths}function y(e){const t=(null==e?void 0:e.isWebMercator)?102100:4326;return[c[t].minX,c[t].maxX]}function f(e){return{geometryType:(0,a.d)(e[0]),geometries:e.map((e=>e.toJSON()))}}const m=i.n.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function v(e){return"polyline"===e[0].type}function b(e,t,r){if(t){const t=function(e,t){if(!(e instanceof n.m||e instanceof n.j)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m.error(e),new s.s(e)}const r=d(e),i=[];for(const e of r){const r=[];i.push(r),r.push([e[0][0],e[0][1]]);for(let i=0;i<e.length-1;i++){const s=e[i][0],n=e[i][1],o=e[i+1][0],a=e[i+1][1],l=Math.sqrt((o-s)*(o-s)+(a-n)*(a-n)),u=(a-n)/l,c=(o-s)/l,h=l/t;if(h>1){for(let e=1;e<=h-1;e++){const i=e*t,o=c*i+s,a=u*i+n;r.push([o,a])}const e=(l+Math.floor(h-1)*t)/2,i=c*e+s,o=u*e+n;r.push([i,o])}r.push([o,a])}}return function(e){return"polygon"===e.type}(e)?new n.j({rings:i,spatialReference:e.spatialReference}):new n.m({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=(0,l.R)(t,!0)}return r&&(e=p(e,r)),e}function w(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const r=h(i,t);e[0]=i+r*(-2*t)}else if(i<r){const t=h(i,r);e[0]=i+t*(-2*r)}}else{const i=e.x;if(i>t){const r=h(i,t);e=e.clone().offset(r*(-2*t),0)}else if(i<r){const t=h(i,r);e=e.clone().offset(t*(-2*r),0)}}return e}function _(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=d(n);for(let e=0;e<o.length;e++){const t=o[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const i=t[e][0];r=i>r?i:r}r=Number(r.toFixed(9));const i=-360*h(r,180);for(let r=0;r<t.length;r++){const t=n.getPoint(e,r);n.setPoint(e,r,t.clone().offset(i,0))}return!0}}))}if(s===r){if(g(e))for(const t of d(n))e[s]=e[s].addRing(t);else if(v(e))for(const t of d(n))e[s]=e[s].addPath(t)}else r=s,e[s]=n}return e}async function x(e,t,r){if(!Array.isArray(e))return x([e],t);const s=t?t.url:i.d.geometryServiceUrl;let d,y,m,g,v,S,T,M,E=0;const I=[],O=[];for(const t of e)if((0,i.t)(t))O.push(t);else if(d||(d=t.spatialReference,y=(0,o.S)(d),m=d.isWebMercator,S=m?102100:4326,g=c[S].maxX,v=c[S].minX,T=c[S].plus180Line,M=c[S].minus180Line),y)if("mesh"===t.type)O.push(t);else if("point"===t.type)O.push(w(t.clone(),g,v));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>w(e,g,v))),O.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,y);O.push(e.rings?new n.j(e):e)}else if(t.extent){const e=t.extent,r=h(e.xmin,v)*(2*g);let i=0===r?t.clone():p(t.clone(),r);e.offset(r,0),e.intersects(T)&&e.xmax!==g?(E=e.xmax>E?e.xmax:E,i=b(i,m),I.push(i),O.push("cut")):e.intersects(M)&&e.xmin!==v?(E=e.xmax*(2*g)>E?e.xmax*(2*g):E,i=b(i,m,360),I.push(i),O.push("cut")):O.push(i)}else O.push(t.clone());else O.push(t);let A=h(E,g),P=-90;const R=A,F=new n.m;for(;A>0;){const e=360*A-180;F.addPath([[e,P],[e,-1*P]]),P*=-1,A--}if(I.length>0&&R>0){const t=_(I,await async function(e,t,r,i){const s="string"==typeof e?(0,u.U)(e):e,n=t[0].spatialReference,o={...i,query:{...s.query,f:"json",sr:JSON.stringify(n),target:JSON.stringify({geometryType:(0,a.d)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},l=await(0,u.L)(s.path+"/cut",o),{cutIndexes:c,geometries:h=[]}=l.data;return{cutIndexes:c,geometries:h.map((e=>{const t=(0,a.p)(e);return t.spatialReference=n,t}))}}(s,I,F,r)),n=[],o=[];for(let r=0;r<O.length;r++){const s=O[r];if("cut"!==s)o.push(s);else{const s=t.shift(),a=e[r];(0,i.r)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&s.rings.length>=a.rings.length?(n.push(s),o.push("simplify")):o.push(m?(0,l.d)(s):s)}}if(!n.length)return o;const c=await async function(e,t,r){const i="string"==typeof e?(0,u.U)(e):e,s=t[0].spatialReference,n=(0,a.d)(t[0]),o={...r,query:{...i.query,f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(f(t))}};return function(e,t,r){const i=(0,a.G)(t);return e.map((e=>{const t=i.fromJSON(e);return t.spatialReference=r,t}))}((await(0,u.L)(i.path+"/simplify",o)).data,n,s)}(s,n,r),h=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?h.push(t):h.push(m?(0,l.d)(c.shift()):c.shift())}return h}const C=[];for(let e=0;e<O.length;e++){const t=O[e];if("cut"!==t)C.push(t);else{const e=I.shift();C.push(!0===m?(0,l.d)(e):e)}}return Promise.resolve(C)}function S(e,t){const r=(0,o.S)(t);if(r){const[t,i]=r.valid,s=i-t;if(e<t)for(;e<t;)e+=s;if(e>i)for(;e>i;)e-=s}return e}},61888:(e,t,r)=>{"use strict";r.d(t,{n:()=>s,r:()=>n});var i=r(88903);function s(e){const t=(0,i.C)(100*(1-e));return Math.max(0,Math.min(t,100))}function n(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}},91507:(e,t,r)=>{"use strict";r.d(t,{n:()=>l}),r(33807);var i=r(80219),s=r(78155);const n=4294967296,o=(0,i.c)("esri-text-decoder")?new TextDecoder("utf-8"):null,a=(0,i.c)("safari")||(0,i.c)("ios")?6:(0,i.c)("ff")?12:32;class l{constructor(e,t,r=0,i=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this.init(e,t,r,i)}init(e,t,r,i){this._data=e,this._dataView=t,this._pos=r,this._end=i}clone(){return new l(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*n;return this._skip(8),r}getSFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*n;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){const e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,i){const s=this.getMessage(),n=e(s,t,r,i);return s.release(),n}processMessage(e){const t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){const e=this._getLength(),t=l.pool.acquire();return t.init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){l.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t,r=this._pos,i=0;if(this._end-r>=10)do{if(t=e[r++],i|=127&t,0==(128&t))break;if(t=e[r++],i|=(127&t)<<7,0==(128&t))break;if(t=e[r++],i|=(127&t)<<14,0==(128&t))break;if(t=e[r++],i|=(127&t)<<21,0==(128&t))break;if(t=e[r++],i+=268435456*(127&t),0==(128&t))break;if(t=e[r++],i+=34359738368*(127&t),0==(128&t))break;if(t=e[r++],i+=4398046511104*(127&t),0==(128&t))break;if(t=e[r++],i+=562949953421312*(127&t),0==(128&t))break;if(t=e[r++],i+=72057594037927940*(127&t),0==(128&t))break;if(t=e[r++],i+=0x8000000000000000*(127&t),0==(128&t))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;r!==this._end&&(t=e[r],0!=(128&t));)++r,i+=(127&t)*s,s*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=t*s}return this._pos=r,i}_decodeSVarint(){const e=this._decodeVarint();return e%2?-(e+1)/2:e/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>a&&o){const i=e.subarray(t,r);return o.decode(i)}let i="",s="";for(let n=t;n<r;++n){const t=e[n];128&t?s+="%"+t.toString(16):(i+=decodeURIComponent(s)+String.fromCharCode(t),s="")}return s.length&&(i+=decodeURIComponent(s)),i}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}l.pool=new s.h(l,null,(e=>{e._data=null,e._dataView=null}))},80136:(e,t,r)=>{"use strict";r.d(t,{i:()=>f,n:()=>h,q:()=>O,t:()=>C}),r(33807);var i=r(20215),s=r(80219),n=r(91507),o=r(91728),a=r(65352),l=r(92858),u=r(30691);const c=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class h{constructor(e){this.options=e,this.geometryTypes=c,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new u.e}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this.options.sourceSpatialReference||!e.spatialReference||(0,l.d)(e.spatialReference,this.options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=(0,a.T)(this.options.sourceSpatialReference)/(0,a.T)(e.spatialReference);if(1!==t)for(const r of e.features){if(!r.geometry||!r.geometry.coords)continue;const e=r.geometry.coords;for(let r=2;r<e.length;r+=3)e[r]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new o.t}createSpatialReference(){return{wkid:0}}createGeometry(){return new o.a}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new o.a}}const p=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],d=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],y=["upperLeft","lowerLeft"];function f(e){return e>=p.length?null:p[e]}function m(e){return e>=d.length?null:d[e]}function g(e){return e>=y.length?null:y[e]}function v(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function b(e,t,r){const i=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const r=e.getUInt32(),s=e.pos()+r;let n=0;for(;e.pos()<s;)t.addCoordinatePoint(i,e.getSInt64(),n++);break}case 1:case 2:default:e.skip()}return i}function w(e,t,r){const i=t.createGeometry(r),s=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),s=e.pos()+r;let n=0;for(;e.pos()<s;)t.addLength(i,e.getUInt32(),n++);break}case 3:{const r=e.getUInt32(),n=e.pos()+r;let o=0;for(t.allocateCoordinates(i);e.pos()<n;)t.addCoordinate(i,e.getSInt64(),o),o++,o===s&&(o=0);break}case 1:default:e.skip()}return i}function _(e){const t=new o.a;let r="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),i=e.pos()+r;for(;e.pos()<i;)t.lengths.push(e.getUInt32());break}case 3:{const r=e.getUInt32(),i=e.pos()+r;for(;e.pos()<i;)t.coords.push(e.getSInt64());break}case 1:r=c[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:r}}function x(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function S(e){const t={type:f(0)};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=f(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=m(e.getEnum());break;case 5:e.skip();break;case 6:t.defaultValue=e.getString();break;default:e.skip()}return t}function T(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function M(e,t,r,i){const s=t.createFeature(r);let n=0;for(;e.next();)switch(e.tag()){case 1:{const t=i[n++].name;s.attributes[t]=e.processMessage(x);break}case 2:s.geometry=e.processMessageWithArgs(w,t,r);break;case 4:s.centroid=e.processMessageWithArgs(b,t,r);break;default:e.skip()}return s}function E(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function I(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function O(e){const t={originPosition:g(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=g(e.getEnum());break;case 2:t.scale=e.processMessage(E);break;case 3:t.translate=e.processMessage(I);break;default:e.skip()}return t}function A(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function P(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function R(e,t){const r=t.createFeatureResult();r.geometryType=v(t,0);let i=!1;for(;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(A);break;case 7:r.geometryType=v(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(P,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(O);break;case 9:{const t=e.getBool();r.exceededTransferLimit=t;break}case 13:t.addField(r,e.processMessage(S));break;case 15:i||(t.prepareFeatures(r),i=!0),t.addFeature(r,e.processMessageWithArgs(M,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(T);break;case 6:default:e.skip()}return t.finishFeatureResult(r),r}function F(e,t){const r={};let i=null;for(;e.next();)switch(e.tag()){case 4:i=e.processMessageWithArgs(_);break;case 1:r.featureResult=e.processMessageWithArgs(R,t);break;case 2:case 3:default:e.skip()}return(0,s.r)(i)&&r.featureResult&&t.addQueryGeometry(r,i),r}function C(e,t){const r=function(e,t){try{const r=2,i=new n.n(new Uint8Array(e),new DataView(e)),s={};for(;i.next();)switch(i.tag()){case r:s.queryResult=i.processMessageWithArgs(F,t);break;default:i.skip()}return s}catch(e){throw new i.s("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}}(e,t),s=r.queryResult.featureResult,o=r.queryResult.queryGeometry,a=r.queryResult.queryGeometryType;if(s&&s.features&&s.features.length&&s.objectIdFieldName){const e=s.objectIdFieldName;for(const t of s.features)t.attributes&&(t.objectId=t.attributes[e])}return s&&(s.queryGeometry=o,s.queryGeometryType=a),s}},29832:(e,t,r)=>{"use strict";r.d(t,{R:()=>d,c:()=>n,i:()=>o,m:()=>a,p:()=>l,v:()=>h});var i=r(80219),s=r(80987);function n(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=(0,s.T)(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=(0,s.W)(e,t.portalItem.itemUrl);c.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return p(e,t&&t.portal)}function o(e,t,r=0){if(!e)return e;!(0,s.Q)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=(0,s.T)(e);if(t){const r=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(r){const n=p(r,t.portal);i=(0,s.W)(p(i,t.portal),n,n),i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?(0,s.x)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}(i,t&&t.portal),(0,s.Q)(i)&&(i=(0,s.z)(i)),null!=t&&t.resources&&null!=t&&t.portalItem&&!(0,s.Q)(i)&&!(0,s.G)(i)&&0===r&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i)}),i}function a(e,t,r){return n(e,r)}function l(e,t,r,i){const s=o(e,i);void 0!==s&&(t[r]=s)}const u=/\/items\/([^\/]+)\/resources\//,c=/^\.\/resources\//;function h(e){const t=(0,i.r)(e)?e.match(u):null;return(0,i.r)(t)?t[1]:null}function p(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`;return(0,s.E)(s.c,`${s.c.scheme}://${r}`)?(0,s.x)(e,t.portalHostname,r):(0,s.x)(e,r,t.portalHostname)}var d=Object.freeze({__proto__:null,fromJSON:n,toJSON:o,read:a,write:l,itemIdFromResourceUrl:h})},99987:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var i=r(82906),s=r(52957);const n=["oid","global-id"],o=["oid","global-id","guid"];function a({displayField:e,editFieldsInfo:t,fields:r,objectIdField:n,title:o},a){if(!r)return null;const l=function({editFieldsInfo:e,fields:t,objectIdField:r},s){return function(e,t){const r=e;return t&&(e=e.filter((e=>-1===t.indexOf(e.type)))),e===r&&(e=e.slice()),e.sort(c),e}(t,(null==s?void 0:s.ignoreFieldTypes)||f).map((t=>new i.a({fieldName:t.name,isEditable:p(t,e),label:t.alias,format:d(t),visible:u(t,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:null==s?void 0:s.visibleFieldNames})})))}({editFieldsInfo:t,fields:r,objectIdField:n},a);if(!l.length)return null;const h=function(e){const t=(0,s.h)(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}({titleBase:o,fields:r,displayField:e}),y=[new i.b,new i.p];return new i.M({title:h,content:y,fieldInfos:l})}const l=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],u=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:i})=>i?i.has(e.name):!(h(e.name,t)||r&&e.name===r||n.indexOf(e.type)>-1||l.some((t=>t.test(e.name))));function c(e,t){return"oid"===e.type?-1:"oid"===t.type?1:y(e)?-1:y(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=t;return-1!==[r&&r.toLowerCase(),i&&i.toLowerCase(),s&&s.toLowerCase(),n&&n.toLowerCase()].indexOf(e.toLowerCase())}function p(e,t){return e.editable&&-1===o.indexOf(e.type)&&!h(e.name,t)}function d(e){switch(e.type){case"small-integer":case"integer":case"single":return new i.l({digitSeparator:!0,places:0});case"double":return new i.l({digitSeparator:!0,places:2});case"date":return new i.l({dateFormat:"long-month-day-year"});default:return null}}function y(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())||void 0}const f=["geometry","blob","raster","guid","xml"]},32892:(e,t,r)=>{"use strict";r.d(t,{B:()=>_,F:()=>y,L:()=>w,M:()=>g,R:()=>x,V:()=>v,_:()=>f,k:()=>b,v:()=>m}),r(33807);var i=r(80219),s=r(95186),n=r(62654),o=r(71542),a=r(60816),l=r(7571),u=r(65352),c=r(92858),h=r(20736),p=r(65311);const d=i.n.getLogger("esri.geometry.support.meshUtils.normalProjection");function y(e,t,r,i,s){return T(i)?(S(0,p.i.fromTypedArray(e),p.T.fromTypedArray(t),p.T.fromTypedArray(r),i,p.i.fromTypedArray(s)),s):(d.error("Cannot convert spatial reference to PCPF"),s)}function f(e,t,r,i,s){return T(i)?(S(1,p.i.fromTypedArray(e),p.T.fromTypedArray(t),p.T.fromTypedArray(r),i,p.i.fromTypedArray(s)),s):(d.error("Cannot convert to spatial reference from PCPF"),s)}function m(e,t,r){return(0,l.x)(e,t,0,r,(0,u.e)(t),0,e.length/3),r}function g(e,t,r){return(0,l.x)(e,(0,u.e)(r),0,t,r,0,e.length/3),t}function v(e,t,r){if((0,i.t)(e))return t;const s=p.T.fromTypedArray(e),n=p.T.fromTypedArray(t);return(0,o.b)(n,s,r),t}function b(e,t,r){if((0,i.t)(e))return t;(0,s.j)(A,r);const n=p.i.fromTypedArray(e),a=p.i.fromTypedArray(t);return(0,o.f)(a,n,A),(0,s.B)(A)||(0,o.o)(a,a),t}function w(e,t,r){if((0,i.t)(e))return t;(0,s.j)(A,r);const n=p.i.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),a=p.i.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT);if((0,o.f)(a,n,A),(0,s.B)(A)||(0,o.o)(a,a),e!==t)for(let r=3;r<e.length;r+=4)t[r]=e[r];return t}function _(e,t,r,i,s){if(!T(i))return d.error("Cannot convert spatial reference to PCPF"),s;S(0,p.i.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),p.T.fromTypedArray(t),p.T.fromTypedArray(r),i,p.i.fromTypedArray(s,4*Float32Array.BYTES_PER_ELEMENT));for(let t=3;t<e.length;t+=4)s[t]=e[t];return s}function x(e,t,r,i,s){if(!T(i))return d.error("Cannot convert to spatial reference from PCPF"),s;S(1,p.i.fromTypedArray(e,16),p.T.fromTypedArray(t),p.T.fromTypedArray(r),i,p.i.fromTypedArray(s,16));for(let t=3;t<e.length;t+=4)s[t]=e[t];return s}function S(e,t,r,i,n,o){if(!t)return;const c=r.count,p=(0,u.e)(n);if(M(n))for(let r=0;r<c;r++)i.getVec(r,E),t.getVec(r,I),(0,l.S)(p,E,O,p),(0,s.a)(A,O),1===e&&(0,s.o)(A,A),(0,a.L)(I,I,A),o.setVec(r,I);else for(let n=0;n<c;n++){i.getVec(n,E),t.getVec(n,I),(0,l.S)(p,E,O,p),(0,s.a)(A,O);const u=(0,h.f)(r.get(n,1));let c=Math.cos(u);0===e&&(c=1/c),A[0]*=c,A[1]*=c,A[2]*=c,A[3]*=c,A[4]*=c,A[5]*=c,1===e&&(0,s.o)(A,A),(0,a.L)(I,I,A),(0,a.j)(I,I),o.setVec(n,I)}return o}function T(e){return M(e)||function(e){return e.isWebMercator}(e)}function M(e){return e.isWGS84||(0,c.T)(e)||(0,c.a)(e)||(0,c.P)(e)}const E=(0,a.n)(),I=(0,a.n)(),O=(0,o.e)(),A=(0,n.e)()},7571:(e,t,r)=>{"use strict";r.d(t,{C:()=>_e,D:()=>Q,E:()=>me,F:()=>xe,G:()=>Pe,H:()=>K,J:()=>ee,M:()=>he,O:()=>te,P:()=>ve,R:()=>pe,S:()=>Se,T:()=>we,V:()=>X,X:()=>Y,Z:()=>Fe,_:()=>Ce,a:()=>z,b:()=>D,d:()=>ce,e:()=>se,f:()=>le,i:()=>j,j:()=>de,l:()=>oe,n:()=>ie,t:()=>ne,w:()=>ye,x:()=>ge,y:()=>fe}),r(33807);var i=r(20215),s=r(60816),n=r(80219),o=r(65352),a=r(93242),l=r(98548),u=r(63358),c=r(20736),h=r(58404),p=r(92858);let d,y=null;function f(){return!!y}function m(){return d||(d=Promise.all([r.e(9351),r.e(1458)]).then(r.bind(r,21458)).then((function(e){return e.p})).then((({default:e})=>e({locateFile:e=>(0,u.a)(`esri/geometry/support/${e}`)}))).then((e=>{R(e)})),d)}var g,v,b,w;!function(e){function t(e,t,r){y.ensureCache.prepare();const i=L(r),s=r===i,n=y.ensureFloat64(i),o=y._pe_geog_to_proj(y.getPointer(e),t,n);return o&&k(r,t,n,s),o}function r(e,t,r){return i(e,t,r,0)}function i(e,t,r,i){y.ensureCache.prepare();const s=L(r),n=r===s,o=y.ensureFloat64(s),a=y._pe_proj_to_geog_center(y.getPointer(e),t,o,i);return a&&k(r,t,o,n),a}e.geogToProj=t,e.projGeog=function(e,i,s,n){switch(n){case v.PE_TRANSFORM_P_TO_G:return r(e,i,s);case v.PE_TRANSFORM_G_TO_P:return t(e,i,s)}return 0},e.projToGeog=r,e.projToGeogCenter=i}(g||(g={})),(w=v||(v={})).init=function(){w.PE_BUFFER_MAX=y.PeDefs.prototype.PE_BUFFER_MAX,w.PE_NAME_MAX=y.PeDefs.prototype.PE_NAME_MAX,w.PE_MGRS_MAX=y.PeDefs.prototype.PE_MGRS_MAX,w.PE_USNG_MAX=y.PeDefs.prototype.PE_USNG_MAX,w.PE_DD_MAX=y.PeDefs.prototype.PE_DD_MAX,w.PE_DDM_MAX=y.PeDefs.prototype.PE_DDM_MAX,w.PE_DMS_MAX=y.PeDefs.prototype.PE_DMS_MAX,w.PE_UTM_MAX=y.PeDefs.prototype.PE_UTM_MAX,w.PE_PARM_MAX=y.PeDefs.prototype.PE_PARM_MAX,w.PE_TYPE_NONE=y.PeDefs.prototype.PE_TYPE_NONE,w.PE_TYPE_GEOGCS=y.PeDefs.prototype.PE_TYPE_GEOGCS,w.PE_TYPE_PROJCS=y.PeDefs.prototype.PE_TYPE_PROJCS,w.PE_TYPE_GEOGTRAN=y.PeDefs.prototype.PE_TYPE_GEOGTRAN,w.PE_TYPE_COORDSYS=y.PeDefs.prototype.PE_TYPE_COORDSYS,w.PE_TYPE_UNIT=y.PeDefs.prototype.PE_TYPE_UNIT,w.PE_TYPE_LINUNIT=y.PeDefs.prototype.PE_TYPE_LINUNIT,w.PE_STR_OPTS_NONE=y.PeDefs.prototype.PE_STR_OPTS_NONE,w.PE_STR_AUTH_NONE=y.PeDefs.prototype.PE_STR_AUTH_NONE,w.PE_STR_AUTH_TOP=y.PeDefs.prototype.PE_STR_AUTH_TOP,w.PE_STR_NAME_CANON=y.PeDefs.prototype.PE_STR_NAME_CANON,w.PE_PARM_X0=y.PeDefs.prototype.PE_PARM_X0,w.PE_PARM_ND=y.PeDefs.prototype.PE_PARM_ND,w.PE_TRANSFORM_1_TO_2=y.PeDefs.prototype.PE_TRANSFORM_1_TO_2,w.PE_TRANSFORM_2_TO_1=y.PeDefs.prototype.PE_TRANSFORM_2_TO_1,w.PE_TRANSFORM_P_TO_G=y.PeDefs.prototype.PE_TRANSFORM_P_TO_G,w.PE_TRANSFORM_G_TO_P=y.PeDefs.prototype.PE_TRANSFORM_G_TO_P,w.PE_HORIZON_RECT=y.PeDefs.prototype.PE_HORIZON_RECT,w.PE_HORIZON_POLY=y.PeDefs.prototype.PE_HORIZON_POLY,w.PE_HORIZON_LINE=y.PeDefs.prototype.PE_HORIZON_LINE,w.PE_HORIZON_DELTA=y.PeDefs.prototype.PE_HORIZON_DELTA},function(e){const t={},r={},i=e=>{if(e){const t=e.getType();switch(t){case v.PE_TYPE_GEOGCS:e=y.castObject(e,y.PeGeogcs);break;case v.PE_TYPE_PROJCS:e=y.castObject(e,y.PeProjcs);break;case v.PE_TYPE_GEOGTRAN:e=y.castObject(e,y.PeGeogtran);break;default:t&v.PE_TYPE_UNIT&&(e=y.castObject(e,y.PeUnit))}}return e};function s(e,r){let s=null,n=t[e];if(n||(n={},t[e]=n),n.hasOwnProperty(String(r)))s=n[r];else{const t=y.PeFactory.prototype.factoryByType(e,r);y.compare(t,y.NULL)||(s=t,n[r]=s)}return s=i(s),s}e.initialize=function(){y.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return s(v.PE_TYPE_COORDSYS,e)},e.factoryByType=s,e.fromString=function(e,t){let s=null,n=r[e];if(n||(n={},r[e]=n),n.hasOwnProperty(t))s=n[t];else{const r=y.PeFactory.prototype.fromString(e,t);y.compare(r,y.NULL)||(s=r,n[t]=s)}return s=i(s),s},e.geogcs=function(e){return s(v.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return s(v.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return y.PeFactory.prototype.getCode(e)},e.projcs=function(e){return s(v.PE_TYPE_PROJCS,e)},e.unit=function(e){return s(v.PE_TYPE_UNIT,e)}}(b||(b={}));let _=null;var x,S,T,M,E,I,O,A,P;function R(e){function t(e,t,r){e[t]=r(e[t])}y=e,v.init(),x.init(),E.init(),O.init(),A.init(),_=class extends y.PeGCSExtent{destroy(){y.destroy(this)}};const r=[y.PeDatum,y.PeGeogcs,y.PeGeogtran,y.PeObject,y.PeParameter,y.PePrimem,y.PeProjcs,y.PeSpheroid,y.PeUnit];for(const e of r)t(e.prototype,"getName",(e=>function(){return e.call(this,new Array(v.PE_NAME_MAX))}));for(const e of[y.PeGeogtran,y.PeProjcs])t(e.prototype,"getParameters",(e=>function(){const t=new Array(v.PE_PARM_MAX);let r=e.call(this);for(let e=0;e<t.length;e++){const i=y.getValue(r,"*");t[e]=i?y.wrapPointer(i,y.PeParameter):null,r+=Int32Array.BYTES_PER_ELEMENT}return t}));t(y.PeHorizon.prototype,"getCoord",(e=>function(){const t=this.getSize();if(!t)return null;const r=[];return k(r,t,e.call(this)),r})),t(y.PeGTlistExtendedEntry.prototype,"getEntries",(e=>{const t=y._pe_getPeGTlistExtendedGTsSize();return function(){let r=null;const i=e.call(this);if(!y.compare(i,y.NULL)){r=[i];const e=this.getSteps();if(e>1){const s=y.getPointer(i);for(let i=1;i<e;i++)r.push(y.wrapPointer(s+t*i,y.PeGTlistExtendedGTs))}}return r}}));const i=y._pe_getPeHorizonSize(),s=e=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);let r=null;const s=e.call(this);if(!y.compare(s,y.NULL)){r=[s];const e=s.getNump();if(e>1){const t=y.getPointer(s);for(let s=1;s<e;s++)r.push(y.wrapPointer(t+i*s,y.PeHorizon))}}return t.set(e,r),r};t(y.PeProjcs.prototype,"horizonGcsGenerate",s),t(y.PeProjcs.prototype,"horizonPcsGenerate",s),y.PeObject.prototype.toString=function(e=v.PE_STR_OPTS_NONE){y.ensureCache.prepare();const t=y.getPointer(this),r=y.ensureInt8(new Array(v.PE_BUFFER_MAX));return y.UTF8ToString(y._pe_object_to_string_ext(t,e,r))}}function F(e){if(!e)return;const t=y.getClass(e);if(!t)return;const r=y.getCache(t);if(!r)return;const i=y.getPointer(e);i&&delete r[i]}function C(e,t){const r=[],i=new Array(t);for(let t=0;t<e;t++)r.push(y.ensureInt8(i));return r}function L(e){let t;return Array.isArray(e[0])?(t=[],e.forEach((e=>{t.push(e[0],e[1])}))):t=e,t}function k(e,t,r,i=!1){if(i)for(let i=0;i<2*t;i++)e[i]=y.getValue(r+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=0===e.length;for(let s=0;s<t;s++)i&&(e[s]=new Array(2)),e[s][0]=y.getValue(r,"double"),e[s][1]=y.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}!function(e){let t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=y.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=y._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,r,i,s,n,o){let a=null;const l=new y.PeInteger(o);try{const u=y.PeGTlistExtended.prototype.getGTlist(e,r,i,s,n,l);if((o=l.val)&&(a=[u],o>1)){const e=y.getPointer(u);for(let r=1;r<o;r++)a.push(y.wrapPointer(e+t*r,y.PeGTlistExtendedEntry))}}finally{y.destroy(l)}return a}}(x||(x={})),function(e){e.destroy=function(e){if(e&&e.length){for(const t of e)F(t),t.getEntries().forEach((e=>{F(e);const t=e.getGeogtran();F(t),t.getParameters().forEach(F),[t.getGeogcs1(),t.getGeogcs2()].forEach((e=>{F(e);const t=e.getDatum();F(t),F(t.getSpheroid()),F(e.getPrimem()),F(e.getUnit())}))}));y.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(S||(S={})),function(e){e.geogToGeog=function(e,t,r,i,s){y.ensureCache.prepare();const n=L(r),o=r===n,a=y.ensureFloat64(n);let l=0;i&&(l=y.ensureFloat64(i));const u=y._pe_geog_to_geog(y.getPointer(e),t,a,l,s);return u&&k(r,t,a,o),u}}(T||(T={})),function(e){const t=(e,t,r,i,s,n)=>{let o,a;switch(y.ensureCache.prepare(),e){case"dd":o=y._pe_geog_to_dd,a=v.PE_DD_MAX;break;case"ddm":o=y._pe_geog_to_ddm,a=v.PE_DDM_MAX;break;case"dms":o=y._pe_geog_to_dms,a=v.PE_DMS_MAX}let l=0;t&&(l=y.getPointer(t));const u=L(i),c=y.ensureFloat64(u),h=C(r,a),p=o(l,r,c,s,y.ensureInt32(h));if(p)for(let e=0;e<r;e++)n[e]=y.UTF8ToString(h[e]);return p},r=(e,t,r,i,s)=>{let n;switch(y.ensureCache.prepare(),e){case"dd":n=y._pe_dd_to_geog;break;case"ddm":n=y._pe_ddm_to_geog;break;case"dms":n=y._pe_dms_to_geog}let o=0;t&&(o=y.getPointer(t));const a=i.map((e=>y.ensureString(e))),l=y.ensureInt32(a),u=y.ensureFloat64(new Array(2*r)),c=n(o,r,l,u);return c&&k(s,r,u),c};e.geog_to_dms=function(e,r,i,s,n){return t("dms",e,r,i,s,n)},e.dms_to_geog=function(e,t,i,s){return r("dms",e,t,i,s)},e.geog_to_ddm=function(e,r,i,s,n){return t("ddm",e,r,i,s,n)},e.ddm_to_geog=function(e,t,i,s){return r("ddm",e,t,i,s)},e.geog_to_dd=function(e,r,i,s,n){return t("dd",e,r,i,s,n)},e.dd_to_geog=function(e,t,i,s){return r("dd",e,t,i,s)}}(M||(M={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=y.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=y.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=y.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=y.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=y.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,t,r,i,s,n,o){y.ensureCache.prepare();let a=0;e&&(a=y.getPointer(e));const l=L(r),u=y.ensureFloat64(l),c=C(t,v.PE_MGRS_MAX),h=y.ensureInt32(c),p=y._pe_geog_to_mgrs_extended(a,t,u,i,s,n,h);if(p)for(let e=0;e<t;e++)o[e]=y.UTF8ToString(c[e]);return p},e.mgrs_to_geog_extended=function(e,t,r,i,s){y.ensureCache.prepare();let n=0;e&&(n=y.getPointer(e));const o=r.map((e=>y.ensureString(e))),a=y.ensureInt32(o),l=y.ensureFloat64(new Array(2*t)),u=y._pe_mgrs_to_geog_extended(n,t,a,i,l);return u&&k(s,t,l),u}}(E||(E={})),function(e){e.geog_to_usng=function(e,t,r,i,s,n,o){y.ensureCache.prepare();let a=0;e&&(a=y.getPointer(e));const l=L(r),u=y.ensureFloat64(l),c=C(t,v.PE_MGRS_MAX),h=y.ensureInt32(c),p=y._pe_geog_to_usng(a,t,u,i,s,n,h);if(p)for(let e=0;e<t;e++)o[e]=y.UTF8ToString(c[e]);return p},e.usng_to_geog=function(e,t,r,i){y.ensureCache.prepare();let s=0;e&&(s=y.getPointer(e));const n=r.map((e=>y.ensureString(e))),o=y.ensureInt32(n),a=y.ensureFloat64(new Array(2*t)),l=y._pe_usng_to_geog(s,t,o,a);return l&&k(i,t,a),l}}(I||(I={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=y.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=y.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=y.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,t,r,i,s){y.ensureCache.prepare();let n=0;e&&(n=y.getPointer(e));const o=L(r),a=y.ensureFloat64(o),l=C(t,v.PE_UTM_MAX),u=y.ensureInt32(l),c=y._pe_geog_to_utm(n,t,a,i,u);if(c)for(let e=0;e<t;e++)s[e]=y.UTF8ToString(l[e]);return c},e.utm_to_geog=function(e,t,r,i,s){y.ensureCache.prepare();let n=0;e&&(n=y.getPointer(e));const o=r.map((e=>y.ensureString(e))),a=y.ensureInt32(o),l=y.ensureFloat64(new Array(2*t)),u=y._pe_utm_to_geog(n,t,a,i,l);return u&&k(s,t,l),u}}(O||(O={})),function(e){const t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=y.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=y.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=y.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=y.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(r,i=e.PE_PCSINFO_OPTION_DOMAIN){let s,n;return t.has(r)&&(n=t.get(r),n[i]&&(s=n[i])),s||(s=y.PePCSInfo.prototype.generate(r,i),n||(n=[],t.set(r,n)),n[i]=s),s}}(A||(A={})),function(e){e.version_string=function(){return y.PeVersion.prototype.version_string()}}(P||(P={}));var N=Object.freeze({__proto__:null,get _pe(){return y},isLoaded:f,isSupported:function(){return!!(0,n.c)("esri-wasm")},load:m,get PeCSTransformations(){return g},get PeDefs(){return v},get PeFactory(){return b},get PeGCSExtent(){return _},get PeGTlistExtended(){return x},get PeGTlistExtendedEntry(){return S},get PeGTTransformations(){return T},get PeNotationDms(){return M},get PeNotationMgrs(){return E},get PeNotationUsng(){return I},get PeNotationUtm(){return O},get PePCSInfo(){return A},get PeVersion(){return P},_init:R});const j=Math.PI/180,D=/SPHEROID\[([^\]]+)]/i,U=c.s.radius,V=c.s.eccentricitySquared,B={a1:U*V,a2:U*V*U*V,a3:U*V*V/2,a4:U*V*U*V*2.5,a5:U*V+U*V*V/2,a6:1-V},z={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.s.radius,f:c.s.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:c.e.radius,f:c.e.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:c.t.radius,f:c.t.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:c.t.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let q=0;class G{constructor(e=null){this.uid=q++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(e){const t=new G;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=q++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=q++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=q++}getInverse(){const e=new G;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class ${constructor(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const t of e.steps)t instanceof G?this.steps.push(t):this.steps.push(new G({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}static cacheKey(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")}static fromGE(e){const t=new $;let r="";for(const i of e.steps){const e=G.fromGE(i);t.steps.push(e),r+=e.uid.toString()+","}return t._cached_projection={},t._gtlistentry=null,t._chain=r,t}getInverse(){const e=new $;e.steps=[];for(let t=this.steps.length-1;t>=0;t--){const r=this.steps[t];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry}assignCachedGe(e,t,r){this._cached_projection[$.cacheKey(e,t)]=r}getCachedGeTransformation(e,t){let r="";for(const e of this.steps)r+=e.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const i=this._cached_projection[$.cacheKey(e,t)];return void 0===i?null:i}}let W=null,H=null,J=null,Z={};function X(){return!!W&&f()}function Y(){return!0}function Q(e){return(0,n.t)(J)&&(J=Promise.all([m(),r.e(1337).then(r.bind(r,15052)).then((function(e){return e.g})),r.e(9351).then(r.bind(r,43508))])),J.then((([,t,{hydratedAdapter:r}])=>{(0,i.a)(e),H=r,W=t.default,W._enableProjection(N)}))}function K(e,t,r=null){return Array.isArray(e)?0===e.length?[]:ee(H,e,e[0].spatialReference,t,r):ee(H,[e],e.spatialReference,t,r)[0]}function ee(e,t,r,i,s=null){if((0,n.t)(r)||(0,n.t)(i))return t;if(ie(r,i,s))return t.map((e=>function(e,t,r){if(!e)return e;if("x"in e){const i=new c.b;return ae(e,t,i,r)?i:null}if("xmin"in e){const i=new l.M;return function(e,t,r,i,s=0){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:c}=e;return!!de(n,o,u?e.zmin:s,t,at,i)&&(r.xmin=at[0],r.ymin=at[1],u&&(r.zmin=at[2]),!!de(a,l,u?e.zmax:s,t,at,i)&&(r.xmax=at[0],r.ymax=at[1],u&&(r.zmax=at[2]),c&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,!0))}(e,t,i,r)?i:null}if("rings"in e){const i=new l.j;return ue(e,t,i,r)?i:null}if("paths"in e){const i=new l.m;return function(e,t,r,i,s=0){const{paths:n,hasZ:o,hasM:a}=e,l=[];return!!be(n,o,a,t,l,i,s)&&(r.paths=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,!0)}(e,t,i,r)?i:null}if("points"in e){const i=new l.u;return function(e,t,r,i,s=0){const{points:n,hasZ:o,hasM:a}=e,l=[],u=n.length,c=[];for(const e of n)c.push(e[0],e[1],o?e[2]:s);if(!ge(c,t,0,c,i,0,u))return!1;for(let e=0;e<u;++e){const t=3*e,r=c[t],i=c[t+1];o&&a?l.push([r,i,c[t+2],n[e][3]]):o?l.push([r,i,c[t+2]]):a?l.push([r,i,n[e][2]]):l.push([r,i])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,!0}(e,t,i,r)?i:null}return null}(e,r,i)));if((0,n.t)(s)){const e=$.cacheKey(r,i);void 0!==Z[e]?s=Z[e]:(s=te(r,i,null),(0,n.t)(s)&&(s=new $),Z[e]=s)}if((0,n.t)(W))throw new re;return W._project(e,t,r,i,s)}function te(e,t,r=null){if((0,n.t)(W))throw new re;if((0,n.t)(e)||(0,n.t)(t))return null;const i=W._getTransformation(H,e,t,r,null==r?void 0:r.spatialReference);return null!==i?$.fromGE(i):null}class re extends i.s{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function ie(e,t,r){return!r&&(!!(0,p.d)(e,t)||(0,p.s)(e)&&(0,p.s)(t)&&!!Ze(e,t,et))}async function se(e,t,r,i){if(!X())if(Array.isArray(e)){for(const{source:t,dest:r,geographicTransformation:s}of e)if(!ie(t,r,s))return Q(i)}else if(!ie(e,t,r))return Q(i)}function ne(e,t){switch(Ze(e,t,et)){case Ee:return"copy3";case je:return"wgs84ToSphericalECEF";case Re:return"wgs84ToWebMercator";case Ge:return"wgs84ToWGS84ECEF";case Ie:return"webMercatorToWGS84";case Oe:return"webMercatorToSphericalECEF";case Ae:return"webMercatorToWGS84ECEF";case $e:return"wgs84ECEFToWGS84";case We:return"wgs84ECEFToSphericalECEF";case He:return"wgs84ECEFToWebMercator";case Be:return"sphericalECEFToWGS84";case ze:return"sphericalECEFToWebMercator";case Ve:return"sphericalMarsPCPFToMars2000";case Ue:return"sphericalMoonPCPFToMoon2000";case qe:return"sphericalECEFToWGS84ECEF";case Ne:return"mars2000ToSphericalPCPF";case ke:return"moon2000ToSphericalPCPF";default:return null}}function oe(e,t,r=t.spatialReference,i=0){return!(0,n.t)(r)&&ae(e,e.spatialReference,t,r,i)}function ae(e,t,r,i,s=0){at[0]=e.x,at[1]=e.y;const n=e.z;return at[2]=void 0!==n?n:s,!!ge(at,t,0,at,i,0,1)&&(r.x=at[0],r.y=at[1],r.spatialReference=i,void 0===n?(r.z=void 0,r.hasZ=!1):(r.z=at[2],r.hasZ=!0),void 0===e.m?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),!0)}function le(e,t,r=t.spatialReference,i=0){return!(0,n.t)(r)&&ue(e,e.spatialReference,t,r,i)}function ue(e,t,r,i,s=0){const{rings:n,hasZ:o,hasM:a}=e,l=[];return!!be(n,o,a,t,l,i,s)&&(r.rings=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,!0)}function ce(e,t,r){if((0,n.t)(t)||(0,n.t)(r))return null;const i=new c.b({spatialReference:r});return ge(e,t,0,at,r,0,1)?(i.x=at[0],i.y=at[1],i.z=at[2],i):null}function he(e,t,r){return ge(e,t,0,at,r.spatialReference,0,1)?(r.x=at[0],r.y=at[1],r.z=at[2],r):null}function pe(e,t,r,i=0){at[0]=e.x,at[1]=e.y;const s=e.z;return at[2]=void 0!==s?s:i,ge(at,e.spatialReference,0,t,r,0,1)}function de(e,t,r,i,s,n){return st[0]=e,st[1]=t,st[2]=r,ge(st,i,0,s,n,0,1)}function ye(e,t,r,i){return!((0,n.t)(t)||(0,n.t)(i)||e.length<2)&&(2===e.length&&(st[0]=e[0],st[1]=e[1],st[2]=0,e=st),ge(e,t,0,r,i,0,1))}function fe(e,t){at[0]=e.x,at[1]=e.y;const r=e.z;return at[2]=void 0!==r?r:0,me(at,e.spatialReference,t)}function me(e,t,r){return function(e,t,r){if((0,n.t)(t))return!1;const i=Me(t,Qe),s=Je[i][6];return!(0,n.t)(s)&&(s(e,0,st,0),r!==st&&(r[0]=st[0],r[1]=st[1],r.length>2&&(r[2]=st[2])),!0)}(e,t,r)}function ge(e,t,r,i,s,o,a=1){const l=Ze(t,s,et);if((0,n.t)(l))return!1;if(l===Ee){if(e===i&&r===o)return!0;const t=r+3*a;for(let s=r,n=o;s<t;s++,n++)i[n]=e[s];return!0}const u=r+3*a;for(let t=r,s=o;t<u;t+=3,s+=3)l(e,t,i,s);return!0}function ve(e,t,r,i,n){(0,s.h)(at,e),(0,s.u)(lt,e,t),ye(at,r,at,n),ye(lt,r,lt,n),(0,s.c)(i,lt,at),(0,s.j)(i,i)}function be(e,t,r,i,s,n,o=0){const a=new Array;for(const r of e)for(const e of r)a.push(e[0],e[1],t?e[2]:o);if(!ge(a,i,0,a,n,0,a.length/3))return!1;let l=0;s.length=0;for(const i of e){const e=new Array;for(const s of i)t&&r?e.push([a[l++],a[l++],a[l++],s[3]]):t?e.push([a[l++],a[l++],a[l++]]):r?(e.push([a[l++],a[l++],s[2]]),l++):(e.push([a[l++],a[l++]]),l++);s.push(e)}return!0}function we(e,t,r,i){if((0,n.t)(t)||(0,n.t)(i))return!1;const s=Xe(t,i,tt);if(s.projector===Ee)return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],!0;if((0,n.t)(s.projector))return!1;const{source:o,dest:a}=s;if(3===a.spatialReferenceId){const t=Je[o.spatialReferenceId][2];if((0,n.t)(t))return!1;t(e,0,nt,0);const i=Math.abs(rt*nt[1])+Math.asin(e[3]/(c.s.radius+e[2]));if(Re(nt,0,r,0),i>.9999*Math.PI)r[3]=Number.MAX_VALUE;else{const t=1/Math.cos(i);r[3]=t*e[3]}return!0}return s.projector(e,0,r,0),r[3]=e[3]*o.metersPerUnit/a.metersPerUnit,!0}function _e(e,t,r,i){return!(null==e||((0,p.d)(t,i)?((0,h.A)(r,e),0):(st[0]=e[0],st[1]=e[1],st[2]=0,!ge(st,t,0,st,i,0,1)||(r[0]=st[0],r[1]=st[1],st[0]=e[2],st[1]=e[3],st[2]=0,!ge(st,t,0,st,i,0,1)||(r[2]=st[0],r[3]=st[1],0)))))}function xe(e,t,r,i){if((0,n.t)(t)||(0,n.t)(i))return!1;const o=Me(t,Qe),a=Me(i,Ke);if(o===a&&0!==o||(0,p.d)(t,i))return r[0]=1,r[1]=1,r[2]=1,!0;if(1===o){const t=(0,s.s)(e),i=t/Math.sqrt(e[0]*e[0]+e[1]*e[1]),n=t/c.s.radius;if(3===a)return r[0]=i*n,r[1]=i*n,r[2]=1,!0;if(2===a||5===a){const e=180/(c.s.radius*Math.PI);return r[0]=e*i*n,r[1]=e*n,r[2]=1,!0}}return!1}function Se(e,t,r,i){if((0,n.t)(e)||(0,n.t)(i))return!1;const s=Me(e,Qe),o=Me(i,Ke);if(s===o&&!Te(o)&&(0!==s||(0,p.d)(e,i)))return(0,a.r)(r),(0,a.c)(r,r,t),!0;if(Te(o)){let e=0,i=0;const a=Je[s][11],l=Je[11][o];return!(0,n.t)(a)&&!(0,n.t)(l)&&(a(t,0,nt,0),l(nt,0,ot,0),e=rt*nt[0],i=rt*nt[1],function(e,t,r){const i=Math.sin(t),s=Math.cos(t),n=Math.sin(e),o=Math.cos(e),a=r;a[0]=-i,a[4]=-n*s,a[8]=o*s,a[12]=0,a[1]=s,a[5]=-n*i,a[9]=o*i,a[13]=0,a[2]=0,a[6]=o,a[10]=n,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1}(i,e,r),r[12]=ot[0],r[13]=ot[1],r[14]=ot[2],!0)}if(3===o&&(2===s||1===s)){const e=Je[s][11];if((0,n.t)(e))return!1;e(t,0,nt,0);const i=rt*nt[1];Re(nt,0,ot,0),(0,a.r)(r),(0,a.c)(r,r,ot);const o=1/Math.cos(i);return(0,a.i)(r,r,[o,o,1]),!0}return!1}function Te(e){return 1===e||7===e||9===e}function Me(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,o.G)(e,1)),e.wkt===o.a.wkt?t.spatialReferenceId=1:(0,p.A)(e)?t.spatialReferenceId=2:(0,p.u)(e)?t.spatialReferenceId=3:e.wkt===o.b.wkt?t.spatialReferenceId=4:4490===e.wkid?t.spatialReferenceId=5:e.wkt===o.c.wkt?t.spatialReferenceId=7:e.wkt===o.d.wkt?t.spatialReferenceId=9:(0,p.a)(e)?t.spatialReferenceId=8:(0,p.P)(e)?t.spatialReferenceId=10:t.spatialReferenceId=0)}function Ee(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function Ie(e,t,r,i){r[i++]=it*(e[t++]/c.s.radius),r[i++]=it*(Math.PI/2-2*Math.atan(Math.exp(-1*e[t++]/c.s.radius))),r[i]=e[t]}function Oe(e,t,r,i){Ie(e,t,r,i),je(r,i,r,i)}function Ae(e,t,r,i){Ie(e,t,r,i),Ge(r,i,r,i)}function Pe(e,t,r,i,n){const o=.4999999*Math.PI,a=(0,s.o)(rt*e[t+1],-o,o),l=Math.sin(a);r[i++]=rt*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+l)/(1-l)),r[i]=e[t+2]}function Re(e,t,r,i){Pe(e,t,r,i,c.s)}function Fe(e){if((0,n.t)(e))return!1;const t=Me(e,Qe);return!!Je[t][6]}function Ce(e,t,r,i,s=0){const n=i+s,o=Math.cos(r);e[0]=Math.cos(t)*o*n,e[1]=Math.sin(t)*o*n,e[2]=Math.sin(r)*n}function Le(e,t,r,i,s){const n=s+e[t+2],o=rt*e[t+1],a=rt*e[t],l=Math.cos(o);r[i++]=Math.cos(a)*l*n,r[i++]=Math.sin(a)*l*n,r[i]=Math.sin(o)*n}function ke(e,t,r,i){Le(e,t,r,i,c.e.radius)}function Ne(e,t,r,i){Le(e,t,r,i,c.t.radius)}function je(e,t,r,i){Le(e,t,r,i,c.s.radius)}function De(e,t,r,i,n){const o=e[t],a=e[t+1],l=e[t+2],u=Math.sqrt(o*o+a*a+l*l),c=(0,s.p)(l/(0===u?1:u)),h=Math.atan2(a,o);r[i++]=it*h,r[i++]=it*c,r[i]=u-n}function Ue(e,t,r,i){De(e,t,r,i,c.e.radius)}function Ve(e,t,r,i){De(e,t,r,i,c.t.radius)}function Be(e,t,r,i){De(e,t,r,i,c.s.radius)}function ze(e,t,r,i){Be(e,t,r,i),Re(r,i,r,i)}function qe(e,t,r,i){Be(e,t,r,i),Ge(r,i,r,i)}function Ge(e,t,r,i){!function(e,t,r,i,s){const n=rt*e[t],o=rt*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),c=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);r[i++]=(c+a)*u*Math.cos(n),r[i++]=(c+a)*u*Math.sin(n),r[i++]=(c*(1-s.eccentricitySquared)+a)*l}(e,t,r,i,c.s)}function $e(e,t,r,i){const s=B,n=e[t],o=e[t+1],a=e[t+2];let l,u,h,p,d,y,f,m,g,v,b,w,_,x,S,T,M,E,I,O,A;l=Math.abs(a),u=n*n+o*o,h=Math.sqrt(u),p=u+a*a,d=Math.sqrt(p),O=Math.atan2(o,n),y=a*a/p,f=u/p,x=s.a2/d,S=s.a3-s.a4/d,f>.3?(m=l/d*(1+f*(s.a1+x+y*S)/d),I=Math.asin(m),v=m*m,g=Math.sqrt(1-v)):(g=h/d*(1-y*(s.a5-x-f*S)/d),I=Math.acos(g),v=1-g*g,m=Math.sqrt(v)),b=1-c.s.eccentricitySquared*v,w=c.s.radius/Math.sqrt(b),_=s.a6*w,x=h-w*g,S=l-_*m,M=g*x+m*S,T=g*S-m*x,E=T/(_/b+M),I+=E,A=M+T*E/2,a<0&&(I=-I),r[i++]=it*O,r[i++]=it*I,r[i]=A}function We(e,t,r,i){$e(e,t,r,i),je(r,i,r,i)}function He(e,t,r,i){$e(e,t,r,i),Re(r,i,r,i)}const Je={2:{5:null,8:null,10:null,11:Ee,6:Ee,1:je,7:null,9:null,0:null,3:Re,2:Ee,4:Ge},5:{5:Ee,8:null,10:null,11:Ee,6:Ee,1:je,7:null,9:null,0:null,3:null,2:null,4:Ge},8:{5:null,8:Ee,10:null,11:Ee,6:null,1:null,7:Ne,9:null,0:null,3:null,2:null,4:null},10:{5:null,8:null,10:Ee,11:Ee,6:null,1:null,7:null,9:ke,0:null,3:null,2:null,4:null},3:{5:null,8:null,10:null,11:Ie,6:Ie,1:Oe,7:null,9:null,0:null,3:Ee,2:Ie,4:Ae},4:{5:$e,8:null,10:null,11:$e,6:$e,1:We,7:null,9:null,0:null,3:He,2:$e,4:Ee},1:{5:Be,8:null,10:null,11:Be,6:Be,1:Ee,7:null,9:null,0:null,3:ze,2:Be,4:qe},7:{5:null,8:Ve,10:null,11:Ve,6:null,1:null,7:Ee,9:null,0:null,3:null,2:null,4:null},9:{5:null,8:null,10:Ue,11:Ue,6:null,1:null,7:null,9:Ee,0:null,3:null,2:null,4:null},0:{5:null,8:null,10:null,11:null,6:null,1:null,7:null,9:null,0:Ee,3:null,2:null,4:null},11:{5:Ee,8:Ee,10:Ee,11:Ee,6:Ee,1:je,7:Ne,9:ke,0:null,3:Re,2:Ee,4:Ge},6:{5:null,8:null,10:null,11:Ee,6:Ee,1:je,7:null,9:null,0:null,3:null,2:Ee,4:Ge}};function Ze(e,t,r=Ye()){return(0,n.t)(e)||(0,n.t)(t)?null:Xe(e,t,r).projector}function Xe(e,t,r){if((0,n.t)(e)||(0,n.t)(t)||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=Me(e,r.source),s=Me(t,r.dest);return 0===i&&0===s?(0,p.d)(e,t)?r.projector=Ee:r.projector=null:r.projector=Je[i][s],r}function Ye(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ee}}const Qe={spatialReference:null,spatialReferenceId:0},Ke={spatialReference:null,spatialReferenceId:0},et=Ye(),tt=Ye(),rt=(0,s.g)(1),it=(0,s.N)(1),st=(0,s.n)(),nt=(0,s.n)(),ot=(0,s.n)(),at=(0,s.n)(),lt=(0,s.n)()},20215:(e,t,r)=>{"use strict";r.d(t,{A:()=>I,B:()=>k,C:()=>R,D:()=>N,E:()=>E,F:()=>j,G:()=>D,L:()=>A,P:()=>_,T:()=>M,U:()=>F,a:()=>f,b:()=>g,c:()=>h,d:()=>x,e:()=>s,g:()=>S,h:()=>y,i:()=>l,j:()=>b,k:()=>O,l:()=>p,m:()=>d,o:()=>u,q:()=>C,r:()=>n,s:()=>c,v:()=>w,w:()=>v,x:()=>P,y:()=>T,z:()=>L});var i=r(80219);function s(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function n(e,t,r){if(!s(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const i=t.slice();for(const t of i)e.addEventListener(t,r);return{remove(){for(const t of i)e.removeEventListener(t,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function o(e,t,r){if(!s(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=n(e,t,(t=>{i.remove(),r.call(e,t)}));return{remove(){i.remove()}}}const a={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function l({key:e}){return a[e]||e}var u=function(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return{remove:()=>e.clearTimeout(i)}}}}(i.e);class c extends i.s{constructor(e,t,r){if(super(e,t,r),!(this instanceof c))return new c(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return(0,i.y)(t)}catch(e){return"[object]"}})))}}catch(e){throw i.n.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new c(e.name,e.message,e.details)}}function h(e){return Promise.all(e)}function p(e){return new Promise(((t,r)=>{try{e(t,r)}catch(e){Promise.resolve().then((()=>r(e)))}}))}function d(e="Aborted"){return new c("AbortError",e)}function y(){return new AbortController}function f(e,t="Aborted"){if(g(e))throw d(t)}function m(e){return(0,i.r)(e)?"aborted"in e?e:e.signal:e}function g(e){const t=m(e);return(0,i.r)(t)&&t.aborted}function v(e){if(S(e))throw e}function b(e){if(!S(e))throw e}function w(e,t){const r=m(e);if(!(0,i.t)(r)){if(!r.aborted)return o(r,"abort",(()=>t()));t()}}function _(e,t){const r=m(e);if(!(0,i.t)(r))return f(r),o(r,"abort",(()=>t(d())))}function x(e,t){const r=m(t);return(0,i.t)(r)?e:new Promise(((r,s)=>{let n=w(t,(()=>s(d())));const o=()=>n=(0,i.a)(n);e.then(o,o),e.then(r,s)}))}function S(e){return e&&"AbortError"===e.name}function T(e){return e.catch((e=>{if(!S(e))throw e}))}function M(e,t=i.n.getLogger("esri")){return e.catch((e=>{S(e)||t.error(e)}))}function E(){let e=null;const t=new Promise(((t,r)=>{e={promise:void 0,resolve:t,reject:r}}));return e.promise=t,e}function I(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e);return I(t.map((t=>e[t]))).then((e=>{const r={};return t.forEach(((t,i)=>r[t]=e[i])),r}))}const t=e;return p((e=>{const r=[];let i=t.length;0===i&&e(r),t.forEach((t=>{const s={promise:t||Promise.resolve(t)};r.push(s),s.promise.then((e=>{s.value=e})).catch((e=>{s.error=e})).then((()=>{--i,0===i&&e(r)}))}))}))}function O(e){return I(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function A(e){return Promise.reject(e)}function P(e){return Promise.resolve(e)}function R(e,t,r){const i=y();return w(r,(()=>i.abort())),new Promise(((r,s)=>{let n=setTimeout((()=>{n=0,r(t)}),e);w(i,(()=>{n&&(clearTimeout(n),s(d()))}))}))}function F(e){return e&&"function"==typeof e.then}function C(e){return L(e)?e:Promise.resolve(e)}function L(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}function k(e,t=-1){let r,s,n,o,a=null;const l=(...u)=>{if(r){s=u,o&&o.reject(d()),o=E();const e=(0,i.m)(o.promise);if(a){const e=a;a=null,e.abort()}return e}if(n=o||E(),o=null,t>0){const i=y();r=C(e(...u,i.signal));const s=r;R(t).then((()=>{r===s&&(o?i.abort():a=i)}))}else r=1,r=C(e(...u));const c=()=>{const e=s;s=n=r=a=null,null!=e&&l(...e)},h=r,p=n;return h.then(c,c),h.then(p.resolve,p.reject),(0,i.m)(p.promise)};return l}function N(){let e,t;const r=new Promise(((r,i)=>{e=r,t=i})),i=t=>{e(t)};return i.resolve=t=>e(t),i.reject=e=>t(e),i.timeout=(e,t)=>u.setTimeout((()=>i.reject(t)),e),i.promise=r,i}function j(e,t){return e.then(t,t)}function D(e){let t=y();const r=e(t.signal);let i={promise:r,finished:!1,abort:()=>{t&&(t.abort(),t=null)}};const s=()=>{i&&(i.finished=!0,i=null),t=null};return r.then(s,s),i}c.prototype.type="error"},28090:(e,t,r)=>{"use strict";r.d(t,{L:()=>m,U:()=>w,d:()=>b,k:()=>_,m:()=>a,q:()=>x,v:()=>S});var i=r(89710);const s=(e,t,r)=>[t,r],n=(e,t,r)=>[t,r,e[2]],o=(e,t,r)=>[t,r,e[2],e[3]];function a(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function u({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function c(e,t,r){const i=[];let s,n,o,a;for(let c=0;c<r.length;c++){const h=r[c];c>0?(o=l(e,h[0]),a=u(e,h[1]),o===s&&a===n||(i.push(t(h,o-s,a-n)),s=o,n=a)):(s=l(e,h[0]),n=u(e,h[1]),i.push(t(h,s,n)))}return i.length>0?i:null}function h({scale:e,translate:t},r){return r*e[0]+t[0]}function p({scale:e,translate:t},r){return t[1]-r*e[1]}function d(e,t,r){const i=new Array(r.length);if(!r.length)return i;const[s,n]=e.scale;let o=h(e,r[0][0]),a=p(e,r[0][1]);i[0]=t(r[0],o,a);for(let e=1;e<r.length;e++){const l=r[e];o+=l[0]*s,a-=l[1]*n,i[e]=t(l,o,a)}return i}function y(e,t,r){const i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=d(e,t,r[s]);return i}function f(e,t,r,i,a){return t.points=function(e,t,r,i){return c(e,r?i?o:n:i?n:s,t)}(e,r.points,i,a),t}function m(e,t,r,i,s){return t.x=l(e,r.x),t.y=u(e,r.y),t!==r&&(i&&(t.z=r.z),s&&(t.m=r.m)),t}function g(e,t,r,i,a){const l=function(e,t,r,i){const a=[],l=r?i?o:n:i?n:s;for(let r=0;r<t.length;r++){const i=c(e,l,t[r]);i&&i.length>=3&&a.push(i)}return a.length?a:null}(e,r.rings,i,a);return l?(t.rings=l,t):null}function v(e,t,r,i,a){const l=function(e,t,r,i){const a=[],l=r?i?o:n:i?n:s;for(let r=0;r<t.length;r++){const i=c(e,l,t[r]);i&&i.length>=2&&a.push(i)}return a.length?a:null}(e,r.paths,i,a);return l?(t.paths=l,t):null}function b(e,t){return e&&t?(0,i.l)(t)?m(e,{},t,!1,!1):(0,i.f)(t)?v(e,{},t,!1,!1):(0,i.y)(t)?g(e,{},t,!1,!1):(0,i.s)(t)?f(e,{},t,!1,!1):(0,i.u)(t)?(!1,!1,(s={}).xmin=l(r=e,(n=t).xmin),s.ymin=u(r,n.ymin),s.xmax=l(r,n.xmax),s.ymax=u(r,n.ymax),s):null:null;var r,s,n}function w(e,t,r,i,a){return t.points=function(e,t,r,i){return d(e,r?i?o:n:i?n:s,t)}(e,r.points,i,a),t}function _(e,t,r,i,s){return t.x=h(e,r.x),t.y=p(e,r.y),t!==r&&(i&&(t.z=r.z),s&&(t.m=r.m)),t}function x(e,t,r,i,a){return t.rings=function(e,t,r,i){return y(e,r?i?o:n:i?n:s,t)}(e,r.rings,i,a),t}function S(e,t,r,i,a){return t.paths=function(e,t,r,i){return y(e,r?i?o:n:i?n:s,t)}(e,r.paths,i,a),t}},62654:(e,t,r)=>{"use strict";r.d(t,{A:()=>h,C:()=>g,F:()=>v,I:()=>p,N:()=>P,P:()=>d,a:()=>a,b:()=>u,c:()=>c,e:()=>n,r:()=>l,t:()=>o,w:()=>f}),r(33807);var i=r(60816),s=r(15346);function n(){return[1,0,0,0,1,0,0,0,1]}function o(e,t){return new Float64Array(e,t,9)}function a(){return[0,0,0,1]}function l(e){return[e[0],e[1],e[2],e[3]]}function u(e,t){return new Float64Array(e,t,4)}Object.freeze({__proto__:null,create:n,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,r,i,s,n,o,a,l){return[e,t,r,i,s,n,o,a,l]},createView:o});const c=[0,0,0,1];function h(e,t,r){r*=.5;const i=Math.sin(r);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(r),e}function p(e,t){const r=2*Math.acos(t[3]),s=Math.sin(r/2);return s>i.f?(e[0]=t[0]/s,e[1]=t[1]/s,e[2]=t[2]/s):(e[0]=1,e[1]=0,e[2]=0),r}function d(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=r[0],l=r[1],u=r[2],c=r[3];return e[0]=i*c+o*a+s*u-n*l,e[1]=s*c+o*l+n*a-i*u,e[2]=n*c+o*u+i*l-s*a,e[3]=o*c-i*a-s*l-n*u,e}function y(e,t,r,s){const n=t[0],o=t[1],a=t[2],l=t[3];let u,c,h,p,d,y=r[0],f=r[1],m=r[2],g=r[3];return c=n*y+o*f+a*m+l*g,c<0&&(c=-c,y=-y,f=-f,m=-m,g=-g),1-c>i.f?(u=Math.acos(c),h=Math.sin(u),p=Math.sin((1-s)*u)/h,d=Math.sin(s*u)/h):(p=1-s,d=s),e[0]=p*n+d*y,e[1]=p*o+d*f,e[2]=p*a+d*m,e[3]=p*l+d*g,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function m(e,t){const r=t[0]+t[4]+t[8];let i;if(r>0)i=Math.sqrt(r+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);const s=(r+1)%3,n=(r+2)%3;i=Math.sqrt(t[3*r+r]-t[3*s+s]-t[3*n+n]+1),e[r]=.5*i,i=.5/i,e[3]=(t[3*s+n]-t[3*n+s])*i,e[s]=(t[3*s+r]+t[3*r+s])*i,e[n]=(t[3*n+r]+t[3*r+n])*i}return e}function g(e,t,r,i){const s=.5*Math.PI/180;t*=s,r*=s,i*=s;const n=Math.sin(t),o=Math.cos(t),a=Math.sin(r),l=Math.cos(r),u=Math.sin(i),c=Math.cos(i);return e[0]=n*l*c-o*a*u,e[1]=o*a*c+n*l*u,e[2]=o*l*u-n*a*c,e[3]=o*l*c+n*a*u,e}Object.freeze({__proto__:null,create:a,clone:l,fromValues:function(e,t,r,i){return[e,t,r,i]},createView:u,IDENTITY:c});const v=s.a,b=s.r,w=s.s,_=d,x=s.l,S=s._,T=s.j,M=s.x,E=M,I=s.q,O=I,A=s.g,P=s.D,R=s.E,F=(0,i.n)(),C=(0,i.i)(1,0,0),L=(0,i.i)(0,1,0),k=[0,0,0,1],N=[0,0,0,1],j=[1,0,0,0,1,0,0,0,1];Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:h,getAxisAngle:p,multiply:d,rotateX:function(e,t,r){r*=.5;const i=t[0],s=t[1],n=t[2],o=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=i*l+o*a,e[1]=s*l+n*a,e[2]=n*l-s*a,e[3]=o*l-i*a,e},rotateY:function(e,t,r){r*=.5;const i=t[0],s=t[1],n=t[2],o=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=i*l-n*a,e[1]=s*l+o*a,e[2]=n*l+i*a,e[3]=o*l-s*a,e},rotateZ:function(e,t,r){r*=.5;const i=t[0],s=t[1],n=t[2],o=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=i*l+s*a,e[1]=s*l-i*a,e[2]=n*l+o*a,e[3]=o*l-n*a,e},calculateW:function(e,t){const r=t[0],i=t[1],s=t[2];return e[0]=r,e[1]=i,e[2]=s,e[3]=Math.sqrt(Math.abs(1-r*r-i*i-s*s)),e},slerp:y,random:function(e){const t=(0,i.t)(),r=(0,i.t)(),s=(0,i.t)(),n=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=n*Math.sin(2*Math.PI*r),e[1]=n*Math.cos(2*Math.PI*r),e[2]=o*Math.sin(2*Math.PI*s),e[3]=o*Math.cos(2*Math.PI*s),e},invert:function(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r*r+i*i+s*s+n*n,a=o?1/o:0;return e[0]=-r*a,e[1]=-i*a,e[2]=-s*a,e[3]=n*a,e},conjugate:f,fromMat3:m,fromEuler:g,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:v,set:b,add:w,mul:_,scale:x,dot:S,lerp:T,length:M,len:E,squaredLength:I,sqrLen:O,normalize:A,exactEquals:P,equals:R,rotationTo:function(e,t,r){const s=(0,i.z)(t,r);return s<-.999999?((0,i._)(F,C,t),(0,i.a6)(F)<1e-6&&(0,i._)(F,L,t),(0,i.j)(F,F),h(e,F,Math.PI),e):s>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,i._)(F,t,r),e[0]=F[0],e[1]=F[1],e[2]=F[2],e[3]=1+s,A(e,e))},sqlerp:function(e,t,r,i,s,n){return y(k,t,s,n),y(N,r,i,n),y(e,k,N,2*n*(1-n)),e},setAxes:function(e,t,r,i){const s=j;return s[0]=r[0],s[3]=r[1],s[6]=r[2],s[1]=i[0],s[4]=i[1],s[7]=i[2],s[2]=-t[0],s[5]=-t[1],s[8]=-t[2],A(e,m(e,s))}})},30494:(e,t,r)=>{"use strict";function i(){const e=new Float32Array(4);return e[3]=1,e}function s(e){const t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function n(e,t){return new Float32Array(e,t,4)}r.d(t,{n:()=>s,r:()=>i,t:()=>n}),r(33807),Object.freeze({__proto__:null,create:i,clone:s,fromValues:function(e,t,r,i){const s=new Float32Array(4);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s},createView:n})},85570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{S:()=>g,c:()=>d,d:()=>y,f:()=>f,g:()=>v,p:()=>m,q:()=>b,t:()=>u,y:()=>p});var i=r(80987),s=r(80219),n=r(89710),o=r(71470),a=r(80136),l=r(85289);function u(e){const t={};for(const r in e){if("declaredClass"===r)continue;const i=e[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[r]=[];for(let e=0;e<i.length;e++)t[r][e]=u(i[e])}else"object"==typeof i?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}const c="Layer does not support extent calculation.";function h(e,t){const r=e.geometry,i=e.toJSON(),o=i;if((0,s.r)(r)&&(o.geometry=JSON.stringify(r),o.geometryType=(0,n.d)(r),o.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),i.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(o.objectIds=i.objectIds.join(",")),i.orderByFields&&(o.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete o.outFields:-1!==i.outFields.indexOf("*")?o.outFields="*":o.outFields=i.outFields.join(","),i.outSR?o.outSR=i.outSR.wkid||JSON.stringify(i.outSR):r&&(i.returnGeometry||i.returnCentroid)&&(o.outSR=o.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(o.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(o.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(o.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(o.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(o.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(o.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const e=i.timeExtent,{start:t,end:r}=e;null==t&&null==r||(o.time=t===r?t:`${null==t?"null":t},${null==r?"null":r}`),delete i.timeExtent}return o}async function p(e,t,r,i){const n=(0,s.r)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await v(e,t,"json",i);return(0,l.t)(t,r,n.data),n}async function d(e,t,r,i){if((0,s.r)(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:r.createFeatureResult()});const n=await y(e,t,i),o=n;return o.data=(0,a.t)(n.data,r),o}function y(e,t,r){return v(e,t,"pbf",r)}function f(e,t,r){return(0,s.r)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):v(e,t,"json",r,{returnIdsOnly:!0})}function m(e,t,r){return(0,s.r)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):v(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function g(e,t,r){return(0,s.r)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):v(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(c);if(t.hasOwnProperty("count"))throw new Error(c);return e}))}function v(e,t,r,n={},a={}){const l="string"==typeof e?(0,i.U)(e):e,c=t.geometry?[t.geometry]:[];return n.responseType="pbf"===r?"array-buffer":"json",(0,o.L)(c,null,n).then((e=>{const o=e&&e[0];(0,s.r)(o)&&((t=t.clone()).geometry=o);const c=u({...l.query,f:r,...a,...h(t,a)});return(0,i.L)((0,i.D)(l.path,"query"),{...n,query:{...c,...n.query}})}))}var b=Object.freeze({__proto__:null,executeQuery:p,executeQueryForCount:m,executeQueryForExtent:g,executeQueryForIds:f,executeQueryPBF:d,executeQueryPBFBuffer:y,queryToQueryStringParameters:h,runQuery:v})},85289:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var i=r(98843);function s(e,t,r){if(!r||!r.features||!r.hasZ)return;const s=(0,i.t)(r.geometryType,t,e.outSpatialReference);if(s)for(const e of r.features)s(e.geometry)}},86897:(e,t,r)=>{"use strict";r.d(t,{a:()=>s,b:()=>n,c:()=>O,f:()=>E,g:()=>A,i:()=>w,l:()=>M,m:()=>I,n:()=>b,o:()=>x,r:()=>_,s:()=>S,t:()=>o,u:()=>T}),r(33807),r(93875);var i=r(14215);function s(){return new Float32Array(4)}function n(e){const t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function o(e,t,r,i){const s=new Float32Array(4);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function a(){return s()}function l(){return o(1,1,1,1)}function u(){return o(1,0,0,0)}function c(){return o(0,1,0,0)}function h(){return o(0,0,1,0)}function p(){return o(0,0,0,1)}const d=a(),y=l(),f=u(),m=c(),g=h(),v=p();function b(e,t,r="nearest",s=!1){var n;const o=!(s&&"u8"===t.pixelType),a=o?5126:5121,l=null==t.pixels||0===t.pixels.length?null:o?t.getAsRGBAFloat():t.getAsRGBA(),u=null==(n=e.capabilities.textureFloat)?void 0:n.textureFloatLinear,c={width:t.width,height:t.height,target:3553,pixelFormat:6408,internalFormat:"webgl2"===e.webglVersion&&o?34836:6408,samplingMode:!u||"bilinear"!==r&&"cubic"!==r?9728:9729,dataType:a,wrapMode:33071,flipped:!1};return new i.r(e,c,l)}function w(e,t){const r=4*t.size[0],s=t.size[1],n={width:r,height:s,target:3553,pixelFormat:6408,internalFormat:"webgl2"===e.webglVersion?34836:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1},o=new Float32Array(r*s*4);let a=0;for(let e=0;e<t.coefficients.length;e++)o[a++]=t.coefficients[e],e%3==2&&(o[a++]=1);return new i.r(e,n,o)}function _(e,t){const r={width:t.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1};return new i.r(e,r,t)}function x(e,t,r,i=1,s=!0,n=!1){return{u_flipY:s,u_isFloatTexture:n,u_applyTransform:!!e,u_opacity:i,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:r}}function S(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function T(e,t){return{u_scale:e,u_offset:t}}function M(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function E(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function I(e,t){const r=e.gl,i=t.glName,s=r.getProgramParameter(i,r.ACTIVE_UNIFORMS),n=new Map;let o;for(let e=0;e<s;e++)o=r.getActiveUniform(i,e),o&&n.set(o.name,{location:r.getUniformLocation(i,o.name),info:o});return n}function O(e,t,r){Object.keys(r).forEach((i=>{const s=t.get(i)||t.get(i+"[0]");s&&function(e,t,r,i){if(null===i||null==r)return!1;const{info:s}=i;switch(s.type){case 5126:s.size>1?e.setUniform1fv(t,r):e.setUniform1f(t,r);break;case 35664:e.setUniform2fv(t,r);break;case 35665:e.setUniform3fv(t,r);break;case 35666:e.setUniform4fv(t,r);break;case 35675:e.setUniformMatrix3fv(t,r);break;case 35676:e.setUniformMatrix4fv(t,r);break;case 5124:s.size>1?e.setUniform1iv(t,r):e.setUniform1i(t,r);break;case 35670:e.setUniform1i(t,r?1:0);break;case 35667:case 35671:e.setUniform2iv(t,r);break;case 35668:case 35672:e.setUniform3iv(t,r);break;case 35669:case 35673:e.setUniform4iv(t,r);break;default:;}}(e,i,r[i],s)}))}function A(e,t,r,i){r.length===i.length&&(i.some((e=>null==e))||r.some((e=>null==e))||r.forEach(((r,s)=>{t.setUniform1i(r,s),e.bindTexture(i[s],s)})))}Object.freeze({__proto__:null,create:s,clone:n,fromValues:o,createView:function(e,t){return new Float32Array(e,t,4)},zeros:a,ones:l,unitX:u,unitY:c,unitZ:h,unitW:p,ZEROS:d,ONES:y,UNIT_X:f,UNIT_Y:m,UNIT_Z:g,UNIT_W:v})},4169:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var i=r(80219),s=r(88903);function n(e,t,r){let n,o;return void 0===t||Array.isArray(t)?(o=e,r=t,n=[void 0]):(o=t,n=Array.isArray(e)?e:[e]),(e,t)=>{const a=e.constructor.prototype;n.forEach((n=>{const l=(0,s.h)(e,n,o);l.read&&"object"!=typeof l.read&&(l.read={}),(0,i.o)("read.reader",a[t],l),r&&(l.read.source=(l.read.source||[]).concat(r))}))}}},27270:(e,t,r)=>{"use strict";r.d(t,{a:()=>a,b:()=>h,c:()=>y,h:()=>u,s:()=>d,t:()=>o});var i=r(60816),s=r(20215),n=r(60183);class o{constructor(e){this.gain=e}update(e){if(this.hasLastValue){const t=this.computeDelta(e);this.updateDelta(t)}this.lastValue=e}reset(){this.lastValue=void 0,this.filteredDelta=void 0}get hasLastValue(){return void 0!==this.lastValue}get hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(e){return e-this.lastValue}updateDelta(e){this.hasFilteredDelta?this.filteredDelta=(1-this.gain)*this.filteredDelta+this.gain*e:this.filteredDelta=e}}class a{constructor(e,t,r){this._initialVelocity=e,this._stopVelocity=t,this._friction=r,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(e){return e>this.duration}get friction(){return this._friction}value(e){return this.valueFromInitialVelocity(this._initialVelocity,e)}valueDelta(e,t){const r=this.value(e);return this.value(e+t)-r}valueFromInitialVelocity(e,t){t=Math.min(t,this.duration);const r=1-this.friction;return e*(r**t-1)/Math.log(r)}}class l extends a{constructor(e,t,r,i,s){super(e,t,r),this.sceneVelocity=i,this.direction=s}value(e){return super.valueFromInitialVelocity(this.sceneVelocity,e)}}class u{constructor(e=300,t=12,r=.84){this.minimumInitialVelocity=e,this.stopVelocity=t,this.friction=r,this.enabled=!0,this.time=new o(.6),this.screen=[new o(.4),new o(.4)],this.scene=[new o(.6),new o(.6),new o(.6)],this.tmpDirection=(0,i.n)()}add(e,t,r){if(this.enabled){if(this.time.hasLastValue&&this.time.computeDelta(r)<.015)return;this.screen[0].update(e[0]),this.screen[1].update(e[1]),this.scene[0].update(t[0]),this.scene[1].update(t[1]),this.scene[2].update(t[2]),this.time.update(r)}}reset(){this.screen[0].reset(),this.screen[1].reset(),this.scene[0].reset(),this.scene[1].reset(),this.scene[2].reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;const e=this.screen[0].filteredDelta,t=this.screen[1].filteredDelta,r=Math.sqrt(e*e+t*t)/this.time.filteredDelta;return Math.abs(r)<this.minimumInitialVelocity?null:this.createMomentum(r,this.stopVelocity,this.friction)}createMomentum(e,t,r){(0,i.a)(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);const s=(0,i.s)(this.tmpDirection);s>0&&(0,i.d)(this.tmpDirection,this.tmpDirection,1/s);const n=s/this.time.filteredDelta;return new l(e,t,r,n,this.tmpDirection)}}class c{constructor(e=2.5,t=.01,r=.95,i=12){this.minimumInitialVelocity=e,this.stopVelocity=t,this.friction=r,this.maxVelocity=i,this.enabled=!0,this.value=new o(.8),this.time=new o(.3)}add(e,t){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(t)<.01)return;if(this.value.hasFilteredDelta){const t=this.value.computeDelta(e);this.value.filteredDelta*t<0&&this.value.reset()}}this.time.update(t),this.value.update(e)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta)return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=(0,i.o)(e,-this.maxVelocity,this.maxVelocity),Math.abs(e)<this.minimumInitialVelocity?null:this.createMomentum(e,this.stopVelocity,this.friction)}createMomentum(e,t,r){return new a(e,t,r)}}class h extends c{constructor(e=3,t=.01,r=.95,i=12){super(e,t,r,i)}add(e,t){if(this.value.hasLastValue){const t=this.value.lastValue;let r=e-t;for(;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;e=t+r}super.add(e,t)}}class p extends a{constructor(e,t,r){super(e,t,r)}value(e){const t=super.value(e);return Math.exp(t)}valueDelta(e,t){const r=super.value(e),i=super.value(e+t)-r;return Math.exp(i)}}class d extends c{constructor(e=2.5,t=.01,r=.95,i=12){super(e,t,r,i)}add(e,t){super.add(Math.log(e),t)}createMomentum(e,t,r){return new p(e,t,r)}}async function y(e){const t=r.e(8382).then(r.bind(r,58382)),i=r.e(2525).then(r.bind(r,92525)),o=(0,n.t)((await t).default,{signal:e}),a=(0,n.t)((await i).default,{signal:e}),l={mask:await o,overlay:await a};return(0,s.a)(e),l}},37762:(e,t,r)=>{"use strict";r.d(t,{i:()=>n,r:()=>s});var i=r(65352);function s(e,t){const r=t||e.extent,s=e.width,n=(0,i.G)(r&&r.spatialReference);return r&&s?r.width/s*n*i.l*96:0}function n(e,t){return e/((0,i.G)(t)*i.l*96)}},93450:(e,t,r)=>{"use strict";r.d(t,{a:()=>n,d:()=>l,f:()=>u,g:()=>a,l:()=>o,n:()=>s}),r(80219);var i=r(60816);function s(e,t){const r=function(e,t){const{format:r,quality:s,rotation:n,disableDecorations:o}=e||{},a=d(e,t.padding),l=function(e,t){const r={x:0,y:0,width:t.width,height:t.height};if(e&&e.area){null!=e.area.x&&(r.x=Math.floor(e.area.x)),null!=e.area.y&&(r.y=Math.floor(e.area.y));const i=null!=e.area.width?Math.floor(e.area.width):null,s=null!=e.area.height?Math.floor(e.area.height):null;if(r.width=t.width-r.x,r.height=t.height-r.y,null!=i&&null!=s)r.width=Math.min(r.width,i),r.height=Math.min(r.height,s);else if(null==i&&null!=s){const e=Math.min(r.width,i);r.height=e/r.width*r.height,r.width=e}else if(null!=i&&null==s){const e=Math.min(r.height,s);r.width=e/r.height*r.width,r.height=e}}return function(e,t){const r=Math.floor(Math.max(e.x,0)),i=Math.floor(Math.max(e.y,0)),s={x:r,y:i,width:Math.floor(Math.min(e.width,t.width-r)),height:Math.floor(Math.min(e.height,t.height-i))},n=s.width/s.height,o=e.width/e.height;if(o===n)return s;if(o>n){const e=Math.floor(s.width/o),t=s.height-e;return{x:s.x,y:Math.floor(s.y+t/2),width:s.width,height:e}}const a=Math.floor(s.height*o),l=s.width-a;return{x:Math.floor(s.x+l/2),y:s.y,width:a,height:s.height}}(function(e,t){if(!t||null==t.width||null==t.height)return e;const r=t.width/t.height,i=e.width/e.height;if(i===r)return e;if(i<r){const t=Math.floor(e.height*r);return e.x-=(t-e.width)/2,e.width=t,e}const s=Math.floor(e.width/r);return e.y-=(s-e.height)/2,e.height=s,e}(r,e),t)}(e,{width:t.width-a.left-a.right,height:t.height-a.top-a.bottom}),{width:u,height:c}=function(e,t){if(!e)return t;const r=e.width,i=e.height;if(null!=r&&null!=i)return{width:Math.floor(r),height:Math.floor(i)};if(null==r&&null==i)return t;const s=t.width/t.height;return null==i?{width:Math.floor(r),height:Math.floor(r/s)}:{width:Math.floor(i*s),height:Math.floor(i)}}(e,l),h=function(e){switch(e){case"png":case"jpg":case"jpeg":return e;case null:case void 0:default:return f}}(r),p=m[h];return{format:h,quality:(0,i.o)(null!=s?s:p,0,100),area:l,width:u,height:c,rotation:n,disableDecorations:!!o,ignoreBackground:!(!e||!e.ignoreBackground),ignorePadding:!(!e||!e.ignorePadding)}}(e,t),s=r.area,n=r.width/s.width,o=d(r,t.padding),a=o.left+o.right,l=o.top+o.bottom,u=t.width-a,c=t.height-l,h=Math.floor(u*n+a),p=Math.floor(c*n+l),y=e&&e.layers?e.layers:[],g=r.ignoreBackground,v=r.ignorePadding;return{framebufferWidth:h,framebufferHeight:p,region:{x:Math.floor(s.x*n)+o.left,y:Math.floor(s.y*n)+o.top,width:r.width,height:r.height},format:r.format,quality:r.quality,rotation:r.rotation,pixelRatio:n,layers:y,disableDecorations:r.disableDecorations,ignoreBackground:g,ignorePadding:v}}function n(e,t,r,i){i.premultipliedAlpha&&function(e){const t=e.data,r=t.length;for(let e=0;e<r;e+=4){const r=t[e+3];if(r>0){const i=r/255;t[e+0]=t[e+0]/i,t[e+1]=t[e+1]/i,t[e+2]=t[e+2]/i}}}(e),r.width=e.width,r.height=e.height;const s=r.getContext("2d");s.putImageData(e,0,0),i.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(s);const n=s.getImageData(0,0,e.width,e.height),o=function(e,t){const r=y[t.format],i=t.quality/100;return e.toDataURL(r,i)}(r,t);return r.width=0,r.height=0,{dataUrl:o,data:n}}function o(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(p)try{return new ImageData(e,t)}catch(e){p=!1}return c(e,t,r)}function a(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(p)try{return new ImageData(e,t,r)}catch(e){p=!1}const s=c(t,r,i);return s.data.set(e,0),s}function l(e,t,r,i=0,s=0,n=e.width-i,o=e.height-s,a=!1){const{data:l}=e,{width:u,height:c,data:h}=t,p=n/u,d=o/c,y=Math.ceil(p/2),f=Math.ceil(d/2),m=e.width;for(let e=0;e<c;e++)for(let t=0;t<u;t++){const n=4*(t+(a?c-e-1:e)*u);let o=0,g=0,v=0,b=0,w=0,_=0;const x=(e+.5)*d;for(let n=Math.floor(e*d);n<(e+1)*d;n++){const e=Math.abs(x-(n+.5))/f,a=(t+.5)*p,u=e*e;for(let e=Math.floor(t*p);e<(t+1)*p;e++){const t=Math.abs(a-(e+.5))/y,c=Math.sqrt(u+t*t);if(c>=1)continue;let h=2*c*c*c-3*c*c+1;const p=4*(i+e+(s+n)*m);_+=h*l[p+3],g+=h,!r&&l[p+3]<255&&(h=h*l[p+3]/255),v+=h*l[p],b+=h*l[p+1],w+=h*l[p+2],o+=h}}h[n]=v/o,h[n+1]=b/o,h[n+2]=w/o,h[n+3]=_/g}return t}function u(e,t,r){if(!t)return e;const{framebufferWidth:i,framebufferHeight:s,pixelRatio:n,region:o}=e,a=d(e,r),l=a.left+a.right,u=a.top+a.bottom,c=i-l,h=s-u,p=Math.min(8,Math.min((2048-l)/c,(2048-u)/h));return p<1.5?e:{...e,framebufferWidth:Math.round(c*p)+l,framebufferHeight:Math.round(h*p)+u,pixelRatio:n*p,resample:{region:{x:Math.round((o.x-a.left)*p)+a.left,y:Math.round((o.y-a.top)*p)+a.top,width:Math.round(o.width*p),height:Math.round(o.height*p)},width:i,height:s}}}function c(e,t,r){return r||(h||(h=document.createElement("canvas"),h.width=1,h.height=1),r=h),r.getContext("2d").createImageData(e,t)}let h=null,p=!0;function d(e,t){return!t||e&&e.ignorePadding?g:t}const y={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},f="png",m={png:100,jpg:98,jpeg:98},g={top:0,right:0,bottom:0,left:0}},28190:(e,t,r)=>{"use strict";r.d(t,{n:()=>n,r:()=>s});var i=r(25290);const s={type:i.S,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:n}}}}};function n(e,t,r,s){if(!e)return null;const{minScale:n,maxScale:o,minLOD:a,maxLOD:l}=t;if(null!=a&&null!=l)return s&&s.ignoreMinMaxLOD?i.S.fromJSON(e):i.S.fromJSON({...e,lods:e.lods.filter((({level:e})=>null!=e&&e>=a&&e<=l))});if(0!==n&&0!==o){const t=e=>Math.round(1e4*e)/1e4,r=n?t(n):1/0,s=o?t(o):-1/0;return i.S.fromJSON({...e,lods:e.lods.filter((e=>{const i=t(e.scale);return i<=r&&i>=s}))})}return i.S.fromJSON(e)}},2385:(e,t,r)=>{"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function s(e){return null!=e&&!isNaN(e)&&isFinite(e)}function n(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){const r=t||n(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,{e:()=>s,i:()=>n,l:()=>o,n:()=>i})},41822:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var i=r(9612),s=r(20215),n=r(88903);async function o(e,t,r){const o=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(o&&"unique-value"===o.type&&o.styleOrigin){const a=await(0,i.a)(o.populateFromStyle());if((0,s.a)(r),!1===a.ok){const r=a.error;t&&t.messages&&t.messages.push(new n.z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${r.message}`,{error:r,context:t})),e.clear("renderer",t.origin)}}}},80657:(e,t,r)=>{"use strict";r.r(t),r.d(t,{a:()=>v,g:()=>w,r:()=>g,s:()=>E,t:()=>h});var i=r(80987),s=r(81135),n=r(80219),o=r(20215),a=r(52109),l=r(29832),u=r(5250);function c(e){return e=e||n.e.location.hostname,m.some((t=>{var r;return null!=(null==(r=e)?void 0:r.match(t))}))}function h(e,t){return e&&(t=t||n.e.location.hostname)?null!=t.match(p)||null!=t.match(y)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(d)||null!=t.match(f)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const p=/^devext.arcgis.com$/,d=/^qaext.arcgis.com$/,y=/^[\w-]*\.mapsdevext.arcgis.com$/,f=/^[\w-]*\.mapsqa.arcgis.com$/,m=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,p,d,/^jsapps.esri.com$/,y,f],g=()=>!!(0,n.c)("enable-feature:disable-context-navigation"),v=()=>!!(0,n.c)("enable-feature:direct-3d-object-feature-layer-display"),b={};function w(e,t,r){return e.styleUrl?function(e,t){return S(e,t).then((t=>({data:t.data,baseUrl:(0,i.h)(e),styleUrl:e})))}(e.styleUrl,r):e.styleName?function(e,t,r){const i=t.portal||a.G.getDefault();let s;const n=`${i.url} - ${i.user&&i.user.username} - ${e}`;return b[n]||(b[n]=function(e,t,r){return t.load(r).then((()=>{const i=new a.c({disableExtraQuery:!0,query:`owner:${T} AND type:${M} AND typekeywords:"${e}"`});return t.queryItems(i,r)})).then((({results:t})=>{let i=null;const s=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t)if(e.typeKeywords.some((e=>e.toLowerCase()===s))&&e.type===M&&e.owner===T){i=e;break}if(!i)throw new o.s("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)}))}(e,i,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl,styleName:e})))),b[n]}(e.styleName,t,r):Promise.reject(new o.s("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function _(e,t,r,a,p){const d=e.data,y={portal:r.portal,url:(0,i.U)(e.baseUrl),origin:"portal-item"},f=d.items.find((e=>e.name===t));if(!f){const e=`The symbol name '${t}' could not be found`;return Promise.reject(new o.s("symbolstyleutils:symbol-name-not-found",e,{symbolName:t}))}let m=(0,l.c)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,n.c)("enable-feature:force-wosr"))for(const t of e.formatInfos)if("gltf"===t.type)return t.href;return e.webRef}(f,a),y),g=f.thumbnail&&f.thumbnail.href;const v=f.thumbnail&&f.thumbnail.imageData;c()&&(m=h(m),g=h(g));const b={portal:r.portal,url:(0,i.U)((0,i.h)(m)),origin:"portal-item"};return S(m,p).then((i=>{const n="cimRef"===a?x(i.data):i.data,o=(0,u.i)(n,b);if(o&&(0,s.c)(o)){if(g){const e=(0,l.c)(g,y);o.thumbnail=new s.e({url:e})}else v&&(o.thumbnail=new s.e({url:`data:image/png;base64,${v}`}));e.styleUrl?o.styleOrigin=new s.f({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(o.styleOrigin=new s.f({portal:r.portal,styleName:e.styleName,name:t}))}return o}))}function x(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function S(e,t){const r={responseType:"json",query:{f:"json"},...t};return(0,i.L)((0,i.z)(e),r)}const T="esri_en",M="Style";var E=Object.freeze({__proto__:null,fetchStyle:w,fetchSymbolFromStyle:_,resolveWebStyleSymbol:function(e,t,r,s){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,r){const s="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json".replace(/\{SymbolName\}/gi,e.name);return S(s,r).then((e=>{const r=x(e.data);return(0,u.i)(r,{portal:t.portal,url:(0,i.U)((0,i.h)(s)),origin:"portal-item"})}))}(e,t,s):w(e,t,s).then((i=>_(i,e.name,t,r,s))):Promise.reject(new o.s("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))},styleNameFromItem:function(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}})},88903:(e,t,r)=>{"use strict";r.d(t,{A:()=>R,B:()=>f,C:()=>u,D:()=>oe,E:()=>a,F:()=>we,G:()=>F,H:()=>te,N:()=>M,S:()=>E,a:()=>Ce,b:()=>Ue,c:()=>je,d:()=>v,e:()=>C,f:()=>U,g:()=>V,h:()=>ee,i:()=>Pe,j:()=>H,k:()=>G,l:()=>N,m:()=>Se,n:()=>qe,o:()=>q,p:()=>Me,q:()=>$,r:()=>Te,s:()=>J,t:()=>Y,u:()=>l,v:()=>L,w:()=>T,x:()=>P,y:()=>K,z:()=>re});var i=r(80219);const s=i.n.getLogger("esri.core.Accessor");function n(e){return null==e?e:new Date(e)}function o(e){return null==e?e:!!e}function a(e){return null==e?e:e.toString()}function l(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function u(e){return null==e?e:Math.round(parseFloat(e))}function c(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function h(e,t){return null!=t&&e&&!(t instanceof e)}function p(e){return e&&"isCollection"in e}function d(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function y(e,t){return!!c(t)&&(s.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+m(e)+"'"),!0)}function f(e,t){return null==t?t:p(e)?function(e,t){if(!t||!t.constructor||!p(t.constructor))return y(e,t)?t:new e(t);const r=d(e.prototype.itemType),i=d(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(y(e,t),t):new e(t):t}(e,t):h(e,t)?y(e,t)?t:new e(t):t}function m(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function g(e){switch(e){case Number:return l;case M:return u;case Boolean:return o;case String:return a;case Date:return n;default:return f.bind(null,e)}}function v(e,t){const r=g(e);return 1===arguments.length?r:r(t)}function b(e,t,r){return 1===arguments.length?b.bind(null,e):t?Array.isArray(t)?t.map((t=>e(t,r))):[e(t,r)]:t}function w(e,t,r){return 0!==t&&Array.isArray(r)?r.map((r=>w(e,t-1,r))):e(r)}function _(e,t,r){if(2===arguments.length)return _.bind(null,e,t);if(!r)return r;let i=t,s=r=w(e,t,r);for(;i>0&&Array.isArray(s);)i--,s=s[0];if(void 0!==s)for(let e=0;e<i;e++)r=[r];return r}function x(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!("string"===r||"number"===r||"function"===r&&e.length>1)}))}function S(e,t){if(2===arguments.length)return S(e).call(null,t);const r=new Set,i=e.filter((e=>"function"!=typeof e)),n=e.filter((e=>"function"==typeof e));for(const t of e)"string"!=typeof t&&"number"!=typeof t||r.add(t);let o=null,a=null;return(e,t)=>{if(null==e)return e;const l=typeof e,u="string"===l||"number"===l;return u&&(r.has(e)||n.some((e=>"string"===l&&e===String||"number"===l&&e===Number)))||"object"===l&&n.some((t=>!h(e,t)))?e:(u&&i.length?(o||(o=i.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),s.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${o}`)):"object"==typeof e&&n.length?(a||(a=n.map((e=>m(e))).join(", ")),s.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${a}`)):s.error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function T(e,t){if(2===arguments.length)return T(e).call(null,t);const r={},i=[],n=[];for(const t in e.typeMap){const s=e.typeMap[t];r[t]=v(s),i.push(m(s)),n.push(t)}const o=()=>`'${i.join("', '")}'`,a=()=>`'${n.join("', '")}'`,l="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!h(e.base,t))return t;if(null==t)return t;const i=l(t)||e.defaultKeyValue,n=r[i];if(!n)return s.error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!h(e.typeMap[i],t))return t;if("string"==typeof e.key&&!c(t)){const r={};for(const i in t)i!==e.key&&(r[i]=t[i]);return n(r)}return n(t)}}class M{}const E={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function I(e){switch(e.type){case"native":return v(e.value);case"array":return b(I(e.value));case"one-of":return function(e){let t=null;return(r,i)=>A(r,e)?r:(null==t&&(t=O(e)),s.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}(e);default:return null}}function O(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case M:return"integer";case Date:return"date";default:return m(e.value)}case"array":return`array of ${O(e.value)}`;case"one-of":{const t=e.values.map((e=>O(e)));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function A(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case M:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((e=>!A(e,t.value)));case"one-of":return t.values.some((t=>A(e,t)))}}function P(e){return R((()=>e.forEach((e=>(0,i.r)(e)&&e.remove()))))}function R(e){return{remove:()=>{e&&(e(),e=void 0)}}}function F(e,t){const r=setTimeout(e,t);return R((()=>clearTimeout(r)))}function C(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function L(e,t,r){return k(e,t,r?{policy:r,path:""}:null)}function k(e,t,r){return t?Object.keys(t).reduce((function(e,s){let n=null,o="merge";if(r&&(n=r.path?`${r.path}.${s}`:s,o=r.policy(n)),"replace"===o)return e[s]=t[s],e;if(void 0===e[s])return e[s]=(0,i.y)(t[s]),e;let a=e[s],l=t[s];if(a===l)return e;if(Array.isArray(l)||Array.isArray(e))a=a?Array.isArray(a)?e[s]=a.concat():e[s]=[a]:e[s]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach((e=>{-1===a.indexOf(e)&&a.push(e)})));else if(l&&"object"==typeof l)if(r){const t=r.path;r.path=(0,i.m)(n),e[s]=k(a,l,r),r.path=t}else e[s]=k(a,l,null);else e.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(e[s]=l);return e}),e||{}):e}function N(e){return e?"string"==typeof e&&-1===e.indexOf(".")?e:j(e):e}function j(e){return Array.isArray(e)?e:e.split(".")}function D(e){return e.indexOf(",")>-1?e.split(",").map((e=>e.trim())):[e.trim()]}function U(e,t,r,i){const s=function(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...D(r));return t}return D(e)}(t);return 1!==s.length?P(s.map((t=>i(e,t,r)))):i(e,s[0],r)}function V(e){let t=!1;return()=>{t||(t=!0,e())}}function B(e,t){const r="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(r,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.getItemAt(e)}const i=C(t);return function(e,t){return null!=e&&e.metadatas&&null!=e.metadatas[t]}(i,r)?i.get(r):t[r]}function z(e,t,r){if(null==e)return e;const i=B(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:z(i,t,r+1)}function q(e,t,r=0){return"string"==typeof t&&-1===t.indexOf(".")?B(t,e):z(e,j(t),r)}function G(e,t){return q(e,t)}function $(e,t){return void 0!==q(t,e)}class W{constructor(e){this.autoDestroy=!1,this.properties=e}}function H(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){const r=Object.create(t.properties),s=t.autoDestroy;for(const e in r)r[e]=(0,i.y)(r[e]);t=new W(r),t.autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new W({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return(0,i.m)(e.constructor.__accessorMetadata__)}function J(e,t){const r=function(e){return H(e).properties}(e);let i=r[t];return i||(i=r[t]={}),i}const Z=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function X(e){return Z.test(e)?"replace":"merge"}function Y(e,t,r){if(e&&t)if("object"==typeof t)for(const r of Object.getOwnPropertyNames(t))Y(e,r,t[r]);else{if(-1!==t.indexOf(".")){const i=t.split("."),s=i.splice(i.length-1,1)[0];return void Y(G(e,i),s,r)}e[t]=r}}i.n.getLogger("esri.core.accessorSupport.set");const Q=i.n.getLogger("esri.core.accessorSupport.decorators.property");function K(e={}){return(t,r,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const s=J(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&Q.warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),null!=e.readOnly&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const e="string"==typeof n?n:n.source,t="string"==typeof n?null:!0===n.overridable;let i;s.dependsOn=[e],s.get=function(){let t=G(this,e);if("function"==typeof t){i||(i=e.split(".").slice(0,-1).join("."));const r=G(this,i);r&&(t=t.bind(r))}return t},s.readOnly||(s.set=t?function(e){void 0!==e?this._override(r,e):this._clearOverride(r)}:function(t){Y(this,e,t)})}const o=e.type,a=e.types;s.cast||(o?s.cast=function(e){let t=0,r=e;if(function(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}(e))return I(e);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],t++;const i=r;if(x(i))return 0===t?S(i):_(S(i),t);if(1===t)return function(e,t){return 1===arguments.length?b(v.bind(null,e)):b(v.bind(null,e),t)}(i);if(t>1)return function(e,t,r){return 2===arguments.length?_(v.bind(null,e),t):_(v.bind(null,e),t,r)}(i,t);const s=e;return s.from?s.from:v(s)}(o):a&&(Array.isArray(a)?s.cast=b(T(a[0])):s.cast=T(a))),e.range&&(s.cast=te(s.cast,e.range)),function(e,t){L(e,t,X)}(s,e)}}function ee(e,t,r){const i=J(e,r);i.json||(i.json={});let s=i.json;return void 0!==t&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function te(e,t){return r=>{let i=+e(r);return null!=t.step&&(i=Math.round(i/t.step)*t.step),null!=t.min&&(i=Math.max(t.min,i)),null!=t.max&&(i=Math.min(t.max,i)),i}}class re extends i.s{constructor(e,t,r){if(super(e,t,r),!(this instanceof re))return new re(e,t,r)}}function ie(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}re.prototype.type="warning";const se=i.n.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function ne(e,t,r){var s,n;e&&(!r&&!t.read||null!=(s=t.read)&&s.reader||!1===(null==(n=t.read)?void 0:n.enabled)||function(e){return"types"in e?pe(e.types):he(e.type)}(e)&&(0,i.o)("read.reader",oe(e),t))}function oe(e){var t;const r=null!=(t=e.ndimArray)?t:0;if(r>1)return function(e){var t;const r=ae(e),i=le.bind(null,r),s=null!=(t=e.ndimArray)?t:0;return(e,t,r)=>{if(null==e)return e;e=i(e,r,s);let n=s,o=e;for(;n>0&&Array.isArray(o);)n--,o=o[0];if(void 0!==o)for(let t=0;t<n;t++)e=[e];return e}}(e);if(1===r)return ue(e);if("type"in e&&ce(e.type)){var i,s;const t=null==(i=e.type.prototype)||null==(s=i.itemType)?void 0:s.Type,r=ue("function"==typeof t?{type:t}:{types:t});return(t,i,s)=>{const n=r(t,i,s);return n?new e.type(n):n}}return ae(e)}function ae(e){return"type"in e?function(e){return e.prototype.read?(t,r,i)=>{if(null==t)return t;const s=typeof t;if("object"!==s)return void se.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,i),n}:e.fromJSON}(e.type):de(e.types)}function le(e,t,r,i){return 0!==i&&Array.isArray(t)?t.map((t=>le(e,t,r,i-1))):e(t,void 0,r)}function ue(e){const t=ae(e);return(e,r,i)=>{if(null==e)return e;if(Array.isArray(e)){const r=[];for(const s of e){const e=t(s,void 0,i);void 0!==e&&r.push(e)}return r}const s=t(e,void 0,i);return void 0!==s?[s]:void 0}}function ce(e){if(!ie(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?he(t.Type):pe(t.Type))}function he(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||ce(e))}function pe(e){for(const t in e.typeMap)if(!he(e.typeMap[t]))return!1;return!0}function de(e){var t;let r=null;const i=null!=(t=e.errorContext)?t:"type";return(t,s,n)=>{if(null==t)return t;const o=typeof t;if("object"!==o)return void se.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);r||(r=function(e){const t={};for(const s in e.typeMap){var r,i;const n=e.typeMap[s],o=H(n.prototype);if("function"==typeof e.key)continue;const a=o.properties[e.key];if(!a)continue;null!=(r=a.json)&&r.type&&Array.isArray(a.json.type)&&1===a.json.type.length&&"string"==typeof a.json.type[0]&&(t[a.json.type[0]]=n);const l=null==(i=a.json)?void 0:i.write;if(!l||!l.writer){t[s]=n;continue}const u=l.target,c="string"==typeof u?u:e.key,h={};l.writer(s,h,c),h[c]&&(t[h[c]]=n)}return t}(e));const a=e.key;if("string"!=typeof a)return;const l=t[a],u=l?r[l]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!u){const e=`Type '${l||"unknown"}' is not supported`;return n&&n.messages&&t&&n.messages.push(new re(`${i}:unsupported`,e,{definition:t,context:n})),void se.error(e)}const c=new u;return c.read(t,n),c}}function ye(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function fe(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function me(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}function ge(e,t){var r;if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const s=null!=(r=null==e?void 0:e.ndimArray)?r:0;e&&(1===s||"type"in e&&ie(e.type))?t.write.writer=_e:t.write.writer=s>1?function(e){return function(t,r,s,n){let o;if(null===t)o=null;else{o=xe(t,n,e);let r=e,i=o;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(void 0!==i)for(let e=0;e<r;e++)o=[o]}(0,i.o)(s,o,r)}}(s):ve}function ve(e,t,r,s){(0,i.o)(r,be(e,s),t)}function be(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?we(e):e}function we(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function _e(e,t,r,s){let n;null===e?n=null:e&&"function"==typeof e.map?(n=e.map((e=>be(e,s))),"function"==typeof n.toArray&&(n=n.toArray())):n=[be(e,s)],(0,i.o)(r,n,t)}function xe(e,t,r){return 0!==r&&Array.isArray(e)?e.map((e=>xe(e,t,r-1))):be(e,t)}function Se(e,t){return Me(e,"read",t)}function Te(e,t){return Me(e,"write",t)}function Me(e,t,r){let i=e&&e.json;if(e&&e.json&&e.json.origins&&r){const s=e.json.origins[r.origin];s&&("any"===t||t in s)&&(i=s)}return i}const Ee=[{processPrototypePropertyMetadata(e,t){(function(e){if(e.json||(e.json={}),fe(e.json),me(e.json),ye(e.json),e.json.origins)for(const t in e.json.origins)fe(e.json.origins[t]),me(e.json.origins[t]),ye(e.json.origins[t]);return!0})(t)&&(function(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const e in r)if(t[e]){const i=t[e];r[e].forEach((e=>{t[e]=i})),delete t[e]}}}(t),function(e){const t=function(e){return e.type?function(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!x(r);)r=r[0],t++;return{type:r,ndimArray:t}}(e):function(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}(e)}(e);if(e.json.origins)for(const r in e.json.origins){const i=e.json.origins[r];ne(t,i,!1),ge(t,i)}ne(t,e.json,!0),ge(t,e.json)}(t))}}];let Ie,Oe=[];const Ae=i.n.getLogger("esri.core.Accessor");function Pe(e){void 0!==Ie&&Ie.onObservableAccessed(e)}let Re=!1,Fe=!1;function Ce(e,t,r){if(Re)return Le(e,t,r);ke(e);const i=t.call(r);return Ne(),i}function Le(e,t,r){const i=Re;Re=!0,ke(e);let s=null;try{s=t.call(r)}catch(e){Fe&&Ae.error(e)}return Ne(),Re=i,s}function ke(e){Ie=e,Oe.push(e)}function Ne(){const e=Oe.pop();Ie=Oe.length>0?Oe[Oe.length-1]:void 0,void 0!==e&&e.onTrackingEnd()}function je(e,t){if(32&t.flags)return;const r=Fe;Fe=!1,64&t.flags?Le(t,t.metadata.get,e):Ue(e,t),Fe=r}const De=[];function Ue(e,t){128&t.flags||(t.flags|=128,Le(t,(()=>{const r=t.metadata.dependsOn||De;for(const t of r)if("string"==typeof t&&-1===t.indexOf("."))Ve(e,t,!1);else{const r=j(t);for(let t=0,i=e;t<r.length&&null!=i&&"object"==typeof i;++t)i=Ve(i,r[t],t!==r.length-1)}})),t.flags&=-129)}function Ve(e,t,r){const i="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(i,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const s=C(e),n=null==s?void 0:s.properties.get(i);return n&&(Pe(n),je(e,n)),r?e[i]:void 0}const Be=new Set,ze=new Set;function qe(e){return t=>{t.prototype.declaredClass=e,function(e,t){for(const r of Ee)if(r.processPrototypePropertyMetadata)for(const i in e){const s=e[i];r.processPrototypePropertyMetadata(i,s,e,t)}}(H(t.prototype).properties,e),$e(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!Be.has(s.initialize)&&(Be.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!ze.has(s.destroy)&&(ze.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);Be.clear(),ze.clear();class n extends t{constructor(...e){if(super(...e),this.constructor===n&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=r.length-1;e>=0;e--)r[e].call(this)}}),i.length){let e=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0;for(let e=0;e<i.length;e++)i[e].call(this)}}})}this.postscript(...e)}}}return n.__accessorMetadata__=H(t.prototype),n.prototype.declaredClass=e,n}}function Ge(e,t){return null==t.get?function(){const t=this.__accessor__.properties.get(e);if(void 0===t)return;Pe(t);const r=this.__accessor__.store;return r.has(e)?r.get(e):t.metadata.value}:function(){const t=this.__accessor__.properties.get(e);if(void 0!==t)return t.getComputed()}}function $e(e){const t=e.prototype,r=t.declaredClass,i=H(t).properties;!function(e,t){for(const r of Ee)if(r.processClassPropertyMetadata)for(const i in e){const s=e[i];r.processClassPropertyMetadata(i,s,e,t)}}(i,r);const s={};for(const e of Object.getOwnPropertyNames(i)){const t=i[e];s[e]={enumerable:!0,configurable:!0,get:Ge(e,t),set(r){const i=this.__accessor__;if(void 0!==i){if(!Object.isFrozen(this)){if(i.initialized&&t.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(2===i.lifecycle&&t.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);i.set(e,r)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}}}Object.defineProperties(e.prototype,s)}},41374:(e,t,r)=>{"use strict";r.d(t,{s:()=>u,t:()=>n}),r(80219);var i=r(60816),s=r(53185);function n(e,{isPrimitive:t,width:r,depth:s,height:n}){const o=t?10:1;if(null==r&&null==n&&null==s)return[o*e[0],o*e[1],o*e[2]];const a=(0,i.i)(r,s,n);let l;for(let t=0;t<3;t++){const r=a[t];if(null!=r){l=r/e[t];break}}for(let t=0;t<3;t++)null==a[t]&&(a[t]=e[t]*l);return a}const o=(0,s.u)(-.5,-.5,-.5,.5,.5,.5),a=(0,s.u)(-.5,-.5,0,.5,.5,1),l=(0,s.u)(-.5,-.5,0,.5,.5,.5);function u(e){switch(e){case"sphere":case"cube":case"diamond":return o;case"cylinder":case"cone":case"inverted-cone":return a;case"tetrahedron":return l;default:return}}},81135:(e,t,r)=>{"use strict";r.d(t,{A:()=>lt,B:()=>ve,C:()=>k,D:()=>_r,F:()=>Er,M:()=>Sr,P:()=>Tr,S:()=>ar,a:()=>ir,b:()=>gr,c:()=>br,d:()=>x,e:()=>it,f:()=>tt,g:()=>Ir,h:()=>Mr,i:()=>yr,j:()=>wr,k:()=>Qt,l:()=>Rt,m:()=>It,n:()=>Ht,o:()=>xr,p:()=>U,q:()=>M,r:()=>Fe,s:()=>vt,t:()=>de,u:()=>Ee,v:()=>Je,w:()=>jt,x:()=>vr,y:()=>hr,z:()=>ae});var i,s=r(88903),n=r(78155),o=r(80219),a=r(29126),l=r(4169),u=r(52957),c=r(94527),h=r(17762),p=r(61888),d=r(20736),y=r(80987),f=r(31531),m=r(29832),g=r(40130),v=r(31516),b=r(52109),w=r(20215);let _=i=class extends c.a{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const r in e)t[r]=e[r]}async collectRequiredFields(e,t){if("CIMSymbolReference"===this.data.type){const r=this.data.primitiveOverrides;if(r){const i=r.map((r=>{const i=r.valueExpressionInfo;return(0,u.T)(e,t,i.expression)}));await Promise.all(i)}}}clone(){return new i({data:(0,o.y)(this.data)})}hash(){return(0,o.w)(JSON.stringify(this.data)).toString()}};(0,n.e)([(0,s.y)({json:{write:!1}})],_.prototype,"color",void 0),(0,n.e)([(0,s.y)({json:{write:!0}})],_.prototype,"data",void 0),(0,n.e)([(0,l.e)("data",["symbol"])],_.prototype,"readData",null),(0,n.e)([(0,n.o)("data")],_.prototype,"writeData",null),(0,n.e)([(0,a.r)({CIMSymbolReference:"cim"},{readOnly:!0})],_.prototype,"type",void 0),_=i=(0,n.e)([(0,s.n)("esri.symbols.CIMSymbol")],_);var x=_;let S=class extends n.a{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,r){e||(t[r]=e)}};(0,n.e)([(0,s.y)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],S.prototype,"enabled",void 0),(0,n.e)([(0,n.o)("enabled")],S.prototype,"writeEnabled",null),(0,n.e)([(0,s.y)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],S.prototype,"type",void 0),S=(0,n.e)([(0,s.n)("esri.symbols.Symbol3DLayer")],S);var T=S;const M={type:h.o,json:{type:[s.N],default:null,read:{source:["color","transparency"],reader:function(e,t){const r=null!=t.transparency?(0,p.r)(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new h.o([i[0]||0,i[1]||0,i[2]||0,r]):null}},write:{target:{color:{type:[s.N]},transparency:{type:s.N}},writer:function(e,t){t.color=e.toJSON().slice(0,3);const r=(0,p.n)(e.a);0!==r&&(t.transparency=r)}}}},E={type:Number,cast:c.o,json:{write:!0}},I={type:[Number],cast:e=>null!=e?e:Array.isArray(e)?e.map(c.o):null,json:{read:!1,write:!1}};let O=class extends n.a{constructor(e){super(e),this.color=new h.o([0,0,0,1]),this.extensionLength=0,this.size=(0,c.e)(1)}clone(){}cloneProperties(){return{color:(0,o.y)(this.color),size:this.size,extensionLength:this.extensionLength}}};(0,n.e)([(0,s.y)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],O.prototype,"type",void 0),(0,n.e)([(0,s.y)(M)],O.prototype,"color",void 0),(0,n.e)([(0,s.y)({...E,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],O.prototype,"extensionLength",void 0),(0,n.e)([(0,s.y)(E)],O.prototype,"size",void 0),O=(0,n.e)([(0,s.n)("esri.symbols.edges.Edges3D")],O);var A,P=O;let R=A=class extends P{constructor(e){super(e),this.type="sketch"}clone(){return new A(this.cloneProperties())}};(0,n.e)([(0,a.r)({sketch:"sketch"},{readOnly:!0})],R.prototype,"type",void 0),R=A=(0,n.e)([(0,s.n)("esri.symbols.edges.SketchEdges3D")],R);var F,C=R;let L=F=class extends P{constructor(e){super(e),this.type="solid"}clone(){return new F(this.cloneProperties())}};(0,n.e)([(0,a.r)({solid:"solid"},{readOnly:!0})],L.prototype,"type",void 0),L=F=(0,n.e)([(0,s.n)("esri.symbols.support.SolidEdges3D")],L);const k={types:{key:"type",base:P,typeMap:{solid:L,sketch:C}},json:{write:!0}};var N;let j=N=class extends n.a{constructor(){super(...arguments),this.color=null}clone(){return new N({color:(0,o.r)(this.color)?this.color.clone():null})}};(0,n.e)([(0,s.y)(M)],j.prototype,"color",void 0),j=N=(0,n.e)([(0,s.n)("esri.symbols.support.Symbol3DMaterial")],j);var D,U=j;let V=D=class extends T{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new D({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:(0,o.r)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};(0,n.e)([(0,a.r)({Extrude:"extrude"},{readOnly:!0})],V.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],V.prototype,"size",void 0),(0,n.e)([(0,s.y)({type:U,json:{write:!0}})],V.prototype,"material",void 0),(0,n.e)([(0,s.y)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],V.prototype,"castShadows",void 0),(0,n.e)([(0,s.y)(k)],V.prototype,"edges",void 0),V=D=(0,n.e)([(0,s.n)("esri.symbols.ExtrudeSymbol3DLayer")],V);var B=V;let z=class extends c.a{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};(0,n.e)([(0,s.y)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":c.m}},json:{default:null,write:!0}})],z.prototype,"outline",void 0),(0,n.e)([(0,s.y)({type:["simple-fill","picture-fill"],readOnly:!0})],z.prototype,"type",void 0),z=(0,n.e)([(0,s.n)("esri.symbols.FillSymbol")],z);var q=z;let G=class extends n.a{constructor(e){super(e)}clone(){}};(0,n.e)([(0,s.y)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],G.prototype,"type",void 0),G=(0,n.e)([(0,s.n)("esri.symbols.patterns.Pattern3D")],G);var $,W=G;let H=$=class extends W{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new $({style:this.style})}};(0,n.e)([(0,s.y)({type:["style"]})],H.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],H.prototype,"style",void 0),H=$=(0,n.e)([(0,s.n)("esri.symbols.patterns.StylePattern3D")],H);var J=H;const Z={types:{key:"type",base:W,typeMap:{style:J}},json:{read:function(e,t,r){if(!e)return e;switch(e.type){case"style":{const t=new J;return t.read(e,r),t}}},write:!0}},X=new h.o("white");new h.o("black");const Y=new h.o([255,255,255,0]);var Q;let K=Q=class extends U{clone(){return new Q({color:(0,o.r)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})}};(0,n.e)([(0,a.r)({multiply:"multiply",replace:"replace",tint:"tint"})],K.prototype,"colorMixMode",void 0),K=Q=(0,n.e)([(0,s.n)("esri.symbols.support.Symbol3DFillMaterial")],K);var ee,te=K;let re=ee=class extends n.a{constructor(){super(...arguments),this.color=new h.o([0,0,0,1]),this.size=(0,c.e)(1),this.stipplePattern=null,this.stippleOffColor=null}clone(){return new ee({color:(0,o.r)(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}};(0,n.e)([(0,s.y)(M)],re.prototype,"color",void 0),(0,n.e)([(0,s.y)(E)],re.prototype,"size",void 0),(0,n.e)([(0,s.y)(I)],re.prototype,"stipplePattern",void 0),(0,n.e)([(0,s.y)({type:h.o})],re.prototype,"stippleOffColor",void 0),re=ee=(0,n.e)([(0,s.n)("esri.symbols.support.Symbol3DOutline")],re);var ie,se=re;let ne=ie=class extends T{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){return new ie({edges:(0,o.r)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:(0,o.r)(this.material)?this.material.clone():null,pattern:(0,o.r)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:(0,o.r)(this.outline)?this.outline.clone():null})}static fromSimpleFillSymbol(e){return new ie({material:{color:(e.color||Y).clone()},pattern:e.style&&"solid"!==e.style?new J({style:e.style}):null,outline:e.outline?new se({size:e.outline.width||0,color:(e.outline.color||X).clone()}):null})}};(0,n.e)([(0,a.r)({Fill:"fill"},{readOnly:!0})],ne.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:te,json:{write:!0}})],ne.prototype,"material",void 0),(0,n.e)([(0,s.y)(Z)],ne.prototype,"pattern",void 0),(0,n.e)([(0,s.y)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ne.prototype,"castShadows",void 0),(0,n.e)([(0,s.y)({type:se,json:{write:!0}})],ne.prototype,"outline",void 0),(0,n.e)([(0,s.y)(k)],ne.prototype,"edges",void 0),ne=ie=(0,n.e)([(0,s.n)("esri.symbols.FillSymbol3DLayer")],ne);var oe,ae=ne;let le=oe=class extends n.a{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return(0,c.o)(e)}clone(){return new oe({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};(0,n.e)([(0,s.y)({type:["underline","line-through","none"],json:{default:"none",write:!0}})],le.prototype,"decoration",void 0),(0,n.e)([(0,s.y)({type:String,json:{write:!0}})],le.prototype,"family",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],le.prototype,"size",void 0),(0,n.e)([(0,d.c)("size")],le.prototype,"castSize",null),(0,n.e)([(0,s.y)({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],le.prototype,"style",void 0),(0,n.e)([(0,s.y)({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],le.prototype,"weight",void 0),le=oe=(0,n.e)([(0,s.n)("esri.symbols.Font")],le);var ue,ce=le;const he=(0,f.s)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let pe=ue=class extends n.a{constructor(e){super(e)}readHref(e,t,r){return e?(0,m.c)(e,r):t.dataURI}writeHref(e,t,r,i){e&&((0,y.G)(e)?t.dataURI=e:(t.href=(0,m.i)(e,i),(0,y.Q)(t.href)&&(t.href=(0,y.z)(t.href))))}clone(){return new ue({href:this.href,primitive:this.primitive})}};(0,n.e)([(0,s.y)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],pe.prototype,"href",void 0),(0,n.e)([(0,l.e)("href")],pe.prototype,"readHref",null),(0,n.e)([(0,n.o)("href",{href:{type:String},dataURI:{type:String}})],pe.prototype,"writeHref",null),(0,n.e)([(0,a.r)(he)],pe.prototype,"primitive",void 0),pe=ue=(0,n.e)([(0,s.n)("esri.symbols.support.IconSymbol3DLayerResource")],pe);const de="circle";var ye,fe=pe;let me=ye=class extends n.p{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new ye({x:this.x,y:this.y})}};(0,n.e)([(0,s.y)({type:Number})],me.prototype,"x",void 0),(0,n.e)([(0,s.y)({type:Number})],me.prototype,"y",void 0),me=ye=(0,n.e)([(0,s.n)("esri.symbols.support.Symbol3DAnchorPosition2D")],me);var ge,ve=me;const be=o.n.getLogger("esri.symbols.IconSymbol3DLayer");let we=ge=class extends T{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new ge({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:(0,o.r)(this.material)?this.material.clone():null,outline:(0,o.r)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||X,r=_e(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||X).clone()}:null;return new ge({size:e.size,resource:{primitive:Te(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||function(e){return 0===e.r&&0===e.g&&0===e.b}(e.color)?X:e.color,r=_e(e);return new ge({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new ge({resource:{href:(0,y.X)({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function _e(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=xe(e.xoffset),s=xe(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function xe(e){return isFinite(e)?e:0}(0,n.e)([(0,s.y)({type:U,json:{write:!0}})],we.prototype,"material",void 0),(0,n.e)([(0,s.y)({type:fe,json:{write:!0}})],we.prototype,"resource",void 0),(0,n.e)([(0,a.r)({Icon:"icon"},{readOnly:!0})],we.prototype,"type",void 0),(0,n.e)([(0,s.y)(E)],we.prototype,"size",void 0),(0,n.e)([(0,a.r)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),(0,s.y)({json:{default:"center"}})],we.prototype,"anchor",void 0),(0,n.e)([(0,s.y)({type:me,json:{type:[Number],read:{reader:e=>new me({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],we.prototype,"anchorPosition",void 0),(0,n.e)([(0,s.y)({type:se,json:{write:!0}})],we.prototype,"outline",void 0),we=ge=(0,n.e)([(0,s.n)("esri.symbols.IconSymbol3DLayer")],we);const Se={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Te(e){return Se[e]||(be.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}var Me,Ee=we;let Ie=Me=class extends T{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=(0,c.e)(1),this.stipplePattern=null,this.stippleOffColor=null}clone(){return new Me({enabled:this.enabled,material:(0,o.r)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}static fromSimpleLineSymbol(e){return new Me({size:e.width||1,cap:e.cap||"butt",join:e.join||"miter",material:{color:(e.color||X).clone()}})}};(0,n.e)([(0,s.y)({type:U,json:{write:!0}})],Ie.prototype,"material",void 0),(0,n.e)([(0,a.r)({Line:"line"},{readOnly:!0})],Ie.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],Ie.prototype,"join",void 0),(0,n.e)([(0,s.y)({type:["butt","square","round"],json:{write:!0,default:"butt"}})],Ie.prototype,"cap",void 0),(0,n.e)([(0,s.y)(E)],Ie.prototype,"size",void 0),(0,n.e)([(0,s.y)(I)],Ie.prototype,"stipplePattern",void 0),(0,n.e)([(0,s.y)({type:h.o})],Ie.prototype,"stippleOffColor",void 0),Ie=Me=(0,n.e)([(0,s.n)("esri.symbols.LineSymbol3DLayer")],Ie);var Oe,Ae=Ie;const Pe=(0,f.s)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Re=Oe=class extends n.a{clone(){return new Oe({href:this.href,primitive:this.primitive})}};(0,n.e)([(0,s.y)({type:String,json:{read:m.m,write:m.p}})],Re.prototype,"href",void 0),(0,n.e)([(0,a.r)(Pe)],Re.prototype,"primitive",void 0),Re=Oe=(0,n.e)([(0,s.n)("esri.symbols.support.ObjectSymbol3DLayerResource")],Re);const Fe="sphere";var Ce,Le=Re;let ke=Ce=class extends n.p{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Ce({x:this.x,y:this.y,z:this.z})}};var Ne;(0,n.e)([(0,s.y)({type:Number})],ke.prototype,"x",void 0),(0,n.e)([(0,s.y)({type:Number})],ke.prototype,"y",void 0),(0,n.e)([(0,s.y)({type:Number})],ke.prototype,"z",void 0),ke=Ce=(0,n.e)([(0,s.n)("esri.symbols.support.Symbol3DAnchorPosition3D")],ke);let je=Ne=class extends T{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Ne({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:(0,o.r)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};(0,n.e)([(0,s.y)({type:U,json:{write:!0}})],je.prototype,"material",void 0),(0,n.e)([(0,s.y)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],je.prototype,"castShadows",void 0),(0,n.e)([(0,s.y)({type:Le,json:{write:!0}})],je.prototype,"resource",void 0),(0,n.e)([(0,a.r)({Object:"object"},{readOnly:!0})],je.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],je.prototype,"width",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],je.prototype,"height",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],je.prototype,"depth",void 0),(0,n.e)([(0,a.r)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),(0,s.y)({json:{default:"origin"}})],je.prototype,"anchor",void 0),(0,n.e)([(0,s.y)({type:ke,json:{type:[Number],read:{reader:e=>new ke({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],je.prototype,"anchorPosition",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],je.prototype,"heading",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],je.prototype,"tilt",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],je.prototype,"roll",void 0),(0,n.e)([(0,s.y)({readOnly:!0})],je.prototype,"isPrimitive",null),je=Ne=(0,n.e)([(0,s.n)("esri.symbols.ObjectSymbol3DLayer")],je);var De,Ue=je;let Ve=De=class extends T{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}get size(){return this.width&&this.height?this.width===this.height?this.width:void 0:this.width?this.width:this.height?this.height:void 0}set size(e){this.width=e,this.height=e}readSize(e,t){return t.height||t.width?e:t.size}clone(){return new De({enabled:this.enabled,material:(0,o.r)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};(0,n.e)([(0,s.y)({type:U,json:{write:!0}})],Ve.prototype,"material",void 0),(0,n.e)([(0,s.y)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ve.prototype,"castShadows",void 0),(0,n.e)([(0,a.r)({Path:"path"},{readOnly:!0})],Ve.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:Number})],Ve.prototype,"size",null),(0,n.e)([(0,l.e)("size")],Ve.prototype,"readSize",null),(0,n.e)([(0,s.y)({type:["circle","quad"],json:{write:!0,default:"circle"}})],Ve.prototype,"profile",void 0),(0,n.e)([(0,s.y)({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],Ve.prototype,"join",void 0),(0,n.e)([(0,s.y)({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],Ve.prototype,"cap",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Ve.prototype,"width",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],Ve.prototype,"height",void 0),(0,n.e)([(0,s.y)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Ve.prototype,"anchor",void 0),(0,n.e)([(0,s.y)({type:["heading","all"],json:{write:!0,default:"all"}})],Ve.prototype,"profileRotation",void 0),Ve=De=(0,n.e)([(0,s.n)("esri.symbols.PathSymbol3DLayer")],Ve);var Be,ze=Ve;let qe=Be=class extends n.a{constructor(){super(...arguments),this.color=new h.o([0,0,0,1]),this.size=0}clone(){return new Be({color:(0,o.y)(this.color),size:this.size})}};(0,n.e)([(0,s.y)(M)],qe.prototype,"color",void 0),(0,n.e)([(0,s.y)(E)],qe.prototype,"size",void 0),qe=Be=(0,n.e)([(0,s.n)("esri.symbols.support.Symbol3DHalo")],qe);var Ge,$e=qe;let We=Ge=class extends T{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text"}get font(){return this._get("font")||null}set font(e){e&&this._userSize&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const s={...i,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9}set size(e){this._userSize=e,this.font&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){return new Ge({enabled:this.enabled,font:this.font&&(0,o.y)(this.font),halo:this.halo&&(0,o.y)(this.halo),material:(0,o.r)(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(e){const t=function(e,t){return e&&t>0?{color:(0,o.y)(e),size:t}:null}(e.haloColor,e.haloSize),r=e.font?e.font.clone():new ce;return new Ge({size:r.size,font:r,halo:t,material:e.color?{color:e.color.clone()}:null,text:e.text})}};(0,n.e)([(0,s.y)({type:ce,json:{write:!0}})],We.prototype,"font",null),(0,n.e)([(0,n.o)("font")],We.prototype,"writeFont",null),(0,n.e)([(0,s.y)({type:$e,json:{write:!0}})],We.prototype,"halo",void 0),(0,n.e)([(0,s.y)({type:U,json:{write:!0}})],We.prototype,"material",void 0),(0,n.e)([(0,s.y)(E),(0,s.y)()],We.prototype,"size",null),(0,n.e)([(0,s.y)({type:String,json:{write:!0}})],We.prototype,"text",void 0),(0,n.e)([(0,a.r)({Text:"text"},{readOnly:!0})],We.prototype,"type",void 0),We=Ge=(0,n.e)([(0,s.n)("esri.symbols.TextSymbol3DLayer")],We);var He,Je=We;let Ze=He=class extends T{constructor(e){super(e),this.color=Xe.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new He({color:(0,o.y)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};(0,n.e)([(0,s.y)({type:h.o,nonNullable:!0,json:{type:[s.N],write:(e,t,r)=>t[r]=e.toArray(1),default:()=>Xe.clone(),defaultEquals:e=>e.toCss(!0)===Xe.toCss(!0)}})],Ze.prototype,"color",void 0),(0,n.e)([(0,a.r)({Water:"water"},{readOnly:!0})],Ze.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Ze.prototype,"waterbodySize",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0,default:null}})],Ze.prototype,"waveDirection",void 0),(0,n.e)([(0,s.y)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Ze.prototype,"waveStrength",void 0),Ze=He=(0,n.e)([(0,s.n)("esri.symbols.WaterSymbol3DLayer")],Ze);const Xe=new h.o([0,119,190]);var Ye,Qe=Ze;let Ke=Ye=class extends n.p{constructor(){super(...arguments),this.portal=null}clone(){return new Ye({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};(0,n.e)([(0,s.y)({type:String})],Ke.prototype,"name",void 0),(0,n.e)([(0,s.y)({type:String})],Ke.prototype,"styleUrl",void 0),(0,n.e)([(0,s.y)({type:String})],Ke.prototype,"styleName",void 0),(0,n.e)([(0,s.y)({type:b.G})],Ke.prototype,"portal",void 0),Ke=Ye=(0,n.e)([(0,s.n)("esri.symbols.support.StyleOrigin")],Ke);var et,tt=Ke;let rt=et=class extends n.p{clone(){return new et({url:this.url})}};(0,n.e)([(0,s.y)({type:String})],rt.prototype,"url",void 0),rt=et=(0,n.e)([(0,s.n)("esri.symbols.support.Thumbnail")],rt);var it=rt;const st={icon:Ee,object:Ue,line:Ae,path:ze,fill:ae,extrude:B,text:Je,water:Qe},nt=g.L.ofType({base:T,key:"type",typeMap:st,errorContext:"symbol-layer"}),ot=o.n.getLogger("esri.symbols.Symbol3D");let at=class extends c.a{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=t&&t.type||g.L;this._set("symbolLayers",new r)}get color(){return null}set color(e){ot.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){(0,v.n)(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const t=(0,m.c)(e.styleUrl,r);return new tt({styleUrl:t,name:e.name})}if(e.styleName&&e.name)return new tt({portal:r&&r.portal||b.G.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new s.z("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,i){if(e.styleUrl&&e.name){let r=(0,m.i)(e.styleUrl,i);(0,y.Q)(r)&&(r=(0,y.z)(r)),t.styleOrigin={styleUrl:r,name:e.name}}else e.styleName&&e.name&&(e.portal&&i&&i.portal&&!(0,y.P)(e.portal.restUrl,i.portal.restUrl)?i&&i.messages&&i.messages.push(new s.z("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof T||e&&st[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};(0,n.e)([(0,s.y)({json:{read:!1,write:!1}})],at.prototype,"color",null),(0,n.e)([(0,s.y)({type:nt,nonNullable:!0,json:{write:!0}}),(0,d.c)(v.t)],at.prototype,"symbolLayers",null),(0,n.e)([(0,s.y)({type:tt})],at.prototype,"styleOrigin",void 0),(0,n.e)([(0,l.e)("styleOrigin")],at.prototype,"readStyleOrigin",null),(0,n.e)([(0,n.o)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],at.prototype,"writeStyleOrigin",null),(0,n.e)([(0,s.y)({type:it,json:{read:!1}})],at.prototype,"thumbnail",void 0),(0,n.e)([(0,s.y)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],at.prototype,"type",void 0),at=(0,n.e)([(0,s.n)("esri.symbols.Symbol3D")],at);var lt=at;let ut=class extends n.a{constructor(e){super(e),this.visible=!0}clone(){}};(0,n.e)([(0,s.y)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],ut.prototype,"type",void 0),(0,n.e)([(0,s.y)({readOnly:!0})],ut.prototype,"visible",void 0),ut=(0,n.e)([(0,s.n)("esri.symbols.callouts.Callout3D")],ut);var ct,ht=ut;let pt=ct=class extends n.a{constructor(){super(...arguments),this.color=new h.o("white")}clone(){return new ct({color:(0,o.y)(this.color)})}};(0,n.e)([(0,s.y)(M)],pt.prototype,"color",void 0),pt=ct=(0,n.e)([(0,s.n)("esri.symbols.callouts.LineCallout3DBorder")],pt);var dt,yt=pt;Object.freeze({__proto__:null,get LineCallout3DBorder(){return pt},default:yt});let ft=dt=class extends ht{constructor(e){super(e),this.type="line",this.color=new h.o([0,0,0,1]),this.size=(0,c.e)(1),this.border=null}get visible(){return this.size>0&&(0,o.r)(this.color)&&this.color.a>0}clone(){return new dt({color:(0,o.y)(this.color),size:this.size,border:(0,o.y)(this.border)})}};function mt(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function gt(e){if(!e)return!1;if(!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!mt(e)}function vt(e){return"point-3d"===e.type||"label-3d"===e.type}(0,n.e)([(0,a.r)({line:"line"},{readOnly:!0})],ft.prototype,"type",void 0),(0,n.e)([(0,s.y)(M)],ft.prototype,"color",void 0),(0,n.e)([(0,s.y)(E)],ft.prototype,"size",void 0),(0,n.e)([(0,s.y)({type:yt,json:{write:!0}})],ft.prototype,"border",void 0),(0,n.e)([(0,s.y)({readOnly:!0})],ft.prototype,"visible",null),ft=dt=(0,n.e)([(0,s.n)("esri.symbols.callouts.LineCallout3D")],ft);const bt={types:{key:"type",base:ht,typeMap:{line:ft}},json:{write:!0}};var wt;let _t=wt=class extends n.a{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new wt({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};(0,n.e)([(0,s.y)(E)],_t.prototype,"screenLength",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0,default:0}})],_t.prototype,"minWorldLength",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],_t.prototype,"maxWorldLength",void 0),_t=wt=(0,n.e)([(0,s.n)("esri.symbols.support.Symbol3DVerticalOffset")],_t);var xt,St=_t;const Tt=g.L.ofType({base:null,key:"type",typeMap:{text:Je}});let Mt=xt=class extends lt{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Tt,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return gt(this)}hasVisibleVerticalOffset(){return mt(this)}clone(){return new xt({styleOrigin:(0,o.y)(this.styleOrigin),symbolLayers:(0,o.y)(this.symbolLayers),thumbnail:(0,o.y)(this.thumbnail),callout:(0,o.y)(this.callout),verticalOffset:(0,o.y)(this.verticalOffset)})}static fromTextSymbol(e){return new xt({symbolLayers:[Je.fromTextSymbol(e)]})}};(0,n.e)([(0,s.y)({type:St,json:{write:!0}})],Mt.prototype,"verticalOffset",void 0),(0,n.e)([(0,s.y)(bt)],Mt.prototype,"callout",void 0),(0,n.e)([(0,s.y)({json:{read:!1,write:!1}})],Mt.prototype,"styleOrigin",void 0),(0,n.e)([(0,s.y)({type:Tt})],Mt.prototype,"symbolLayers",void 0),(0,n.e)([(0,a.r)({LabelSymbol3D:"label-3d"},{readOnly:!0})],Mt.prototype,"type",void 0),Mt=xt=(0,n.e)([(0,s.n)("esri.symbols.LabelSymbol3D")],Mt);var Et,It=Mt;const Ot=g.L.ofType({base:null,key:"type",typeMap:{line:Ae,path:ze}}),At=g.L.ofType({base:null,key:"type",typeMap:{line:Ae,path:ze}});let Pt=Et=class extends lt{constructor(e){super(e),this.symbolLayers=new Ot,this.type="line-3d"}clone(){return new Et({styleOrigin:(0,o.y)(this.styleOrigin),symbolLayers:(0,o.y)(this.symbolLayers),thumbnail:(0,o.y)(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Et({symbolLayers:[Ae.fromSimpleLineSymbol(e)]})}};(0,n.e)([(0,s.y)({type:Ot,json:{type:At}})],Pt.prototype,"symbolLayers",void 0),(0,n.e)([(0,a.r)({LineSymbol3D:"line-3d"},{readOnly:!0})],Pt.prototype,"type",void 0),Pt=Et=(0,n.e)([(0,s.n)("esri.symbols.LineSymbol3D")],Pt);var Rt=Pt;let Ft=class extends c.a{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,n.e)([(0,s.y)({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ft.prototype,"angle",void 0),(0,n.e)([(0,s.y)({type:["simple-marker","picture-marker"],readOnly:!0})],Ft.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],Ft.prototype,"xoffset",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],Ft.prototype,"yoffset",void 0),(0,n.e)([(0,s.y)({type:Number,cast:e=>"auto"===e?e:(0,c.o)(e),json:{write:!0}})],Ft.prototype,"size",void 0),Ft=(0,n.e)([(0,s.n)("esri.symbols.MarkerSymbol")],Ft);var Ct,Lt=Ft;const kt=g.L.ofType({base:null,key:"type",typeMap:{fill:ae}});let Nt=Ct=class extends lt{constructor(e){super(e),this.symbolLayers=new kt,this.type="mesh-3d"}clone(){return new Ct({styleOrigin:(0,o.y)(this.styleOrigin),symbolLayers:(0,o.y)(this.symbolLayers),thumbnail:(0,o.y)(this.thumbnail)})}};(0,n.e)([(0,s.y)({type:kt})],Nt.prototype,"symbolLayers",void 0),(0,n.e)([(0,a.r)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Nt.prototype,"type",void 0),Nt=Ct=(0,n.e)([(0,s.n)("esri.symbols.MeshSymbol3D")],Nt);var jt=Nt;function Dt(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!(0,y.Q)(e)&&t.layer.parsedUrl?(0,y.D)(t.layer.parsedUrl.path,"images",e):(0,m.c)(e,t)}const Ut={json:{read:{source:["imageData","url"],reader:function(e,t,r){return t.imageData?(0,y.X)({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):Dt(t.url,r)}},write:{writer(e,t,r,i){!function(e,t,r,i){if((0,y.G)(e)){const s=(0,y.V)(e);t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&(0,m.p)(r.url,t,"url",i)}else(0,m.p)(e,t,"url",i)}(e,t,this.source,i)}}}},Vt={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=Dt(t.url,r)),i}}}};var Bt;let zt=Bt=class extends q{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&"string"!=typeof e&&null==e.imageData)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),null!=r&&(s.width=(0,c.o)(r)),null!=i&&(s.height=(0,c.o)(i)),s}clone(){const e=new Bt({color:(0,o.y)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",(0,o.y)(this.source)),e}hash(){var e;return`${super.hash()}.${null==(e=this.color)?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};(0,n.e)([(0,a.r)({esriPFS:"picture-fill"},{readOnly:!0})],zt.prototype,"type",void 0),(0,n.e)([(0,s.y)(Ut)],zt.prototype,"url",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],zt.prototype,"xscale",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],zt.prototype,"yscale",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],zt.prototype,"width",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],zt.prototype,"height",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],zt.prototype,"xoffset",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],zt.prototype,"yoffset",void 0),(0,n.e)([(0,s.y)(Vt)],zt.prototype,"source",void 0),zt=Bt=(0,n.e)([(0,s.n)("esri.symbols.PictureFillSymbol")],zt);var qt,Gt=zt;let $t=qt=class extends Lt{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;const i={};return e&&(i.url=e),null!=t&&(i.width=(0,c.o)(t)),null!=r&&(i.height=(0,c.o)(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new qt({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",(0,o.y)(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,n.e)([(0,s.y)({json:{write:!1}})],$t.prototype,"color",void 0),(0,n.e)([(0,a.r)({esriPMS:"picture-marker"},{readOnly:!0})],$t.prototype,"type",void 0),(0,n.e)([(0,s.y)(Ut)],$t.prototype,"url",void 0),(0,n.e)([(0,s.y)(Vt)],$t.prototype,"source",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],$t.prototype,"height",void 0),(0,n.e)([(0,l.e)("height",["height","size"])],$t.prototype,"readHeight",null),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],$t.prototype,"width",void 0),(0,n.e)([(0,s.y)({json:{write:!1}})],$t.prototype,"size",void 0),$t=qt=(0,n.e)([(0,s.n)("esri.symbols.PictureMarkerSymbol")],$t);var Wt,Ht=$t;const Jt=g.L.ofType({base:null,key:"type",typeMap:{icon:Ee,object:Ue,text:Je}}),Zt=g.L.ofType({base:null,key:"type",typeMap:{icon:Ee,object:Ue}});let Xt=Wt=class extends lt{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Jt,this.type="point-3d"}writeSymbolLayers(e,t,r,i){const s=e.filter((e=>"text"!==e.type));if(i&&i.messages&&s.length<e.length){const t=e.find((e=>"text"===e.type));i.messages.push(new w.s("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:t}))}t[r]=s.map((e=>e.write({},i))).toArray()}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return gt(this)}hasVisibleVerticalOffset(){return mt(this)}clone(){return new Wt({verticalOffset:(0,o.y)(this.verticalOffset),callout:(0,o.y)(this.callout),styleOrigin:(0,o.y)(this.styleOrigin),symbolLayers:(0,o.y)(this.symbolLayers),thumbnail:(0,o.y)(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Wt({symbolLayers:[Ee.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Wt({symbolLayers:[Ee.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){if(e.data&&e.data.symbol){const t=e.data.symbol;if("CIMPointSymbol"===t.type&&t.callout)return new Wt({symbolLayers:[Ee.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new Wt({symbolLayers:[Ee.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Wt({symbolLayers:[Je.fromTextSymbol(e)]})}};(0,n.e)([(0,s.y)({type:St,json:{write:!0}})],Xt.prototype,"verticalOffset",void 0),(0,n.e)([(0,s.y)(bt)],Xt.prototype,"callout",void 0),(0,n.e)([(0,s.y)({type:Jt,json:{type:Zt,origins:{"web-scene":{type:Zt}}}})],Xt.prototype,"symbolLayers",void 0),(0,n.e)([(0,n.o)("web-scene","symbolLayers")],Xt.prototype,"writeSymbolLayers",null),(0,n.e)([(0,a.r)({PointSymbol3D:"point-3d"},{readOnly:!0})],Xt.prototype,"type",void 0),Xt=Wt=(0,n.e)([(0,s.n)("esri.symbols.PointSymbol3D")],Xt);var Yt,Qt=Xt;const Kt=g.L.ofType({base:null,key:"type",typeMap:{extrude:B,fill:ae,icon:Ee,line:Ae,object:Ue,text:Je,water:Qe}}),er=g.L.ofType({base:null,key:"type",typeMap:{extrude:B,fill:ae,icon:Ee,line:Ae,object:Ue,water:Qe}});let tr=Yt=class extends lt{constructor(e){super(e),this.symbolLayers=new Kt,this.type="polygon-3d"}writeSymbolLayers(e,t,r,i){const s=e.filter((e=>"text"!==e.type));if(i&&i.messages&&s.length<e.length){const t=e.find((e=>"text"===e.type));i.messages.push(new w.s("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:t}))}t[r]=s.map((e=>e.write({},i))).toArray()}clone(){return new Yt({styleOrigin:(0,o.y)(this.styleOrigin),symbolLayers:(0,o.y)(this.symbolLayers),thumbnail:(0,o.y)(this.thumbnail)})}static fromJSON(e){const t=new Yt;if(t.read(e),2===t.symbolLayers.length&&"fill"===t.symbolLayers.getItemAt(0).type&&"line"===t.symbolLayers.getItemAt(1).type){const r=t.symbolLayers.getItemAt(0),i=t.symbolLayers.getItemAt(1);!i.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(r.outline={size:i.size,color:(0,o.r)(i.material)?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Yt({symbolLayers:[ae.fromSimpleFillSymbol(e)]})}};(0,n.e)([(0,s.y)({type:Kt,json:{type:er}})],tr.prototype,"symbolLayers",void 0),(0,n.e)([(0,n.o)("web-scene","symbolLayers")],tr.prototype,"writeSymbolLayers",null),(0,n.e)([(0,a.r)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],tr.prototype,"type",void 0),tr=Yt=(0,n.e)([(0,s.n)("esri.symbols.PolygonSymbol3D")],tr);var rr,ir=tr;const sr=new f.o({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let nr=rr=class extends q{constructor(...e){super(...e),this.color=new h.o([0,0,0,.25]),this.outline=new c.m,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&"string"!=typeof e)return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new rr({color:(0,o.y)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,n.e)([(0,s.y)()],nr.prototype,"color",void 0),(0,n.e)([(0,s.y)()],nr.prototype,"outline",void 0),(0,n.e)([(0,a.r)({esriSFS:"simple-fill"},{readOnly:!0})],nr.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:sr.apiValues,json:{read:sr.read,write:sr.write}})],nr.prototype,"style",void 0),nr=rr=(0,n.e)([(0,s.n)("esri.symbols.SimpleFillSymbol")],nr);var or,ar=nr;const lr=new f.o({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ur=or=class extends Lt{constructor(...e){super(...e),this.color=new h.o([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new c.m}normalizeCtorArgs(e,t,r,i){if(e&&"string"!=typeof e)return e;const s={};return e&&(s.style=e),null!=t&&(s.size=(0,c.o)(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&"x"!==this.style&&"cross"!==this.style&&(t.color=e.toJSON()),null===e&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new or({angle:this.angle,color:(0,o.y)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(e=this.outline)?void 0:e.hash()}`}};(0,n.e)([(0,s.y)()],ur.prototype,"color",void 0),(0,n.e)([(0,n.o)("color")],ur.prototype,"writeColor",null),(0,n.e)([(0,a.r)({esriSMS:"simple-marker"},{readOnly:!0})],ur.prototype,"type",void 0),(0,n.e)([(0,s.y)()],ur.prototype,"size",void 0),(0,n.e)([(0,s.y)({type:lr.apiValues,json:{read:lr.read,write:lr.write}})],ur.prototype,"style",void 0),(0,n.e)([(0,s.y)({type:String,json:{write:!0}})],ur.prototype,"path",null),(0,n.e)([(0,s.y)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":c.m}},json:{default:null,write:!0}})],ur.prototype,"outline",void 0),ur=or=(0,n.e)([(0,s.n)("esri.symbols.SimpleMarkerSymbol")],ur);var cr,hr=ur;let pr=cr=class extends c.a{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new ce,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&"string"!=typeof e)return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&"string"!=typeof i?i.origin:t[r]=e}castLineWidth(e){return(0,c.o)(e)}writeLineHeight(e,t,r,i){i&&"string"!=typeof i?i.origin:t[r]=e}clone(){return new cr({angle:this.angle,backgroundColor:(0,o.y)(this.backgroundColor),borderLineColor:(0,o.y)(this.borderLineColor),borderLineSize:this.borderLineSize,color:(0,o.y)(this.color),font:this.font&&this.font.clone(),haloColor:(0,o.y)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};(0,n.e)([(0,s.y)({type:h.o,json:{write:!0}})],pr.prototype,"backgroundColor",void 0),(0,n.e)([(0,s.y)({type:h.o,json:{write:!0}})],pr.prototype,"borderLineColor",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],pr.prototype,"borderLineSize",void 0),(0,n.e)([(0,s.y)({type:ce,json:{write:!0}})],pr.prototype,"font",void 0),(0,n.e)([(0,s.y)({type:["left","right","center","justify"],json:{write:!0}})],pr.prototype,"horizontalAlignment",void 0),(0,n.e)([(0,s.y)({type:Boolean,json:{write:!0}})],pr.prototype,"kerning",void 0),(0,n.e)([(0,s.y)({type:h.o,json:{write:!0}})],pr.prototype,"haloColor",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],pr.prototype,"haloSize",void 0),(0,n.e)([(0,s.y)({type:Boolean,json:{write:!0}})],pr.prototype,"rightToLeft",void 0),(0,n.e)([(0,s.y)({type:Boolean,json:{write:!0}})],pr.prototype,"rotated",void 0),(0,n.e)([(0,s.y)({type:String,json:{write:!0}})],pr.prototype,"text",void 0),(0,n.e)([(0,a.r)({esriTS:"text"},{readOnly:!0})],pr.prototype,"type",void 0),(0,n.e)([(0,s.y)({type:["baseline","top","middle","bottom"],json:{write:!0}})],pr.prototype,"verticalAlignment",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],pr.prototype,"xoffset",void 0),(0,n.e)([(0,s.y)({type:Number,cast:c.o,json:{write:!0}})],pr.prototype,"yoffset",void 0),(0,n.e)([(0,s.y)({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],pr.prototype,"angle",void 0),(0,n.e)([(0,s.y)({type:Number,json:{write:!0}})],pr.prototype,"width",void 0),(0,n.e)([(0,s.y)({type:Number})],pr.prototype,"lineWidth",void 0),(0,n.e)([(0,n.o)("lineWidth")],pr.prototype,"writeLineWidth",null),(0,n.e)([(0,d.c)("lineWidth")],pr.prototype,"castLineWidth",null),(0,n.e)([(0,s.y)({type:Number})],pr.prototype,"lineHeight",void 0),(0,n.e)([(0,n.o)("lineHeight")],pr.prototype,"writeLineHeight",null),pr=cr=(0,n.e)([(0,s.n)("esri.symbols.TextSymbol")],pr);var dr,yr=pr;const fr=o.n.getLogger("esri.symbols.WebStyleSymbol");let mr=dr=class extends c.a{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new dr({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=await Promise.resolve().then(r.bind(r,80657)).then((function(e){return e.s}));(0,w.a)(t);const s=i.resolveWebStyleSymbol(this,{portal:this.portal},e,t);return s.catch((e=>{fr.error("#fetchSymbol()","Failed to create symbol from style",e)})),s}};(0,n.e)([(0,s.y)({json:{write:!1}})],mr.prototype,"color",void 0),(0,n.e)([(0,s.y)({type:String,json:{write:!0}})],mr.prototype,"styleName",void 0),(0,n.e)([(0,s.y)({type:b.G,json:{write:!1}})],mr.prototype,"portal",void 0),(0,n.e)([(0,s.y)({type:String,json:{read:m.m,write:m.p}})],mr.prototype,"styleUrl",void 0),(0,n.e)([(0,s.y)({type:it,json:{read:!1}})],mr.prototype,"thumbnail",void 0),(0,n.e)([(0,s.y)({type:String,json:{write:!0}})],mr.prototype,"name",void 0),(0,n.e)([(0,a.r)({styleSymbolReference:"web-style"},{readOnly:!0})],mr.prototype,"type",void 0),mr=dr=(0,n.e)([(0,s.n)("esri.symbols.WebStyleSymbol")],mr);var gr=mr;function vr(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function br(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const wr={base:c.a,key:"type",typeMap:{"simple-fill":ar,"picture-fill":Gt,"picture-marker":Ht,"simple-line":c.m,"simple-marker":hr,text:yr,"label-3d":It,"line-3d":Rt,"mesh-3d":jt,"point-3d":Qt,"polygon-3d":ir,"web-style":gr,cim:x},errorContext:"symbol"},_r={base:c.a,key:"type",typeMap:{"picture-marker":Ht,"simple-marker":hr,text:yr,"web-style":gr,cim:x},errorContext:"symbol"},xr=(0,s.D)({types:wr}),Sr={base:c.a,key:"type",typeMap:{"simple-fill":ar,"picture-fill":Gt,"picture-marker":Ht,"simple-line":c.m,"simple-marker":hr,text:yr,"line-3d":Rt,"mesh-3d":jt,"point-3d":Qt,"polygon-3d":ir,"web-style":gr,cim:x},errorContext:"symbol"},Tr={base:c.a,key:"type",typeMap:{text:yr,"label-3d":It},errorContext:"symbol"},Mr={base:c.a,key:"type",typeMap:{"line-3d":Rt,"mesh-3d":jt,"point-3d":Qt,"polygon-3d":ir,"web-style":gr},errorContext:"symbol"},Er={base:c.a,key:"type",typeMap:{"label-3d":It},errorContext:"symbol"},Ir=(0,s.w)(wr)},60183:(e,t,r)=>{"use strict";r.d(t,{n:()=>a,t:()=>o}),r(33807);var i=r(80987),s=r(93875),n=r(14215);async function o(e,t){const{data:r}=await(0,i.L)(e,{responseType:"image",...t});return r}async function a(e){const t=new Image;if(t.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",t.width=5,t.height=5,await t.decode(),!e.gl)return!0;const r=new s.o(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),i=s.h.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),o=new s.f(e,new Map([["a_pos",0]]),{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:i}),a=new s.p(e,"\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv = a_pos;\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor = texture2D(u_texture, v_uv);\n  }\n  ",new Map([["a_pos",0]]));e.useProgram(a);const l=new n.r(e,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},t);e.bindTexture(l,0),a.setUniform1i("u_texture",0);const u=e.getBoundFramebufferObject(),{x:c,y:h,width:p,height:d}=e.getViewport();e.bindFramebuffer(r),e.setViewport(0,0,1,1),e.bindVAO(o),e.drawArrays(5,0,4);const y=new Uint8Array(4);return r.readPixels(0,0,1,1,6408,5121,y),a.dispose(),o.dispose(!1),i.dispose(),r.dispose(),l.dispose(),e.setViewport(c,h,p,d),e.bindFramebuffer(u),t.src="",255===y[0]}},16063:(e,t,r)=>{"use strict";function i(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function n(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}r.d(t,{c:()=>o,e:()=>i,r:()=>s,u:()=>n}),r(80219)},61481:(e,t,r)=>{"use strict";r.d(t,{e:()=>n,n:()=>s});let i=0;const s=0;function n(){return++i}},34534:(e,t,r)=>{"use strict";function i(e,t,r,i){const s=3*e,n=3*(r-e)-s,o=1-s-n,a=3*t,l=3*(i-t)-a,u=1-a-l;function c(e){return((o*e+n)*e+s)*e}function h(e){return(3*o*e+2*n)*e+s}return function(e,t=1e-6){return function(e){return((u*e+l)*e+a)*e}(function(e,t){let r,i,s,n,o,a;for(s=e,a=0;a<8;a++){if(n=c(s)-e,Math.abs(n)<t)return s;if(o=h(s),Math.abs(o)<1e-6)break;s-=n/o}if(r=0,i=1,s=e,s<r)return r;if(s>i)return i;for(;r<i;){if(n=c(s),Math.abs(n-e)<t)return s;e>n?r=s:i=s,s=.5*(i-r)+r}return s}(e,t))}}r.d(t,{e:()=>i,r:()=>o,t:()=>n});const s=/^cubic-bezier\((.*)\)/,n={};function o(e){let t=n[e]||null;if(!t){const r=s.exec(e);if(r){const e=r[1].split(",").map((e=>parseFloat(e.trim())));4!==e.length||e.some((e=>isNaN(e)))||(t=i.apply(i,e))}}return t}n.ease=i(.25,.1,.25,1),n.linear=i(0,0,1,1),n.easeIn=n["ease-in"]=i(.42,0,1,1),n.easeOut=n["ease-out"]=i(0,0,.58,1),n.easeInOut=n["ease-in-out"]=i(.42,0,.58,1)},65352:(e,t,r)=>{"use strict";r.d(t,{A:()=>h,C:()=>O,E:()=>P,F:()=>R,G:()=>V,H:()=>B,I:()=>A,J:()=>k,K:()=>j,L:()=>z,N:()=>F,O:()=>C,P:()=>I,Q:()=>W,R:()=>N,T:()=>D,V:()=>H,W:()=>q,Y:()=>U,a:()=>a,b:()=>c,c:()=>l,d:()=>u,e:()=>p,j:()=>E,l:()=>f,p:()=>d,u:()=>y,v:()=>L}),r(80219);var i=r(31531),s=r(92858),n=r(20736);function o(e){return new s.k({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const a=o(n.s),l=o(n.t),u=o(n.e),c=new s.k({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${n.s.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function h(e){return e&&e===n.t?l:e&&e===n.e?u:a}function p(e){return e&&((0,s.a)(e)||e===l)?l:e&&((0,s.P)(e)||e===u)?u:a}function d(e){return e&&((0,s.a)(e)||e===l)?n.t:e&&((0,s.P)(e)||e===u)?n.e:n.s}function y(e){return(0,s.G)(e)?n.t:(0,s.w)(e)?n.e:n.s}const f=39.37,m=n.s.radius*Math.PI/200,g=/UNIT\[([^\]]+)\]\]$/i,v=s.r,b=/UNIT\[([^\]]+)\]/i,w=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),_=(0,i.s)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),x=e=>e*e,S=e=>e*e*e,T={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:x(.001)},"square-centimeters":{inBaseUnits:x(.01)},"square-decimeters":{inBaseUnits:x(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:x(1e3)},"square-inches":{inBaseUnits:x(.0254)},"square-feet":{inBaseUnits:x(.3048)},"square-yards":{inBaseUnits:x(.9144)},"square-miles":{inBaseUnits:x(1609.344)},"square-us-feet":{inBaseUnits:x(1200/3937)},acres:{inBaseUnits:.0015625*x(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*S(.001)},"cubic-centimeters":{inBaseUnits:1e3*S(.01)},"cubic-decimeters":{inBaseUnits:1e3*S(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*S(1e3)},"cubic-inches":{inBaseUnits:1e3*S(.0254)},"cubic-feet":{inBaseUnits:1e3*S(.3048)},"cubic-yards":{inBaseUnits:1e3*S(.9144)},"cubic-miles":{inBaseUnits:1e3*S(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},M=function(){const e={};for(const t in T)for(const r in T[t].units)e[r]=t;return e}();function E(e){const t=M[e];if(t)return t;throw new Error("unknown measure")}function I(e){return function(e){return T[e].baseUnit}(E(e))}function O(e,t=null){return t=t||E(e),T[t].baseUnit===e}function A(e,t,r){if(t===r)return e;const i=E(t);if(i!==E(r))throw new Error("incompatible units");const s=O(t,i)?e:function(e,t,r){return e*T[r].units[t].inBaseUnits}(e,t,i);return O(r,i)?s:function(e,t,r){return e/T[r].units[t].inBaseUnits}(s,r,i)}function P(e,t){return A(e,t,"meters")<3e3?"meters":"kilometers"}function R(e,t){return A(e,t,"meters")<1e5?"meters":"kilometers"}function F(e,t){return A(e,t,"feet")<1e3?"feet":"miles"}function C(e,t){return A(e,t,"feet")<1e5?"feet":"miles"}function L(e,t){return A(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function k(e,t){return A(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function N(e,t,r){return A(e,t,"meters")/(r*Math.PI/180)}function j(e){return _.fromJSON(e.toLowerCase())||null}function D(e){if(e&&"object"==typeof e&&!(0,s.o)(e))return 1;const t=V(e);return t>1e5?1:t}function U(e){return V(e)>=(e instanceof s.k?d(e).metersPerDegree:1e5)?"meters":z(e)}function V(e,t=n.s.metersPerDegree){return B(e,!0)||t}function B(e,t=!1){let r,i,o=null;if(null!=e&&("object"==typeof e?(r=e.wkid,i=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(i=e)),r){if((0,s.G)(r))return n.t.metersPerDegree;if((0,s.w)(r))return n.e.metersPerDegree;o=v.values[v[r]],!o&&t&&w.has(r)&&(o=m)}else if(i)if(-1!==i.search(/^PROJCS/i)){const e=g.exec(i);e&&e[1]&&(o=parseFloat(e[1].split(",")[1]))}else if(-1!==i.search(/^GEOCCS/i)){const e=b.exec(i);e&&e[1]&&(o=parseFloat(e[1].split(",")[1]))}return o}function z(e){let t,r,i=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)i=v.units[v[t]];else if(r&&-1!==r.search(/^PROJCS/i)){let e=g.exec(r);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),i=e&&e[1])}return i?j(i):null}function q(e){if(!e)return null;switch(z(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const G={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},W=(0,i.s)()(G),H=(0,i.s)()($);(0,i.s)()({...G,...$})},11838:(e,t,r)=>{"use strict";r.d(t,{M:()=>m,d:()=>c,q:()=>g,v:()=>p});var i=r(17762),s=r(81135),n=r(9612),o=r(80219),a=r(60816);r(63358),r(80987),new(r(39068).e)(1e3),new i.o([128,128,128]);const l=/\/resource\/(.*?)\.svg$/,u=new i.o("white");function c(e,t){const r=t.resource.href;return!(0,o.c)("esri-canvas-svg-support")&&e.styleOrigin&&l.test(r)?r.replace(l,"/resource/png/$1.png"):r}function h(e,t){if(null==t)return e;const r=e.toRgba();return r[3]=r[3]*t,new i.o(r)}function p(e,t,r){var n,a,l;e&&(t||null!=r)&&(t&&(t=new i.o(t)),(0,s.c)(e)?function(e,t,r){const i=e.symbolLayers;if(!i)return;const n=e=>{const i=(0,o.r)(e)?e:null;return h(t=t||i||null!=r&&u,r)};i.forEach((e=>{if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=n(e.color);else{const t=(0,o.r)(e.material)?e.material.color:null,i=n(t);(0,o.t)(e.material)?e.material=new s.p({color:i}):e.material.color=i,null!=r&&"outline"in e&&(0,o.r)(e.outline)&&(0,o.r)(e.outline.color)&&(e.outline.color=h(e.outline.color,r))}}))}(e,t,r):(0,s.x)(e)&&(n=e,l=r,(a=(a=t)||n.color)&&(n.color=h(a,l)),null!=l&&"outline"in n&&n.outline&&n.outline.color&&(n.outline.color=h(n.outline.color,l))))}function d(e){for(const t of e)if("number"==typeof t)return t;return null}function y(e,t,r){for(let i=0;i<3;i++){const s=e[i];switch(s){case"symbol-value":return null!=r[i]?r[i]/t[i]:1;case"proportional":break;default:if(s&&t[i])return s/t[i]}}return 1}function f(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return null!=t?t:r;default:return e}}async function m(e,t){if(e&&t)return(0,s.c)(e)?async function(e,t){const i=e.symbolLayers;i&&await(0,n.n)(i,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const r=d(t);(0,o.r)(r)&&(e.size=r)}(e,t);break;case"path":!function(e,t){const r=y(t,a.l,[e.width,void 0,e.height]);e.width=f(t[0],e.width,1,r),e.height=f(t[2],e.height,1,r)}(e,t);break;case"object":await async function(e,t){const{resourceSize:i,symbolSize:s}=await async function(e){const t=await r.e(1323).then(r.bind(r,21323)),i=await t.computeObjectLayerResourceSize(e,10),{width:s,height:n,depth:o}=e,a=[s,o,n];let l=1;for(let e=0;e<3;e++)if(null!=a[e]){l=a[e]/i[e];break}for(let e=0;e<3;e++)null==a[e]&&(a[e]=i[e]*l);return{resourceSize:i,symbolSize:a}}(e),n=y(t,i,s);e.width=f(t[0],s[0],i[0],n),e.depth=f(t[1],s[1],i[1],n),e.height=f(t[2],s[2],i[2],n)}(e,t)}}(e,t)))}(e,t):void((0,s.x)(e)&&function(e,t){const r=d(t);if(!(0,o.t)(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=r,e.height=r*t):(e.width=r*t,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}(e,t))}function g(e,t,r){if(e&&null!=t)if((0,s.c)(e)){const i=e.symbolLayers;i&&i.forEach((e=>{if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,s.x)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}},68631:(e,t,r)=>{"use strict";r.d(t,{o:()=>s}),r(33807);var i=r(80219);function s(){const e=n.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const n=i.e.crypto||i.e.msCrypto},67726:(e,t,r)=>{"use strict";r.d(t,{A:()=>_,C:()=>E,D:()=>x,L:()=>S,_:()=>v,a:()=>s,b:()=>y,d:()=>p,g:()=>g,j:()=>b,k:()=>T,l:()=>c,m:()=>h,o:()=>a,p:()=>m,q:()=>d,r:()=>n,s:()=>o,y:()=>w});var i=r(60816);function s(e,t){return e[0]=t[0],e[1]=t[1],e}function n(e,t,r){return e[0]=t,e[1]=r,e}function o(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function u(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function h(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function p(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function d(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function y(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function f(e){const t=e[0],r=e[1];return t*t+r*r}function m(e,t){return e[0]=-t[0],e[1]=-t[1],e}function g(e,t){const r=t[0],i=t[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function v(e,t){return e[0]*t[0]+e[1]*t[1]}function b(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function w(e,t,r,i){const s=t[0],n=t[1];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e}function _(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s,e[1]=r[1]*i+r[3]*s,e}function x(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s+r[4],e[1]=r[1]*i+r[3]*s+r[5],e}function S(e,t,r,i){const s=t[0]-r[0],n=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=s*a-n*o+r[0],e[1]=s*o+n*a+r[1],e}function T(e,t){return e[0]===t[0]&&e[1]===t[1]}const M=y,E=a,I=l,O=u,A=p,P=d,R=f;Object.freeze({__proto__:null,copy:s,set:n,add:o,subtract:a,multiply:l,divide:u,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:c,scaleAndAdd:h,distance:p,squaredDistance:d,length:y,squaredLength:f,negate:m,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:g,dot:v,cross:b,lerp:w,random:function(e,t){t=t||1;const r=2*(0,i.t)()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},transformMat2:_,transformMat2d:x,transformMat3:function(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[3]*s+r[6],e[1]=r[1]*i+r[4]*s+r[7],e},transformMat4:function(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[4]*s+r[12],e[1]=r[1]*i+r[5]*s+r[13],e},rotate:S,angle:function(e,t){const r=e[0],i=e[1],s=t[0],n=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(r*s+i*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:T,equals:function(e,t){const r=e[0],s=e[1],n=t[0],o=t[1];return Math.abs(r-n)<=i.f*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(s-o)<=i.f*Math.max(1,Math.abs(s),Math.abs(o))},len:M,sub:E,mul:I,div:O,dist:A,sqrDist:P,sqrLen:R})},24776:(e,t,r)=>{"use strict";r.d(t,{M:()=>h,a:()=>f,b:()=>v,c:()=>a,d:()=>g,e:()=>l,h:()=>c,i:()=>u,n:()=>s,o:()=>o,r:()=>n,t:()=>b}),r(33807);var i=r(60816);function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function n(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=r*n-i*s;return l?(l=1/l,e[0]=n*l,e[1]=-i*l,e[2]=-s*l,e[3]=r*l,e[4]=(s*a-n*o)*l,e[5]=(i*o-r*a)*l,e):null}function o(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1],h=r[2],p=r[3],d=r[4],y=r[5];return e[0]=i*u+n*c,e[1]=s*u+o*c,e[2]=i*h+n*p,e[3]=s*h+o*p,e[4]=i*d+n*y+a,e[5]=s*d+o*y+l,e}function a(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=i*c+n*u,e[1]=s*c+o*u,e[2]=i*-u+n*c,e[3]=s*-u+o*c,e[4]=a,e[5]=l,e}function l(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i*u,e[1]=s*u,e[2]=n*c,e[3]=o*c,e[4]=a,e[5]=l,e}function u(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=i*u+n*c+a,e[5]=s*u+o*c+l,e}function c(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function p(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}const d=o,y=p;function f(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function m(e,t,r,i){const s=t[i],n=t[i+1];e[i]=r[0]*s+r[2]*n+r[4],e[i+1]=r[1]*s+r[3]*n+r[5]}function g(e,t,r,i=0,s=0,n=2){const o=s||t.length/n;for(let s=i;s<o;s++)m(e,t,r,s*n)}function v(){return new Float32Array(2)}function b(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function w(){return v()}function _(){return b(1,1)}function x(){return b(1,0)}function S(){return b(0,1)}Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:s,set:function(e,t,r,i,s,n,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e},invert:n,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:o,rotate:a,scale:l,translate:u,fromRotation:c,fromScaling:h,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},subtract:p,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=t[0],c=t[1],h=t[2],p=t[3],d=t[4],y=t[5];return Math.abs(r-u)<=i.f*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-c)<=i.f*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-h)<=i.f*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-p)<=i.f*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-d)<=i.f*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(l-y)<=i.f*Math.max(1,Math.abs(l),Math.abs(y))},mul:d,sub:y}),Object.freeze({__proto__:null,create:f,clone:function(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,r,i,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o},createView:function(e,t){return new Float32Array(e,t,6)},transform:m,transformMany:g});const T=w(),M=_(),E=x(),I=S();Object.freeze({__proto__:null,create:v,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:b,createView:function(e,t){return new Float32Array(e,t,2)},zeros:w,ones:_,unitX:x,unitY:S,ZEROS:T,ONES:M,UNIT_X:E,UNIT_Y:I})},59312:(e,t,r)=>{"use strict";function i(){return[0,0]}function s(e){return[e[0],e[1]]}function n(e,t){return[e,t]}function o(e){const t=[0,0],r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function a(e,t){return new Float64Array(e,t,2)}function l(){return n(1,1)}function u(){return n(1,0)}function c(){return n(0,1)}r.d(t,{a:()=>a,e:()=>o,f:()=>h,n:()=>i,r:()=>s,t:()=>n}),r(33807);const h=[0,0],p=l(),d=u(),y=c();Object.freeze({__proto__:null,create:i,clone:s,fromValues:n,fromArray:o,createView:a,zeros:function(){return[0,0]},ones:l,unitX:u,unitY:c,ZEROS:h,ONES:p,UNIT_X:d,UNIT_Y:y})},71542:(e,t,r)=>{"use strict";r.d(t,{a:()=>l,b:()=>c,c:()=>f,d:()=>p,e:()=>s,f:()=>h,g:()=>u,h:()=>m,i:()=>y,n:()=>o,o:()=>d,r:()=>n,t:()=>a}),r(33807);var i=r(80219);function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function n(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t,r,i,s,n,o,a,l,u,c,h,p,d,y,f){return[e,t,r,i,s,n,o,a,l,u,c,h,p,d,y,f]}function a(e,t){return new Float64Array(e,t,16)}const l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:s,clone:n,fromValues:o,createView:a,IDENTITY:l});const u=i.n.getLogger("esri.views.3d.support.buffer.math");function c(e,t,r){if(e.count!==t.count)return void u.error("source and destination buffers need to have the same number of elements");const i=e.count,s=r[0],n=r[1],o=r[2],a=r[4],l=r[5],c=r[6],h=r[8],p=r[9],d=r[10],y=r[12],f=r[13],m=r[14],g=e.typedBuffer,v=e.typedBufferStride,b=t.typedBuffer,w=t.typedBufferStride;for(let e=0;e<i;e++){const t=e*v,r=e*w,i=b[r],u=b[r+1],_=b[r+2];g[t]=s*i+a*u+h*_+y,g[t+1]=n*i+l*u+p*_+f,g[t+2]=o*i+c*u+d*_+m}}function h(e,t,r){if(e.count!==t.count)return void u.error("source and destination buffers need to have the same number of elements");const i=e.count,s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],c=r[5],h=r[6],p=r[7],d=r[8],y=e.typedBuffer,f=e.typedBufferStride,m=t.typedBuffer,g=t.typedBufferStride;for(let e=0;e<i;e++){const t=e*f,r=e*g,i=m[r],u=m[r+1],v=m[r+2];y[t]=s*i+a*u+h*v,y[t+1]=n*i+l*u+p*v,y[t+2]=o*i+c*u+d*v}}function p(e,t,r){const i=Math.min(e.count,t.count),s=e.typedBuffer,n=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride;for(let e=0;e<i;e++){const t=e*n,i=e*a;s[t]=r*o[i],s[t+1]=r*o[i+1],s[t+2]=r*o[i+2]}}function d(e,t){const r=Math.min(e.count,t.count),i=e.typedBuffer,s=e.typedBufferStride,n=t.typedBuffer,o=t.typedBufferStride;for(let e=0;e<r;e++){const t=e*s,r=e*o,a=n[r],l=n[r+1],u=n[r+2],c=Math.sqrt(a*a+l*l+u*u);if(c>0){const e=1/c;i[t]=e*a,i[t+1]=e*l,i[t+2]=e*u}}}function y(e,t,r){const i=Math.min(e.count,t.count),s=e.typedBuffer,n=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride;for(let e=0;e<i;e++){const t=e*n,i=e*a;s[t]=o[i]>>r,s[t+1]=o[i+1]>>r,s[t+2]=o[i+2]>>r}}function f(e,t,r){const i=e.typedBuffer,s=e.typedBufferStride,n=t.typedBuffer,o=t.typedBufferStride,a=r?r.count:t.count;let l=(r&&r.dstIndex?r.dstIndex:0)*s,u=(r&&r.srcIndex?r.srcIndex:0)*o;for(let e=0;e<a;++e)i[l]=n[u],i[l+1]=n[u+1],i[l+2]=n[u+2],l+=s,u+=o}function m(e,t,r,i,s){var n,o;const a=e.typedBuffer,l=e.typedBufferStride,u=null!=(n=null==s?void 0:s.count)?n:e.count;let c=(null!=(o=null==s?void 0:s.dstIndex)?o:0)*l;for(let e=0;e<u;++e)a[c]=t,a[c+1]=r,a[c+2]=i,c+=l}Object.freeze({__proto__:null,transformMat4:c,transformMat3:h,scale:p,normalize:d,shiftRight:y}),Object.freeze({__proto__:null,copy:f,fill:m})},72600:(e,t,r)=>{"use strict";function i(){return new Float32Array(3)}function s(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function n(e,t,r){const i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=r,i}function o(e,t){return new Float32Array(e,t,3)}function a(){return i()}function l(){return n(1,1,1)}function u(){return n(1,0,0)}function c(){return n(0,1,0)}function h(){return n(0,0,1)}r.d(t,{a:()=>o,n:()=>i,r:()=>s,t:()=>n}),r(33807);const p=a(),d=l(),y=u(),f=c(),m=h();Object.freeze({__proto__:null,create:i,clone:s,fromValues:n,createView:o,zeros:a,ones:l,unitX:u,unitY:c,unitZ:h,ZEROS:p,ONES:d,UNIT_X:y,UNIT_Y:f,UNIT_Z:m})},15346:(e,t,r)=>{"use strict";r.d(t,{D:()=>b,E:()=>w,I:()=>O,_:()=>m,a:()=>s,b:()=>p,g:()=>f,j:()=>g,l:()=>c,q:()=>y,r:()=>n,s:()=>o,x:()=>d,y:()=>v});var i=r(60816);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function n(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}function o(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function u(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function h(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(r*r+i*i+s*s+n*n)}function p(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return r*r+i*i+s*s+n*n}function d(e){const t=e[0],r=e[1],i=e[2],s=e[3];return Math.sqrt(t*t+r*r+i*i+s*s)}function y(e){const t=e[0],r=e[1],i=e[2],s=e[3];return t*t+r*r+i*i+s*s}function f(e,t){const r=t[0],i=t[1],s=t[2],n=t[3];let o=r*r+i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=s*o,e[3]=n*o),e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function g(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=t[3];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function v(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12]*o,e[1]=r[1]*i+r[5]*s+r[9]*n+r[13]*o,e[2]=r[2]*i+r[6]*s+r[10]*n+r[14]*o,e[3]=r[3]*i+r[7]*s+r[11]*n+r[15]*o,e}function b(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function w(e,t){const r=e[0],s=e[1],n=e[2],o=e[3],a=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(r-a)<=i.f*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=i.f*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=i.f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-c)<=i.f*Math.max(1,Math.abs(o),Math.abs(c))}const _=a,x=l,S=u,T=h,M=p,E=d,I=y;var O=Object.freeze({__proto__:null,copy:s,set:n,add:o,subtract:a,multiply:l,divide:u,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:c,scaleAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e},distance:h,squaredDistance:p,length:d,squaredLength:y,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:f,dot:m,lerp:g,random:function(e,t){let r,s,n,o,a,l;t=t||1;do{r=2*(0,i.t)()-1,s=2*(0,i.t)()-1,a=r*r+s*s}while(a>=1);do{n=2*(0,i.t)()-1,o=2*(0,i.t)()-1,l=n*n+o*o}while(l>=1);const u=Math.sqrt((1-a)/l);return e[0]=t*r,e[1]=t*s,e[2]=t*n*u,e[3]=t*o*u,e},transformMat4:v,transformQuat:function(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2],u=r[3],c=u*i+a*n-l*s,h=u*s+l*i-o*n,p=u*n+o*s-a*i,d=-o*i-a*s-l*n;return e[0]=c*u+d*-o+h*-l-p*-a,e[1]=h*u+d*-a+p*-o-c*-l,e[2]=p*u+d*-l+c*-a-h*-o,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:b,equals:w,sub:_,mul:x,div:S,dist:T,sqrDist:M,len:E,sqrLen:I})},48643:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getAllSizes:()=>S,getColor:()=>d,getOpacity:()=>y,getRotationAngle:()=>f,getSize:()=>m,getSizeForValue:()=>b,getSizeFromNumberOrVariable:()=>g,getSizeRangeAtScale:()=>w,getVisualVariableValues:()=>_,viewScaleRE:()=>p});var i=r(17762),s=r(73574),n=r(30316),o=r(80219),a=r(4618),l=r(2385);r(60816),r(88903),r(78155),r(20215),r(80987),r(98548),r(20736),r(4169),r(92858),r(31531),r(82906),r(40130),r(52957),r(29126),r(6585),r(3621),r(63358),r(62121),r(81135),r(94527),r(61888),r(29832),r(31516),r(52109),r(89710),r(65352);const u=o.n.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),c=new s.h,h=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!s)return;if("esri.renderers.visualVariables.ColorVariable"!==s.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n="number"==typeof t,a=n?null:t,l=a&&a.attributes;let c=n?t:null;const h=s.field,{ipData:p,hasExpression:d}=s.cache;let y=s.cache.compiledFunc;if(!h&&!d){const e=s.stops;return e&&e[0]&&e[0].color}if("number"!=typeof c)if(d){if(!(0,o.r)(r)||!(0,o.r)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,i=t.getViewInfo(e),n=t.createExecContext(a,i);if(!y){const e=t.createSyntaxTree(s.valueExpression);y=t.createFunction(e),s.cache.compiledFunc=y}c=t.executeFunction(y,n)}else l&&(c=l[h]);const f=s.normalizationField,m=l?parseFloat(l[f]):void 0;if(null!=c&&(!f||n||!isNaN(m)&&0!==m)){isNaN(m)||n||(c/=m);const e=x(c,p);if(e){const t=e[0],n=e[1],a=t===n?s.stops[t].color:i.o.blendColors(s.stops[t].color,s.stops[n].color,e[2],(0,o.r)(r)?r.color:void 0);return new i.o(a)}}}function y(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s="number"==typeof t,n=s?null:t,a=n&&n.attributes;let l=s?t:null;const c=i.field,{ipData:h,hasExpression:p}=i.cache;let d=i.cache.compiledFunc;if(!c&&!p){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(p){if((0,o.t)(r)||(0,o.t)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),a=t.createExecContext(n,s);if(!d){const e=t.createSyntaxTree(i.valueExpression);d=t.createFunction(e),i.cache.compiledFunc=d}l=t.executeFunction(d,a)}else a&&(l=a[c]);const y=i.normalizationField,f=a?parseFloat(a[y]):void 0;if(null!=l&&(!y||s||!isNaN(f)&&0!==f)){isNaN(f)||s||(l/=f);const e=x(l,h);if(e){const t=e[0],r=e[1];if(t===r)return i.stops[t].opacity;{const s=i.stops[t].opacity;return s+(i.stops[r].opacity-s)*e[2]}}}}function f(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=i.axis||"heading",n="heading"===s&&"arithmetic"===i.rotationType?90:0,a="heading"===s&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof t?null:t,c=l&&l.attributes,h=i.field,{hasExpression:p}=i.cache;let d=i.cache.compiledFunc,y=0;if(!h&&!p)return y;if(p){if((0,o.t)(r)||(0,o.t)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),n=t.createExecContext(l,s);if(!d){const e=t.createSyntaxTree(i.valueExpression);d=t.createFunction(e),i.cache.compiledFunc=d}y=t.executeFunction(d,n)}else c&&(y=c[h]||0);return y="number"!=typeof y||isNaN(y)?null:n+a*y,y}function m(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=b(function(e,t,r){const i="number"==typeof t,s=i?null:t,n=s&&s.attributes;let a=i?t:null;const{isScaleDriven:c}=e.cache;let h=e.cache.compiledFunc;if(c){const t=(0,o.r)(r)?r.scale:void 0,i=(0,o.r)(r)?r.view:void 0;a=null==t||"3d"===i?function(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!i)switch(e.inputValueType){case"expression":{if((0,o.t)(r)||(0,o.t)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,n=i.getViewInfo(t),l=i.createExecContext(s,n);if(!h){const t=i.createSyntaxTree(e.valueExpression);h=i.createFunction(t),e.cache.compiledFunc=h}a=i.executeFunction(h,l);break}case"field":n&&(a=n[e.field]);break;case"unknown":a=null}if(!(0,l.e)(a))return null;if(i||!e.normalizationField)return a;const p=n?parseFloat(n[e.normalizationField]):null;return(0,l.e)(p)&&0!==p?a/p:null}(i,t,r),i,t,r,i.cache.ipData);return null==s||isNaN(s)?0:s}function g(e,t,r){return null==e?null:(0,l.n)(e)?m(e,t,r):(0,l.e)(e)?e:null}function v(e,t,r){return(0,l.e)(r)&&e>r?r:(0,l.e)(t)&&e<t?t:e}function b(e,t,r,i,s){switch(t.transformationType){case"additive":return function(e,t,r,i){return e+(g(t.minSize,r,i)||t.minDataValue)}(e,t,r,i);case"constant":return function(e,t,r){const i=e.stops;let s=i&&i.length&&i[0].size;return null==s&&(s=e.minSize),g(s,t,r)}(t,r,i);case"clamped-linear":return function(e,t,r,i){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=g(t.minSize,r,i),a=g(t.maxSize,r,i),l=(0,o.r)(i)?i.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return a;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?h*(n/2)**2:n*n,r=t+s*((e?h*(a/2)**2:a*a)-t);return e?2*Math.sqrt(r/h):Math.sqrt(r)}return n+s*(a-n)}(e,t,r,i);case"proportional":return function(e,t,r,i){const s=(0,o.r)(i)?i.shape:void 0,n=e/t.minDataValue,a=g(t.minSize,r,i),l=g(t.maxSize,r,i);let u=null;return u="circle"===s?2*Math.sqrt(n*(a/2)**2):"square"===s||"diamond"===s||"image"===s?Math.sqrt(n*a**2):n*a,v(u,a,l)}(e,t,r,i);case"stops":return function(e,t,r,i,s){const[n,o,a]=x(e,s);if(n===o)return g(t.stops[n].size,r,i);{const e=g(t.stops[n].size,r,i);return e+(g(t.stops[o].size,r,i)-e)*a}}(e,t,r,i,s);case"real-world-size":return function(e,t,r,i){const s=((0,o.r)(i)&&i.resolution?i.resolution:1)*a.m[t.valueUnit],n=g(t.minSize,r,i),l=g(t.maxSize,r,i),{valueRepresentation:u}=t;let c=null;return c="area"===u?2*Math.sqrt(e/h)/s:"radius"===u||"distance"===u?2*e/s:e/s,v(c,n,l)}(e,t,r,i);case"identity":return e;case"unknown":return null}}function w(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||t))return null;const s={scale:t,view:r};let n=g(e.minSize,c,s),o=g(e.maxSize,c,s);if(null!=n||null!=o){if(n>o){const e=o;o=n,n=e}return{minSize:n,maxSize:o}}}function _(e,t,r){if(!e.visualVariables)return;const i=[],s=[],n=[],o=[],a=[];for(const t of e.visualVariables)switch(t.type){case"color":s.push(t);break;case"opacity":n.push(t);break;case"rotation":a.push(t);break;case"size":o.push(t)}return s.forEach((e=>{const s=d(e,t,r);i.push({variable:e,value:s})})),n.forEach((e=>{const s=y(e,t,r);i.push({variable:e,value:s})})),a.forEach((e=>{const s=f(e,t,r);i.push({variable:e,value:s})})),o.forEach((e=>{const s=m(e,t,r);i.push({variable:e,value:s})})),i.filter((e=>null!=e.value))}function x(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((t,s)=>e<t?(i=s,!0):(r=s,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function S(e,t,r){const i=["proportional","proportional","proportional"];for(const s of e){const e=s.useSymbolValue?"symbol-value":m(s,t,r);switch(s.axis){case"width":i[0]=e;break;case"depth":i[1]=e;break;case"height":i[2]=e;break;case"width-and-depth":i[0]=e,i[1]=e;break;case"all":case void 0:case null:i[0]=e,i[1]=e,i[2]=e;break;default:(0,n.n)(s.axis)}}return i}},36845:(e,t,r)=>{"use strict";r.d(t,{$:()=>_,A:()=>g,B:()=>x,C:()=>S,O:()=>w,b:()=>m,d:()=>h,g:()=>d,h:()=>p,i:()=>n,j:()=>f,w:()=>v,x:()=>b,y:()=>y});var i=r(20215);function s(e,t,r,i,s){const n=e.watch(t,((t,s,n,o)=>{r&&!r(t)||null==i||i.call(e,t,s,n,o)}),s);if(Array.isArray(t))for(const s of t){const n=e.get(s);r&&r(n)&&(null==i||i.call(e,n,n,t,e))}else{const s=e.get(t);r&&r(s)&&(null==i||i.call(e,s,s,t,e))}return n}function n(e,t,r,n,o){const a="function"==typeof n?n:null,l="object"==typeof n?n:null;"boolean"==typeof n&&(o=n);let u,c=!1;function h(){u&&(u.remove(),u=null)}const p=(0,i.E)();(0,i.v)(l,(()=>{h(),p.reject((0,i.m)())}));const d={then:p.promise.then.bind(p.promise),catch:p.promise.catch.bind(p.promise),remove:h};return Object.freeze(d),u=s(e,t,r,((t,r,i,s)=>{c=!0,h(),a&&a.call(e,t,r,i,s),p.resolve({value:t,oldValue:r,propertyName:i,target:s})}),o),c&&h(),d}function o(e){return!!e}function a(e){return!e}function l(e){return!0===e}function u(e){return!1===e}r(80219);const c=/\?(\.|$)/g;function h(e,t,r,i){const s=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],n=p(e,t,r,i);for(const t of s){const i=t.trim().replace(c,"$1"),s=e.get(i);r.call(e,s,s,i,e)}return n}function p(e,t,r,i){return e.watch(t,r,i)}function d(e,t,r,i){return n(e,t,null,r,i)}function y(e,t,r,i){return s(e,t,o,r,i)}function f(e,t,r,i){return n(e,t,o,r,i)}function m(e,t,r,i){return s(e,t,a,r,i)}function g(e,t,r,i){return n(e,t,a,r,i)}function v(e,t,r,i){return s(e,t,l,r,i)}function b(e,t,r,i){return n(e,t,l,r,i)}function w(e,t,r,i){return s(e,t,u,r,i)}function _(e,t,r,i){return n(e,t,u,r,i)}function x(e,t,r,i){let s=!1;const n=e.watch(t,((t,i,n,o)=>{s||r.call(e,t,i,n,o)}),i);return{remove(){n.remove()},pause(){s=!0},resume(){s=!1}}}function S(e,t,r,s,n,o,a){const l={};function u(t){const i=l[t];i&&(o&&o(i.target,t,e,r),i.handle.remove(),delete l[t])}const c=h(e,t,((t,o,a)=>{u(a),(0,i.e)(t)&&(l[a]={handle:(0,i.r)(t,r,s),target:t},n&&n(t,a,e,r))}),a);return{remove(){c.remove();for(const e in l)u(e)}}}},26779:(e,t,r)=>{"use strict";r.d(t,{f:()=>te,m:()=>ee,p:()=>ie});var i=r(20215),s=r(80219),n=r(88903),o=r(80987),a=r(63358),l=(r(6585),r(3621));const u="20210701",c="d19b8a112526005756523a4068c8295a1f27c124",h={statsWorker:()=>Promise.all([r.e(9351),r.e(4510)]).then(r.bind(r,4510)),geometryEngineWorker:()=>Promise.all([r.e(1337),r.e(9351),r.e(2088)]).then(r.bind(r,22088)),CSVSourceWorker:()=>Promise.all([r.e(9351),r.e(1738)]).then(r.bind(r,11738)),EdgeProcessingWorker:()=>Promise.resolve().then(r.bind(r,7552)).then((function(e){return e.E})),ElevationSamplerWorker:()=>Promise.all([r.e(9351),r.e(8323)]).then(r.bind(r,92399)),FeatureServiceSnappingSourceWorker:()=>Promise.all([r.e(9351),r.e(6964)]).then(r.bind(r,76964)),GeoJSONSourceWorker:()=>Promise.all([r.e(9351),r.e(5943)]).then(r.bind(r,15943)),LercWorker:()=>Promise.all([r.e(9351),r.e(9497)]).then(r.bind(r,99497)),MemorySourceWorker:()=>Promise.all([r.e(9351),r.e(1666)]).then(r.bind(r,11666)),PBFDecoderWorker:()=>r.e(6070).then(r.bind(r,16070)),Pipeline:()=>Promise.all([r.e(9351),r.e(691)]).then(r.bind(r,20691)),PointCloudWorker:()=>Promise.all([r.e(9351),r.e(5611)]).then(r.bind(r,55611)),RasterWorker:()=>Promise.all([r.e(8503),r.e(9351),r.e(7053)]).then(r.bind(r,67053)),SceneLayerWorker:()=>r.e(9351).then(r.bind(r,26852)),WFSSourceWorker:()=>Promise.all([r.e(9351),r.e(7325)]).then(r.bind(r,67325)),WorkerTileHandler:()=>Promise.all([r.e(9351),r.e(9961)]).then(r.bind(r,49961))};var p,d;(d=p||(p={}))[d.HANDSHAKE=0]="HANDSHAKE",d[d.OPEN=1]="OPEN",d[d.OPENED=2]="OPENED",d[d.RESPONSE=3]="RESPONSE",d[d.INVOKE=4]="INVOKE",d[d.ABORT=5]="ABORT",d[d.CLOSE=6]="CLOSE",d[d.OPEN_PORT=7]="OPEN_PORT",d[d.ON=8]="ON";let y=0;function f(){return y++}function m(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function g(e,t,r,i){if(t.type===p.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==p.INVOKE&&t.type!==p.RESPONSE)return void e.postMessage(t);let s;!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(r)?(s=b(i),t.data=r):(s=b(r.transferList),t.data=r.result),s?e.postMessage(t,s):e.postMessage(t)}function v(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function b(e){if(!e||!e.length)return null;if((0,s.c)("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((e=>!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)));return t.length?t:null}const{CLOSE:w,ABORT:_,INVOKE:x,RESPONSE:S,OPEN_PORT:T,ON:M}=p;class E{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===p.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class I{constructor(e,t){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new E((e=>this._onInvokeMessage(e))),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(e){const t=new MessageChannel;let r;r="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const i=new I(t.port1,{channel:t,client:r});return"object"==typeof r&&"remoteClient"in r&&(r.remoteClient=i),I.clients.set(i,r),t.port2}static loadWorker(e){const t=h[e];return t?t():Promise.resolve(null)}close(){this._post({type:w}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,r){const s=r&&r.signal,n=r&&r.transferList;if(!this._port)return Promise.reject(new i.s("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const o=f();return new Promise(((r,a)=>{const l=(0,i.P)(s,(()=>{var e;const t=this._outJobs.get(o);t&&(this._outJobs.delete(o),null==(e=t.abortHandle)||e.remove(),this._post({type:_,jobId:o}),a((0,i.m)()))})),u={resolve:r,reject:a,abortHandle:l,debugInfo:e};this._outJobs.set(o,u),this._post({type:x,jobId:o,methodName:e,abortable:null!=s},t,n)}))}on(e,t){const r=new MessageChannel;function i(e){t(e.data)}return this._port.postMessage({type:p.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",i),r.port1.start(),{remove(){r.port1.postMessage({type:p.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",i)}}}openPort(){const e=new MessageChannel;return this._post({type:T,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var t;null==(t=e.abortHandle)||t.remove(),e.reject((0,i.m)(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){(0,s.r)(this._schedule)?this._schedule((()=>this._processMessage(e))):this._processMessage(e)}_processMessage(e){const t=v(e);if(t)switch(t.type){case S:this._onResponseMessage(t);break;case x:this._invokeQueue.push(t);break;case _:this._onAbortMessage(t);break;case w:this._onCloseMessage();break;case T:this._onOpenPortMessage(t);break;case M:this._onOnMessage(t)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,i=t.get(r);this._invokeQueue.push(e),i&&(i.controller&&i.controller.abort(),t.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&I.clients.get(this)===e&&e.destroy(),I.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:r,data:s,abortable:n}=e,o=n?(0,i.h)():null,a=this._inJobs;let l,u=this._client,c=u[t];try{if(!c&&t&&-1!==t.indexOf(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)u=u[e[t]],c=u[e[t+1]]}if("function"!=typeof c)throw new TypeError(`${t} is not a function`);l=c.call(u,s,{client:this,signal:o?o.signal:null})}catch(e){return void this._post({type:S,jobId:r,error:m(e)})}(0,i.U)(l)?(a.set(r,{controller:o,promise:l}),l.then((e=>{a.has(r)&&(a.delete(r),this._post({type:S,jobId:r},e))}),(e=>{a.has(r)&&(a.delete(r),(0,i.g)(e)||this._post({type:S,jobId:r,error:m(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:S,jobId:r},l)}_onOpenPortMessage(e){new I(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,r=this._client.on(e.eventType,(e=>{t.postMessage(e)})),s=(0,i.r)(e.port,"message",(e=>{v(e).type===p.CLOSE&&(s.remove(),r.remove(),t.close())}))}_onResponseMessage(e){var t;const{jobId:r,error:s,data:n}=e,o=this._outJobs;if(!o.has(r))return;const a=o.get(r);o.delete(r),null==(t=a.abortHandle)||t.remove(),s?a.reject(i.s.fromJSON(JSON.parse(s))):a.resolve(n)}_post(e,t,r){return g(this._port,e,t,r)}}I.kernelInfo={revision:c,version:o.r,buildDate:u},I.clients=new Map;const O=s.n.getLogger("esri.core.workers.Connection");class A{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((r,s)=>{let n=!0;const o=e=>{(0,i.a)(t.signal),n&&(n=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let n=0;n<e.length;++n){const a=e[n];(0,i.U)(a)?this._clientPromises[n]=a.then((e=>(this._clients[n]=new I(e,t),o(r),this._clients[n])),(()=>(o(s),null))):(this._clients[n]=new I(a,t),this._clientPromises[n]=Promise.resolve(this._clients[n]),o(r))}}))}broadcast(e,t,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const n=this._clientPromises[s];i[s]=n.then((i=>i.invoke(e,t,r)))}return i}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const r=this._clients[t];if(r){if(!r.isBusy())return Promise.resolve(r)}else e=e||[],e.push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,r){let i=null;return Array.isArray(r)?(O.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:r}):i=r,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((r=>r.invoke(e,t,i)))}on(e,t){return Promise.all(this._clientPromises).then((()=>(0,n.x)(this._clients.map((r=>r.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let r=t.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then((s=>{t[i]=s.openPort(),0==--r&&e(t)}))}))}get test(){return{numClients:this._clients.length}}}const P={};function R(e){var t;const r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=P.baseUrl),null==(t=P.packages)||t.forEach((e=>{!function(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}(r.packages,e)})),r}class F{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...r)=>e[t](...r)}))}}const C=s.e.MutationObserver||s.e.WebKitMutationObserver,L=function(){let e;if(s.e.process&&s.e.process.nextTick)e=e=>{s.e.process.nextTick(e)};else if(s.e.Promise)e=e=>{s.e.Promise.resolve().then(e)};else if(C){const t=[],r=document.createElement("div");new C((()=>{for(;t.length>0;)t.shift()()})).observe(r,{attributes:!0}),e=e=>{t.push(e),r.setAttribute("queueStatus","1")}}return e}(),k=(()=>{const e=s.e.MessageEvent;try{new e("message",{data:null})}catch{return(e,t={})=>{const{data:r,bubbles:i=!1,cancelable:s=!1}=t,n=document.createEvent("Event");return n.initEvent(e,i,s),n.data=r,n}}return(t,r)=>new e(t,r)})();class N{constructor(){this._dispatcher=new F,this._workerPostMessage({type:p.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){L((()=>{this._workerMessageHandler(k("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){L((()=>{this.dispatchEvent(k("message",{data:e}))}))}async _workerMessageHandler(e){const t=v(e);if(t&&t.type===p.OPEN){const{modulePath:e,jobId:r}=t;let i=await I.loadWorker(e);i||(i=await import(e));const s=I.connect(i);this._workerPostMessage({type:p.OPENED,jobId:r,data:s})}}}const j=s.n.getLogger("esri.core.workers"),{HANDSHAKE:D}=p;let U,V;const B="Failed to create Worker. Fallback to execute module in main thread";async function z(e){return new Promise((t=>{function r(s){const n=v(s);n&&n.type===D&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),j.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new N).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)}))}let q=0;const G=s.n.getLogger("esri.core.workers"),{ABORT:$,INVOKE:W,OPEN:H,OPENED:J,RESPONSE:Z}=p;class X{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),G.error(e)}))}static async create(e){const t=await async function(){if(!(0,s.c)("esri-workers"))return z(new N);if(!U&&!V)try{const e='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.replace('"{CONFIGURATION}"',`'${function(){let e;if(null!=s.d.default){const t={...s.d};delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(s.d));e.assetsPath=(0,o.T)(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=(0,l.i)(),e.has={"csp-restrictions":(0,s.c)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,s.c)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":(0,s.c)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":(0,s.c)("featurelayer-pbf"),"esri-atomics":(0,s.c)("esri-atomics"),"esri-shared-array-buffer":(0,s.c)("esri-shared-array-buffer"),"esri-tiles-debug":(0,s.c)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,s.c)("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=(0,o.T)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=(0,o.T)(e.workers.workerPath):e.workers.workerPath=(0,o.T)((0,a.a)("esri/core/workers/RemoteClient.js"));const t=s.d.workers.loaderConfig,r=R({baseUrl:null==t?void 0:t.baseUrl,locale:(0,l.i)(),has:{"csp-restrictions":(0,s.c)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1,...null==t?void 0:t.has},map:{...null==t?void 0:t.map},paths:{...null==t?void 0:t.paths},packages:(null==t?void 0:t.packages)||[]}),i={version:o.r,buildDate:u,revision:c};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:i})}()}'`);U=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){V=e||{}}let e;if(U)try{e=new Worker(U,{name:"esri-worker-"+q++})}catch(t){j.warn(B,V),e=new N}else j.warn(B,V),e=new N;return z(e)}();return new X(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:r}=t,s=f();return new Promise(((t,n)=>{const o={resolve:t,reject:n,abortHandle:(0,i.P)(r,(()=>{this._outJobs.delete(s),this._post({type:$,jobId:s})}))};this._outJobs.set(s,o),this._post({type:H,jobId:s,modulePath:e})}))}_onMessage(e){const t=v(e);if(t)switch(t.type){case J:this._onOpenedMessage(t);break;case Z:this._onResponseMessage(t);break;case $:this._onAbortMessage(t);break;case W:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,i=t.get(r);i&&(i.controller&&i.controller.abort(),t.delete(r))}_onInvokeMessage(e){const{methodName:t,jobId:r,data:s,abortable:n}=e,a=n?(0,i.h)():null,l=this._inJobs,u=o.s[t];let c;try{if("function"!=typeof u)throw new TypeError(`${t} is not a function`);c=u.call(null,s,{signal:a?a.signal:null})}catch(e){return void this._post({type:Z,jobId:r,error:m(e)})}(0,i.U)(c)?(l.set(r,{controller:a,promise:c}),c.then((e=>{l.has(r)&&(l.delete(r),this._post({type:Z,jobId:r},e))}),(e=>{l.has(r)&&(l.delete(r),e||(e={message:"Error encountered at method"+t}),(0,i.g)(e)||this._post({type:Z,jobId:r,error:m(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:Z,jobId:r},c)}_onOpenedMessage(e){var t;const{jobId:r,data:i}=e,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),null==(t=s.abortHandle)||t.remove(),s.resolve(i))}_onResponseMessage(e){var t;const{jobId:r,error:s,data:n}=e,o=this._outJobs.get(r);o&&(this._outJobs.delete(r),null==(t=o.abortHandle)||t.remove(),s?o.reject(i.s.fromJSON(JSON.parse(s))):o.resolve(n))}_post(e,t,r){return g(this.worker,e,t,r)}}let Y=(0,s.c)("esri-workers-debug")?1:(0,s.c)("host-browser")?navigator.hardwareConcurrency-1:0;Y||(Y=(0,s.c)("safari")&&(0,s.c)("mac")||(0,s.c)("trident")?7:2);let Q=0;const K=[];function ee(){ne()}function te(e,t){return re(e,{client:t})}async function re(e,t){const r=new A;return await r.open(e,t),r}async function ie(e,t={}){if("string"!=typeof e)throw new i.s("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if((0,s.c)("host-webworker")&&!(0,s.c)("esri-workers")&&(r="local"),"local"===r){let r=await I.loadWorker(e);r||(r=await import(e)),(0,i.a)(t.signal);const s=t.client||r;return re([I.connect(r)],{...t,client:s})}if(await ne(),(0,i.a)(t.signal),"dedicated"===r){const r=Q++%Y;return re([await K[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Y);if(r<Y){const i=new Array(r);for(let s=0;s<r;++s){const r=Q++%Y;i[s]=K[r].open(e,t)}return re(i,t)}}return re(K.map((r=>r.open(e,t))),t)}let se=null;async function ne(){if(se)return se;(0,i.h)();const e=[];for(let t=0;t<Y;t++){const r=X.create(t).then((e=>(K[t]=e,e)));e.push(r)}return se=Promise.all(e),se}},4807:(e,t,r)=>{"use strict";r.d(t,{y:()=>h});var i=r(20215),s=r(80219),n=r(88903);const o=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile"]),a=new Set(["csv","feature","geo-rss","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","tile","unknown","unsupported","vector-tile","web-tile","wfs"]);function l(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function u(e,t){if(t.restrictedWebMapWriting){const r=function(e){return"basemap"===e.layerContainerType?o:"operational-layers"===e.layerContainerType?a:null}(t);return!(0,s.r)(r)||r.has(e.type)&&!l(e)}return!0}function c(e,t){"maxScale"in e&&(t.maxScale=(0,n.F)(e.maxScale)),"minScale"in e&&(t.minScale=(0,n.F)(e.minScale))}function h(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new i.s("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(u(e,r)){const t={};return e.write(t,r)?t:null}return(0,s.r)(t)&&function(e,t){if(function(e,t){if(l(e)){const r=(0,s.j)("featureCollection.layers",t),i=r&&r[0]&&r[0].layerDefinition;i&&c(e,i)}else"stream"===e.type?c(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&c(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=(0,n.F)(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(l(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}(e,t=(0,s.y)(t)),t}},98843:(e,t,r)=>{"use strict";r.d(t,{l:()=>l,t:()=>o});var i=r(80219),s=r(65352),n=r(92858);function o(e,t,r){if((0,i.t)(t)||(0,i.t)(r)||r.vcsWkid||(0,n.d)(t,r))return null;const o=(0,s.T)(t)/(0,s.T)(r);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const r of e.paths)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const r of e.rings)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}(e,o);default:return null}}function a(e,t,r){if(null==e.hasM||e.hasZ)for(const e of t)for(const t of e)t.length>2&&(t[2]*=r)}function l(e,t,r){if(!e&&!t||!r)return;const i=(0,s.T)(r);u(e,r,i),u(t,r,i)}function u(e,t,r){if(e)for(const i of e)c(i.geometry,t,r)}function c(e,t,r){if(!e||!e.spatialReference||(0,n.d)(e.spatialReference,t))return;const i=(0,s.T)(e.spatialReference)/r;if(1!==i)if("x"in e)null!=e.z&&(e.z*=i);else if("rings"in e)a(e,e.rings,i);else if("paths"in e)a(e,e.paths,i);else if("points"in e&&(null==e.hasM||e.hasZ))for(const t of e.points)t.length>2&&(t[2]*=i)}},78900:(e,t,r)=>{"use strict";var i=r(55688),s=r(78155),n=(r(80219),r(88903)),o=r(20215),a=(r(15015),r(40130),r(80987),r(98548)),l=(r(20736),r(4169),r(92858)),u=(r(31531),r(31516),r(95629),r(9612),r(52109),r(6585),r(3621),r(63358),r(76326),r(4807),r(17762),r(60816),r(30316),r(29126),r(61888),r(18559),r(32769),r(83731),r(36845)),c=(r(42296),r(17331),r(41290)),h=(r(62121),r(58404)),p=r(25290);r(65352);const d={id:"0/0/0",level:0,row:0,col:0,extent:null};let y=class extends c.b{constructor(){super(...arguments),this.tileInfo=p.S.create({spatialReference:l.k.WebMercator,size:256}),this.fullExtent=new a.M(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,l.k.WebMercator),this.spatialReference=l.k.WebMercator,this.type="base-elevation"}getTileBounds(e,t,r,i){const s=i||h.K;return d.level=e,d.row=t,d.col=r,d.extent=s,this.tileInfo.updateTileInfo(d),d.extent=null,s}fetchTile(){throw new o.s("BaseElevationLayer:fetchtile-not-implemented","fetchTile() is not implemented")}queryElevation(e,t){return this._importElevationQuery().then((r=>(new r.ElevationQuery).query(this,e,t)))}createElevationSampler(e,t){return this._importElevationQuery().then((r=>(new r.ElevationQuery).createSampler(this,e,t)))}_importElevationQuery(){return r.e(201).then(r.bind(r,80201))}};(0,s.e)([(0,n.y)({type:p.S})],y.prototype,"tileInfo",void 0),(0,s.e)([(0,n.y)({type:["show","hide"]})],y.prototype,"listMode",void 0),(0,s.e)([(0,n.y)()],y.prototype,"fullExtent",void 0),(0,s.e)([(0,n.y)()],y.prototype,"spatialReference",void 0),(0,s.e)([(0,n.y)({readOnly:!0,value:"base-elevation"})],y.prototype,"type",void 0),y=(0,s.e)([(0,n.n)("esri.layers.BaseElevationLayer")],y);const f=y;var m=r(74869),g=(r(79506),r(82361),r(9947),r(28190),r(21779),r(97325),r(3629),r(54223),r(8725),r(29832),r(13895),r(91236),r(52957),r(4618),r(15576),r(49293),r(26779),r(16040)),v=(r(82906),r(34396),r(81135),r(94527)),b=(r(5250),r(49878),r(84271),r(48643),r(73574),r(89710),r(80657),r(94449),r(85289),r(98843),r(52737),r(47365),r(67079),r(98420),r(51218),r(21793),r(28941),r(19438),r(15022),r(56416),r(92758),r(78435));r(53902),r(40481),r(78730),r(2570),r(71666),r(72257),r(18143),r(41822),r(91790),r(99987);const w={type:"unique-value",field:"type",uniqueValueInfos:[{value:"A",symbol:_([255,0,0])},{value:"B",symbol:_([219,242,100])}]};function _(e){return new v.m({style:"solid",color:e,width:"4px"})}const x=new b.E({symbol:{type:"label-3d",symbolLayers:[{type:"text",material:{color:"white"},halo:{color:[0,0,0,.7],size:1},size:11}],verticalOffset:{screenLength:50,maxWorldLength:2e3,minWorldLength:30},callout:{type:"line",size:.5,color:[0,0,0],border:{color:[255,255,255,.7]}}},labelPlacement:"above-center",labelExpressionInfo:{expression:'\n  var fullText = $feature.name\n  console(fullText)\n  if(Find("to", fullText) > 0){\n      \n    var textArray1 = Split(fullText, "to ", 2)\n    var end = textArray1[1]\n    var textArray2 = Split(textArray1[0], "- ", 2)\n    var start = textArray2[0]\n    var middle = textArray2[1]\n    var newText = Concatenate ([start,TextFormatting.NewLine,middle, "to", TextFormatting.NewLine, end])\n  \n    return newText\n  } else {\n    return fullText\n  }\n  \n  '},maxScale:0,minScale:25e5}),S=new g.W({url:"https://services6.arcgis.com/ujpPLfH38KAX8unh/arcgis/rest/services/USA_Coast_To_Coast_Route/FeatureServer",renderer:w,elevationInfo:{mode:"relative-to-ground",offset:2,featureExpressionInfo:{expression:"0"},unit:"meters"},labelingInfo:[x]}),T=new g.W({url:"https://services6.arcgis.com/ujpPLfH38KAX8unh/arcgis/rest/services/USA_Coast_To_Coast_Route/FeatureServer",renderer:w});let M,E=new i.j({basemap:"satellite",layers:[S],ground:"world-elevation"});f.createSubclass({properties:{exaggeration:5},load:function(){return this._elevation=new m.default({url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}),this.addResolvingPromise(this._elevation.load().then((()=>{this.tileInfo=this._elevation.tileInfo,this.spatialReference=this._elevation.spatialReference,this.fullExtent=this._elevation.fullExtent}))),this},fetchTile:function(e,t,r,i){return this._elevation.fetchTile(e,t,r,i).then(function(e){const t=this.exaggeration;for(let r=0;r<e.values.length;r++)e.values[r]=e.values[r]*t;return e}.bind(this))}});var I=r(32422),O=(r(71391),r(71394),r(13564),r(95559),r(68631),r(56803),r(2903),r(85570),r(71470),r(80136),r(91507),r(29831),r(11838),r(39068),r(24776),r(95186),r(67726),r(59312),r(7571),r(93242),r(79679),r(71542),r(16063),r(43194),r(62654),r(15346),r(65311),r(72105),r(53185),r(60183),r(93875),r(14215),r(20868),r(72600),r(334),r(37762),r(92722),r(7552),r(78082),r(27270),r(37191),r(30665),r(28090),r(84796),r(87405),r(84320),r(93450),r(97431),r(32892),r(41374),r(86897),r(41392),r(79949),r(6660),r(6783),r(75200),r(29218),r(50822),r(30494),r(40849));r(34534),r(85774),r(93443),Object.defineProperty,Object.getOwnPropertyDescriptor;const A=new i.j({basemap:"osm",layers:[T]});let P=class extends O.W{constructor(e){super(e),this.companionScene=e.companionSceneView,this.ui.components=[]}async setUp(){function e(e){e.stopPropagation()}this.when((()=>{(0,u.d)(this.companionScene,"extent",(e=>{this.scale=4*this.companionScene.scale*Math.max(this.companionScene.width/this.companionScene.width,this.companionScene.height/this.companionScene.height),this.center=this.companionScene.center}))})),this.popup.dockEnabled=!0,this.on("mouse-wheel",e),this.on("double-click",e),this.on("double-click",["Control"],e),this.on("drag",e),this.on("drag",["Shift"],e),this.on("drag",["Shift","Control"],e),this.on("key-down",(function(e){const t=e.key;-1!==["+","-","Shift","_","=","ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].indexOf(t)&&e.stopPropagation()}))}};P=((e,t,r,i)=>{for(var s,n=t,o=e.length-1;o>=0;o--)(s=e[o])&&(n=s(n)||n);return n})([(0,n.n)("map.overview")],P);let R=new I.aQ({map:E,container:"viewDiv",extent:{xmin:-126.902,ymin:23.848,xmax:-65.73,ymax:50.15}}),F=new P({map:A,container:"overviewDiv",constraints:{rotationEnabled:!1},extent:{xmin:-126.902,ymin:23.848,xmax:-65.73,ymax:50.15},companionSceneView:R});R.when((()=>{var e;(e=R).when((async()=>{let t=await e.whenLayerView(S);e.on("pointer-move",(async r=>{const{results:i}=await e.hitTest(r);if(i&&i.length>0){const{graphic:e}=i.find((e=>e.graphic.attributes.OBJECTID));M&&M.remove(),M=t.highlight(e)}else M&&M.remove()})),e.on("click",(async t=>{const{results:r}=await e.hitTest(t);if(r&&r.length>0){const{graphic:t}=r.find((e=>e.graphic.attributes.OBJECTID));e.goTo(t)}}))})),F.setUp()}))}},e=>{"use strict";e.O(0,[8467,2492,8167,1617,3807],(()=>(78900,e(e.s=78900)))),e.O()}]);